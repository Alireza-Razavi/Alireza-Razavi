# Report

Audit report for **2024-02-ai-arena** generated by *ubl4nk_bot*.

## Medium Issues


*Total <b>7</b> instances over <b>2</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [M-1](#M-1) | Return values of `transfer()`/`transferFrom()` not checked | 1 |
| [M-2](#M-2) | `transfer`/`transferFrom` may never return `true` for some tokens | 6 |

## Low Issues


*Total <b>233</b> instances over <b>24</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [L-1](#L-1) | Missing zero address check in functions with address parameters | 38 |
| [L-2](#L-2) | Array is `push()`ed but not `pop()`ed | 2 |
| [L-3](#L-3) | Consider implementing two-step procedure for updating protocol addresses | 16 |
| [L-4](#L-4) | Constructor / initialization function lacks parameter validation | 8 |
| [L-5](#L-5) | Code does not follow the best practice of check-effects-interaction | 37 |
| [L-6](#L-6) | External function calls within loops | 5 |
| [L-7](#L-7) | Functions calling contracts/addresses with transfer hooks are missing reentrancy guards | 7 |
| [L-8](#L-8) | Missing checks for state variable assignments | 36 |
| [L-9](#L-9) | Missing limits when setting min/max amounts | 3 |
| [L-10](#L-10) | Missing zero address check in constructor | 7 |
| [L-11](#L-11) | Consider some checks for `address(0)` when setting address state variables | 24 |
| [L-12](#L-12) | NFT doesn't handle hard forks | 1 |
| [L-13](#L-13) | Solidity version 0.8.20 or above may not work on other chains due to PUSH0 | 8 |
| [L-14](#L-14) | Some functions do not work correctly with fee-on-transfer tokens | 7 |
| [L-15](#L-15) | Some tokens may revert when large transfers are made | 7 |
| [L-16](#L-16) | Some tokens may revert when zero value transfers are made | 7 |
| [L-17](#L-17) | Tokens may be minted to `address(0)` | 1 |
| [L-18](#L-18) | Unsafe downcast | 2 |
| [L-19](#L-19) | Consider using `ERC721A` instead of `ERC721` | 1 |
| [L-20](#L-20) | Using zero as a parameter | 3 |
| [L-21](#L-21) | Vulnerable version of OZ contarcts is used (`4.7.3`) | 1 |
| [L-22](#L-22) | Do not use deprecated library functions | 3 |
| [L-23](#L-23) | `tokenURI()` does not follow EIP-721 | 1 |
| [L-24](#L-24) | Unspecific compiler version pragma | 8 |

## Non Critical Issues


*Total <b>927</b> instances over <b>66</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [NC-1](#NC-1) | Avoid mutating function parameters | 1 |
| [NC-2](#NC-2) | Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, for readability | 8 |
| [NC-3](#NC-3) | Consider adding a block/deny-list | 8 |
| [NC-4](#NC-4) | Consider adding emergency-stop functionality | 8 |
| [NC-5](#NC-5) | Consider adding formal verification proofs | 1 |
| [NC-6](#NC-6) | Consider using `AccessControlDefaultAdminRules` rather than `AccessControl` | 1 |
| [NC-7](#NC-7) | Consider using descriptive `constant`s when passing zero as a function argument | 6 |
| [NC-8](#NC-8) | Constants should be put on the left side of comparisons | 6 |
| [NC-9](#NC-9) | `Constructor` should emit an event | 8 |
| [NC-10](#NC-10) | Contract does not follow the Solidity Style Guide's suggested layout ordering | 92 |
| [NC-11](#NC-11) | Contract should expose an `interface` | 89 |
| [NC-12](#NC-12) | Contracts should have full test coverage | 1 |
| [NC-13](#NC-13) | Events that mark critical parameter changes should contain both the old and the new value | 18 |
| [NC-14](#NC-14) | Custom errors should be used rather than `revert()`/`require()` | 17 |
| [NC-15](#NC-15) | Do not use underscore at the end of variable name | 9 |
| [NC-16](#NC-16) | Duplicated `require()`/`revert()` checks should be refactored | 21 |
| [NC-17](#NC-17) | `else` block not required | 1 |
| [NC-18](#NC-18) | Empty bytes check is missing | 2 |
| [NC-19](#NC-19) | Enable IR-based code generation | 1 |
| [NC-20](#NC-20) | Enum values should be used instead of constant array indexes | 23 |
| [NC-21](#NC-21) | Events are emitted without the sender information | 3 |
| [NC-22](#NC-22) | Events may be emitted out of order due to reentrancy | 9 |
| [NC-23](#NC-23) | Functions with array parameters should have length checks in place | 5 |
| [NC-24](#NC-24) | High cyclomatic complexity | 1 |
| [NC-25](#NC-25) | Import declarations should import specific identifiers, rather than the whole file | 5 |
| [NC-26](#NC-26) | Imports should use double quotes rather than single quotes | 1 |
| [NC-27](#NC-27) | Inconsistent spacing in comments | 54 |
| [NC-28](#NC-28) | It is best practice to use linear inheritance | 2 |
| [NC-29](#NC-29) | Large or complicated code bases should implement invariant tests | 1 |
| [NC-30](#NC-30) | Large numeric literals should use underscores for readability | 2 |
| [NC-31](#NC-31) | Long functions should be refactored into multiple, smaller, functions | 1 |
| [NC-32](#NC-32) | Magic numbers should be replaced with constants | 45 |
| [NC-33](#NC-33) | Missing disallow list for `ERC721` | 1 |
| [NC-34](#NC-34) | Consider moving `msg.sender` checks to `modifier`s | 62 |
| [NC-35](#NC-35) | Named mappings are recommended | 39 |
| [NC-36](#NC-36) | Named imports of parent contracts are missing | 3 |
| [NC-37](#NC-37) | Missing NatSpec `@dev` from contract/event/function/modifier declarations | 60 |
| [NC-38](#NC-38) | Missing NatSpec `@notice` from contract/event/function/modifier declarations | 3 |
| [NC-39](#NC-39) | Missing NatSpec `@param` from event/function/modifier declarations | 18 |
| [NC-40](#NC-40) | Missing NatSpec `@return` from function declaration | 3 |
| [NC-41](#NC-41) | There is no need to initialize variables with 0 | 26 |
| [NC-42](#NC-42) | Off-by-one timestamp error | 5 |
| [NC-43](#NC-43) | Put all system-wide constants in one file | 8 |
| [NC-44](#NC-44) | Redundant `return` statement in a function with named return variables | 1 |
| [NC-45](#NC-45) | Setters should prevent re-setting the same value | 9 |
| [NC-46](#NC-46) | State variables should include comments | 3 |
| [NC-47](#NC-47) | Typos | 1 |
| [NC-48](#NC-48) | Unused `event` definition | 1 |
| [NC-49](#NC-49) | Consider using `delete` rather than assigning zero/false to clear values | 1 |
| [NC-50](#NC-50) | Solidity compiler version is not fixed | 8 |
| [NC-51](#NC-51) | Expressions for constant values should use `immutable` rather than `constant` | 8 |
| [NC-52](#NC-52) | Use `@inheritdoc` for overridden functions | 1 |
| [NC-53](#NC-53) | Upgrade `openzeppelin` to the latest version (`5.0.1`) | 1 |
| [NC-54](#NC-54) | Use the latest solidity version for deployment (`0.8.24`) | 8 |
| [NC-55](#NC-55) | Use the Modern Upgradeable Contract Paradigm | 8 |
| [NC-56](#NC-56) | Consider using modifiers for address control | 44 |
| [NC-57](#NC-57) | Use of `override` is unnecessary | 1 |
| [NC-58](#NC-58) | Use scientific notation (e.g. `1e18`) rather than exponentiation (e.g. `10**18`) | 11 |
| [NC-59](#NC-59) | Returning a struct instead of a bunch of variables is better | 1 |
| [NC-60](#NC-60) | Use a struct to encapsulate multiple function parameters | 2 |
| [NC-61](#NC-61) | Visibility of state variables is not explicitly defined | 15 |
| [NC-62](#NC-62) | Common functions should be refactored to a common base contract | 14 |
| [NC-63](#NC-63) | Internal function calls within for loops | 3 |
| [NC-64](#NC-64) |  `require()` / `revert()` statements should have descriptive reason strings | 67 |
| [NC-65](#NC-65) | Event is missing `indexed` fields | 16 |
| [NC-66](#NC-66) | Functions not used internally could be marked `external` | 25 |

## Gas Optimizations


*Total <b>620</b> instances over <b>48</b> issues:*

|ID|Issue|Instances|Gas|
|-|:-|:-:|:-:|
| [GAS-1](#GAS-1) | Assigning to structs can be more efficient | 1 | 6 |
| [GAS-2](#GAS-2) | Optimize gas by using do-while loops | 17 | 4335 |
| [GAS-3](#GAS-3) | Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, where appropriate | 8 | - |
| [GAS-4](#GAS-4) | Consider activating via-ir for deploying | 1 | - |
| [GAS-5](#GAS-5) | Counting down in for statements is more gas efficient | 14 | - |
| [GAS-6](#GAS-6) | Divisions can be `unchecked` to save gas | 6 | 120 |
| [GAS-7](#GAS-7) | Do not calculate constants | 3 | - |
| [GAS-8](#GAS-8) | Don't transfer with zero amount to save gas | 4 | - |
| [GAS-9](#GAS-9) | Operator `+=` costs more gas than `<x> = <x> + <y>` for state variables | 9 | 1017 |
| [GAS-10](#GAS-10) | Duplicated `require()`/`revert()` checks should be refactored to a modifier or function to save gas | 21 | - |
| [GAS-11](#GAS-11) | Increments can be `unchecked` to save gas | 14 | 840 |
| [GAS-12](#GAS-12) | `keccak256()` hash of literals should only be computed once | 3 | 126 |
| [GAS-13](#GAS-13) | Multiple accesses of the same mapping/array key/index should be cached | 50 | 2100 |
| [GAS-14](#GAS-14) | Operator `>=`/`<=` costs less gas than operator `>`/`<` | 33 | 99 |
| [GAS-15](#GAS-15) | Optimize names to save gas | 8 | 176 |
| [GAS-16](#GAS-16) | `require()`/`revert()` strings longer than 32 bytes cost extra gas | 13 | 39 |
| [GAS-17](#GAS-17) | There are comparisons to boolean literals (true and false), these can be simplified to save gas | 4 | 72 |
| [GAS-18](#GAS-18) | State variables access within a loop | 6 | 1590 |
| [GAS-19](#GAS-19) | State variables only set in the constructor should be declared immutable | 12 | 240000 |
| [GAS-20](#GAS-20) | Use smaller sizes for struct variables if possible | 1 | 2500 |
| [GAS-21](#GAS-21) | Optimize external calls with assembly for memory efficiency | 17 | 3740 |
| [GAS-22](#GAS-22) | Use assembly to compute hashes to save gas | 8 | 640 |
| [GAS-23](#GAS-23) | Use assembly to emit events | 18 | 684 |
| [GAS-24](#GAS-24) | Use assembly to validate `msg.sender` | 44 | - |
| [GAS-25](#GAS-25) | Use assembly to write address/contract type storage values | 37 | 1850 |
| [GAS-26](#GAS-26) | Use byte32 in place of string | 2 | - |
| [GAS-27](#GAS-27) | Using a double `if` statement instead of a logical AND (`&&`) | 10 | 300 |
| [GAS-28](#GAS-28) | Consider using OZ EnumerateSet in place of nested mappings | 9 | 9000 |
| [GAS-29](#GAS-29) | Use local variables for emitting | 3 | 291 |
| [GAS-30](#GAS-30) | Use a more recent version of solidity | 8 | - |
| [GAS-31](#GAS-31) | Use != 0 instead of > 0 | 11 | 33 |
| [GAS-32](#GAS-32) | Consider Using Solady's Gas Optimized Lib for Math | 9 | - |
| [GAS-33](#GAS-33) | Use solady library where possible to save gas | 1 | 1000 |
| [GAS-34](#GAS-34) | Use `storage` instead of `memory` for structs/arrays | 1 | 4200 |
| [GAS-35](#GAS-35) | Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes | 12 | 102600 |
| [GAS-36](#GAS-36) | Using bitmap to store bool states can save gas | 12 | - |
| [GAS-37](#GAS-37) | `abi.encodePacked` is more gas efficient than `abi.encode` | 5 | - |
| [GAS-38](#GAS-38) | Using bools for storage incurs overhead | 12 | 1200 |
| [GAS-39](#GAS-39) | Cache array length outside of loop | 1 | - |
| [GAS-40](#GAS-40) | State variables should be cached in stack variables rather than re-reading them from storage | 19 | 1843 |
| [GAS-41](#GAS-41) | Use `calldata` instead of `memory` for function arguments that do not get mutated | 9 | - |
| [GAS-42](#GAS-42) | Use Custom Errors | 17 | 850 |
| [GAS-43](#GAS-43) | Don't initialize variables with default value | 26 | - |
| [GAS-44](#GAS-44) | Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead | 75 | 4125 |
| [GAS-45](#GAS-45) | Constructors can be marked as `payable` to save deployment gas | 3 | 63 |
| [GAS-46](#GAS-46) | `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too) | 14 | 70 |
| [GAS-47](#GAS-47) | Using `private` rather than `public` for constants, saves gas | 8 | - |
| [GAS-48](#GAS-48) | Splitting require() statements that use && saves gas | 1 | - |

## Medium Issues

<a name="M-1"></a> 
### [M-1] Return values of `transfer()`/`transferFrom()` not checked
Not all ERC20 implementations `revert()` when there's a failure in `transfer()` or `transferFrom()`. The function signature has a boolean return value and they indicate errors that way instead. By not checking the return value, operations that should have marked as failed, may potentially go through without actually transfer anything.

*There is one instance of this issue:*
```solidity
File: src/StakeAtRisk.sol

143:         return _neuronInstance.transfer(treasuryAddress, totalStakeAtRisk[roundId]);

```
*Github:* [[143](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L143)]



<a name="M-2"></a> 
### [M-2] `transfer`/`transferFrom` may never return `true` for some tokens
Some tokens do not return a bool (e.g. USDT, OMG) on transfer. As there are some conditions that rely on this `bool` value, these tokens may cause issues, as the return value of the following conditions will always be `false`.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

376:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, rerollCost);

```
*Github:* [[376](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L376)]


```solidity
File: src/GameItems.sol

164:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, price);

```
*Github:* [[164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L164)]


```solidity
File: src/RankedBattle.sol

251:         bool success = _neuronInstance.transferFrom(msg.sender, address(this), amount);

283:         bool success = _neuronInstance.transfer(msg.sender, amount);

493:                 bool success = _neuronInstance.transfer(_stakeAtRiskAddress, curStakeAtRisk);

```
*Github:* [[251](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L251), [283](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L283), [493](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L493)]


```solidity
File: src/StakeAtRisk.sol

100:         bool success = _neuronInstance.transfer(_rankedBattleAddress, nrnToReclaim);

```
*Github:* [[100](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L100)]




## Low Issues

<a name="L-1"></a> 
### [L-1] Missing zero address check in functions with address parameters
Adding a zero address check for each address type parameter can prevent errors.

<details>
<summary>
There are <b>38</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit missing zero check for `newOwnerAddress`
61:     function transferOwnership(address newOwnerAddress) external {

```
*Github:* [[61](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L61)]


```solidity
File: src/FighterFarm.sol

/// @audit missing zero check for `newOwnerAddress`
120:     function transferOwnership(address newOwnerAddress) external {

/// @audit missing zero check for `newStaker`
139:     function addStaker(address newStaker) external {

/// @audit missing zero check for `mergingPoolAddress`
171:     function setMergingPoolAddress(address mergingPoolAddress) external {

/// @audit missing zero check for `to`
313:     function mintFromMergingPool(
             address to, 
             string calldata modelHash, 
             string calldata modelType, 
             uint256[2] calldata customAttributes
         ) 
             public 
         {

/// @audit missing zero check for `from`
/// @audit missing zero check for `to`
338:     function transferFrom(
             address from, 
             address to, 
             uint256 tokenId
         ) 
             public 
             override(ERC721, IERC721)
         {

/// @audit missing zero check for `from`
/// @audit missing zero check for `to`
355:     function safeTransferFrom(
             address from, 
             address to, 
             uint256 tokenId
         ) 
             public 
             override(ERC721, IERC721)
         {

/// @audit missing zero check for `from`
/// @audit missing zero check for `to`
447:     function _beforeTokenTransfer(address from, address to, uint256 tokenId)
             internal
             override(ERC721, ERC721Enumerable)
         {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L120), [139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L139), [171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L171), [313](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L313), [338](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L338), [355](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L355), [447](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L447)]


```solidity
File: src/GameItems.sol

/// @audit missing zero check for `newOwnerAddress`
108:     function transferOwnership(address newOwnerAddress) external {

/// @audit missing zero check for `adminAddress`
117:     function adjustAdminAccess(address adminAddress, bool access) external {

/// @audit missing zero check for `newBurningAddress`
185:     function setAllowedBurningAddresses(address newBurningAddress) public {

/// @audit missing zero check for `account`
242:     function burn(address account, uint256 tokenId, uint256 amount) public {

/// @audit missing zero check for `owner`
268:     function getAllowanceRemaining(address owner, uint256 tokenId) public view returns (uint256) {

/// @audit missing zero check for `from`
/// @audit missing zero check for `to`
291:     function safeTransferFrom(
             address from, 
             address to, 
             uint256 tokenId,
             uint256 amount,
             bytes memory data
         ) 
             public 
             override(ERC1155)
         {

```
*Github:* [[108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L108), [117](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L117), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L185), [242](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L242), [268](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L268), [291](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L291)]


```solidity
File: src/MergingPool.sol

/// @audit missing zero check for `newOwnerAddress`
89:     function transferOwnership(address newOwnerAddress) external {

/// @audit missing zero check for `adminAddress`
98:     function adjustAdminAccess(address adminAddress, bool access) external {

/// @audit missing zero check for `claimer`
172:     function getUnclaimedRewards(address claimer) external view returns(uint256) {

```
*Github:* [[89](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L89), [98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L98), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L172)]


```solidity
File: src/Neuron.sol

/// @audit missing zero check for `newOwnerAddress`
85:     function transferOwnership(address newOwnerAddress) external {

/// @audit missing zero check for `newMinterAddress`
93:     function addMinter(address newMinterAddress) external {

/// @audit missing zero check for `newStakerAddress`
101:     function addStaker(address newStakerAddress) external {

/// @audit missing zero check for `newSpenderAddress`
109:     function addSpender(address newSpenderAddress) external {

/// @audit missing zero check for `adminAddress`
118:     function adjustAdminAccess(address adminAddress, bool access) external {

/// @audit missing zero check for `to`
155:     function mint(address to, uint256 amount) public virtual {

/// @audit missing zero check for `account`
171:     function approveSpender(address account, uint256 amount) public {

/// @audit missing zero check for `owner`
/// @audit missing zero check for `spender`
184:     function approveStaker(address owner, address spender, uint256 amount) public {

/// @audit missing zero check for `account`
196:     function burnFrom(address account, uint256 amount) public virtual {

```
*Github:* [[85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L85), [93](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L93), [101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L101), [109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L109), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L118), [155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L155), [171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L171), [184](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L184), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L196)]


```solidity
File: src/RankedBattle.sol

/// @audit missing zero check for `newOwnerAddress`
167:     function transferOwnership(address newOwnerAddress) external {

/// @audit missing zero check for `adminAddress`
176:     function adjustAdminAccess(address adminAddress, bool access) external {

/// @audit missing zero check for `gameServerAddress`
184:     function setGameServerAddress(address gameServerAddress) external {

/// @audit missing zero check for `stakeAtRiskAddress`
192:     function setStakeAtRiskAddress(address stakeAtRiskAddress) external {

/// @audit missing zero check for `claimer`
386:     function getUnclaimedNRN(address claimer) public view returns(uint256) {

/// @audit missing zero check for `fighterOwner`
416:     function _addResultPoints(
             uint8 battleResult, 
             uint256 tokenId, 
             uint256 eloFactor, 
             uint256 mergingPortion,
             address fighterOwner
         ) 
             private 
         {

```
*Github:* [[167](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L167), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L176), [184](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L184), [192](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L192), [386](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L386), [416](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L416)]


```solidity
File: src/StakeAtRisk.sol

/// @audit missing zero check for `fighterOwner`
93:     function reclaimNRN(uint256 nrnToReclaim, uint256 fighterId, address fighterOwner) external {

/// @audit missing zero check for `fighterOwner`
115:     function updateAtRiskRecords(
             uint256 nrnToPlaceAtRisk, 
             uint256 fighterId, 
             address fighterOwner
         ) 
             external 
         {

```
*Github:* [[93](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L93), [115](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L115)]


```solidity
File: src/VoltageManager.sol

/// @audit missing zero check for `newOwnerAddress`
64:     function transferOwnership(address newOwnerAddress) external {

/// @audit missing zero check for `adminAddress`
73:     function adjustAdminAccess(address adminAddress, bool access) external {

/// @audit missing zero check for `allowedVoltageSpender`
82:     function adjustAllowedVoltageSpenders(address allowedVoltageSpender, bool allowed) external {

/// @audit missing zero check for `owner`
117:     function _replenishVoltage(address owner) private {

```
*Github:* [[64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L64), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L73), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L82), [117](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L117)]


</details>


<a name="L-2"></a> 
### [L-2] Array is `push()`ed but not `pop()`ed
There is no limit specified on the amount of gas used, so the recipient can use up all of the remaining gas (`gasleft()`), causing it to revert. Therefore, when calling an external contract, it is necessary to specify a limited amount of gas to forward.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

516:         fighters.push(

```
*Github:* [[516](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L516)]


```solidity
File: src/GameItems.sol

220:         allGameItemAttributes.push(

```
*Github:* [[220](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L220)]



<a name="L-3"></a> 
### [L-3] Consider implementing two-step procedure for updating protocol addresses
A copy-paste error or a typo may end up bricking protocol functionality, or sending tokens to an address with no known private key. Consider implementing a two-step procedure for updating protocol addresses, where the recipient is set as pending, and must "accept" the assignment by making an affirmative call. A straight forward way of doing this would be to have the target contracts implement [EIP-165](https://eips.ethereum.org/EIPS/eip-165), and to have the "set" functions ensure that the recipient is of the right interface type.

<details>
<summary>
There are <b>16</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit `_ownerAddress`
61:     function transferOwnership(address newOwnerAddress) external {

```
*Github:* [[61](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L61)]


```solidity
File: src/FighterFarm.sol

/// @audit `_ownerAddress`
120:     function transferOwnership(address newOwnerAddress) external {

/// @audit `_aiArenaHelperInstance`
147:     function instantiateAIArenaHelperContract(address aiArenaHelperAddress) external {

/// @audit `_mintpassInstance`
155:     function instantiateMintpassContract(address mintpassAddress) external {

/// @audit `_neuronInstance`
163:     function instantiateNeuronContract(address neuronAddress) external {

/// @audit `_mergingPoolAddress`
171:     function setMergingPoolAddress(address mergingPoolAddress) external {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L120), [147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L147), [155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L155), [163](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L163), [171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L171)]


```solidity
File: src/GameItems.sol

/// @audit `_ownerAddress`
108:     function transferOwnership(address newOwnerAddress) external {

/// @audit `_neuronInstance`
139:     function instantiateNeuronContract(address nrnAddress) external {

```
*Github:* [[108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L108), [139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L139)]


```solidity
File: src/MergingPool.sol

/// @audit `_ownerAddress`
89:     function transferOwnership(address newOwnerAddress) external {

```
*Github:* [[89](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L89)]


```solidity
File: src/Neuron.sol

/// @audit `_ownerAddress`
85:     function transferOwnership(address newOwnerAddress) external {

```
*Github:* [[85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L85)]


```solidity
File: src/RankedBattle.sol

/// @audit `_ownerAddress`
167:     function transferOwnership(address newOwnerAddress) external {

/// @audit `_gameServerAddress`
184:     function setGameServerAddress(address gameServerAddress) external {

/// @audit `_stakeAtRiskAddress`
/// @audit `_stakeAtRiskInstance`
192:     function setStakeAtRiskAddress(address stakeAtRiskAddress) external {

/// @audit `_neuronInstance`
201:     function instantiateNeuronContract(address nrnAddress) external {

/// @audit `_mergingPoolInstance`
209:     function instantiateMergingPoolContract(address mergingPoolAddress) external {

```
*Github:* [[167](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L167), [184](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L184), [192](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L192), [201](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L201), [209](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L209)]


```solidity
File: src/VoltageManager.sol

/// @audit `_ownerAddress`
64:     function transferOwnership(address newOwnerAddress) external {

```
*Github:* [[64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L64)]


</details>


<a name="L-4"></a> 
### [L-4] Constructor / initialization function lacks parameter validation
Constructors and initialization functions play a critical role in contracts by setting important initial states when the contract is first deployed before the system starts. The parameters passed to the constructor and initialization functions directly affect the behavior of the contract / protocol. If incorrect parameters are provided, the system may fail to run, behave abnormally, be unstable, or lack security. Therefore, it's crucial to carefully check each parameter in the constructor and initialization functions. If an exception is found, the transaction should be rolled back.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

/// @audit `probabilities` not validated
41:     constructor(uint8[][] memory probabilities) {

```
*Github:* [[41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L41)]


```solidity
File: src/FighterFarm.sol

/// @audit `ownerAddress` not validated
/// @audit `delegatedAddress` not validated
/// @audit `treasuryAddress_` not validated
104:     constructor(address ownerAddress, address delegatedAddress, address treasuryAddress_)

```
*Github:* [[104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L104)]


```solidity
File: src/GameItems.sol

/// @audit `ownerAddress` not validated
/// @audit `treasuryAddress_` not validated
95:     constructor(address ownerAddress, address treasuryAddress_) ERC1155("https://ipfs.io/ipfs/") {

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L95)]


```solidity
File: src/MergingPool.sol

/// @audit `ownerAddress` not validated
/// @audit `rankedBattleAddress` not validated
71:     constructor(

```
*Github:* [[71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L71)]


```solidity
File: src/Neuron.sol

/// @audit `ownerAddress` not validated
/// @audit `treasuryAddress_` not validated
/// @audit `contributorAddress` not validated
68:     constructor(address ownerAddress, address treasuryAddress_, address contributorAddress)

```
*Github:* [[68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L68)]


```solidity
File: src/RankedBattle.sol

/// @audit `ownerAddress` not validated
/// @audit `gameServerAddress` not validated
146:     constructor(

```
*Github:* [[146](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L146)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `treasuryAddress_` not validated
/// @audit `rankedBattleAddress` not validated
60:     constructor(

```
*Github:* [[60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L60)]


```solidity
File: src/VoltageManager.sol

/// @audit `ownerAddress` not validated
51:     constructor(address ownerAddress, address gameItemsContractAddress) {

```
*Github:* [[51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L51)]



<a name="L-5"></a> 
### [L-5] Code does not follow the best practice of check-effects-interaction
Code should follow the best-practice of [check-effects-interaction](https://blockchain-academy.hs-mittweida.de/courses/solidity-coding-beginners-to-intermediate/lessons/solidity-11-coding-patterns/topic/checks-effects-interactions/), where state variables are updated before any external calls are made. Doing so prevents a large class of reentrancy bugs.

<details>
<summary>
There are <b>37</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

/// @audit `.balanceOf(...)` is called on line 373
/// @audit `.approveSpender(...)` is called on line 375
/// @audit `.transferFrom(...)` is called on line 376
378:             numRerolls[tokenId] += 1;

/// @audit `.balanceOf(...)` is called on line 373
/// @audit `.approveSpender(...)` is called on line 375
/// @audit `.transferFrom(...)` is called on line 376
381:             fighters[tokenId].element = element;

/// @audit `.balanceOf(...)` is called on line 373
/// @audit `.approveSpender(...)` is called on line 375
/// @audit `.transferFrom(...)` is called on line 376
382:             fighters[tokenId].weight = weight;

/// @audit `.balanceOf(...)` is called on line 373
/// @audit `.approveSpender(...)` is called on line 375
/// @audit `.transferFrom(...)` is called on line 376
383:             fighters[tokenId].physicalAttributes = _aiArenaHelperInstance.createPhysicalAttributes(

/// @audit `.balanceOf(...)` is called on line 373
/// @audit `.approveSpender(...)` is called on line 375
/// @audit `.transferFrom(...)` is called on line 376
/// @audit `.createPhysicalAttributes(...)` is called on line 383
389:             _tokenURIs[tokenId] = "";

```
*Github:* [[378](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L378), [381](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L381), [382](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L382), [383](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L383), [389](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L389)]


```solidity
File: src/GameItems.sol

/// @audit `.balanceOf(...)` is called on line 150
/// @audit `.approveSpender(...)` is called on line 163
/// @audit `.transferFrom(...)` is called on line 164
169:             allowanceRemaining[msg.sender][tokenId] -= quantity;

/// @audit `.balanceOf(...)` is called on line 150
/// @audit `.approveSpender(...)` is called on line 163
/// @audit `.transferFrom(...)` is called on line 164
171:                 allGameItemAttributes[tokenId].itemsRemaining -= quantity;

```
*Github:* [[169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L169), [171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L171)]


```solidity
File: src/MergingPool.sol

/// @audit `.ownerOf(...)` is called on line 125
126:             totalPoints -= fighterPoints[winners[i]];

/// @audit `.ownerOf(...)` is called on line 125
127:             fighterPoints[winners[i]] = 0;

/// @audit `.ownerOf(...)` is called on line 125
129:         winnerAddresses[roundId] = currentWinnerAddresses;

/// @audit `.ownerOf(...)` is called on line 125
130:         isSelectionComplete[roundId] = true;

/// @audit `.ownerOf(...)` is called on line 125
131:         roundId += 1;

```
*Github:* [[126](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L126), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L127), [129](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L129), [130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L130), [131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L131)]


```solidity
File: src/RankedBattle.sol

/// @audit `.setNewRound(...)` is called on line 237
238:         rankedNrnDistribution[roundId] = rankedNrnDistribution[roundId - 1];

/// @audit `.ownerOf(...)` is called on line 246
/// @audit `.balanceOf(...)` is called on line 247
/// @audit `.approveStaker(...)` is called on line 250
/// @audit `.transferFrom(...)` is called on line 251
/// @audit `.updateFighterStaking(...)` is called on line 254
256:             amountStaked[tokenId] += amount;

/// @audit `.ownerOf(...)` is called on line 246
/// @audit `.balanceOf(...)` is called on line 247
/// @audit `.approveStaker(...)` is called on line 250
/// @audit `.transferFrom(...)` is called on line 251
/// @audit `.updateFighterStaking(...)` is called on line 254
257:             globalStakedAmount += amount;

/// @audit `.ownerOf(...)` is called on line 246
/// @audit `.balanceOf(...)` is called on line 247
/// @audit `.approveStaker(...)` is called on line 250
/// @audit `.transferFrom(...)` is called on line 251
/// @audit `.updateFighterStaking(...)` is called on line 254
258:             stakingFactor[tokenId] = _getStakingFactor(

/// @audit `.ownerOf(...)` is called on line 246
/// @audit `.balanceOf(...)` is called on line 247
/// @audit `.approveStaker(...)` is called on line 250
/// @audit `.transferFrom(...)` is called on line 251
/// @audit `.updateFighterStaking(...)` is called on line 254
/// @audit `.getStakeAtRisk(...)` is called on line 260
262:             _calculatedStakingFactor[tokenId][roundId] = true;

/// @audit `.ownerOf(...)` is called on line 271
275:         amountStaked[tokenId] -= amount;

/// @audit `.ownerOf(...)` is called on line 271
276:         globalStakedAmount -= amount;

/// @audit `.ownerOf(...)` is called on line 271
277:         stakingFactor[tokenId] = _getStakingFactor(

/// @audit `.ownerOf(...)` is called on line 271
/// @audit `.getStakeAtRisk(...)` is called on line 279
281:         _calculatedStakingFactor[tokenId][roundId] = true;

/// @audit `.ownerOf(...)` is called on line 271
/// @audit `.getStakeAtRisk(...)` is called on line 279
282:         hasUnstaked[tokenId][roundId] = true;

/// @audit `.ownerOf(...)` is called on line 333
/// @audit `.ownerVoltageReplenishTime(...)` is called on line 336
/// @audit `.ownerVoltage(...)` is called on line 337
/// @audit `.getStakeAtRisk(...)` is called on line 341
/// @audit `.spendVoltage(...)` is called on line 346
348:         totalBattles += 1;

/// @audit `.getStakeAtRisk(...)` is called on line 430
434:             stakingFactor[tokenId] = _getStakingFactor(tokenId, stakeAtRisk);

/// @audit `.getStakeAtRisk(...)` is called on line 430
435:             _calculatedStakingFactor[tokenId][roundId] = true;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
462:                 amountStaked[tokenId] += curStakeAtRisk;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
466:             accumulatedPointsPerFighter[tokenId][roundId] += points;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
467:             accumulatedPointsPerAddress[fighterOwner][roundId] += points;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
468:             totalAccumulatedPoints[roundId] += points;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
485:                 accumulatedPointsPerFighter[tokenId][roundId] -= points;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
486:                 accumulatedPointsPerAddress[fighterOwner][roundId] -= points;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
487:                 totalAccumulatedPoints[roundId] -= points;

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.transfer(...)` is called on line 493
/// @audit `.updateAtRiskRecords(...)` is called on line 495
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
496:                     amountStaked[tokenId] -= curStakeAtRisk;

```
*Github:* [[238](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L238), [256](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L256), [257](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L257), [258](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L258), [262](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L262), [275](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L275), [276](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L276), [277](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L277), [281](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L281), [282](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L282), [348](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L348), [434](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L434), [435](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L435), [462](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L462), [466](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L466), [467](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L467), [468](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L468), [485](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L485), [486](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L486), [487](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L487), [496](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L496)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `.transfer(...)` is called on line 100
102:             stakeAtRisk[roundId][fighterId] -= nrnToReclaim;

/// @audit `.transfer(...)` is called on line 100
103:             totalStakeAtRisk[roundId] -= nrnToReclaim;

/// @audit `.transfer(...)` is called on line 100
104:             amountLost[fighterOwner] -= nrnToReclaim;

```
*Github:* [[102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L102), [103](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L103), [104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L104)]


```solidity
File: src/VoltageManager.sol

/// @audit `.balanceOf(...)` is called on line 95
/// @audit `.burn(...)` is called on line 96
97:         ownerVoltage[msg.sender] = 100;

```
*Github:* [[97](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L97)]


</details>


<a name="L-6"></a> 
### [L-6] External function calls within loops
Calling external functions within loops can easily result in insufficient gas. This greatly increases the likelihood of transaction failures, DOS attacks, and other unexpected actions. It is recommended to limit the number of loops within loops that call external functions, and to limit the gas line for each external call.

*There are <b>5</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit `.ownerOf(...)`
250:             require(msg.sender == _mintpassInstance.ownerOf(mintpassIdsToBurn[i]));

/// @audit `.burn(...)`
251:             _mintpassInstance.burn(mintpassIdsToBurn[i]);

```
*Github:* [[250](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L250), [251](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L251)]


```solidity
File: src/MergingPool.sol

/// @audit `.ownerOf(...)`
125:             currentWinnerAddresses[i] = _fighterFarmInstance.ownerOf(winners[i]);

/// @audit `.mintFromMergingPool(...)`
154:                     _fighterFarmInstance.mintFromMergingPool(

/// @audit `.mintFromMergingPool(...)`
154:                     _fighterFarmInstance.mintFromMergingPool(

```
*Github:* [[125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L125), [154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L154), [154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L154)]



<a name="L-7"></a> 
### [L-7] Functions calling contracts/addresses with transfer hooks are missing reentrancy guards
While adherence to the check-effects-interaction pattern is commendable, the absence of a reentrancy guard in functions, especially where transfer hooks might be present, can expose the protocol users to risks of read-only reentrancies. Such reentrancy vulnerabilities can be exploited to execute malicious actions even without altering the contract state. Without a reentrancy guard, the only potential mitigation would be to blocklist the entire protocol - an extreme and disruptive measure. Therefore, incorporating a reentrancy guard into these functions is vital to bolster security, as it helps protect against both traditional reentrancy attacks and read-only reentrancies, ensuring robust and safe protocol operations.

*There are <b>7</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

338:     function transferFrom(
             address from, 
             address to, 
             uint256 tokenId
         ) 
             public 
             override(ERC721, IERC721)
         {
             require(_ableToTransfer(tokenId, to));
             _transfer(from, to, tokenId);

355:     function safeTransferFrom(
             address from, 
             address to, 
             uint256 tokenId
         ) 
             public 
             override(ERC721, IERC721)
         {
             require(_ableToTransfer(tokenId, to));
             _safeTransfer(from, to, tokenId, "");

370:     function reRoll(uint8 tokenId, uint8 fighterType) public {
             require(msg.sender == ownerOf(tokenId));
             require(numRerolls[tokenId] < maxRerollsAllowed[fighterType]);
             require(_neuronInstance.balanceOf(msg.sender) >= rerollCost, "Not enough NRN for reroll");
     
             _neuronInstance.approveSpender(msg.sender, rerollCost);
             bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, rerollCost);

```
*Github:* [[338](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L338), [355](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L355), [370](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L370)]


```solidity
File: src/GameItems.sol

147:     function mint(uint256 tokenId, uint256 quantity) external {
             require(tokenId < _itemCount);
             uint256 price = allGameItemAttributes[tokenId].itemPrice * quantity;
             require(_neuronInstance.balanceOf(msg.sender) >= price, "Not enough NRN for purchase");
             require(
                 allGameItemAttributes[tokenId].finiteSupply == false || 
                 (
                     allGameItemAttributes[tokenId].finiteSupply == true && 
                     quantity <= allGameItemAttributes[tokenId].itemsRemaining
                 )
             );
             require(
                 dailyAllowanceReplenishTime[msg.sender][tokenId] <= block.timestamp || 
                 quantity <= allowanceRemaining[msg.sender][tokenId]
             );
     
             _neuronInstance.approveSpender(msg.sender, price);
             bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, price);

291:     function safeTransferFrom(
             address from, 
             address to, 
             uint256 tokenId,
             uint256 amount,
             bytes memory data
         ) 
             public 
             override(ERC1155)
         {
             require(allGameItemAttributes[tokenId].transferable);
             super.safeTransferFrom(from, to, tokenId, amount, data);

```
*Github:* [[147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L147), [291](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L291)]


```solidity
File: src/Neuron.sol

138:     function claim(uint256 amount) external {
             require(
                 allowance(treasuryAddress, msg.sender) >= amount, 
                 "ERC20: claim amount exceeds allowance"
             );
             transferFrom(treasuryAddress, msg.sender, amount);

```
*Github:* [[138](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L138)]


```solidity
File: src/RankedBattle.sol

244:     function stakeNRN(uint256 amount, uint256 tokenId) external {
             require(amount > 0, "Amount cannot be 0");
             require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");
             require(_neuronInstance.balanceOf(msg.sender) >= amount, "Stake amount exceeds balance");
             require(hasUnstaked[tokenId][roundId] == false, "Cannot add stake after unstaking this round");
     
             _neuronInstance.approveStaker(msg.sender, address(this), amount);
             bool success = _neuronInstance.transferFrom(msg.sender, address(this), amount);

```
*Github:* [[244](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L244)]



<a name="L-8"></a> 
### [L-8] Missing checks for state variable assignments
There are some missing checks in these functions, and this could lead to unexpected scenarios. Consider always adding a sanity check for state variables.

<details>
<summary>
There are <b>36</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit `newOwnerAddress`
63:         _ownerAddress = newOwnerAddress;

```
*Github:* [[63](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L63)]


```solidity
File: src/FighterFarm.sol

/// @audit `ownerAddress`
107:         _ownerAddress = ownerAddress;

/// @audit `delegatedAddress`
108:         _delegatedAddress = delegatedAddress;

/// @audit `treasuryAddress_`
109:         treasuryAddress = treasuryAddress_;

/// @audit `newOwnerAddress`
122:         _ownerAddress = newOwnerAddress;

/// @audit `mergingPoolAddress`
173:         _mergingPoolAddress = mergingPoolAddress;

/// @audit `newTokenURI`
182:         _tokenURIs[tokenId] = newTokenURI;

/// @audit `stakingStatus`
270:         fighterStaked[tokenId] = stakingStatus;

```
*Github:* [[107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L107), [108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L108), [109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L109), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L122), [173](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L173), [182](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L182), [270](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L270)]


```solidity
File: src/GameItems.sol

/// @audit `ownerAddress`
96:         _ownerAddress = ownerAddress;

/// @audit `treasuryAddress_`
97:         treasuryAddress = treasuryAddress_;

/// @audit `newOwnerAddress`
110:         _ownerAddress = newOwnerAddress;

/// @audit `access`
119:         isAdmin[adminAddress] = access;

/// @audit `_tokenURI`
196:         _tokenURIs[tokenId] = _tokenURI;

```
*Github:* [[96](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L96), [97](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L97), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L110), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L119), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L196)]


```solidity
File: src/MergingPool.sol

/// @audit `ownerAddress`
76:         _ownerAddress = ownerAddress;

/// @audit `rankedBattleAddress`
77:         _rankedBattleAddress = rankedBattleAddress;

/// @audit `newOwnerAddress`
91:         _ownerAddress = newOwnerAddress;

/// @audit `access`
100:         isAdmin[adminAddress] = access;

/// @audit `newWinnersPerPeriodAmount`
108:         winnersPerPeriod = newWinnersPerPeriodAmount;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L76), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L77), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L91), [100](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L100), [108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L108)]


```solidity
File: src/Neuron.sol

/// @audit `ownerAddress`
71:         _ownerAddress = ownerAddress;

/// @audit `treasuryAddress_`
72:         treasuryAddress = treasuryAddress_;

/// @audit `newOwnerAddress`
87:         _ownerAddress = newOwnerAddress;

/// @audit `access`
120:         isAdmin[adminAddress] = access;

```
*Github:* [[71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L71), [72](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L72), [87](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L87), [120](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L120)]


```solidity
File: src/RankedBattle.sol

/// @audit `ownerAddress`
152:         _ownerAddress = ownerAddress;

/// @audit `gameServerAddress`
153:         _gameServerAddress = gameServerAddress;

/// @audit `newOwnerAddress`
169:         _ownerAddress = newOwnerAddress;

/// @audit `access`
178:         isAdmin[adminAddress] = access;

/// @audit `gameServerAddress`
186:         _gameServerAddress = gameServerAddress;

/// @audit `stakeAtRiskAddress`
194:         _stakeAtRiskAddress = stakeAtRiskAddress;

/// @audit `bpsLostPerLoss_`
228:         bpsLostPerLoss = bpsLostPerLoss_;

```
*Github:* [[152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L152), [153](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L153), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L169), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L178), [186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L186), [194](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L194), [228](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L228)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `treasuryAddress_`
65:         treasuryAddress = treasuryAddress_;

/// @audit `rankedBattleAddress`
66:         _rankedBattleAddress = rankedBattleAddress;   

/// @audit `roundId_`
82:             roundId = roundId_;

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L65), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L66), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L82)]


```solidity
File: src/VoltageManager.sol

/// @audit `ownerAddress`
52:         _ownerAddress = ownerAddress;

/// @audit `newOwnerAddress`
66:         _ownerAddress = newOwnerAddress;

/// @audit `access`
75:         isAdmin[adminAddress] = access;

/// @audit `allowed`
84:         allowedVoltageSpenders[allowedVoltageSpender] = allowed;

```
*Github:* [[52](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L52), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L66), [75](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L75), [84](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L84)]


</details>


<a name="L-9"></a> 
### [L-9] Missing limits when setting min/max amounts
There are some missing limits in these functions, and this could lead to unexpected scenarios. Consider adding a min/max limit for the following values, when appropriate.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/MergingPool.sol

/// @audit `newWinnersPerPeriodAmount`
106:     function updateWinnersPerPeriod(uint256 newWinnersPerPeriodAmount) external {

```
*Github:* [[106](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L106)]


```solidity
File: src/RankedBattle.sol

/// @audit `bpsLostPerLoss_`
226:     function setBpsLostPerLoss(uint256 bpsLostPerLoss_) external {

```
*Github:* [[226](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L226)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `roundId_`
78:     function setNewRound(uint256 roundId_) external {

```
*Github:* [[78](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L78)]



<a name="L-10"></a> 
### [L-10] Missing zero address check in constructor
Constructors often take address parameters to initialize important components of a contract, such as owner or linked contracts. However, without a checking, there's a risk that an address parameter could be mistakenly set to the zero address (0x0). This could be due to an error or oversight during contract deployment. A zero address in a crucial role can cause serious issues, as it cannot perform actions like a normal address, and any funds sent to it will be irretrievable. It's therefore crucial to include a zero address check in constructors to prevent such potential problems. If a zero address is detected, the constructor should revert the transaction.

*There are <b>7</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit missing zero check for `ownerAddress`
/// @audit missing zero check for `delegatedAddress`
/// @audit missing zero check for `treasuryAddress_`
104:     constructor(address ownerAddress, address delegatedAddress, address treasuryAddress_)
             ERC721("AI Arena Fighter", "FTR")
         {

```
*Github:* [[104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L104)]


```solidity
File: src/GameItems.sol

/// @audit missing zero check for `ownerAddress`
/// @audit missing zero check for `treasuryAddress_`
95:     constructor(address ownerAddress, address treasuryAddress_) ERC1155("https://ipfs.io/ipfs/") {

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L95)]


```solidity
File: src/MergingPool.sol

/// @audit missing zero check for `ownerAddress`
/// @audit missing zero check for `rankedBattleAddress`
71:     constructor(
            address ownerAddress, 
            address rankedBattleAddress, 
            address fighterFarmAddress
        ) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L71)]


```solidity
File: src/Neuron.sol

/// @audit missing zero check for `ownerAddress`
/// @audit missing zero check for `treasuryAddress_`
/// @audit missing zero check for `contributorAddress`
68:     constructor(address ownerAddress, address treasuryAddress_, address contributorAddress)
            ERC20("Neuron", "NRN")
        {

```
*Github:* [[68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L68)]


```solidity
File: src/RankedBattle.sol

/// @audit missing zero check for `ownerAddress`
/// @audit missing zero check for `gameServerAddress`
146:     constructor(
           address ownerAddress, 
           address gameServerAddress,
           address fighterFarmAddress,
           address voltageManagerAddress
         ) {

```
*Github:* [[146](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L146)]


```solidity
File: src/StakeAtRisk.sol

/// @audit missing zero check for `treasuryAddress_`
/// @audit missing zero check for `rankedBattleAddress`
60:     constructor(
            address treasuryAddress_,
            address nrnAddress,
            address rankedBattleAddress
        ) {

```
*Github:* [[60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L60)]


```solidity
File: src/VoltageManager.sol

/// @audit missing zero check for `ownerAddress`
51:     constructor(address ownerAddress, address gameItemsContractAddress) {

```
*Github:* [[51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L51)]



<a name="L-11"></a> 
### [L-11] Consider some checks for `address(0)` when setting address state variables
Check for zero-address to avoid the risk of setting `address(0)` for state variables after an update.

<details>
<summary>
There are <b>24</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit `newOwnerAddress`
63:         _ownerAddress = newOwnerAddress;

```
*Github:* [[63](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L63)]


```solidity
File: src/FighterFarm.sol

/// @audit `ownerAddress`
107:         _ownerAddress = ownerAddress;

/// @audit `delegatedAddress`
108:         _delegatedAddress = delegatedAddress;

/// @audit `treasuryAddress_`
109:         treasuryAddress = treasuryAddress_;

/// @audit `newOwnerAddress`
122:         _ownerAddress = newOwnerAddress;

/// @audit `mergingPoolAddress`
173:         _mergingPoolAddress = mergingPoolAddress;

```
*Github:* [[107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L107), [108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L108), [109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L109), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L122), [173](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L173)]


```solidity
File: src/GameItems.sol

/// @audit `ownerAddress`
96:         _ownerAddress = ownerAddress;

/// @audit `treasuryAddress_`
97:         treasuryAddress = treasuryAddress_;

/// @audit `newOwnerAddress`
110:         _ownerAddress = newOwnerAddress;

```
*Github:* [[96](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L96), [97](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L97), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L110)]


```solidity
File: src/MergingPool.sol

/// @audit `ownerAddress`
76:         _ownerAddress = ownerAddress;

/// @audit `rankedBattleAddress`
77:         _rankedBattleAddress = rankedBattleAddress;

/// @audit `newOwnerAddress`
91:         _ownerAddress = newOwnerAddress;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L76), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L77), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L91)]


```solidity
File: src/Neuron.sol

/// @audit `ownerAddress`
71:         _ownerAddress = ownerAddress;

/// @audit `treasuryAddress_`
72:         treasuryAddress = treasuryAddress_;

/// @audit `newOwnerAddress`
87:         _ownerAddress = newOwnerAddress;

```
*Github:* [[71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L71), [72](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L72), [87](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L87)]


```solidity
File: src/RankedBattle.sol

/// @audit `ownerAddress`
152:         _ownerAddress = ownerAddress;

/// @audit `gameServerAddress`
153:         _gameServerAddress = gameServerAddress;

/// @audit `newOwnerAddress`
169:         _ownerAddress = newOwnerAddress;

/// @audit `gameServerAddress`
186:         _gameServerAddress = gameServerAddress;

/// @audit `stakeAtRiskAddress`
194:         _stakeAtRiskAddress = stakeAtRiskAddress;

```
*Github:* [[152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L152), [153](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L153), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L169), [186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L186), [194](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L194)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `treasuryAddress_`
65:         treasuryAddress = treasuryAddress_;

/// @audit `rankedBattleAddress`
66:         _rankedBattleAddress = rankedBattleAddress;   

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L65), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L66)]


```solidity
File: src/VoltageManager.sol

/// @audit `ownerAddress`
52:         _ownerAddress = ownerAddress;

/// @audit `newOwnerAddress`
66:         _ownerAddress = newOwnerAddress;

```
*Github:* [[52](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L52), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L66)]


</details>


<a name="L-12"></a> 
### [L-12] NFT doesn't handle hard forks
To ensure clarity regarding the ownership of the NFT on a specific chain, it is recommended to add `require(block.chainid == 1, "Invalid Chain")` or the desired chain ID in the functions below.

Alternatively, consider including the chain ID in the URI itself. By doing so, any confusion regarding the chain responsible for owning the NFT will be eliminated.

*There is one instance of this issue:*
```solidity
File: src/FighterFarm.sol

402:     function tokenURI(uint256 tokenId) public view override(ERC721) returns (string memory) {

```
*Github:* [[402](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L402)]



<a name="L-13"></a> 
### [L-13] Solidity version 0.8.20 or above may not work on other chains due to PUSH0
Solidity version 0.8.20 or above uses the new [Shanghai EVM](https://blog.soliditylang.org/2023/05/10/solidity-0.8.20-release-announcement/#important-note) which introduces the PUSH0 opcode. This op code may not yet be implemented on all evm-chains or Layer2s, so deployment on these chains will fail. Consider using an earlier solidity version.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

3: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[3](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L3)]


```solidity
File: src/FighterFarm.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L2)]


```solidity
File: src/GameItems.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L2)]


```solidity
File: src/MergingPool.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L2)]


```solidity
File: src/Neuron.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L2)]


```solidity
File: src/RankedBattle.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L2)]


```solidity
File: src/StakeAtRisk.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L2)]


```solidity
File: src/VoltageManager.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L2)]



<a name="L-14"></a> 
### [L-14] Some functions do not work correctly with fee-on-transfer tokens
Some tokens take a transfer fee (e.g. `STA`, `PAXG`), some do not currently charge a fee but may do so in the future (e.g. `USDT`, `USDC`).

Should a fee-on-transfer token be added as an asset and deposited, it could be abused, as the accounting is wrong. In the current implementation the following function calls do not work well with fee-on-transfer tokens as the amount variable is the pre-fee amount, including the fee, whereas the final balance do not include the fee anymore.

*There are <b>7</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

376:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, rerollCost);

```
*Github:* [[376](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L376)]


```solidity
File: src/GameItems.sol

164:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, price);

```
*Github:* [[164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L164)]


```solidity
File: src/RankedBattle.sol

251:         bool success = _neuronInstance.transferFrom(msg.sender, address(this), amount);

283:         bool success = _neuronInstance.transfer(msg.sender, amount);

493:                 bool success = _neuronInstance.transfer(_stakeAtRiskAddress, curStakeAtRisk);

```
*Github:* [[251](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L251), [283](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L283), [493](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L493)]


```solidity
File: src/StakeAtRisk.sol

100:         bool success = _neuronInstance.transfer(_rankedBattleAddress, nrnToReclaim);

143:         return _neuronInstance.transfer(treasuryAddress, totalStakeAtRisk[roundId]);

```
*Github:* [[100](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L100), [143](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L143)]



<a name="L-15"></a> 
### [L-15] Some tokens may revert when large transfers are made
Tokens such as COMP or UNI will revert when an address' balance reaches `type(uint96).max`. Ensure that the calls below can be broken up into smaller batches if necessary.

*There are <b>7</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

376:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, rerollCost);

```
*Github:* [[376](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L376)]


```solidity
File: src/GameItems.sol

164:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, price);

```
*Github:* [[164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L164)]


```solidity
File: src/RankedBattle.sol

251:         bool success = _neuronInstance.transferFrom(msg.sender, address(this), amount);

283:         bool success = _neuronInstance.transfer(msg.sender, amount);

493:                 bool success = _neuronInstance.transfer(_stakeAtRiskAddress, curStakeAtRisk);

```
*Github:* [[251](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L251), [283](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L283), [493](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L493)]


```solidity
File: src/StakeAtRisk.sol

100:         bool success = _neuronInstance.transfer(_rankedBattleAddress, nrnToReclaim);

143:         return _neuronInstance.transfer(treasuryAddress, totalStakeAtRisk[roundId]);

```
*Github:* [[100](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L100), [143](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L143)]



<a name="L-16"></a> 
### [L-16] Some tokens may revert when zero value transfers are made
Despite the fact that [EIP-20 states](https://github.com/ethereum/EIPs/blob/7500ac4fc1bbdfaf684e7ef851f798f6b667b2fe/EIPS/eip-20.md?plain=1#L116) that zero-value transfers must be accepted, some tokens, such as LEND, will revert if this is attempted, which may cause transactions that involve other tokens (such as batch operations) to fully revert. Consider skipping the transfer if the amount is zero, which will also save gas.

*There are <b>7</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

376:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, rerollCost);

```
*Github:* [[376](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L376)]


```solidity
File: src/GameItems.sol

164:         bool success = _neuronInstance.transferFrom(msg.sender, treasuryAddress, price);

```
*Github:* [[164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L164)]


```solidity
File: src/RankedBattle.sol

251:         bool success = _neuronInstance.transferFrom(msg.sender, address(this), amount);

283:         bool success = _neuronInstance.transfer(msg.sender, amount);

493:                 bool success = _neuronInstance.transfer(_stakeAtRiskAddress, curStakeAtRisk);

```
*Github:* [[251](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L251), [283](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L283), [493](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L493)]


```solidity
File: src/StakeAtRisk.sol

100:         bool success = _neuronInstance.transfer(_rankedBattleAddress, nrnToReclaim);

143:         return _neuronInstance.transfer(treasuryAddress, totalStakeAtRisk[roundId]);

```
*Github:* [[100](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L100), [143](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L143)]



<a name="L-17"></a> 
### [L-17] Tokens may be minted to `address(0)`

*There is one instance of this issue:*
```solidity
File: src/Neuron.sol

155:     function mint(address to, uint256 amount) public virtual {
             require(totalSupply() + amount < MAX_SUPPLY, "Trying to mint more than the max supply");
             require(hasRole(MINTER_ROLE, msg.sender), "ERC20: must have minter role to mint");
             _mint(to, amount);
         }

```
*Github:* [[155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L155)]



<a name="L-18"></a> 
### [L-18] Unsafe downcast
When a type is downcast to a smaller type, the higher order bits are truncated, effectively applying a modulo to the original value. Without any other checks, this wrapping will lead to unexpected behavior and bugs.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/GameItems.sol

/// @audit uint256 -> uint32
314:         dailyAllowanceReplenishTime[msg.sender][tokenId] = uint32(block.timestamp + 1 days);

```
*Github:* [[314](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L314)]


```solidity
File: src/VoltageManager.sol

/// @audit uint256 -> uint32
119:         ownerVoltageReplenishTime[owner] = uint32(block.timestamp + 1 days);

```
*Github:* [[119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L119)]



<a name="L-19"></a> 
### [L-19] Consider using `ERC721A` instead of `ERC721`
[ERC721A](https://www.erc721a.org/) is an implementation of IERC721 with significant gas savings for minting multiple NFTs in a single transaction.

*There is one instance of this issue:*
```solidity
File: src/FighterFarm.sol

16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]



<a name="L-20"></a> 
### [L-20] Using zero as a parameter
Taking `0` as a valid argument in Solidity without checks can lead to severe security issues. A historical example is the infamous `0x0` address bug where numerous tokens were lost. This happens because 0 can be interpreted as an uninitialized `address`, leading to transfers to the 0x0 address, effectively burning tokens. Moreover, `0` as a denominator in division operations would cause a runtime exception. It's also often indicative of a logical error in the caller's code. It's important to always validate input and handle edge cases like `0` appropriately. Use `require()` statements to enforce conditions and provide clear error messages to facilitate debugging and safer code.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

45:         addAttributeProbabilities(0, probabilities);

```
*Github:* [[45](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L45)]


```solidity
File: src/FighterFarm.sol

212:             _createNewFighter(

322:         _createNewFighter(

```
*Github:* [[212](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L212), [322](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L322)]



<a name="L-21"></a> 
### [L-21] Vulnerable version of OZ contarcts is used (`4.7.3`)
The project is using a vulnerable version.
See the list of OZ vulnerabilities [here](https://security.snyk.io/package/npm/@openzeppelin%2Fcontracts).

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/)]



<a name="L-22"></a> 
### [L-22] Do not use deprecated library functions

*There are <b>3</b> instances of this issue:*
```solidity
File: src/Neuron.sol

95:         _setupRole(MINTER_ROLE, newMinterAddress);

103:         _setupRole(STAKER_ROLE, newStakerAddress);

111:         _setupRole(SPENDER_ROLE, newSpenderAddress);

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L95), [103](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L103), [111](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L111)]



<a name="L-23"></a> 
### [L-23] `tokenURI()` does not follow EIP-721
The [EIP-721](https://github.com/ethereum/EIPs/blob/7500ac4fc1bbdfaf684e7ef851f798f6b667b2fe/EIPS/eip-721.md?plain=1#L189-L193) states that `tokenURI()` should "Throws if `_tokenId` is not a valid NFT", which the code below does not do. If the NFT has not yet been minted, `tokenURI()` should revert.

*There is one instance of this issue:*
```solidity
File: src/FighterFarm.sol

402:     function tokenURI(uint256 tokenId) public view override(ERC721) returns (string memory) {

```
*Github:* [[402](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L402)]



<a name="L-24"></a> 
### [L-24] Unspecific compiler version pragma

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

3: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[3](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L3)]


```solidity
File: src/FighterFarm.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L2)]


```solidity
File: src/GameItems.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L2)]


```solidity
File: src/MergingPool.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L2)]


```solidity
File: src/Neuron.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L2)]


```solidity
File: src/RankedBattle.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L2)]


```solidity
File: src/StakeAtRisk.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L2)]


```solidity
File: src/VoltageManager.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L2)]




## Non Critical Issues

<a name="NC-1"></a> 
### [NC-1] Avoid mutating function parameters
Function parameters in Solidity are passed by value, meaning they are essentially local copies. Mutating them can lead to confusion and errors because the changes don't persist outside the function. By keeping function parameters immutable, you ensure clarity in code behavior, preventing unintended side-effects. If you need to modify a value based on a parameter, use a local variable inside the function, leaving the original parameter unaltered. By adhering to this practice, you maintain a clear distinction between input data and the internal processing logic, improving code readability and reducing the potential for bugs.

*There is one instance of this issue:*
```solidity
File: src/RankedBattle.sol

/// @audit `amount`
270:     function unstakeNRN(uint256 amount, uint256 tokenId) external {
             require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");
             if (amount > amountStaked[tokenId]) {
                 amount = amountStaked[tokenId];

```
*Github:* [[270](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L270)]



<a name="NC-2"></a> 
### [NC-2] Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, for readability
Well-organized data structures make code reviews easier, which may lead to fewer bugs. Consider combining related mappings into mappings to structs, so it's clear what data is related

*There are <b>8</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

88:     mapping(address => mapping(uint8 => uint8)) public nftsClaimed;

```
*Github:* [[88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L88)]


```solidity
File: src/GameItems.sol

74:     mapping(address => mapping(uint256 => uint256)) public allowanceRemaining;

77:     mapping(address => mapping(uint256 => uint256)) public dailyAllowanceReplenishTime;

```
*Github:* [[74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L74), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L77)]


```solidity
File: src/RankedBattle.sol

113:     mapping(address => mapping(uint256 => uint256)) public accumulatedPointsPerAddress;

116:     mapping(uint256 => mapping(uint256 => uint256)) public accumulatedPointsPerFighter;

125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[113](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L113), [116](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L116), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/StakeAtRisk.sol

46:     mapping(uint256 => mapping(uint256 => uint256)) public stakeAtRisk;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L46)]



<a name="NC-3"></a> 
### [NC-3] Consider adding a block/deny-list
Doing so will significantly increase centralization, but will help to prevent hackers from using stolen tokens.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

10: contract AiArenaHelper {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L10)]


```solidity
File: src/FighterFarm.sol

16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]


```solidity
File: src/GameItems.sol

10: contract GameItems is ERC1155 {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L10)]


```solidity
File: src/MergingPool.sol

9: contract MergingPool {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L9)]


```solidity
File: src/Neuron.sol

11: contract Neuron is ERC20, AccessControl {

```
*Github:* [[11](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L11)]


```solidity
File: src/RankedBattle.sol

16: contract RankedBattle {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L16)]


```solidity
File: src/StakeAtRisk.sol

10: contract StakeAtRisk {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L10)]


```solidity
File: src/VoltageManager.sol

9: contract VoltageManager {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L9)]



<a name="NC-4"></a> 
### [NC-4] Consider adding emergency-stop functionality
Consider adding `Pausable` to the following contracts so it's possible to stop them in case of an emergency.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

10: contract AiArenaHelper {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L10)]


```solidity
File: src/FighterFarm.sol

16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]


```solidity
File: src/GameItems.sol

10: contract GameItems is ERC1155 {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L10)]


```solidity
File: src/MergingPool.sol

9: contract MergingPool {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L9)]


```solidity
File: src/Neuron.sol

11: contract Neuron is ERC20, AccessControl {

```
*Github:* [[11](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L11)]


```solidity
File: src/RankedBattle.sol

16: contract RankedBattle {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L16)]


```solidity
File: src/StakeAtRisk.sol

10: contract StakeAtRisk {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L10)]


```solidity
File: src/VoltageManager.sol

9: contract VoltageManager {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L9)]



<a name="NC-5"></a> 
### [NC-5] Consider adding formal verification proofs
Formal verification is the act of proving or disproving the correctness of intended algorithms underlying a system with respect to a certain formal specification/property/invariant, using formal methods of mathematics.

Some tools that are currently available to perform these tests on smart contracts are [SMTChecker](https://docs.soliditylang.org/en/latest/smtchecker.html) and [Certora Prover](https://www.certora.com/).

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/)]



<a name="NC-6"></a> 
### [NC-6] Consider using `AccessControlDefaultAdminRules` rather than `AccessControl`
`AccessControlDefaultAdminRules` implements multiple [security best practices](https://docs.openzeppelin.com/contracts/4.x/api/access#AccessControlDefaultAdminRules) on top of the normal `AccessControl` rules, so consider using it instead.

*There is one instance of this issue:*
```solidity
File: src/Neuron.sol

11: contract Neuron is ERC20, AccessControl {

```
*Github:* [[11](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L11)]



<a name="NC-7"></a> 
### [NC-7] Consider using descriptive `constant`s when passing zero as a function argument
Passing zero as a function argument can sometimes result in a security issue (e.g. passing zero as the slippage parameter). Consider using a `constant` variable with a descriptive name, so it's clear that the argument is intentionally being used, and for the right reasons.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

45:         addAttributeProbabilities(0, probabilities);

149:             attributeProbabilities[generation][attributes[i]] = new uint8[](0);

```
*Github:* [[45](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L45), [149](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L149)]


```solidity
File: src/FighterFarm.sol

212:             _createNewFighter(
                     msg.sender, 
                     uint256(keccak256(abi.encode(msg.sender, fighters.length))),
                     modelHashes[i], 
                     modelTypes[i],
                     i < numToMint[0] ? 0 : 1,
                     0,

322:         _createNewFighter(
                 to, 
                 uint256(keccak256(abi.encode(msg.sender, fighters.length))), 
                 modelHash, 
                 modelType,
                 0,

```
*Github:* [[212](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L212), [322](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L322)]


```solidity
File: src/VoltageManager.sol

95:         require(_gameItemsContractInstance.balanceOf(msg.sender, 0) > 0);

96:         _gameItemsContractInstance.burn(msg.sender, 0, 1);

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L95), [96](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L96)]



<a name="NC-8"></a> 
### [NC-8] Constants should be put on the left side of comparisons
Putting constants on the left side of comparison statements is a best practice known as [Yoda conditions](https://en.wikipedia.org/wiki/Yoda_conditions). Although solidity's static typing system prevents accidental assignments within conditionals, adopting this practice can improve code readability and consistency, especially when working across multiple languages.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/RankedBattle.sol

253:             if (amountStaked[tokenId] == 0) {

285:             if (amountStaked[tokenId] == 0) {

440:         if (battleResult == 0) {

444:             if (stakeAtRisk == 0) {

506:         if (battleResult == 0) {

530:       if (stakingFactor_ == 0) {

```
*Github:* [[253](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L253), [285](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L285), [440](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L440), [444](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L444), [506](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L506), [530](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L530)]



<a name="NC-9"></a> 
### [NC-9] `Constructor` should emit an event
Use events to signal significant changes to off-chain monitoring tools.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

41:     constructor(uint8[][] memory probabilities) {

```
*Github:* [[41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L41)]


```solidity
File: src/FighterFarm.sol

104:     constructor(address ownerAddress, address delegatedAddress, address treasuryAddress_)

```
*Github:* [[104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L104)]


```solidity
File: src/GameItems.sol

95:     constructor(address ownerAddress, address treasuryAddress_) ERC1155("https://ipfs.io/ipfs/") {

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L95)]


```solidity
File: src/MergingPool.sol

71:     constructor(

```
*Github:* [[71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L71)]


```solidity
File: src/Neuron.sol

68:     constructor(address ownerAddress, address treasuryAddress_, address contributorAddress)

```
*Github:* [[68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L68)]


```solidity
File: src/RankedBattle.sol

146:     constructor(

```
*Github:* [[146](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L146)]


```solidity
File: src/StakeAtRisk.sol

60:     constructor(

```
*Github:* [[60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L60)]


```solidity
File: src/VoltageManager.sol

51:     constructor(address ownerAddress, address gameItemsContractAddress) {

```
*Github:* [[51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L51)]



<a name="NC-10"></a> 
### [NC-10] Contract does not follow the Solidity Style Guide's suggested layout ordering
The [style guide](https://docs.soliditylang.org/en/v0.8.16/style-guide.html#order-of-layout) says that, within a contract, the ordering should be `1) Type declarations`, `2) State variables`, `3) Events`, `4) Modifiers`, and `5) Functions`, but the contract(s) below do not follow this ordering

<details>
<summary>
There are <b>92</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
33:     uint8 public constant MAX_FIGHTERS_ALLOWED = 10;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
36:     uint8[2] public maxRerollsAllowed = [3, 3];

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
39:     uint256 public rerollCost = 1000 * 10**18;    

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
42:     uint8[2] public generation = [0, 0];

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
45:     uint32 public totalNumTrained;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
48:     address public treasuryAddress;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
51:     address _ownerAddress;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
54:     address _delegatedAddress;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
57:     address _mergingPoolAddress;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
60:     AiArenaHelper _aiArenaHelperInstance;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
63:     AAMintPass _mintpassInstance;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
66:     Neuron _neuronInstance;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
69:     FighterOps.Fighter[] public fighters;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
76:     mapping(uint256 => bool) public fighterStaked;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
79:     mapping(uint256 => uint8) public numRerolls;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
82:     mapping(address => bool) public hasStakerRole;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
85:     mapping(uint8 => uint8) public numElements;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
88:     mapping(address => mapping(uint8 => uint8)) public nftsClaimed;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
91:     mapping(uint256 => uint32) public numTrained;

/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
94:     mapping(uint256 => string) private _tokenURIs;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L33), [36](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L36), [39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L39), [42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L42), [45](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L45), [48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L48), [51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L51), [54](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L54), [57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L57), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L60), [63](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L63), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L66), [69](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L69), [76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L76), [79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L79), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L82), [85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L85), [88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L88), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L91), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L94)]


```solidity
File: src/GameItems.sol

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
35:     struct GameItemAttributes {

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
49:     string public name = "AI Arena Game Items";

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
52:     string public symbol = "AGI";

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
55:     GameItemAttributes[] public allGameItemAttributes;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
58:     address public treasuryAddress;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
61:     address _ownerAddress;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
64:     uint256 _itemCount = 0;    

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
67:     Neuron _neuronInstance;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
74:     mapping(address => mapping(uint256 => uint256)) public allowanceRemaining;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
77:     mapping(address => mapping(uint256 => uint256)) public dailyAllowanceReplenishTime;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
80:     mapping(address => bool) public allowedBurningAddresses;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
83:     mapping(address => bool) public isAdmin;

/// @audit event/error `BoughtItem` came earlier
/// @audit event/error `Locked` came earlier
/// @audit event/error `Unlocked` came earlier
86:     mapping(uint256 => string) private _tokenURIs;

```
*Github:* [[35](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L35), [49](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L49), [52](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L52), [55](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L55), [58](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L58), [61](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L61), [64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L64), [67](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L67), [74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L74), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L77), [80](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L80), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L83), [86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L86)]


```solidity
File: src/MergingPool.sol

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
26:     uint256 public winnersPerPeriod = 2;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
29:     uint256 public roundId = 0;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
32:     uint256 public totalPoints = 0;    

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
35:     address _ownerAddress;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
38:     address _rankedBattleAddress;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
41:     FighterFarm _fighterFarmInstance;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
48:     mapping(address => uint32) public numRoundsClaimed;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
51:     mapping(uint256 => uint256) public fighterPoints;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
54:     mapping(uint256 => address[]) public winnerAddresses;    

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
57:     mapping(uint256 => bool) public isSelectionComplete;

/// @audit event/error `PointsAdded` came earlier
/// @audit event/error `Claimed` came earlier
60:     mapping(address => bool) public isAdmin;

```
*Github:* [[26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L26), [29](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L29), [32](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L32), [35](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L35), [38](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L38), [41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L41), [48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L48), [51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L51), [54](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L54), [57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L57), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L60)]


```solidity
File: src/Neuron.sol

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
28:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
31:     bytes32 public constant SPENDER_ROLE = keccak256("SPENDER_ROLE");

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
34:     bytes32 public constant STAKER_ROLE = keccak256("STAKER_ROLE");

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
46:     address public treasuryAddress;

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
49:     address _ownerAddress;

/// @audit event/error `TokensClaimed` came earlier
/// @audit event/error `TokensMinted` came earlier
56:     mapping(address => bool) public isAdmin;

```
*Github:* [[28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L28), [31](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L31), [34](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L34), [37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43), [46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L46), [49](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L49), [56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L56)]


```solidity
File: src/RankedBattle.sol

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
42:     struct BattleRecord {

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
53:     uint8 public constant VOLTAGE_COST = 10;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
56:     uint256 public totalBattles = 0;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
59:     uint256 public globalStakedAmount = 0;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
62:     uint256 public roundId = 0;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
66:     uint256 public bpsLostPerLoss = 10;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
69:     address _stakeAtRiskAddress;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
72:     address _ownerAddress;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
75:     address _gameServerAddress;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
82:     Neuron _neuronInstance;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
85:     FighterFarm _fighterFarmInstance;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
88:     VoltageManager _voltageManagerInstance;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
91:     MergingPool _mergingPoolInstance;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
94:     StakeAtRisk _stakeAtRiskInstance;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
101:     mapping(address => bool) public isAdmin;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
104:     mapping(uint256 => BattleRecord) public fighterBattleRecord;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
107:     mapping(address => uint256) public amountClaimed;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
110:     mapping(address => uint32) public numRoundsClaimed;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
113:     mapping(address => mapping(uint256 => uint256)) public accumulatedPointsPerAddress;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
116:     mapping(uint256 => mapping(uint256 => uint256)) public accumulatedPointsPerFighter;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
119:     mapping(uint256 => uint256) public totalAccumulatedPoints;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
122:     mapping(uint256 => uint256) public rankedNrnDistribution;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
128:     mapping(uint256 => uint256) public amountStaked;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
131:     mapping(uint256 => uint256) public stakingFactor;

/// @audit event/error `Staked` came earlier
/// @audit event/error `Unstaked` came earlier
/// @audit event/error `Claimed` came earlier
/// @audit event/error `PointsChanged` came earlier
134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L42), [53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L53), [56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L56), [59](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L59), [62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L62), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L66), [69](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L69), [72](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L72), [75](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L75), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L82), [85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L85), [88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L88), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L91), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L94), [101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L101), [104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L104), [107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L107), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L110), [113](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L113), [116](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L116), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L119), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L122), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [128](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L128), [131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L131), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/StakeAtRisk.sol

/// @audit event/error `ReclaimedStake` came earlier
/// @audit event/error `IncreasedStakeAtRisk` came earlier
27:     uint256 public roundId = 0;    

/// @audit event/error `ReclaimedStake` came earlier
/// @audit event/error `IncreasedStakeAtRisk` came earlier
30:     address public treasuryAddress;

/// @audit event/error `ReclaimedStake` came earlier
/// @audit event/error `IncreasedStakeAtRisk` came earlier
33:     address _rankedBattleAddress;

/// @audit event/error `ReclaimedStake` came earlier
/// @audit event/error `IncreasedStakeAtRisk` came earlier
36:     Neuron _neuronInstance;

/// @audit event/error `ReclaimedStake` came earlier
/// @audit event/error `IncreasedStakeAtRisk` came earlier
43:     mapping(uint256 => uint256) public totalStakeAtRisk;

/// @audit event/error `ReclaimedStake` came earlier
/// @audit event/error `IncreasedStakeAtRisk` came earlier
46:     mapping(uint256 => mapping(uint256 => uint256)) public stakeAtRisk;

/// @audit event/error `ReclaimedStake` came earlier
/// @audit event/error `IncreasedStakeAtRisk` came earlier
49:     mapping(address => uint256) public amountLost;

```
*Github:* [[27](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L27), [30](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L30), [33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L33), [36](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L36), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L43), [46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L46), [49](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L49)]


```solidity
File: src/VoltageManager.sol

/// @audit event/error `VoltageRemaining` came earlier
23:     address _ownerAddress;

/// @audit event/error `VoltageRemaining` came earlier
26:     GameItems _gameItemsContractInstance;

/// @audit event/error `VoltageRemaining` came earlier
33:     mapping(address => bool) public allowedVoltageSpenders;

/// @audit event/error `VoltageRemaining` came earlier
36:     mapping(address => uint32) public ownerVoltageReplenishTime;

/// @audit event/error `VoltageRemaining` came earlier
39:     mapping(address => uint8) public ownerVoltage;

/// @audit event/error `VoltageRemaining` came earlier
42:     mapping(address => bool) public isAdmin;

```
*Github:* [[23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L23), [26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L26), [33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L33), [36](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L36), [39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L39), [42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L42)]


</details>


<a name="NC-11"></a> 
### [NC-11] Contract should expose an `interface`
All `external`/`public` functions should extend an `interface`. This is useful to make sure that the whole API is extracted.

*Note:* It is possible that the interface is out-of-scope and has not been seen by the bot.

<details>
<summary>
There are <b>89</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

61:     function transferOwnership(address newOwnerAddress) external {

68:     function addAttributeDivisor(uint8[] memory attributeDivisors) external {

83:     function createPhysicalAttributes(

131:     function addAttributeProbabilities(uint256 generation, uint8[][] memory probabilities) public {

144:     function deleteAttributeProbabilities(uint8 generation) public {

157:     function getAttributeProbabilities(uint256 generation, string memory attribute) 

169:     function dnaToIndex(uint256 generation, uint256 rarityRank, string memory attribute) 

```
*Github:* [[61](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L61), [68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L68), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L83), [131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L131), [144](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L144), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L157), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L169)]


```solidity
File: src/FighterFarm.sol

120:     function transferOwnership(address newOwnerAddress) external {

129:     function incrementGeneration(uint8 fighterType) external returns (uint8) {

139:     function addStaker(address newStaker) external {

147:     function instantiateAIArenaHelperContract(address aiArenaHelperAddress) external {

155:     function instantiateMintpassContract(address mintpassAddress) external {

163:     function instantiateNeuronContract(address neuronAddress) external {

171:     function setMergingPoolAddress(address mergingPoolAddress) external {

180:     function setTokenURI(uint256 tokenId, string calldata newTokenURI) external {

191:     function claimFighters(

233:     function redeemMintPass(

268:     function updateFighterStaking(uint256 tokenId, bool stakingStatus) external {

283:     function updateModel(

299:     function doesTokenExist(uint256 tokenId) external view returns (bool) {

313:     function mintFromMergingPool(

338:     function transferFrom(

355:     function safeTransferFrom(

370:     function reRoll(uint8 tokenId, uint8 fighterType) public {

395:     function contractURI() public pure returns (string memory) {

402:     function tokenURI(uint256 tokenId) public view override(ERC721) returns (string memory) {

410:     function supportsInterface(bytes4 _interfaceId)

421:     function getAllFighterInfo(

```
*Github:* [[120](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L120), [129](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L129), [139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L139), [147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L147), [155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L155), [163](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L163), [171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L171), [180](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L180), [191](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L191), [233](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L233), [268](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L268), [283](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L283), [299](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L299), [313](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L313), [338](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L338), [355](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L355), [370](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L370), [395](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L395), [402](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L402), [410](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L410), [421](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L421)]


```solidity
File: src/GameItems.sol

108:     function transferOwnership(address newOwnerAddress) external {

117:     function adjustAdminAccess(address adminAddress, bool access) external {

126:     function adjustTransferability(uint256 tokenId, bool transferable) external {

139:     function instantiateNeuronContract(address nrnAddress) external {

147:     function mint(uint256 tokenId, uint256 quantity) external {

185:     function setAllowedBurningAddresses(address newBurningAddress) public {

194:     function setTokenURI(uint256 tokenId, string memory _tokenURI) public {

208:     function createGameItem(

242:     function burn(address account, uint256 tokenId, uint256 amount) public {

249:     function contractURI() public pure returns (string memory) {

256:     function uri(uint256 tokenId) public view override returns (string memory) {

268:     function getAllowanceRemaining(address owner, uint256 tokenId) public view returns (uint256) {

279:     function remainingSupply(uint256 tokenId) public view returns (uint256) {

285:     function uniqueTokensOutstanding() public view returns (uint256) {

291:     function safeTransferFrom(

```
*Github:* [[108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L108), [117](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L117), [126](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L126), [139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L139), [147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L147), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L185), [194](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L194), [208](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L208), [242](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L242), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L249), [256](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L256), [268](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L268), [279](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L279), [285](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L285), [291](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L291)]


```solidity
File: src/MergingPool.sol

89:     function transferOwnership(address newOwnerAddress) external {

98:     function adjustAdminAccess(address adminAddress, bool access) external {

106:     function updateWinnersPerPeriod(uint256 newWinnersPerPeriodAmount) external {

118:     function pickWinner(uint256[] calldata winners) external {

139:     function claimRewards(

172:     function getUnclaimedRewards(address claimer) external view returns(uint256) {

195:     function addPoints(uint256 tokenId, uint256 points) public {

205:     function getFighterPoints(uint256 maxId) public view returns(uint256[] memory) {

```
*Github:* [[89](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L89), [98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L98), [106](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L106), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L118), [139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L139), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L172), [195](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L195), [205](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L205)]


```solidity
File: src/Neuron.sol

85:     function transferOwnership(address newOwnerAddress) external {

93:     function addMinter(address newMinterAddress) external {

101:     function addStaker(address newStakerAddress) external {

109:     function addSpender(address newSpenderAddress) external {

118:     function adjustAdminAccess(address adminAddress, bool access) external {

127:     function setupAirdrop(address[] calldata recipients, uint256[] calldata amounts) external {

138:     function claim(uint256 amount) external {

155:     function mint(address to, uint256 amount) public virtual {

163:     function burn(uint256 amount) public virtual {

171:     function approveSpender(address account, uint256 amount) public {

184:     function approveStaker(address owner, address spender, uint256 amount) public {

196:     function burnFrom(address account, uint256 amount) public virtual {

```
*Github:* [[85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L85), [93](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L93), [101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L101), [109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L109), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L118), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L127), [138](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L138), [155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L155), [163](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L163), [171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L171), [184](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L184), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L196)]


```solidity
File: src/RankedBattle.sol

167:     function transferOwnership(address newOwnerAddress) external {

176:     function adjustAdminAccess(address adminAddress, bool access) external {

184:     function setGameServerAddress(address gameServerAddress) external {

192:     function setStakeAtRiskAddress(address stakeAtRiskAddress) external {

201:     function instantiateNeuronContract(address nrnAddress) external {

209:     function instantiateMergingPoolContract(address mergingPoolAddress) external {

218:     function setRankedNrnDistribution(uint256 newDistribution) external {

226:     function setBpsLostPerLoss(uint256 bpsLostPerLoss_) external {

233:     function setNewRound() external {

244:     function stakeNRN(uint256 amount, uint256 tokenId) external {

270:     function unstakeNRN(uint256 amount, uint256 tokenId) external {

294:     function claimNRN() external {

322:     function updateBattleRecord(

354:     function getBattleRecord(uint256 tokenId) external view returns(uint32, uint32, uint32) {

364:     function getCurrentStakingData() external view returns(uint256, uint256, uint256) {

379:     function getNrnDistribution(uint256 roundId_) public view returns(uint256) {

386:     function getUnclaimedNRN(address claimer) public view returns(uint256) {

```
*Github:* [[167](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L167), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L176), [184](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L184), [192](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L192), [201](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L201), [209](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L209), [218](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L218), [226](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L226), [233](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L233), [244](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L244), [270](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L270), [294](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L294), [322](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L322), [354](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L354), [364](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L364), [379](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L379), [386](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L386)]


```solidity
File: src/StakeAtRisk.sol

78:     function setNewRound(uint256 roundId_) external {

93:     function reclaimNRN(uint256 nrnToReclaim, uint256 fighterId, address fighterOwner) external {

115:     function updateAtRiskRecords(

132:     function getStakeAtRisk(uint256 fighterId) external view returns(uint256) {

```
*Github:* [[78](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L78), [93](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L93), [115](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L115), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L132)]


```solidity
File: src/VoltageManager.sol

64:     function transferOwnership(address newOwnerAddress) external {

73:     function adjustAdminAccess(address adminAddress, bool access) external {

82:     function adjustAllowedVoltageSpenders(address allowedVoltageSpender, bool allowed) external {

93:     function useVoltageBattery() public {

105:     function spendVoltage(address spender, uint8 voltageSpent) public {

```
*Github:* [[64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L64), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L73), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L82), [93](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L93), [105](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L105)]


</details>


<a name="NC-12"></a> 
### [NC-12] Contracts should have full test coverage
While 100% code coverage does not guarantee that there are no bugs, it often will catch easy-to-find bugs, and will ensure that there are fewer regressions when the code invariably has to be modified. Furthermore, in order to get full coverage, code authors will often have to re-organize their code so that it is more modular, so that each component can be tested separately, which reduces interdependencies between modules and layers, and makes for code that is easier to reason about and audit.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/)]



<a name="NC-13"></a> 
### [NC-13] Events that mark critical parameter changes should contain both the old and the new value
This should especially be done if the new value is not required to be different from the old value.

<details>
<summary>
There are <b>18</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

272:             emit Locked(tokenId);

274:             emit Unlocked(tokenId);

```
*Github:* [[272](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L272), [274](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L274)]


```solidity
File: src/GameItems.sol

130:           emit Unlocked(tokenId);

132:           emit Locked(tokenId);

174:             emit BoughtItem(msg.sender, tokenId, quantity);

231:           emit Locked(_itemCount);

```
*Github:* [[130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L130), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L132), [174](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L174), [231](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L231)]


```solidity
File: src/MergingPool.sol

165:             emit Claimed(msg.sender, claimIndex);

199:         emit PointsAdded(tokenId, points);

```
*Github:* [[165](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L165), [199](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L199)]


```solidity
File: src/Neuron.sol

144:         emit TokensClaimed(msg.sender, amount);

```
*Github:* [[144](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L144)]


```solidity
File: src/RankedBattle.sol

263:             emit Staked(msg.sender, amount);

288:             emit Unstaked(msg.sender, amount);

309:             emit Claimed(msg.sender, claimableNRN);

470:                 emit PointsChanged(tokenId, points, true);

489:                     emit PointsChanged(tokenId, points, false);

```
*Github:* [[263](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L263), [288](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L288), [309](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L309), [470](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L470), [489](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L489)]


```solidity
File: src/StakeAtRisk.sol

105:             emit ReclaimedStake(fighterId, nrnToReclaim);

126:         emit IncreasedStakeAtRisk(fighterId, nrnToPlaceAtRisk);

```
*Github:* [[105](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L105), [126](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L126)]


```solidity
File: src/VoltageManager.sol

98:         emit VoltageRemaining(msg.sender, ownerVoltage[msg.sender]);

111:         emit VoltageRemaining(spender, ownerVoltage[spender]);

```
*Github:* [[98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L98), [111](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L111)]


</details>


<a name="NC-14"></a> 
### [NC-14] Custom errors should be used rather than `revert()`/`require()`
Custom errors are available from solidity version 0.8.4. Custom errors are more easily processed in try-catch blocks, and are easier to re-use and maintain.

<details>
<summary>
There are <b>17</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

133:         require(probabilities.length == 6, "Invalid number of attribute arrays");

```
*Github:* [[133](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L133)]


```solidity
File: src/FighterFarm.sol

373:         require(_neuronInstance.balanceOf(msg.sender) >= rerollCost, "Not enough NRN for reroll");

```
*Github:* [[373](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L373)]


```solidity
File: src/GameItems.sol

150:         require(_neuronInstance.balanceOf(msg.sender) >= price, "Not enough NRN for purchase");

```
*Github:* [[150](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L150)]


```solidity
File: src/MergingPool.sol

120:         require(winners.length == winnersPerPeriod, "Incorrect number of winners");

121:         require(!isSelectionComplete[roundId], "Winners are already selected");

196:         require(msg.sender == _rankedBattleAddress, "Not Ranked Battle contract address");

```
*Github:* [[120](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L120), [121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L121), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L196)]


```solidity
File: src/Neuron.sol

156:         require(totalSupply() + amount < MAX_SUPPLY, "Trying to mint more than the max supply");

157:         require(hasRole(MINTER_ROLE, msg.sender), "ERC20: must have minter role to mint");

```
*Github:* [[156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L156), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L157)]


```solidity
File: src/RankedBattle.sol

245:         require(amount > 0, "Amount cannot be 0");

246:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

247:         require(_neuronInstance.balanceOf(msg.sender) >= amount, "Stake amount exceeds balance");

248:         require(hasUnstaked[tokenId][roundId] == false, "Cannot add stake after unstaking this round");

271:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

295:         require(numRoundsClaimed[msg.sender] < roundId, "Already claimed NRNs for this period");

```
*Github:* [[245](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L245), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L246), [247](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L247), [248](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L248), [271](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L271), [295](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L295)]


```solidity
File: src/StakeAtRisk.sol

79:         require(msg.sender == _rankedBattleAddress, "Not authorized to set new round");

94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

122:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L79), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L122)]


</details>


<a name="NC-15"></a> 
### [NC-15] Do not use underscore at the end of variable name
Adopting a consistent and clear naming convention enhances code readability and maintainability. In Solidity, appending an underscore at the end of a variable name is unconventional and can lead to confusion. It is generally advisable to stick to accepted naming practices to promote ease of understanding and use.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

104:     constructor(address ownerAddress, address delegatedAddress, address treasuryAddress_)

```
*Github:* [[104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L104)]


```solidity
File: src/GameItems.sol

95:     constructor(address ownerAddress, address treasuryAddress_) ERC1155("https://ipfs.io/ipfs/") {

209:         string memory name_,

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L95), [209](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L209)]


```solidity
File: src/Neuron.sol

68:     constructor(address ownerAddress, address treasuryAddress_, address contributorAddress)

```
*Github:* [[68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L68)]


```solidity
File: src/RankedBattle.sol

226:     function setBpsLostPerLoss(uint256 bpsLostPerLoss_) external {

379:     function getNrnDistribution(uint256 roundId_) public view returns(uint256) {

527:       uint256 stakingFactor_ = FixedPointMathLib.sqrt(

```
*Github:* [[226](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L226), [379](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L379), [527](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L527)]


```solidity
File: src/StakeAtRisk.sol

61:         address treasuryAddress_,

78:     function setNewRound(uint256 roundId_) external {

```
*Github:* [[61](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L61), [78](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L78)]



<a name="NC-16"></a> 
### [NC-16] Duplicated `require()`/`revert()` checks should be refactored
Refactoring duplicate `require()`/`revert()` checks into a modifier or function can make the code more concise, readable and maintainable, and less likely to make errors or omissions when modifying the `require()` or `revert()`.

<details>
<summary>
There are <b>21</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit duplicated on line 69
62:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 145
132:         require(msg.sender == _ownerAddress);

```
*Github:* [[62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L62), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L132)]


```solidity
File: src/FighterFarm.sol

/// @audit duplicated on line 130
121:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 148
140:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 164
156:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 371
290:         require(msg.sender == ownerOf(tokenId));

/// @audit duplicated on line 363
346:         require(_ableToTransfer(tokenId, to));

```
*Github:* [[121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L121), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L140), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L156), [290](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L290), [346](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L346)]


```solidity
File: src/GameItems.sol

/// @audit duplicated on line 118
109:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 140
127:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 195
186:         require(isAdmin[msg.sender]);

```
*Github:* [[109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L109), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L127), [186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L186)]


```solidity
File: src/MergingPool.sol

/// @audit duplicated on line 99
90:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 119
107:         require(isAdmin[msg.sender]);

```
*Github:* [[90](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L90), [107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L107)]


```solidity
File: src/Neuron.sol

/// @audit duplicated on line 94
86:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 110
102:         require(msg.sender == _ownerAddress);

```
*Github:* [[86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L86), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L102)]


```solidity
File: src/RankedBattle.sol

/// @audit duplicated on line 177
168:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 193
185:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 210
202:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 227
219:         require(isAdmin[msg.sender]);

/// @audit duplicated on line 271
246:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

```
*Github:* [[168](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L168), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L185), [202](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L202), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L219), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L246)]


```solidity
File: src/StakeAtRisk.sol

/// @audit duplicated on line 122
94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94)]


```solidity
File: src/VoltageManager.sol

/// @audit duplicated on line 74
65:         require(msg.sender == _ownerAddress);

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L65)]


</details>


<a name="NC-17"></a> 
### [NC-17] `else` block not required
One level of nesting can be removed by not having an `else` block when the `if`-block always jumps at the end. For example:
```solidity
if (condition) {
	body1...
	return x;
} else {
	body2...
}
```
can be changed to:
```solidity
if (condition) {
	body1...
	return x;
}
body2...
```

*There is one instance of this issue:*
```solidity
File: src/AiArenaHelper.sol

93:         if (dendroidBool) {
                return FighterOps.FighterPhysicalAttributes(99, 99, 99, 99, 99, 99);
            } else {

```
*Github:* [[93](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L93)]



<a name="NC-18"></a> 
### [NC-18] Empty bytes check is missing
Passing empty bytes to a function can cause unexpected behavior, such as certain operations failing, producing incorrect results, or wasting gas. It is recommended to check that all byte parameters are not empty.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit missing empty check for `signature`
191:     function claimFighters(
             uint8[2] calldata numToMint,
             bytes calldata signature,
             string[] calldata modelHashes,
             string[] calldata modelTypes
         ) 
             external 
         {

```
*Github:* [[191](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L191)]


```solidity
File: src/GameItems.sol

/// @audit missing empty check for `data`
291:     function safeTransferFrom(
             address from, 
             address to, 
             uint256 tokenId,
             uint256 amount,
             bytes memory data
         ) 
             public 
             override(ERC1155)
         {

```
*Github:* [[291](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L291)]



<a name="NC-19"></a> 
### [NC-19] Enable IR-based code generation
The IR-based code generator was introduced with an aim to not only allow code generation to be more transparent and auditable but also to enable more powerful optimization passes that span across functions. You can enable it on the command line using `--via-ir` or with the option `{"viaIR": true}`. This will take longer to compile, but you can just simple test it before deploying and if you got a better benchmark then you can add --via-ir to your deploy command More on: https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/)]



<a name="NC-20"></a> 
### [NC-20] Enum values should be used instead of constant array indexes
Create a commented enum value to use instead of constant array indexes, this makes the code far easier to understand.

<details>
<summary>
There are <b>23</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

49:             attributeProbabilities[0][attributes[i]] = probabilities[i];

113:                 finalAttributeProbabilityIndexes[0],

114:                 finalAttributeProbabilityIndexes[1],

115:                 finalAttributeProbabilityIndexes[2],

116:                 finalAttributeProbabilityIndexes[3],

117:                 finalAttributeProbabilityIndexes[4],

118:                 finalAttributeProbabilityIndexes[5]

```
*Github:* [[49](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L49), [113](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L113), [114](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L114), [115](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L115), [116](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L116), [117](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L117), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L118)]


```solidity
File: src/FighterFarm.sol

110:         numElements[0] = 3;

201:             numToMint[0], 

202:             numToMint[1],

203:             nftsClaimed[msg.sender][0],

204:             nftsClaimed[msg.sender][1]

207:         uint16 totalToMint = uint16(numToMint[0] + numToMint[1]);

207:         uint16 totalToMint = uint16(numToMint[0] + numToMint[1]);

209:         nftsClaimed[msg.sender][0] += numToMint[0];

209:         nftsClaimed[msg.sender][0] += numToMint[0];

210:         nftsClaimed[msg.sender][1] += numToMint[1];

210:         nftsClaimed[msg.sender][1] += numToMint[1];

217:                 i < numToMint[0] ? 0 : 1,

499:         if (customAttributes[0] == 100) {

503:             element = customAttributes[0];

504:             weight = customAttributes[1];

```
*Github:* [[110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L110), [201](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L201), [202](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L202), [203](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L203), [204](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L204), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L207), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L207), [209](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L209), [209](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L209), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L210), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L210), [217](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L217), [499](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L499), [503](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L503), [504](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L504)]


```solidity
File: src/RankedBattle.sol

157:         rankedNrnDistribution[0] = 5000 * 10**18;

```
*Github:* [[157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L157)]


</details>


<a name="NC-21"></a> 
### [NC-21] Events are emitted without the sender information
When an action is triggered based on a user's action, not being able to filter based on who triggered the action makes event processing a lot more cumbersome. Including the `msg.sender` the events of these types of action will make events much more useful to end users, especially when `msg.sender` is not `tx.origin`.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/MergingPool.sol

199:         emit PointsAdded(tokenId, points);

```
*Github:* [[199](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L199)]


```solidity
File: src/StakeAtRisk.sol

126:         emit IncreasedStakeAtRisk(fighterId, nrnToPlaceAtRisk);

```
*Github:* [[126](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L126)]


```solidity
File: src/VoltageManager.sol

111:         emit VoltageRemaining(spender, ownerVoltage[spender]);

```
*Github:* [[111](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L111)]



<a name="NC-22"></a> 
### [NC-22] Events may be emitted out of order due to reentrancy
Ensure that events follow the best practice of check-effects-interaction, and are emitted before external calls.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/GameItems.sol

/// @audit `.balanceOf(...)` is called on line 150
/// @audit `.approveSpender(...)` is called on line 163
/// @audit `.transferFrom(...)` is called on line 164
174:             emit BoughtItem(msg.sender, tokenId, quantity);

```
*Github:* [[174](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L174)]


```solidity
File: src/MergingPool.sol

/// @audit `.mintFromMergingPool(...)` is called on line 154
165:             emit Claimed(msg.sender, claimIndex);

```
*Github:* [[165](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L165)]


```solidity
File: src/RankedBattle.sol

/// @audit `.ownerOf(...)` is called on line 246
/// @audit `.balanceOf(...)` is called on line 247
/// @audit `.approveStaker(...)` is called on line 250
/// @audit `.transferFrom(...)` is called on line 251
/// @audit `.updateFighterStaking(...)` is called on line 254
/// @audit `.getStakeAtRisk(...)` is called on line 260
263:             emit Staked(msg.sender, amount);

/// @audit `.ownerOf(...)` is called on line 271
/// @audit `.getStakeAtRisk(...)` is called on line 279
/// @audit `.transfer(...)` is called on line 283
/// @audit `.updateFighterStaking(...)` is called on line 286
288:             emit Unstaked(msg.sender, amount);

/// @audit `.mint(...)` is called on line 308
309:             emit Claimed(msg.sender, claimableNRN);

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
470:                 emit PointsChanged(tokenId, points, true);

/// @audit `.getStakeAtRisk(...)` is called on line 430
/// @audit `.addPoints(...)` is called on line 451
/// @audit `.reclaimNRN(...)` is called on line 461
489:                     emit PointsChanged(tokenId, points, false);

```
*Github:* [[263](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L263), [288](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L288), [309](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L309), [470](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L470), [489](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L489)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `.transfer(...)` is called on line 100
105:             emit ReclaimedStake(fighterId, nrnToReclaim);

```
*Github:* [[105](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L105)]


```solidity
File: src/VoltageManager.sol

/// @audit `.balanceOf(...)` is called on line 95
/// @audit `.burn(...)` is called on line 96
98:         emit VoltageRemaining(msg.sender, ownerVoltage[msg.sender]);

```
*Github:* [[98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L98)]



<a name="NC-23"></a> 
### [NC-23] Functions with array parameters should have length checks in place

*There are <b>5</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit `numToMint`
191:     function claimFighters(

/// @audit `iconsTypes`
233:     function redeemMintPass(

/// @audit `customAttributes`
313:     function mintFromMergingPool(

/// @audit `customAttributes`
484:     function _createNewFighter(

```
*Github:* [[191](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L191), [233](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L233), [313](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L313), [484](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L484)]


```solidity
File: src/MergingPool.sol

/// @audit `modelURIs`
/// @audit `modelTypes`
/// @audit `customAttributes`
139:     function claimRewards(

```
*Github:* [[139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L139)]



<a name="NC-24"></a> 
### [NC-24] High cyclomatic complexity
Consider breaking down these blocks into more manageable units, by splitting things into utility functions, by reducing nesting, and by using early returns

*There is one instance of this issue:*
```solidity
File: src/RankedBattle.sol

/// @audit Number of blocks: 14
416:     function _addResultPoints(

```
*Github:* [[416](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L416)]



<a name="NC-25"></a> 
### [NC-25] Import declarations should import specific identifiers, rather than the whole file
Using import declarations of the form `import {<identifier_name>} from "some/file.sol"` avoids polluting the symbol namespace making flattened files smaller, and speeds up compilation (but does not save any gas).

*There are <b>5</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

9: import "@openzeppelin/contracts/token/ERC721/ERC721.sol";

10: import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L9), [10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L10)]


```solidity
File: src/GameItems.sol

5: import "@openzeppelin/contracts/token/ERC1155/ERC1155.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L5)]


```solidity
File: src/Neuron.sol

4: import "@openzeppelin/contracts/token/ERC20/ERC20.sol";

5: import "@openzeppelin/contracts/access/AccessControl.sol";

```
*Github:* [[4](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L4), [5](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L5)]



<a name="NC-26"></a> 
### [NC-26] Imports should use double quotes rather than single quotes

*There is one instance of this issue:*
```solidity
File: src/RankedBattle.sol

9: import { FixedPointMathLib } from './FixedPointMathLib.sol';

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L9)]



<a name="NC-27"></a> 
### [NC-27] Inconsistent spacing in comments
Some lines use `// x` and some use `//x`. The instances below point out the usages that don't follow the majority, within each file

<details>
<summary>
There are <b>54</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

14:     //////////////////////////////////////////////////////////////*/

27:     //////////////////////////////////////////////////////////////*/    

37:     //////////////////////////////////////////////////////////////*/

56:     //////////////////////////////////////////////////////////////*/

125:     //////////////////////////////////////////////////////////////*/

```
*Github:* [[14](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L14), [27](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L27), [37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L37), [56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L56), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L125)]


```solidity
File: src/FighterFarm.sol

20:     //////////////////////////////////////////////////////////////*/

30:     //////////////////////////////////////////////////////////////*/

73:     //////////////////////////////////////////////////////////////*/

98:     //////////////////////////////////////////////////////////////*/

115:     //////////////////////////////////////////////////////////////*/

305:     //////////////////////////////////////////////////////////////*/

441:     //////////////////////////////////////////////////////////////*/

456:     //////////////////////////////////////////////////////////////*/

```
*Github:* [[20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L20), [30](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L30), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L73), [98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L98), [115](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L115), [305](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L305), [441](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L441), [456](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L456)]


```solidity
File: src/GameItems.sol

14:     //////////////////////////////////////////////////////////////*/

32:     //////////////////////////////////////////////////////////////*/

46:     //////////////////////////////////////////////////////////////*/

71:     //////////////////////////////////////////////////////////////*/ 

90:     //////////////////////////////////////////////////////////////*/

103:     //////////////////////////////////////////////////////////////*/    

180:     //////////////////////////////////////////////////////////////*/    

307:     //////////////////////////////////////////////////////////////*/    

```
*Github:* [[14](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L14), [32](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L32), [46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L46), [71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L71), [90](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L90), [103](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L103), [180](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L180), [307](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L307)]


```solidity
File: src/MergingPool.sol

13:     //////////////////////////////////////////////////////////////*/

23:     //////////////////////////////////////////////////////////////*/

45:     //////////////////////////////////////////////////////////////*/

64:     //////////////////////////////////////////////////////////////*/

84:     //////////////////////////////////////////////////////////////*/

189:     //////////////////////////////////////////////////////////////*/    

```
*Github:* [[13](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L13), [23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L23), [45](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L45), [64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L64), [84](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L84), [189](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L189)]


```solidity
File: src/Neuron.sol

15:     //////////////////////////////////////////////////////////////*/

25:     //////////////////////////////////////////////////////////////*/

53:     //////////////////////////////////////////////////////////////*/

60:     //////////////////////////////////////////////////////////////*/

80:     //////////////////////////////////////////////////////////////*/

149:     //////////////////////////////////////////////////////////////*/

```
*Github:* [[15](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L15), [25](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L25), [53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L53), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L60), [80](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L80), [149](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L149)]


```solidity
File: src/RankedBattle.sol

23:     //////////////////////////////////////////////////////////////*/

39:     //////////////////////////////////////////////////////////////*/

50:     //////////////////////////////////////////////////////////////*/

79:     //////////////////////////////////////////////////////////////*/ 

98:     //////////////////////////////////////////////////////////////*/

138:     //////////////////////////////////////////////////////////////*/

162:     //////////////////////////////////////////////////////////////*/

374:     //////////////////////////////////////////////////////////////*/    

401:     //////////////////////////////////////////////////////////////*/

```
*Github:* [[23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L23), [39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L39), [50](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L50), [79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L79), [98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L98), [138](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L138), [162](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L162), [374](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L374), [401](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L401)]


```solidity
File: src/StakeAtRisk.sol

14:     //////////////////////////////////////////////////////////////*/

24:     //////////////////////////////////////////////////////////////*/

40:     //////////////////////////////////////////////////////////////*/

53:     //////////////////////////////////////////////////////////////*/

72:     //////////////////////////////////////////////////////////////*/

138:     //////////////////////////////////////////////////////////////*/    

```
*Github:* [[14](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L14), [24](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L24), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L40), [53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L53), [72](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L72), [138](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L138)]


```solidity
File: src/VoltageManager.sol

13:     //////////////////////////////////////////////////////////////*/

20:     //////////////////////////////////////////////////////////////*/

30:     //////////////////////////////////////////////////////////////*/

46:     //////////////////////////////////////////////////////////////*/

59:     //////////////////////////////////////////////////////////////*/

89:     //////////////////////////////////////////////////////////////*/    

```
*Github:* [[13](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L13), [20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L20), [30](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L30), [46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L46), [59](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L59), [89](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L89)]


</details>


<a name="NC-28"></a> 
### [NC-28] It is best practice to use linear inheritance
In Solidity, complex inheritance structures can obfuscate code understanding, introducing potential security risks. Multiple inheritance, especially with overlapping function names or state variables, can cause unintentional overrides or ambiguous behavior. 

Resolution: Strive for linear and simple inheritance chains. Avoid diamond or circular inheritance patterns. Clearly document the purpose and relationships of base contracts, ensuring that overrides are intentional. Tools like Remix or Hardhat can visualize inheritance chains, assisting in verification. Keeping inheritance streamlined aids in better code readability, reduces potential errors, and ensures smoother audits and upgrades.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]


```solidity
File: src/Neuron.sol

11: contract Neuron is ERC20, AccessControl {

```
*Github:* [[11](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L11)]



<a name="NC-29"></a> 
### [NC-29] Large or complicated code bases should implement invariant tests
This includes: large code bases, or code with lots of inline-assembly, complicated math, or complicated interactions between multiple contracts. Invariant fuzzers such as Echidna require the test writer to come up with invariants which should not be violated under any circumstances, and the fuzzer tests various inputs and function calls to ensure that the invariants always hold. Even code with 100% code coverage can still have bugs due to the order of the operations a user performs, and invariant fuzzers may help significantly.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/)]



<a name="NC-30"></a> 
### [NC-30] Large numeric literals should use underscores for readability
Large hardcoded numbers in code can be difficult to read. Consider using underscores for number literals to improve readability (e.g `1234567` -> `1_234_567`). Consider using an underscore for every third digit from the right.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

39:     uint256 public rerollCost = 1000 * 10**18;    

```
*Github:* [[39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L39)]


```solidity
File: src/RankedBattle.sol

157:         rankedNrnDistribution[0] = 5000 * 10**18;

```
*Github:* [[157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L157)]



<a name="NC-31"></a> 
### [NC-31] Long functions should be refactored into multiple, smaller, functions

*There is one instance of this issue:*
```solidity
File: src/RankedBattle.sol

/// @audit 84 lines
416:     function _addResultPoints(
             uint8 battleResult, 
             uint256 tokenId, 
             uint256 eloFactor, 
             uint256 mergingPortion,
             address fighterOwner
         ) 
             private 
         {

```
*Github:* [[416](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L416)]



<a name="NC-32"></a> 
### [NC-32] Magic numbers should be replaced with constants
Magic numbers are hard-coded values in code that can make it difficult for developers and maintainers to understand the code, and can also cause confusion or errors. To improve the readability and maintainability of code, it is recommended to replace magic numbers with constants that have good readability.

<details>
<summary>
There are <b>45</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

// @audit `99`
94:             return FighterOps.FighterPhysicalAttributes(99, 99, 99, 99, 99, 99);

// @audit `99`
94:             return FighterOps.FighterPhysicalAttributes(99, 99, 99, 99, 99, 99);

// @audit `99`
94:             return FighterOps.FighterPhysicalAttributes(99, 99, 99, 99, 99, 99);

// @audit `99`
94:             return FighterOps.FighterPhysicalAttributes(99, 99, 99, 99, 99, 99);

// @audit `99`
94:             return FighterOps.FighterPhysicalAttributes(99, 99, 99, 99, 99, 99);

// @audit `99`
94:             return FighterOps.FighterPhysicalAttributes(99, 99, 99, 99, 99, 99);

// @audit `2`
101:                   i == 0 && iconsType == 2 || // Custom icons head (beta helmet)

// @audit `4`
103:                   i == 4 && iconsType == 3 // Custom icons hands (bowling ball)

// @audit `3`
103:                   i == 4 && iconsType == 3 // Custom icons hands (bowling ball)

// @audit `50`
105:                     finalAttributeProbabilityIndexes[i] = 50;

// @audit `100`
107:                     uint256 rarityRank = (dna / attributeToDnaDivisor[attributes[i]]) % 100;

// @audit `2`
115:                 finalAttributeProbabilityIndexes[2],

// @audit `3`
116:                 finalAttributeProbabilityIndexes[3],

// @audit `4`
117:                 finalAttributeProbabilityIndexes[4],

// @audit `5`
118:                 finalAttributeProbabilityIndexes[5]

// @audit `6`
133:         require(probabilities.length == 6, "Invalid number of attribute arrays");

```
*Github:* [[94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L94), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L94), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L94), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L94), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L94), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L94), [101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L101), [103](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L103), [103](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L103), [105](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L105), [107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L107), [115](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L115), [116](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L116), [117](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L117), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L118), [133](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L133)]


```solidity
File: src/FighterFarm.sol

// @audit `3`
110:         numElements[0] = 3;

// @audit `2`
192:         uint8[2] calldata numToMint,

// @audit `100`
219:                 [uint256(100), uint256(100)]

// @audit `100`
219:                 [uint256(100), uint256(100)]

// @audit `100`
259:                 [uint256(100), uint256(100)]

// @audit `100`
259:                 [uint256(100), uint256(100)]

// @audit `2`
317:         uint256[2] calldata customAttributes

// @audit `6`
428:             uint256[6] memory,

// @audit `31`
471:         uint256 weight = dna % 31 + 65;

// @audit `65`
471:         uint256 weight = dna % 31 + 65;

// @audit `2`
491:         uint256[2] memory customAttributes

// @audit `100`
499:         if (customAttributes[0] == 100) {

```
*Github:* [[110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L110), [192](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L192), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L219), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L219), [259](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L259), [259](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L259), [317](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L317), [428](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L428), [471](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L471), [471](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L471), [491](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L491), [499](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L499)]


```solidity
File: src/MergingPool.sol

// @audit `2`
142:         uint256[2][] calldata customAttributes

```
*Github:* [[142](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L142)]


```solidity
File: src/RankedBattle.sol

// @audit `5000`
157:         rankedNrnDistribution[0] = 5000 * 10**18;

// @audit `10`
157:         rankedNrnDistribution[0] = 5000 * 10**18;

// @audit `18`
157:         rankedNrnDistribution[0] = 5000 * 10**18;

// @audit `10`
220:         rankedNrnDistribution[roundId] = newDistribution * 10**18;

// @audit `18`
220:         rankedNrnDistribution[roundId] = newDistribution * 10**18;

// @audit `100`
332:         require(mergingPortion <= 100);

// @audit `10`
439:         curStakeAtRisk = (bpsLostPerLoss * (amountStaked[tokenId] + stakeAtRisk)) / 10**4;

// @audit `4`
439:         curStakeAtRisk = (bpsLostPerLoss * (amountStaked[tokenId] + stakeAtRisk)) / 10**4;

// @audit `100`
449:             uint256 mergingPoints = (points * mergingPortion) / 100;

// @audit `2`
472:         } else if (battleResult == 2) {

// @audit `2`
510:         } else if (battleResult == 2) {

// @audit `10`
528:           (amountStaked[tokenId] + stakeAtRisk) / 10**18

// @audit `18`
528:           (amountStaked[tokenId] + stakeAtRisk) / 10**18

```
*Github:* [[157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L157), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L157), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L157), [220](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L220), [220](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L220), [332](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L332), [439](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L439), [439](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L439), [449](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L449), [472](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L472), [510](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L510), [528](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L528), [528](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L528)]


```solidity
File: src/VoltageManager.sol

// @audit `100`
94:         require(ownerVoltage[msg.sender] < 100);

// @audit `100`
97:         ownerVoltage[msg.sender] = 100;

// @audit `100`
118:         ownerVoltage[owner] = 100;

```
*Github:* [[94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L94), [97](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L97), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L118)]


</details>


<a name="NC-33"></a> 
### [NC-33] Missing disallow list for `ERC721`
Recently, there has been an increase in the theft of NFTs. These stolen NFTs are then added to platforms where they can be easily converted into liquidity.

Some popular marketplaces(e.g. Opensea), have already taken steps to combat this problem by introducing a disallow list feature. This means that if an NFT is reported as stolen, it won't be listed or sold on their platform. This may increase the centralization of the project, but it can help solve this problem if it is a concern.

*There is one instance of this issue:*
```solidity
File: src/FighterFarm.sol

16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]



<a name="NC-34"></a> 
### [NC-34] Consider moving `msg.sender` checks to `modifier`s
If some functions are only allowed to be called by some specific users, consider using a modifier instead of checking with a require statement, especially if this check is done in multiple functions.

<details>
<summary>
There are <b>62</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

62:         require(msg.sender == _ownerAddress);

69:         require(msg.sender == _ownerAddress);

132:         require(msg.sender == _ownerAddress);

145:         require(msg.sender == _ownerAddress);

```
*Github:* [[62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L62), [69](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L69), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L132), [145](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L145)]


```solidity
File: src/FighterFarm.sol

121:         require(msg.sender == _ownerAddress);

130:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

148:         require(msg.sender == _ownerAddress);

156:         require(msg.sender == _ownerAddress);

164:         require(msg.sender == _ownerAddress);

172:         require(msg.sender == _ownerAddress);

181:         require(msg.sender == _delegatedAddress);

250:             require(msg.sender == _mintpassInstance.ownerOf(mintpassIdsToBurn[i]));

269:         require(hasStakerRole[msg.sender]);

290:         require(msg.sender == ownerOf(tokenId));

321:         require(msg.sender == _mergingPoolAddress);

371:         require(msg.sender == ownerOf(tokenId));

373:         require(_neuronInstance.balanceOf(msg.sender) >= rerollCost, "Not enough NRN for reroll");

```
*Github:* [[121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L121), [130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L130), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L140), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L148), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L156), [164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L164), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L172), [181](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L181), [250](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L250), [269](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L269), [290](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L290), [321](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L321), [371](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L371), [373](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L373)]


```solidity
File: src/GameItems.sol

109:         require(msg.sender == _ownerAddress);

118:         require(msg.sender == _ownerAddress);

127:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

150:         require(_neuronInstance.balanceOf(msg.sender) >= price, "Not enough NRN for purchase");

186:         require(isAdmin[msg.sender]);

195:         require(isAdmin[msg.sender]);

219:         require(isAdmin[msg.sender]);

243:         require(allowedBurningAddresses[msg.sender]);

```
*Github:* [[109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L109), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L118), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L127), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L140), [150](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L150), [186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L186), [195](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L195), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L219), [243](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L243)]


```solidity
File: src/MergingPool.sol

90:         require(msg.sender == _ownerAddress);

99:         require(msg.sender == _ownerAddress);

107:         require(isAdmin[msg.sender]);

119:         require(isAdmin[msg.sender]);

196:         require(msg.sender == _rankedBattleAddress, "Not Ranked Battle contract address");

```
*Github:* [[90](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L90), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L99), [107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L107), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L119), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L196)]


```solidity
File: src/Neuron.sol

86:         require(msg.sender == _ownerAddress);

94:         require(msg.sender == _ownerAddress);

102:         require(msg.sender == _ownerAddress);

110:         require(msg.sender == _ownerAddress);

119:         require(msg.sender == _ownerAddress);

128:         require(isAdmin[msg.sender]);

157:         require(hasRole(MINTER_ROLE, msg.sender), "ERC20: must have minter role to mint");

```
*Github:* [[86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L86), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L94), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L102), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L110), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L119), [128](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L128), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L157)]


```solidity
File: src/RankedBattle.sol

168:         require(msg.sender == _ownerAddress);

177:         require(msg.sender == _ownerAddress);

185:         require(msg.sender == _ownerAddress);

193:         require(msg.sender == _ownerAddress);

202:         require(msg.sender == _ownerAddress);

210:         require(msg.sender == _ownerAddress);

219:         require(isAdmin[msg.sender]);

227:         require(isAdmin[msg.sender]);

234:         require(isAdmin[msg.sender]);

246:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

247:         require(_neuronInstance.balanceOf(msg.sender) >= amount, "Stake amount exceeds balance");

271:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

295:         require(numRoundsClaimed[msg.sender] < roundId, "Already claimed NRNs for this period");

331:         require(msg.sender == _gameServerAddress);

```
*Github:* [[168](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L168), [177](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L177), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L185), [193](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L193), [202](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L202), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L210), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L219), [227](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L227), [234](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L234), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L246), [247](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L247), [271](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L271), [295](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L295), [331](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L331)]


```solidity
File: src/StakeAtRisk.sol

79:         require(msg.sender == _rankedBattleAddress, "Not authorized to set new round");

94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

122:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L79), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L122)]


```solidity
File: src/VoltageManager.sol

65:         require(msg.sender == _ownerAddress);

74:         require(msg.sender == _ownerAddress);

83:         require(isAdmin[msg.sender]);

94:         require(ownerVoltage[msg.sender] < 100);

95:         require(_gameItemsContractInstance.balanceOf(msg.sender, 0) > 0);

106:         require(spender == msg.sender || allowedVoltageSpenders[msg.sender]);

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L65), [74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L74), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L83), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L94), [95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L95), [106](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L106)]


</details>


<a name="NC-35"></a> 
### [NC-35] Named mappings are recommended
[Named mappings](https://docs.soliditylang.org/en/v0.8.18/types.html#mapping-types) (with syntax `mapping(KeyType KeyName? => ValueType ValueName?)`) are recommended.It can make the mapping variables clearer, more readable and easier to maintain.

<details>
<summary>
There are <b>39</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

30:     mapping(uint256 => mapping(string => uint8[])) public attributeProbabilities;

33:     mapping(string => uint8) public attributeToDnaDivisor;

```
*Github:* [[30](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L30), [33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L33)]


```solidity
File: src/FighterFarm.sol

76:     mapping(uint256 => bool) public fighterStaked;

79:     mapping(uint256 => uint8) public numRerolls;

82:     mapping(address => bool) public hasStakerRole;

85:     mapping(uint8 => uint8) public numElements;

88:     mapping(address => mapping(uint8 => uint8)) public nftsClaimed;

91:     mapping(uint256 => uint32) public numTrained;

94:     mapping(uint256 => string) private _tokenURIs;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L76), [79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L79), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L82), [85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L85), [88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L88), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L91), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L94)]


```solidity
File: src/GameItems.sol

74:     mapping(address => mapping(uint256 => uint256)) public allowanceRemaining;

77:     mapping(address => mapping(uint256 => uint256)) public dailyAllowanceReplenishTime;

80:     mapping(address => bool) public allowedBurningAddresses;

83:     mapping(address => bool) public isAdmin;

86:     mapping(uint256 => string) private _tokenURIs;

```
*Github:* [[74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L74), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L77), [80](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L80), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L83), [86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L86)]


```solidity
File: src/MergingPool.sol

48:     mapping(address => uint32) public numRoundsClaimed;

51:     mapping(uint256 => uint256) public fighterPoints;

54:     mapping(uint256 => address[]) public winnerAddresses;    

57:     mapping(uint256 => bool) public isSelectionComplete;

60:     mapping(address => bool) public isAdmin;

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L48), [51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L51), [54](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L54), [57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L57), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L60)]


```solidity
File: src/Neuron.sol

56:     mapping(address => bool) public isAdmin;

```
*Github:* [[56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L56)]


```solidity
File: src/RankedBattle.sol

101:     mapping(address => bool) public isAdmin;

104:     mapping(uint256 => BattleRecord) public fighterBattleRecord;

107:     mapping(address => uint256) public amountClaimed;

110:     mapping(address => uint32) public numRoundsClaimed;

113:     mapping(address => mapping(uint256 => uint256)) public accumulatedPointsPerAddress;

116:     mapping(uint256 => mapping(uint256 => uint256)) public accumulatedPointsPerFighter;

119:     mapping(uint256 => uint256) public totalAccumulatedPoints;

122:     mapping(uint256 => uint256) public rankedNrnDistribution;

125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

128:     mapping(uint256 => uint256) public amountStaked;

131:     mapping(uint256 => uint256) public stakingFactor;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L101), [104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L104), [107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L107), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L110), [113](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L113), [116](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L116), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L119), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L122), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [128](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L128), [131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L131), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/StakeAtRisk.sol

43:     mapping(uint256 => uint256) public totalStakeAtRisk;

46:     mapping(uint256 => mapping(uint256 => uint256)) public stakeAtRisk;

49:     mapping(address => uint256) public amountLost;

```
*Github:* [[43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L43), [46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L46), [49](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L49)]


```solidity
File: src/VoltageManager.sol

33:     mapping(address => bool) public allowedVoltageSpenders;

36:     mapping(address => uint32) public ownerVoltageReplenishTime;

39:     mapping(address => uint8) public ownerVoltage;

42:     mapping(address => bool) public isAdmin;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L33), [36](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L36), [39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L39), [42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L42)]


</details>


<a name="NC-36"></a> 
### [NC-36] Named imports of parent contracts are missing

*There are <b>3</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit `ERC721`
/// @audit `ERC721Enumerable`
16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]


```solidity
File: src/GameItems.sol

/// @audit `ERC1155`
10: contract GameItems is ERC1155 {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L10)]


```solidity
File: src/Neuron.sol

/// @audit `ERC20`
/// @audit `AccessControl`
11: contract Neuron is ERC20, AccessControl {

```
*Github:* [[11](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L11)]



<a name="NC-37"></a> 
### [NC-37] Missing NatSpec `@dev` from contract/event/function/modifier declarations
Some contract definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

<details>
<summary>
There are <b>60</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

10: contract AiArenaHelper {

68:     function addAttributeDivisor(uint8[] memory attributeDivisors) external {

83:     function createPhysicalAttributes(

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L10), [68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L68), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L83)]


```solidity
File: src/FighterFarm.sol

16: contract FighterFarm is ERC721, ERC721Enumerable {

23:     event Locked(uint256 tokenId);

26:     event Unlocked(uint256 tokenId);

104:     constructor(address ownerAddress, address delegatedAddress, address treasuryAddress_)

299:     function doesTokenExist(uint256 tokenId) external view returns (bool) {

370:     function reRoll(uint8 tokenId, uint8 fighterType) public {

395:     function contractURI() public pure returns (string memory) {

402:     function tokenURI(uint256 tokenId) public view override(ERC721) returns (string memory) {

421:     function getAllFighterInfo(

447:     function _beforeTokenTransfer(address from, address to, uint256 tokenId)

462:     function _createFighterBase(

484:     function _createNewFighter(

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16), [23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L23), [26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L26), [104](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L104), [299](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L299), [370](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L370), [395](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L395), [402](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L402), [421](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L421), [447](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L447), [462](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L462), [484](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L484)]


```solidity
File: src/GameItems.sol

10: contract GameItems is ERC1155 {

20:     event BoughtItem(address buyer, uint256 tokenId, uint256 quantity);

24:     event Locked(uint256 tokenId);

28:     event Unlocked(uint256 tokenId);

95:     constructor(address ownerAddress, address treasuryAddress_) ERC1155("https://ipfs.io/ipfs/") {

147:     function mint(uint256 tokenId, uint256 quantity) external {

249:     function contractURI() public pure returns (string memory) {

256:     function uri(uint256 tokenId) public view override returns (string memory) {

268:     function getAllowanceRemaining(address owner, uint256 tokenId) public view returns (uint256) {

279:     function remainingSupply(uint256 tokenId) public view returns (uint256) {

285:     function uniqueTokensOutstanding() public view returns (uint256) {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L10), [20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L20), [24](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L24), [28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L28), [95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L95), [147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L147), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L249), [256](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L256), [268](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L268), [279](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L279), [285](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L285)]


```solidity
File: src/MergingPool.sol

9: contract MergingPool {

16:     event PointsAdded(uint256 tokenId, uint256 points);

19:     event Claimed(address claimer, uint32 amount);

71:     constructor(

172:     function getUnclaimedRewards(address claimer) external view returns(uint256) {

205:     function getFighterPoints(uint256 maxId) public view returns(uint256[] memory) {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L9), [16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L16), [19](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L19), [71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L71), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L172), [205](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L205)]


```solidity
File: src/Neuron.sol

18:     event TokensClaimed(address user, uint256 amount);

21:     event TokensMinted(address user, uint256 amount);    

68:     constructor(address ownerAddress, address treasuryAddress_, address contributorAddress)

138:     function claim(uint256 amount) external {

163:     function burn(uint256 amount) public virtual {

196:     function burnFrom(address account, uint256 amount) public virtual {

```
*Github:* [[18](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L18), [21](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L21), [68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L68), [138](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L138), [163](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L163), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L196)]


```solidity
File: src/RankedBattle.sol

16: contract RankedBattle {

26:     event Staked(address from, uint256 amount);

29:     event Unstaked(address from, uint256 amount);

32:     event Claimed(address claimer, uint256 amount);

35:     event PointsChanged(uint256 tokenId, uint256 points, bool increased);    

146:     constructor(

244:     function stakeNRN(uint256 amount, uint256 tokenId) external {

270:     function unstakeNRN(uint256 amount, uint256 tokenId) external {

354:     function getBattleRecord(uint256 tokenId) external view returns(uint32, uint32, uint32) {

364:     function getCurrentStakingData() external view returns(uint256, uint256, uint256) {

379:     function getNrnDistribution(uint256 roundId_) public view returns(uint256) {

386:     function getUnclaimedNRN(address claimer) public view returns(uint256) {

505:     function _updateRecord(uint256 tokenId, uint8 battleResult) private {

519:     function _getStakingFactor(

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L16), [26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L26), [29](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L29), [32](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L32), [35](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L35), [146](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L146), [244](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L244), [270](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L270), [354](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L354), [364](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L364), [379](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L379), [386](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L386), [505](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L505), [519](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L519)]


```solidity
File: src/StakeAtRisk.sol

10: contract StakeAtRisk {

17:     event ReclaimedStake(uint256 fighterId, uint256 reclaimAmount);

20:     event IncreasedStakeAtRisk(uint256 fighterId, uint256 atRiskAmount);

60:     constructor(

132:     function getStakeAtRisk(uint256 fighterId) external view returns(uint256) {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L10), [17](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L17), [20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L20), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L60), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L132)]


```solidity
File: src/VoltageManager.sol

9: contract VoltageManager {

16:     event VoltageRemaining(address spender, uint8 voltage);  

51:     constructor(address ownerAddress, address gameItemsContractAddress) {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L9), [16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L16), [51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L51)]


</details>


<a name="NC-38"></a> 
### [NC-38] Missing NatSpec `@notice` from contract/event/function/modifier declarations
Some contract definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

41:     constructor(uint8[][] memory probabilities) {

157:     function getAttributeProbabilities(uint256 generation, string memory attribute) 

169:     function dnaToIndex(uint256 generation, uint256 rarityRank, string memory attribute) 

```
*Github:* [[41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L41), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L157), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L169)]



<a name="NC-39"></a> 
### [NC-39] Missing NatSpec `@param` from event/function/modifier declarations
Some event definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

<details>
<summary>
There are <b>18</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit missing @param for `generation`
83:     function createPhysicalAttributes(
            uint256 dna, 
            uint8 generation, 
            uint8 iconsType, 
            bool dendroidBool
        ) 
            external 
            view 
            returns (FighterOps.FighterPhysicalAttributes memory) 
        {

/// @audit missing @param for `generation`
169:     function dnaToIndex(uint256 generation, uint256 rarityRank, string memory attribute) 
             public 
             view 
             returns (uint256 attributeProbabilityIndex) 
         {

```
*Github:* [[83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L83), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L169)]


```solidity
File: src/FighterFarm.sol

23:     event Locked(uint256 tokenId);

26:     event Unlocked(uint256 tokenId);

/// @audit missing @param for `iconsTypes`
233:     function redeemMintPass(
             uint256[] calldata mintpassIdsToBurn,
             uint8[] calldata fighterTypes,
             uint8[] calldata iconsTypes,
             string[] calldata mintPassDnas,
             string[] calldata modelHashes,
             string[] calldata modelTypes
         ) 
             external 
         {

```
*Github:* [[23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L23), [26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L26), [233](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L233)]


```solidity
File: src/GameItems.sol

/// @audit missing @param for `from`
/// @audit missing @param for `to`
/// @audit missing @param for `tokenId`
/// @audit missing @param for `amount`
/// @audit missing @param for `data`
291:     function safeTransferFrom(
             address from, 
             address to, 
             uint256 tokenId,
             uint256 amount,
             bytes memory data
         ) 
             public 
             override(ERC1155)
         {

```
*Github:* [[291](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L291)]


```solidity
File: src/MergingPool.sol

16:     event PointsAdded(uint256 tokenId, uint256 points);

19:     event Claimed(address claimer, uint32 amount);

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L16), [19](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L19)]


```solidity
File: src/Neuron.sol

18:     event TokensClaimed(address user, uint256 amount);

21:     event TokensMinted(address user, uint256 amount);    

```
*Github:* [[18](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L18), [21](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L21)]


```solidity
File: src/RankedBattle.sol

26:     event Staked(address from, uint256 amount);

29:     event Unstaked(address from, uint256 amount);

32:     event Claimed(address claimer, uint256 amount);

35:     event PointsChanged(uint256 tokenId, uint256 points, bool increased);    

```
*Github:* [[26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L26), [29](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L29), [32](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L32), [35](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L35)]


```solidity
File: src/StakeAtRisk.sol

17:     event ReclaimedStake(uint256 fighterId, uint256 reclaimAmount);

20:     event IncreasedStakeAtRisk(uint256 fighterId, uint256 atRiskAmount);

/// @audit missing @param for `fighterOwner`
115:     function updateAtRiskRecords(
             uint256 nrnToPlaceAtRisk, 
             uint256 fighterId, 
             address fighterOwner
         ) 
             external 
         {

```
*Github:* [[17](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L17), [20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L20), [115](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L115)]


```solidity
File: src/VoltageManager.sol

16:     event VoltageRemaining(address spender, uint8 voltage);  

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L16)]


</details>


<a name="NC-40"></a> 
### [NC-40] Missing NatSpec `@return` from function declaration
Some function definitions have an incomplete NatSpec: add a `@return` notation to improve the code documentation.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

299:     function doesTokenExist(uint256 tokenId) external view returns (bool) {

421:     function getAllFighterInfo(
             uint256 tokenId
         )
             public
             view
             returns (
                 address,
                 uint256[6] memory,
                 uint256,
                 uint256,
                 string memory,
                 string memory,
                 uint16
             )
         {

```
*Github:* [[299](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L299), [421](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L421)]


```solidity
File: src/StakeAtRisk.sol

142:     function _sweepLostStake() private returns(bool) {

```
*Github:* [[142](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L142)]



<a name="NC-41"></a> 
### [NC-41] There is no need to initialize variables with 0
Since the variables are automatically set to 0 when created, it is redundant to initialize it with 0 again.

<details>
<summary>
There are <b>26</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

48:         for (uint8 i = 0; i < attributesLength; i++) {

73:         for (uint8 i = 0; i < attributesLength; i++) {

99:             for (uint8 i = 0; i < attributesLength; i++) {

136:         for (uint8 i = 0; i < attributesLength; i++) {

148:         for (uint8 i = 0; i < attributesLength; i++) {

176:         uint256 cumProb = 0;

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L176), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

211:         for (uint16 i = 0; i < totalToMint; i++) {

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/GameItems.sol

64:     uint256 _itemCount = 0;    

```
*Github:* [[64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L64)]


```solidity
File: src/MergingPool.sol

29:     uint256 public roundId = 0;

32:     uint256 public totalPoints = 0;    

124:         for (uint256 i = 0; i < winnersLength; i++) {

147:         uint32 claimIndex = 0;

152:             for (uint32 j = 0; j < winnersLength; j++) {

174:         uint256 numRewards = 0;

178:             for (uint32 j = 0; j < winnersLength; j++) {

207:         for (uint256 i = 0; i < maxId; i++) {

```
*Github:* [[29](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L29), [32](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L32), [124](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L124), [147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L147), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [174](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L174), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L207)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131)]


```solidity
File: src/RankedBattle.sol

56:     uint256 public totalBattles = 0;

59:     uint256 public globalStakedAmount = 0;

62:     uint256 public roundId = 0;

296:         uint256 claimableNRN = 0;

387:         uint256 claimableNRN = 0;

427:         uint256 points = 0;

```
*Github:* [[56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L56), [59](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L59), [62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L62), [296](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L296), [387](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L387), [427](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L427)]


```solidity
File: src/StakeAtRisk.sol

27:     uint256 public roundId = 0;    

```
*Github:* [[27](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L27)]


</details>


<a name="NC-42"></a> 
### [NC-42] Off-by-one timestamp error
In Solidity, using `>=` or `<=` to compare against `block.timestamp` (alias now) may introduce off-by-one errors due to the fact that `block.timestamp` is only updated once per block and its value remains constant throughout the block's execution. If an operation happens at the exact second when `block.timestamp` changes, it could result in unexpected behavior. To avoid this, it's safer to use strict inequality operators (`>` or `<`). For instance, if a condition should only be met after a certain time, use `block.timestamp > time` rather than `block.timestamp >= time`. This way, potential off-by-one errors due to the exact timing of block mining are mitigated, leading to safer, more predictable contract behavior.

*There are <b>5</b> instances of this issue:*
```solidity
File: src/GameItems.sol

159:             dailyAllowanceReplenishTime[msg.sender][tokenId] <= block.timestamp || 

166:             if (dailyAllowanceReplenishTime[msg.sender][tokenId] <= block.timestamp) {

270:         if (dailyAllowanceReplenishTime[owner][tokenId] <= block.timestamp) {

```
*Github:* [[159](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L159), [166](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L166), [270](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L270)]


```solidity
File: src/RankedBattle.sol

336:             _voltageManagerInstance.ownerVoltageReplenishTime(fighterOwner) <= block.timestamp || 

```
*Github:* [[336](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L336)]


```solidity
File: src/VoltageManager.sol

107:         if (ownerVoltageReplenishTime[spender] <= block.timestamp) {

```
*Github:* [[107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L107)]



<a name="NC-43"></a> 
### [NC-43] Put all system-wide constants in one file
Putting all the system-wide constants in a single file improves code readability, makes it easier to understand the basic configuration and limitations of the system, and makes maintenance easier.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

33:     uint8 public constant MAX_FIGHTERS_ALLOWED = 10;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L33)]


```solidity
File: src/Neuron.sol

28:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

31:     bytes32 public constant SPENDER_ROLE = keccak256("SPENDER_ROLE");

34:     bytes32 public constant STAKER_ROLE = keccak256("STAKER_ROLE");

37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

```
*Github:* [[28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L28), [31](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L31), [34](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L34), [37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43)]


```solidity
File: src/RankedBattle.sol

53:     uint8 public constant VOLTAGE_COST = 10;

```
*Github:* [[53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L53)]



<a name="NC-44"></a> 
### [NC-44] Redundant `return` statement in a function with named return variables
Because the return variable (or its default value) has been assigned, explicit return at the end of the function is unnecessary, as it is returned automatically.

*There is one instance of this issue:*
```solidity
File: src/AiArenaHelper.sol

169:     function dnaToIndex(uint256 generation, uint256 rarityRank, string memory attribute) 

```
*Github:* [[169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L169)]



<a name="NC-45"></a> 
### [NC-45] Setters should prevent re-setting the same value
Not only is wasteful in terms of gas, but this is especially problematic when an event is emitted and the old and new values set are the same, as listeners might not expect this kind of scenario.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

173:         _mergingPoolAddress = mergingPoolAddress;

182:         _tokenURIs[tokenId] = newTokenURI;

270:         fighterStaked[tokenId] = stakingStatus;

```
*Github:* [[173](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L173), [182](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L182), [270](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L270)]


```solidity
File: src/GameItems.sol

196:         _tokenURIs[tokenId] = _tokenURI;

```
*Github:* [[196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L196)]


```solidity
File: src/MergingPool.sol

108:         winnersPerPeriod = newWinnersPerPeriodAmount;

```
*Github:* [[108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L108)]


```solidity
File: src/RankedBattle.sol

186:         _gameServerAddress = gameServerAddress;

194:         _stakeAtRiskAddress = stakeAtRiskAddress;

228:         bpsLostPerLoss = bpsLostPerLoss_;

```
*Github:* [[186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L186), [194](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L194), [228](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L228)]


```solidity
File: src/StakeAtRisk.sol

82:             roundId = roundId_;

```
*Github:* [[82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L82)]



<a name="NC-46"></a> 
### [NC-46] State variables should include comments
Consider adding some comments on critical state variables to explain what they are supposed to do: this will help for future code reviews.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

17:     string[] public attributes = ["head", "eyes", "mouth", "body", "hands", "feet"];

20:     uint8[] public defaultAttributeDivisor = [2, 3, 5, 7, 11, 13];

23:     address _ownerAddress;

```
*Github:* [[17](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L17), [20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L20), [23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L23)]



<a name="NC-47"></a> 
### [NC-47] Typos

*There is one instance of this issue:*
```solidity
File: src/GameItems.sol

/// @audit `recieves`
57:     /// @notice The address that recieves funds of purchased game items.

```
*Github:* [[57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L57)]



<a name="NC-48"></a> 
### [NC-48] Unused `event` definition
Note that there may be cases where an event superficially appears to be used, but this is only because there are multiple definitions of the event in different files. In such cases, the event definition should be moved into a separate file. The instances below are the unused definitions.

*There is one instance of this issue:*
```solidity
File: src/Neuron.sol

21:     event TokensMinted(address user, uint256 amount);    

```
*Github:* [[21](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L21)]



<a name="NC-49"></a> 
### [NC-49] Consider using `delete` rather than assigning zero/false to clear values
The `delete` keyword more closely matches the semantics of what is being done, and draws more attention to the changing of state, which may lead to a more thorough audit of its associated logic.

*There is one instance of this issue:*
```solidity
File: src/MergingPool.sol

127:             fighterPoints[winners[i]] = 0;

```
*Github:* [[127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L127)]



<a name="NC-50"></a> 
### [NC-50] Solidity compiler version is not fixed
To prevent the actual contracts deployed from behaving differently depending on the compiler version, it is recommended to use a fixed solidity version.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

3: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[3](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L3)]


```solidity
File: src/FighterFarm.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L2)]


```solidity
File: src/GameItems.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L2)]


```solidity
File: src/MergingPool.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L2)]


```solidity
File: src/Neuron.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L2)]


```solidity
File: src/RankedBattle.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L2)]


```solidity
File: src/StakeAtRisk.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L2)]


```solidity
File: src/VoltageManager.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L2)]



<a name="NC-51"></a> 
### [NC-51] Expressions for constant values should use `immutable` rather than `constant`
While it doesn't save any gas because the compiler knows that developers often make this mistake, it's still best to use the right tool for the task at hand. There is a difference between `constant` variables and `immutable` variables, and they should each be used in their appropriate contexts. `constants` should be used for literal values written into the code, and `immutable` variables should be used for expressions, or values calculated in, or passed into the constructor.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

33:     uint8 public constant MAX_FIGHTERS_ALLOWED = 10;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L33)]


```solidity
File: src/Neuron.sol

28:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

31:     bytes32 public constant SPENDER_ROLE = keccak256("SPENDER_ROLE");

34:     bytes32 public constant STAKER_ROLE = keccak256("STAKER_ROLE");

37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

```
*Github:* [[28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L28), [31](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L31), [34](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L34), [37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43)]


```solidity
File: src/RankedBattle.sol

53:     uint8 public constant VOLTAGE_COST = 10;

```
*Github:* [[53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L53)]



<a name="NC-52"></a> 
### [NC-52] Use `@inheritdoc` for overridden functions

*There is one instance of this issue:*
```solidity
File: src/GameItems.sol

256:     function uri(uint256 tokenId) public view override returns (string memory) {

```
*Github:* [[256](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L256)]



<a name="NC-53"></a> 
### [NC-53] Upgrade `openzeppelin` to the latest version (`5.0.1`)
These contracts import contracts from openzeppelin contracts but they are not using the latest version. For more information, please visit: [OpenZeppelin GitHub Releases](https://github.com/OpenZeppelin/openzeppelin-contracts/releases) It is recommended to always use the latest version to take advantage of updates and security fixes.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/)]



<a name="NC-54"></a> 
### [NC-54] Use the latest solidity version for deployment (`0.8.24`)
Upgrading to a newer Solidity release can optimize gas usage, take advantage of new features and improve overall contract efficiency. Where possible, based on compatibility requirements, it is recommended to use newer/latest solidity version to take advantage of the latest optimizations and features.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

3: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[3](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L3)]


```solidity
File: src/FighterFarm.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L2)]


```solidity
File: src/GameItems.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L2)]


```solidity
File: src/MergingPool.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L2)]


```solidity
File: src/Neuron.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L2)]


```solidity
File: src/RankedBattle.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L2)]


```solidity
File: src/StakeAtRisk.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L2)]


```solidity
File: src/VoltageManager.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L2)]



<a name="NC-55"></a> 
### [NC-55] Use the Modern Upgradeable Contract Paradigm
Modern smart contract development often employs upgradeable contract structures, utilizing proxy patterns like OpenZeppelin’s Upgradeable Contracts. This paradigm separates logic and state, allowing developers to amend and enhance the contract's functionality without altering its state or the deployed contract address. Transitioning to this approach enhances long-term maintainability.

Resolution: Adopt a well-established proxy pattern for upgradeability, ensuring proper initialization and employing transparent proxies to mitigate potential risks. Embrace comprehensive testing and audit practices, particularly when updating contract logic, to ensure state consistency and security are preserved across upgrades. This ensures your contract remains robust and adaptable to future requirements.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

10: contract AiArenaHelper {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L10)]


```solidity
File: src/FighterFarm.sol

16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]


```solidity
File: src/GameItems.sol

10: contract GameItems is ERC1155 {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L10)]


```solidity
File: src/MergingPool.sol

9: contract MergingPool {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L9)]


```solidity
File: src/Neuron.sol

11: contract Neuron is ERC20, AccessControl {

```
*Github:* [[11](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L11)]


```solidity
File: src/RankedBattle.sol

16: contract RankedBattle {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L16)]


```solidity
File: src/StakeAtRisk.sol

10: contract StakeAtRisk {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L10)]


```solidity
File: src/VoltageManager.sol

9: contract VoltageManager {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L9)]



<a name="NC-56"></a> 
### [NC-56] Consider using modifiers for address control
Modifiers in Solidity can improve code readability and modularity by encapsulating repetitive checks, such as address validity checks, into a reusable construct. For example, an `onlyOwner` modifier can be used to replace repetitive `require(msg.sender == owner)` checks across several functions, reducing code redundancy and enhancing maintainability. To implement, define a modifier with the check, then apply the modifier to relevant functions.

<details>
<summary>
There are <b>44</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

62:         require(msg.sender == _ownerAddress);

69:         require(msg.sender == _ownerAddress);

132:         require(msg.sender == _ownerAddress);

145:         require(msg.sender == _ownerAddress);

```
*Github:* [[62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L62), [69](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L69), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L132), [145](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L145)]


```solidity
File: src/FighterFarm.sol

121:         require(msg.sender == _ownerAddress);

130:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

148:         require(msg.sender == _ownerAddress);

156:         require(msg.sender == _ownerAddress);

164:         require(msg.sender == _ownerAddress);

172:         require(msg.sender == _ownerAddress);

181:         require(msg.sender == _delegatedAddress);

250:             require(msg.sender == _mintpassInstance.ownerOf(mintpassIdsToBurn[i]));

290:         require(msg.sender == ownerOf(tokenId));

321:         require(msg.sender == _mergingPoolAddress);

371:         require(msg.sender == ownerOf(tokenId));

```
*Github:* [[121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L121), [130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L130), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L140), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L148), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L156), [164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L164), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L172), [181](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L181), [250](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L250), [290](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L290), [321](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L321), [371](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L371)]


```solidity
File: src/GameItems.sol

109:         require(msg.sender == _ownerAddress);

118:         require(msg.sender == _ownerAddress);

127:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

```
*Github:* [[109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L109), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L118), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L127), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L140)]


```solidity
File: src/MergingPool.sol

90:         require(msg.sender == _ownerAddress);

99:         require(msg.sender == _ownerAddress);

153:                 if (msg.sender == winnerAddresses[currentRound][j]) {

196:         require(msg.sender == _rankedBattleAddress, "Not Ranked Battle contract address");

```
*Github:* [[90](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L90), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L99), [153](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L153), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L196)]


```solidity
File: src/Neuron.sol

86:         require(msg.sender == _ownerAddress);

94:         require(msg.sender == _ownerAddress);

102:         require(msg.sender == _ownerAddress);

110:         require(msg.sender == _ownerAddress);

119:         require(msg.sender == _ownerAddress);

```
*Github:* [[86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L86), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L94), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L102), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L110), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L119)]


```solidity
File: src/RankedBattle.sol

168:         require(msg.sender == _ownerAddress);

177:         require(msg.sender == _ownerAddress);

185:         require(msg.sender == _ownerAddress);

193:         require(msg.sender == _ownerAddress);

202:         require(msg.sender == _ownerAddress);

210:         require(msg.sender == _ownerAddress);

246:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

271:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

331:         require(msg.sender == _gameServerAddress);

```
*Github:* [[168](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L168), [177](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L177), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L185), [193](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L193), [202](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L202), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L210), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L246), [271](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L271), [331](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L331)]


```solidity
File: src/StakeAtRisk.sol

79:         require(msg.sender == _rankedBattleAddress, "Not authorized to set new round");

94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

122:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L79), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L122)]


```solidity
File: src/VoltageManager.sol

65:         require(msg.sender == _ownerAddress);

74:         require(msg.sender == _ownerAddress);

106:         require(spender == msg.sender || allowedVoltageSpenders[msg.sender]);

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L65), [74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L74), [106](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L106)]


</details>


<a name="NC-57"></a> 
### [NC-57] Use of `override` is unnecessary
Starting with Solidity version [0.8.8](https://docs.soliditylang.org/en/v0.8.20/contracts.html#function-overriding), using the `override` keyword when the function solely overrides an interface function, and the function doesn't exist in multiple base contracts, is unnecessary.

*There is one instance of this issue:*
```solidity
File: src/GameItems.sol

256:     function uri(uint256 tokenId) public view override returns (string memory) {

```
*Github:* [[256](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L256)]



<a name="NC-58"></a> 
### [NC-58] Use scientific notation (e.g. `1e18`) rather than exponentiation (e.g. `10**18`)
While the compiler knows to optimize away the exponentiation, it's still better coding practice to use idioms that do not require compiler optimization, if they exist.

<details>
<summary>
There are <b>11</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

39:     uint256 public rerollCost = 1000 * 10**18;    

```
*Github:* [[39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L39)]


```solidity
File: src/Neuron.sol

37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

```
*Github:* [[37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43)]


```solidity
File: src/RankedBattle.sol

157:         rankedNrnDistribution[0] = 5000 * 10**18;

220:         rankedNrnDistribution[roundId] = newDistribution * 10**18;

439:         curStakeAtRisk = (bpsLostPerLoss * (amountStaked[tokenId] + stakeAtRisk)) / 10**4;

528:           (amountStaked[tokenId] + stakeAtRisk) / 10**18

```
*Github:* [[157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L157), [220](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L220), [439](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L439), [528](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L528)]


</details>


<a name="NC-59"></a> 
### [NC-59] Returning a struct instead of a bunch of variables is better
If a function returns [too many variables](https://docs.soliditylang.org/en/v0.8.21/contracts.html#returning-multiple-values), replacing them with a struct can improve code readability, maintainability and reusability.

*There is one instance of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit 7 return variables
421:     function getAllFighterInfo(
             uint256 tokenId
         )
             public
             view
             returns (
                 address,
                 uint256[6] memory,
                 uint256,
                 uint256,
                 string memory,
                 string memory,
                 uint16
             )
         {

```
*Github:* [[421](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L421)]



<a name="NC-60"></a> 
### [NC-60] Use a struct to encapsulate multiple function parameters
If a function has too many parameters, replacing them with a struct can improve code readability and maintainability, increase reusability, and reduce the likelihood of errors when passing the parameters.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit 7 parameters
484:     function _createNewFighter(
             address to, 
             uint256 dna, 
             string memory modelHash,
             string memory modelType, 
             uint8 fighterType,
             uint8 iconsType,
             uint256[2] memory customAttributes
         ) 
             private 
         {  

```
*Github:* [[484](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L484)]


```solidity
File: src/GameItems.sol

/// @audit 7 parameters
208:     function createGameItem(
             string memory name_,
             string memory tokenURI,
             bool finiteSupply,
             bool transferable,
             uint256 itemsRemaining,
             uint256 itemPrice,
             uint16 dailyAllowance
         ) 
             public 
         {

```
*Github:* [[208](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L208)]



<a name="NC-61"></a> 
### [NC-61] Visibility of state variables is not explicitly defined
To avoid misunderstandings and unexpected state accesses, it is recommended to explicitly define the visibility of each state variable.

<details>
<summary>
There are <b>15</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

23:     address _ownerAddress;

```
*Github:* [[23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L23)]


```solidity
File: src/FighterFarm.sol

51:     address _ownerAddress;

54:     address _delegatedAddress;

57:     address _mergingPoolAddress;

```
*Github:* [[51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L51), [54](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L54), [57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L57)]


```solidity
File: src/GameItems.sol

61:     address _ownerAddress;

64:     uint256 _itemCount = 0;    

```
*Github:* [[61](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L61), [64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L64)]


```solidity
File: src/MergingPool.sol

35:     address _ownerAddress;

38:     address _rankedBattleAddress;

```
*Github:* [[35](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L35), [38](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L38)]


```solidity
File: src/Neuron.sol

49:     address _ownerAddress;

```
*Github:* [[49](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L49)]


```solidity
File: src/RankedBattle.sol

69:     address _stakeAtRiskAddress;

72:     address _ownerAddress;

75:     address _gameServerAddress;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[69](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L69), [72](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L72), [75](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L75), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/StakeAtRisk.sol

33:     address _rankedBattleAddress;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L33)]


```solidity
File: src/VoltageManager.sol

23:     address _ownerAddress;

```
*Github:* [[23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L23)]


</details>


<a name="NC-62"></a> 
### [NC-62] Common functions should be refactored to a common base contract
The functions below have the same implementation as is seen in other files. The functions should be refactored into functions of a common base contract.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit seen in src/FighterFarm.sol
61:     function transferOwnership(address newOwnerAddress) external {

```
*Github:* [[61](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L61)]


```solidity
File: src/FighterFarm.sol

/// @audit seen in src/AiArenaHelper.sol
120:     function transferOwnership(address newOwnerAddress) external {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L120)]


```solidity
File: src/GameItems.sol

/// @audit seen in src/AiArenaHelper.sol
108:     function transferOwnership(address newOwnerAddress) external {

/// @audit seen in src/MergingPool.sol
117:     function adjustAdminAccess(address adminAddress, bool access) external {

/// @audit seen in src/RankedBattle.sol
139:     function instantiateNeuronContract(address nrnAddress) external {

```
*Github:* [[108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L108), [117](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L117), [139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L139)]


```solidity
File: src/MergingPool.sol

/// @audit seen in src/AiArenaHelper.sol
89:     function transferOwnership(address newOwnerAddress) external {

/// @audit seen in src/GameItems.sol
98:     function adjustAdminAccess(address adminAddress, bool access) external {

```
*Github:* [[89](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L89), [98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L98)]


```solidity
File: src/Neuron.sol

/// @audit seen in src/AiArenaHelper.sol
85:     function transferOwnership(address newOwnerAddress) external {

/// @audit seen in src/GameItems.sol
118:     function adjustAdminAccess(address adminAddress, bool access) external {

```
*Github:* [[85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L85), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L118)]


```solidity
File: src/RankedBattle.sol

/// @audit seen in src/AiArenaHelper.sol
167:     function transferOwnership(address newOwnerAddress) external {

/// @audit seen in src/GameItems.sol
176:     function adjustAdminAccess(address adminAddress, bool access) external {

/// @audit seen in src/GameItems.sol
201:     function instantiateNeuronContract(address nrnAddress) external {

```
*Github:* [[167](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L167), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L176), [201](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L201)]


```solidity
File: src/VoltageManager.sol

/// @audit seen in src/AiArenaHelper.sol
64:     function transferOwnership(address newOwnerAddress) external {

/// @audit seen in src/GameItems.sol
73:     function adjustAdminAccess(address adminAddress, bool access) external {

```
*Github:* [[64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L64), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L73)]


</details>


<a name="NC-63"></a> 
### [NC-63] Internal function calls within for loops
Making function calls or external calls within loops in Solidity can lead to inefficient gas usage, potential bottlenecks, and increased vulnerability to attacks. Each function call or external call consumes gas, and when executed within a loop, the gas cost multiplies, potentially causing the transaction to run out of gas or exceed block gas limits. This can result in transaction failure or unpredictable behavior.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

/// @audit `dnaToIndex`
178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

/// @audit `_createNewFighter`
/// @audit `_createNewFighter`
249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/RankedBattle.sol

/// @audit `getNrnDistribution`
/// @audit `getNrnDistribution`
390:         for (uint32 i = lowerBound; i < roundId; i++) {

```
*Github:* [[390](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L390)]



<a name="NC-64"></a> 
### [NC-64]  `require()` / `revert()` statements should have descriptive reason strings

<details>
<summary>
There are <b>67</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

62:         require(msg.sender == _ownerAddress);

69:         require(msg.sender == _ownerAddress);

70:         require(attributeDivisors.length == attributes.length);

132:         require(msg.sender == _ownerAddress);

145:         require(msg.sender == _ownerAddress);

```
*Github:* [[62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L62), [69](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L69), [70](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L70), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L132), [145](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L145)]


```solidity
File: src/FighterFarm.sol

121:         require(msg.sender == _ownerAddress);

130:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

148:         require(msg.sender == _ownerAddress);

156:         require(msg.sender == _ownerAddress);

164:         require(msg.sender == _ownerAddress);

172:         require(msg.sender == _ownerAddress);

181:         require(msg.sender == _delegatedAddress);

206:         require(Verification.verify(msgHash, signature, _delegatedAddress));

208:         require(modelHashes.length == totalToMint && modelTypes.length == totalToMint);

243:         require(

250:             require(msg.sender == _mintpassInstance.ownerOf(mintpassIdsToBurn[i]));

269:         require(hasStakerRole[msg.sender]);

290:         require(msg.sender == ownerOf(tokenId));

321:         require(msg.sender == _mergingPoolAddress);

346:         require(_ableToTransfer(tokenId, to));

363:         require(_ableToTransfer(tokenId, to));

371:         require(msg.sender == ownerOf(tokenId));

372:         require(numRerolls[tokenId] < maxRerollsAllowed[fighterType]);

495:         require(balanceOf(to) < MAX_FIGHTERS_ALLOWED);

```
*Github:* [[121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L121), [130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L130), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L140), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L148), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L156), [164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L164), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L172), [181](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L181), [206](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L206), [208](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L208), [243](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L243), [250](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L250), [269](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L269), [290](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L290), [321](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L321), [346](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L346), [363](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L363), [371](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L371), [372](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L372), [495](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L495)]


```solidity
File: src/GameItems.sol

109:         require(msg.sender == _ownerAddress);

118:         require(msg.sender == _ownerAddress);

127:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

148:         require(tokenId < _itemCount);

151:         require(

158:         require(

186:         require(isAdmin[msg.sender]);

195:         require(isAdmin[msg.sender]);

219:         require(isAdmin[msg.sender]);

243:         require(allowedBurningAddresses[msg.sender]);

301:         require(allGameItemAttributes[tokenId].transferable);

```
*Github:* [[109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L109), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L118), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L127), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L140), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L148), [151](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L151), [158](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L158), [186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L186), [195](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L195), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L219), [243](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L243), [301](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L301)]


```solidity
File: src/MergingPool.sol

90:         require(msg.sender == _ownerAddress);

99:         require(msg.sender == _ownerAddress);

107:         require(isAdmin[msg.sender]);

119:         require(isAdmin[msg.sender]);

```
*Github:* [[90](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L90), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L99), [107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L107), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L119)]


```solidity
File: src/Neuron.sol

86:         require(msg.sender == _ownerAddress);

94:         require(msg.sender == _ownerAddress);

102:         require(msg.sender == _ownerAddress);

110:         require(msg.sender == _ownerAddress);

119:         require(msg.sender == _ownerAddress);

128:         require(isAdmin[msg.sender]);

129:         require(recipients.length == amounts.length);

```
*Github:* [[86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L86), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L94), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L102), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L110), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L119), [128](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L128), [129](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L129)]


```solidity
File: src/RankedBattle.sol

168:         require(msg.sender == _ownerAddress);

177:         require(msg.sender == _ownerAddress);

185:         require(msg.sender == _ownerAddress);

193:         require(msg.sender == _ownerAddress);

202:         require(msg.sender == _ownerAddress);

210:         require(msg.sender == _ownerAddress);

219:         require(isAdmin[msg.sender]);

227:         require(isAdmin[msg.sender]);

234:         require(isAdmin[msg.sender]);

235:         require(totalAccumulatedPoints[roundId] > 0);

331:         require(msg.sender == _gameServerAddress);

332:         require(mergingPortion <= 100);

334:         require(

```
*Github:* [[168](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L168), [177](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L177), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L185), [193](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L193), [202](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L202), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L210), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L219), [227](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L227), [234](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L234), [235](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L235), [331](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L331), [332](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L332), [334](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L334)]


```solidity
File: src/VoltageManager.sol

65:         require(msg.sender == _ownerAddress);

74:         require(msg.sender == _ownerAddress);

83:         require(isAdmin[msg.sender]);

94:         require(ownerVoltage[msg.sender] < 100);

95:         require(_gameItemsContractInstance.balanceOf(msg.sender, 0) > 0);

106:         require(spender == msg.sender || allowedVoltageSpenders[msg.sender]);

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L65), [74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L74), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L83), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L94), [95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L95), [106](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L106)]


</details>


<a name="NC-65"></a> 
### [NC-65] Event is missing `indexed` fields
Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

<details>
<summary>
There are <b>16</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

23:     event Locked(uint256 tokenId);

26:     event Unlocked(uint256 tokenId);

```
*Github:* [[23](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L23), [26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L26)]


```solidity
File: src/GameItems.sol

20:     event BoughtItem(address buyer, uint256 tokenId, uint256 quantity);

24:     event Locked(uint256 tokenId);

28:     event Unlocked(uint256 tokenId);

```
*Github:* [[20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L20), [24](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L24), [28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L28)]


```solidity
File: src/MergingPool.sol

16:     event PointsAdded(uint256 tokenId, uint256 points);

19:     event Claimed(address claimer, uint32 amount);

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L16), [19](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L19)]


```solidity
File: src/Neuron.sol

18:     event TokensClaimed(address user, uint256 amount);

21:     event TokensMinted(address user, uint256 amount);    

```
*Github:* [[18](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L18), [21](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L21)]


```solidity
File: src/RankedBattle.sol

26:     event Staked(address from, uint256 amount);

29:     event Unstaked(address from, uint256 amount);

32:     event Claimed(address claimer, uint256 amount);

35:     event PointsChanged(uint256 tokenId, uint256 points, bool increased);    

```
*Github:* [[26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L26), [29](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L29), [32](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L32), [35](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L35)]


```solidity
File: src/StakeAtRisk.sol

17:     event ReclaimedStake(uint256 fighterId, uint256 reclaimAmount);

20:     event IncreasedStakeAtRisk(uint256 fighterId, uint256 atRiskAmount);

```
*Github:* [[17](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L17), [20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L20)]


```solidity
File: src/VoltageManager.sol

16:     event VoltageRemaining(address spender, uint8 voltage);  

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L16)]


</details>


<a name="NC-66"></a> 
### [NC-66] Functions not used internally could be marked `external`

<details>
<summary>
There are <b>25</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

144:     function deleteAttributeProbabilities(uint8 generation) public {

```
*Github:* [[144](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L144)]


```solidity
File: src/FighterFarm.sol

313:     function mintFromMergingPool(

338:     function transferFrom(

355:     function safeTransferFrom(

370:     function reRoll(uint8 tokenId, uint8 fighterType) public {

395:     function contractURI() public pure returns (string memory) {

402:     function tokenURI(uint256 tokenId) public view override(ERC721) returns (string memory) {

410:     function supportsInterface(bytes4 _interfaceId)

421:     function getAllFighterInfo(

```
*Github:* [[313](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L313), [338](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L338), [355](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L355), [370](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L370), [395](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L395), [402](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L402), [410](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L410), [421](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L421)]


```solidity
File: src/GameItems.sol

185:     function setAllowedBurningAddresses(address newBurningAddress) public {

208:     function createGameItem(

242:     function burn(address account, uint256 tokenId, uint256 amount) public {

249:     function contractURI() public pure returns (string memory) {

256:     function uri(uint256 tokenId) public view override returns (string memory) {

268:     function getAllowanceRemaining(address owner, uint256 tokenId) public view returns (uint256) {

279:     function remainingSupply(uint256 tokenId) public view returns (uint256) {

285:     function uniqueTokensOutstanding() public view returns (uint256) {

291:     function safeTransferFrom(

```
*Github:* [[185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L185), [208](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L208), [242](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L242), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L249), [256](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L256), [268](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L268), [279](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L279), [285](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L285), [291](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L291)]


```solidity
File: src/MergingPool.sol

195:     function addPoints(uint256 tokenId, uint256 points) public {

205:     function getFighterPoints(uint256 maxId) public view returns(uint256[] memory) {

```
*Github:* [[195](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L195), [205](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L205)]


```solidity
File: src/Neuron.sol

171:     function approveSpender(address account, uint256 amount) public {

184:     function approveStaker(address owner, address spender, uint256 amount) public {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L171), [184](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L184)]


```solidity
File: src/RankedBattle.sol

386:     function getUnclaimedNRN(address claimer) public view returns(uint256) {

```
*Github:* [[386](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L386)]


```solidity
File: src/VoltageManager.sol

93:     function useVoltageBattery() public {

105:     function spendVoltage(address spender, uint8 voltageSpent) public {

```
*Github:* [[93](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L93), [105](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L105)]


</details>



## Gas Optimizations

<a name="GAS-1"></a> 
### [GAS-1] Assigning to structs can be more efficient
By changing the pattern of assigning value to the structure, gas savings of ~130 per instance are achieved. In addition, this use will provide significant savings in distribution costs. Instead of:
```solidity
MyStruct memory myStruct = MyStruct(_a, _b, _c);
```
write:
```solidity
MyStruct memory myStruct;
myStruct.a = _a;
myStruct.b = _b;
myStruct.c = _c;
```

*There is one instance of this issue:*
```solidity
File: src/GameItems.sol

221:             GameItemAttributes(
                     name_,
                     finiteSupply,
                     transferable,
                     itemsRemaining,
                     itemPrice,
                     dailyAllowance

```
*Github:* [[221](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L221)]



<a name="GAS-2"></a> 
### [GAS-2] Optimize gas by using do-while loops
Using `do-while` loops instead of `for` loops can be more gas-efficient. Even if you add an `if` condition to account for the case where the loop doesn't execute at all, a `do-while` loop can still be cheaper in terms of gas.

<details>
<summary>
There are <b>17</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

48:         for (uint8 i = 0; i < attributesLength; i++) {

73:         for (uint8 i = 0; i < attributesLength; i++) {

99:             for (uint8 i = 0; i < attributesLength; i++) {

136:         for (uint8 i = 0; i < attributesLength; i++) {

148:         for (uint8 i = 0; i < attributesLength; i++) {

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

211:         for (uint16 i = 0; i < totalToMint; i++) {

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/MergingPool.sol

124:         for (uint256 i = 0; i < winnersLength; i++) {

149:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

152:             for (uint32 j = 0; j < winnersLength; j++) {

176:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

178:             for (uint32 j = 0; j < winnersLength; j++) {

207:         for (uint256 i = 0; i < maxId; i++) {

```
*Github:* [[124](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L124), [149](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L149), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L176), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L207)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131)]


```solidity
File: src/RankedBattle.sol

299:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

390:         for (uint32 i = lowerBound; i < roundId; i++) {

```
*Github:* [[299](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L299), [390](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L390)]


</details>


<a name="GAS-3"></a> 
### [GAS-3] Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, where appropriate
Saves a storage slot for the mapping. Depending on the circumstances and sizes of types, can avoid a Gsset (20000 gas) per mapping combined. Reads and subsequent writes can also be cheaper when a function requires both values and they both fit in the same storage slot. Finally, if both fields are accessed in the same function, can save ~42 gas per access due to not having to [recalculate the key's keccak256 hash](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0) (Gkeccak256 - 30 gas) and that calculation's associated stack operations.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

88:     mapping(address => mapping(uint8 => uint8)) public nftsClaimed;

```
*Github:* [[88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L88)]


```solidity
File: src/GameItems.sol

74:     mapping(address => mapping(uint256 => uint256)) public allowanceRemaining;

77:     mapping(address => mapping(uint256 => uint256)) public dailyAllowanceReplenishTime;

```
*Github:* [[74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L74), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L77)]


```solidity
File: src/RankedBattle.sol

113:     mapping(address => mapping(uint256 => uint256)) public accumulatedPointsPerAddress;

116:     mapping(uint256 => mapping(uint256 => uint256)) public accumulatedPointsPerFighter;

125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[113](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L113), [116](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L116), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/StakeAtRisk.sol

46:     mapping(uint256 => mapping(uint256 => uint256)) public stakeAtRisk;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L46)]



<a name="GAS-4"></a> 
### [GAS-4] Consider activating via-ir for deploying
By using `--via-ir` or `{"viaIR": true}`, the compiler is able to use more advanced [multi-function optimizations](https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html#solidity-ir-based-codegen-changes), for extra gas savings.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/)]



<a name="GAS-5"></a> 
### [GAS-5] Counting down in for statements is more gas efficient
Looping downwards in Solidity is more gas efficient due to how the EVM compares variables. In a 'for' loop that counts down, the end condition is usually to compare with zero, which is cheaper than comparing with another number. As such, restructure your loops to count downwards where possible.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

48:         for (uint8 i = 0; i < attributesLength; i++) {

73:         for (uint8 i = 0; i < attributesLength; i++) {

99:             for (uint8 i = 0; i < attributesLength; i++) {

136:         for (uint8 i = 0; i < attributesLength; i++) {

148:         for (uint8 i = 0; i < attributesLength; i++) {

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

211:         for (uint16 i = 0; i < totalToMint; i++) {

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/MergingPool.sol

124:         for (uint256 i = 0; i < winnersLength; i++) {

152:             for (uint32 j = 0; j < winnersLength; j++) {

178:             for (uint32 j = 0; j < winnersLength; j++) {

207:         for (uint256 i = 0; i < maxId; i++) {

```
*Github:* [[124](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L124), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L207)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131)]


```solidity
File: src/RankedBattle.sol

390:         for (uint32 i = lowerBound; i < roundId; i++) {

```
*Github:* [[390](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L390)]


</details>


<a name="GAS-6"></a> 
### [GAS-6] Divisions can be `unchecked` to save gas
The expression `type(int).min/(-1)` is the only case where division causes an overflow. Therefore, uncheck can be used to [save gas](https://gist.github.com/DadeKuma/3bc597338ae774b8b3bd43280d55271f) in scenarios where it is certain that such an overflow will not occur.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

107:                     uint256 rarityRank = (dna / attributeToDnaDivisor[attributes[i]]) % 100;

```
*Github:* [[107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L107)]


```solidity
File: src/RankedBattle.sol

303:             ) / totalAccumulatedPoints[currentRound];

394:             ) / totalAccumulatedPoints[i];

439:         curStakeAtRisk = (bpsLostPerLoss * (amountStaked[tokenId] + stakeAtRisk)) / 10**4;

449:             uint256 mergingPoints = (points * mergingPortion) / 100;

528:           (amountStaked[tokenId] + stakeAtRisk) / 10**18

```
*Github:* [[303](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L303), [394](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L394), [439](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L439), [449](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L449), [528](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L528)]



<a name="GAS-7"></a> 
### [GAS-7] Do not calculate constants
Due to how constant variables are implemented (replacements at compile-time), an expression assigned to a constant variable is recomputed each time that the variable is used, which wastes some gas.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/Neuron.sol

37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

```
*Github:* [[37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43)]



<a name="GAS-8"></a> 
### [GAS-8] Don't transfer with zero amount to save gas
In Solidity, unnecessary operations can waste gas. For example, a transfer function without a zero amount check uses gas even if called with a zero amount, since the contract state remains unchanged. Implementing a zero amount check avoids these unnecessary function calls, saving gas and improving efficiency.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/RankedBattle.sol

283:         bool success = _neuronInstance.transfer(msg.sender, amount);

493:                 bool success = _neuronInstance.transfer(_stakeAtRiskAddress, curStakeAtRisk);

```
*Github:* [[283](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L283), [493](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L493)]


```solidity
File: src/StakeAtRisk.sol

100:         bool success = _neuronInstance.transfer(_rankedBattleAddress, nrnToReclaim);

143:         return _neuronInstance.transfer(treasuryAddress, totalStakeAtRisk[roundId]);

```
*Github:* [[100](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L100), [143](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L143)]



<a name="GAS-9"></a> 
### [GAS-9] Operator `+=` costs more gas than `<x> = <x> + <y>` for state variables

*There are <b>9</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit `totalNumTrained +=`
294:         totalNumTrained += 1;

```
*Github:* [[294](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L294)]


```solidity
File: src/GameItems.sol

/// @audit `_itemCount +=`
234:         _itemCount += 1;

```
*Github:* [[234](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L234)]


```solidity
File: src/MergingPool.sol

/// @audit `totalPoints -=`
126:             totalPoints -= fighterPoints[winners[i]];

/// @audit `roundId +=`
131:         roundId += 1;

/// @audit `totalPoints +=`
198:         totalPoints += points;

```
*Github:* [[126](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L126), [131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L131), [198](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L198)]


```solidity
File: src/RankedBattle.sol

/// @audit `roundId +=`
236:         roundId += 1;

/// @audit `globalStakedAmount +=`
257:             globalStakedAmount += amount;

/// @audit `globalStakedAmount -=`
276:         globalStakedAmount -= amount;

/// @audit `totalBattles +=`
348:         totalBattles += 1;

```
*Github:* [[236](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L236), [257](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L257), [276](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L276), [348](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L348)]



<a name="GAS-10"></a> 
### [GAS-10] Duplicated `require()`/`revert()` checks should be refactored to a modifier or function to save gas
Saves deployment costs.

<details>
<summary>
There are <b>21</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit duplicated on line 69
62:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 145
132:         require(msg.sender == _ownerAddress);

```
*Github:* [[62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L62), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L132)]


```solidity
File: src/FighterFarm.sol

/// @audit duplicated on line 130
121:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 148
140:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 164
156:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 371
290:         require(msg.sender == ownerOf(tokenId));

/// @audit duplicated on line 363
346:         require(_ableToTransfer(tokenId, to));

```
*Github:* [[121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L121), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L140), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L156), [290](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L290), [346](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L346)]


```solidity
File: src/GameItems.sol

/// @audit duplicated on line 118
109:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 140
127:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 195
186:         require(isAdmin[msg.sender]);

```
*Github:* [[109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L109), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L127), [186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L186)]


```solidity
File: src/MergingPool.sol

/// @audit duplicated on line 99
90:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 119
107:         require(isAdmin[msg.sender]);

```
*Github:* [[90](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L90), [107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L107)]


```solidity
File: src/Neuron.sol

/// @audit duplicated on line 94
86:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 110
102:         require(msg.sender == _ownerAddress);

```
*Github:* [[86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L86), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L102)]


```solidity
File: src/RankedBattle.sol

/// @audit duplicated on line 177
168:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 193
185:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 210
202:         require(msg.sender == _ownerAddress);

/// @audit duplicated on line 227
219:         require(isAdmin[msg.sender]);

/// @audit duplicated on line 271
246:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

```
*Github:* [[168](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L168), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L185), [202](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L202), [219](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L219), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L246)]


```solidity
File: src/StakeAtRisk.sol

/// @audit duplicated on line 122
94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94)]


```solidity
File: src/VoltageManager.sol

/// @audit duplicated on line 74
65:         require(msg.sender == _ownerAddress);

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L65)]


</details>


<a name="GAS-11"></a> 
### [GAS-11] Increments can be `unchecked` to save gas
Using `unchecked` increments can save gas by bypassing the built-in overflow checks. This can save 30-40 gas per iteration. So it is recommended to use unchecked increments when overflow is not possible.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

48:         for (uint8 i = 0; i < attributesLength; i++) {

73:         for (uint8 i = 0; i < attributesLength; i++) {

99:             for (uint8 i = 0; i < attributesLength; i++) {

136:         for (uint8 i = 0; i < attributesLength; i++) {

148:         for (uint8 i = 0; i < attributesLength; i++) {

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

211:         for (uint16 i = 0; i < totalToMint; i++) {

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/MergingPool.sol

124:         for (uint256 i = 0; i < winnersLength; i++) {

152:             for (uint32 j = 0; j < winnersLength; j++) {

178:             for (uint32 j = 0; j < winnersLength; j++) {

207:         for (uint256 i = 0; i < maxId; i++) {

```
*Github:* [[124](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L124), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L207)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131)]


```solidity
File: src/RankedBattle.sol

390:         for (uint32 i = lowerBound; i < roundId; i++) {

```
*Github:* [[390](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L390)]


</details>


<a name="GAS-12"></a> 
### [GAS-12] `keccak256()` hash of literals should only be computed once
The result of the hash should be stored in an immutable variable, and the variable should be used instead. If the hash is being used as a part of a function selector, the cast to `bytes4` should also only be done once.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/Neuron.sol

28:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

31:     bytes32 public constant SPENDER_ROLE = keccak256("SPENDER_ROLE");

34:     bytes32 public constant STAKER_ROLE = keccak256("STAKER_ROLE");

```
*Github:* [[28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L28), [31](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L31), [34](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L34)]



<a name="GAS-13"></a> 
### [GAS-13] Multiple accesses of the same mapping/array key/index should be cached
The instances below point to the second+ access of a value inside a mapping/array, within a function. Caching a mapping's value in a local `storage` or `calldata` variable when the value is accessed [multiple times](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0), saves ~42 gas per access due to not having to recalculate the key's keccak256 hash (Gkeccak256 - 30 gas) and that calculation's associated stack operations. Caching an array's struct avoids recalculating the array offsets into memory/calldata

<details>
<summary>
There are <b>50</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit `[` is also accessed on line 131
137:             attributeProbabilities[generation][attributes[i]] = probabilities[i];

```
*Github:* [[137](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L137)]


```solidity
File: src/FighterFarm.sol

/// @audit `generation[fighterType]` is also accessed on line 131
133:         return generation[fighterType];

/// @audit `nftsClaimed[msg.sender]` is also accessed on line 203
204:             nftsClaimed[msg.sender][1]

/// @audit `nftsClaimed[msg.sender]` is also accessed on line 203
209:         nftsClaimed[msg.sender][0] += numToMint[0];

/// @audit `nftsClaimed[msg.sender]` is also accessed on line 203
210:         nftsClaimed[msg.sender][1] += numToMint[1];

/// @audit `fighters[tokenId]` is also accessed on line 291
292:         fighters[tokenId].modelType = modelType;

/// @audit `numRerolls[tokenId]` is also accessed on line 372
378:             numRerolls[tokenId] += 1;

/// @audit `numRerolls[tokenId]` is also accessed on line 372
379:             uint256 dna = uint256(keccak256(abi.encode(msg.sender, tokenId, numRerolls[tokenId])));

/// @audit `fighters[tokenId]` is also accessed on line 381
382:             fighters[tokenId].weight = weight;

/// @audit `fighters[tokenId]` is also accessed on line 381
383:             fighters[tokenId].physicalAttributes = _aiArenaHelperInstance.createPhysicalAttributes(

/// @audit `fighters[tokenId]` is also accessed on line 381
386:                 fighters[tokenId].iconsType,

/// @audit `fighters[tokenId]` is also accessed on line 381
387:                 fighters[tokenId].dendroidBool

/// @audit `generation[fighterType]` is also accessed on line 512
524:                 generation[fighterType],

/// @audit `generation[fighterType]` is also accessed on line 512
530:         FighterOps.fighterCreatedEmitter(newId, weight, element, generation[fighterType]);

```
*Github:* [[133](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L133), [204](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L204), [209](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L209), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L210), [292](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L292), [378](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L378), [379](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L379), [382](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L382), [383](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L383), [386](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L386), [387](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L387), [524](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L524), [530](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L530)]


```solidity
File: src/GameItems.sol

/// @audit `allGameItemAttributes[tokenId]` is also accessed on line 149
152:             allGameItemAttributes[tokenId].finiteSupply == false || 

/// @audit `allGameItemAttributes[tokenId]` is also accessed on line 149
154:                 allGameItemAttributes[tokenId].finiteSupply == true && 

/// @audit `allGameItemAttributes[tokenId]` is also accessed on line 149
155:                 quantity <= allGameItemAttributes[tokenId].itemsRemaining

/// @audit `dailyAllowanceReplenishTime[msg.sender]` is also accessed on line 159
166:             if (dailyAllowanceReplenishTime[msg.sender][tokenId] <= block.timestamp) {

/// @audit `allowanceRemaining[msg.sender]` is also accessed on line 160
169:             allowanceRemaining[msg.sender][tokenId] -= quantity;

/// @audit `allGameItemAttributes[tokenId]` is also accessed on line 149
170:             if (allGameItemAttributes[tokenId].finiteSupply) {

/// @audit `allGameItemAttributes[tokenId]` is also accessed on line 149
171:                 allGameItemAttributes[tokenId].itemsRemaining -= quantity;

```
*Github:* [[152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L152), [154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L154), [155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L155), [166](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L166), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L169), [170](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L170), [171](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L171)]


```solidity
File: src/MergingPool.sol

/// @audit `fighterPoints[winners[i]` is also accessed on line 126
127:             fighterPoints[winners[i]] = 0;

/// @audit `isSelectionComplete[roundId]` is also accessed on line 121
130:         isSelectionComplete[roundId] = true;

/// @audit `numRoundsClaimed[msg.sender]` is also accessed on line 148
150:             numRoundsClaimed[msg.sender] += 1;

/// @audit `winnerAddresses[currentRound]` is also accessed on line 151
153:                 if (msg.sender == winnerAddresses[currentRound][j]) {

/// @audit `winnerAddresses[currentRound]` is also accessed on line 177
179:                 if (claimer == winnerAddresses[currentRound][j]) {

/// @audit ` = ` is also accessed on line 206
208:             points[i] = fighterPoints[i];

```
*Github:* [[127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L127), [130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L130), [150](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L150), [153](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L153), [179](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L179), [208](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L208)]


```solidity
File: src/RankedBattle.sol

/// @audit `amountStaked[tokenId]` is also accessed on line 253
256:             amountStaked[tokenId] += amount;

/// @audit `amountStaked[tokenId]` is also accessed on line 272
273:             amount = amountStaked[tokenId];

/// @audit `amountStaked[tokenId]` is also accessed on line 272
275:         amountStaked[tokenId] -= amount;

/// @audit `amountStaked[tokenId]` is also accessed on line 272
285:             if (amountStaked[tokenId] == 0) {

/// @audit `numRoundsClaimed[msg.sender]` is also accessed on line 295
298:         uint32 lowerBound = numRoundsClaimed[msg.sender];

/// @audit `numRoundsClaimed[msg.sender]` is also accessed on line 295
304:             numRoundsClaimed[msg.sender] += 1;

/// @audit `_calculatedStakingFactor[tokenId]` is also accessed on line 433
435:             _calculatedStakingFactor[tokenId][roundId] = true;

/// @audit `stakingFactor[tokenId]` is also accessed on line 434
445:                 points = stakingFactor[tokenId] * eloFactor;

/// @audit `amountStaked[tokenId]` is also accessed on line 439
462:                 amountStaked[tokenId] += curStakeAtRisk;

/// @audit `amountStaked[tokenId]` is also accessed on line 439
476:             if (curStakeAtRisk > amountStaked[tokenId]) {

/// @audit `amountStaked[tokenId]` is also accessed on line 439
477:                 curStakeAtRisk = amountStaked[tokenId];

/// @audit `accumulatedPointsPerFighter[tokenId]` is also accessed on line 466
479:             if (accumulatedPointsPerFighter[tokenId][roundId] > 0) {

/// @audit `stakingFactor[tokenId]` is also accessed on line 434
481:                 points = stakingFactor[tokenId] * eloFactor;

/// @audit `accumulatedPointsPerFighter[tokenId]` is also accessed on line 466
482:                 if (points > accumulatedPointsPerFighter[tokenId][roundId]) {

/// @audit `accumulatedPointsPerFighter[tokenId]` is also accessed on line 466
483:                     points = accumulatedPointsPerFighter[tokenId][roundId];

/// @audit `accumulatedPointsPerFighter[tokenId]` is also accessed on line 466
485:                 accumulatedPointsPerFighter[tokenId][roundId] -= points;

/// @audit `accumulatedPointsPerAddress[fighterOwner]` is also accessed on line 467
486:                 accumulatedPointsPerAddress[fighterOwner][roundId] -= points;

/// @audit `totalAccumulatedPoints[roundId]` is also accessed on line 468
487:                 totalAccumulatedPoints[roundId] -= points;

/// @audit `amountStaked[tokenId]` is also accessed on line 439
496:                     amountStaked[tokenId] -= curStakeAtRisk;

```
*Github:* [[256](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L256), [273](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L273), [275](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L275), [285](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L285), [298](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L298), [304](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L304), [435](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L435), [445](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L445), [462](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L462), [476](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L476), [477](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L477), [479](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L479), [481](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L481), [482](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L482), [483](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L483), [485](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L485), [486](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L486), [487](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L487), [496](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L496)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `stakeAtRisk[roundId]` is also accessed on line 96
102:             stakeAtRisk[roundId][fighterId] -= nrnToReclaim;

```
*Github:* [[102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L102)]


```solidity
File: src/VoltageManager.sol

/// @audit `ownerVoltage[msg.sender]` is also accessed on line 94
97:         ownerVoltage[msg.sender] = 100;

/// @audit `ownerVoltage[msg.sender]` is also accessed on line 94
98:         emit VoltageRemaining(msg.sender, ownerVoltage[msg.sender]);

/// @audit `ownerVoltage[spender]` is also accessed on line 110
111:         emit VoltageRemaining(spender, ownerVoltage[spender]);

```
*Github:* [[97](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L97), [98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L98), [111](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L111)]


</details>


<a name="GAS-14"></a> 
### [GAS-14] Operator `>=`/`<=` costs less gas than operator `>`/`<`
The compiler uses opcodes `GT` and `ISZERO` for code that uses `>`, but only requires `LT` for `>=`. A similar behavior applies for `>`, which uses opcodes `LT` and `ISZERO`, but only requires `GT` for `<=`. It can save 3 gas for each. It should be converted to the `<=`/`>=` equivalent when comparing against integer literals.

<details>
<summary>
There are <b>33</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

48:         for (uint8 i = 0; i < attributesLength; i++) {

73:         for (uint8 i = 0; i < attributesLength; i++) {

99:             for (uint8 i = 0; i < attributesLength; i++) {

102:                   i == 1 && iconsType > 0 || // Custom icons eyes (red diamond)

136:         for (uint8 i = 0; i < attributesLength; i++) {

148:         for (uint8 i = 0; i < attributesLength; i++) {

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L102), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

211:         for (uint16 i = 0; i < totalToMint; i++) {

217:                 i < numToMint[0] ? 0 : 1,

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [217](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L217), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/GameItems.sol

148:         require(tokenId < _itemCount);

258:         if (bytes(customURI).length > 0) {

```
*Github:* [[148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L148), [258](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L258)]


```solidity
File: src/MergingPool.sol

124:         for (uint256 i = 0; i < winnersLength; i++) {

149:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

152:             for (uint32 j = 0; j < winnersLength; j++) {

164:         if (claimIndex > 0) {

176:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

178:             for (uint32 j = 0; j < winnersLength; j++) {

207:         for (uint256 i = 0; i < maxId; i++) {

```
*Github:* [[124](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L124), [149](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L149), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L164), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L176), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L207)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

156:         require(totalSupply() + amount < MAX_SUPPLY, "Trying to mint more than the max supply");

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L156)]


```solidity
File: src/RankedBattle.sol

245:         require(amount > 0, "Amount cannot be 0");

272:         if (amount > amountStaked[tokenId]) {

299:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

306:         if (claimableNRN > 0) {

342:         if (amountStaked[tokenId] + stakeAtRisk > 0) {

390:         for (uint32 i = lowerBound; i < roundId; i++) {

454:             if (curStakeAtRisk > stakeAtRisk) {

460:             if (curStakeAtRisk > 0) {

469:             if (points > 0) {

476:             if (curStakeAtRisk > amountStaked[tokenId]) {

482:                 if (points > accumulatedPointsPerFighter[tokenId][roundId]) {

488:                 if (points > 0) {

```
*Github:* [[245](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L245), [272](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L272), [299](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L299), [306](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L306), [342](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L342), [390](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L390), [454](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L454), [460](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L460), [469](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L469), [476](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L476), [482](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L482), [488](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L488)]


</details>


<a name="GAS-15"></a> 
### [GAS-15] Optimize names to save gas
`public`/`external` function names and `public` member variable names can be optimized to save gas. See this [link](https://gist.github.com/IllIllI000/a5d8b486a8259f9f77891a919febd1a9) for an example of how it works. Below are the interfaces/abstract contracts that can be optimized so that the most frequently-called functions use the least amount of gas possible during method lookup. Method IDs that have two leading zero bytes can save 128 gas each during deployment, and renaming functions to have lower method IDs will save 22 gas per call, [per sorted position shifted](https://medium.com/joyso/solidity-how-does-function-name-affect-gas-consumption-in-smart-contract-47d270d8ac92)

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

/// @audit `transferOwnership`, `addAttributeDivisor`, `createPhysicalAttributes`, `addAttributeProbabilities`, `deleteAttributeProbabilities`, `getAttributeProbabilities`, `dnaToIndex`
10: contract AiArenaHelper {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L10)]


```solidity
File: src/FighterFarm.sol

/// @audit `transferOwnership`, `incrementGeneration`, `addStaker`, `instantiateAIArenaHelperContract`, `instantiateMintpassContract`, `instantiateNeuronContract`, `setMergingPoolAddress`, `setTokenURI`, `claimFighters`, `redeemMintPass`, `updateFighterStaking`, `updateModel`, `doesTokenExist`, `mintFromMergingPool`, `transferFrom`, `safeTransferFrom`, `reRoll`, `contractURI`, `tokenURI`, `supportsInterface`, `getAllFighterInfo`
16: contract FighterFarm is ERC721, ERC721Enumerable {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L16)]


```solidity
File: src/GameItems.sol

/// @audit `transferOwnership`, `adjustAdminAccess`, `adjustTransferability`, `instantiateNeuronContract`, `mint`, `setAllowedBurningAddresses`, `setTokenURI`, `createGameItem`, `burn`, `contractURI`, `uri`, `getAllowanceRemaining`, `remainingSupply`, `uniqueTokensOutstanding`, `safeTransferFrom`
10: contract GameItems is ERC1155 {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L10)]


```solidity
File: src/MergingPool.sol

/// @audit `transferOwnership`, `adjustAdminAccess`, `updateWinnersPerPeriod`, `pickWinner`, `claimRewards`, `getUnclaimedRewards`, `addPoints`, `getFighterPoints`
9: contract MergingPool {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L9)]


```solidity
File: src/Neuron.sol

/// @audit `transferOwnership`, `addMinter`, `addStaker`, `addSpender`, `adjustAdminAccess`, `setupAirdrop`, `claim`, `mint`, `burn`, `approveSpender`, `approveStaker`, `burnFrom`
11: contract Neuron is ERC20, AccessControl {

```
*Github:* [[11](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L11)]


```solidity
File: src/RankedBattle.sol

/// @audit `transferOwnership`, `adjustAdminAccess`, `setGameServerAddress`, `setStakeAtRiskAddress`, `instantiateNeuronContract`, `instantiateMergingPoolContract`, `setRankedNrnDistribution`, `setBpsLostPerLoss`, `setNewRound`, `stakeNRN`, `unstakeNRN`, `claimNRN`, `updateBattleRecord`, `getBattleRecord`, `getCurrentStakingData`, `getNrnDistribution`, `getUnclaimedNRN`
16: contract RankedBattle {

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L16)]


```solidity
File: src/StakeAtRisk.sol

/// @audit `setNewRound`, `reclaimNRN`, `updateAtRiskRecords`, `getStakeAtRisk`
10: contract StakeAtRisk {

```
*Github:* [[10](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L10)]


```solidity
File: src/VoltageManager.sol

/// @audit `transferOwnership`, `adjustAdminAccess`, `adjustAllowedVoltageSpenders`, `useVoltageBattery`, `spendVoltage`
9: contract VoltageManager {

```
*Github:* [[9](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L9)]



<a name="GAS-16"></a> 
### [GAS-16] `require()`/`revert()` strings longer than 32 bytes cost extra gas
Each extra memory word of bytes past the original 32 [incurs an MSTORE](https://gist.github.com/hrkrshnn/ee8fabd532058307229d65dcd5836ddc#consider-having-short-revert-strings) which costs 3 gas

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

133:         require(probabilities.length == 6, "Invalid number of attribute arrays");

```
*Github:* [[133](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L133)]


```solidity
File: src/MergingPool.sol

196:         require(msg.sender == _rankedBattleAddress, "Not Ranked Battle contract address");

```
*Github:* [[196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L196)]


```solidity
File: src/Neuron.sol

139:         require(
                 allowance(treasuryAddress, msg.sender) >= amount, 
                 "ERC20: claim amount exceeds allowance"

156:         require(totalSupply() + amount < MAX_SUPPLY, "Trying to mint more than the max supply");

157:         require(hasRole(MINTER_ROLE, msg.sender), "ERC20: must have minter role to mint");

172:         require(
                 hasRole(SPENDER_ROLE, msg.sender), 
                 "ERC20: must have spender role to approve spending"

185:         require(
                 hasRole(STAKER_ROLE, msg.sender), 
                 "ERC20: must have staker role to approve staking"

197:         require(
                 allowance(account, msg.sender) >= amount, 
                 "ERC20: burn amount exceeds allowance"

```
*Github:* [[139](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L139), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L156), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L157), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L172), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L185), [197](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L197)]


```solidity
File: src/RankedBattle.sol

248:         require(hasUnstaked[tokenId][roundId] == false, "Cannot add stake after unstaking this round");

295:         require(numRoundsClaimed[msg.sender] < roundId, "Already claimed NRNs for this period");

```
*Github:* [[248](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L248), [295](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L295)]


```solidity
File: src/StakeAtRisk.sol

94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

95:         require(
                stakeAtRisk[roundId][fighterId] >= nrnToReclaim, 
                "Fighter does not have enough stake at risk"

122:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94), [95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L95), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L122)]


</details>


<a name="GAS-17"></a> 
### [GAS-17] There are comparisons to boolean literals (true and false), these can be simplified to save gas
In such instances you can simplify as follows: if ( == true) ==> if () | if ( == false) ==> if (!)

*There are <b>4</b> instances of this issue:*
```solidity
File: src/GameItems.sol

152:             allGameItemAttributes[tokenId].finiteSupply == false || 

154:                 allGameItemAttributes[tokenId].finiteSupply == true && 

```
*Github:* [[152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L152), [154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L154)]


```solidity
File: src/RankedBattle.sol

248:         require(hasUnstaked[tokenId][roundId] == false, "Cannot add stake after unstaking this round");

433:         if (_calculatedStakingFactor[tokenId][roundId] == false) {

```
*Github:* [[248](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L248), [433](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L433)]



<a name="GAS-18"></a> 
### [GAS-18] State variables access within a loop
State variable reads and writes are more expensive than local variable reads and writes. Therefore, it is recommended to replace state variable reads and writes within loops with a local variable. Gas savings should be multiplied by the average loop length.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

/// @audit `fighters`
214:                 uint256(keccak256(abi.encode(msg.sender, fighters.length))),

/// @audit `_mintpassInstance`
250:             require(msg.sender == _mintpassInstance.ownerOf(mintpassIdsToBurn[i]));

/// @audit `_mintpassInstance`
251:             _mintpassInstance.burn(mintpassIdsToBurn[i]);

```
*Github:* [[214](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L214), [250](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L250), [251](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L251)]


```solidity
File: src/MergingPool.sol

/// @audit `_fighterFarmInstance`
125:             currentWinnerAddresses[i] = _fighterFarmInstance.ownerOf(winners[i]);

/// @audit `_fighterFarmInstance`
154:                     _fighterFarmInstance.mintFromMergingPool(

/// @audit `_fighterFarmInstance`
154:                     _fighterFarmInstance.mintFromMergingPool(

```
*Github:* [[125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L125), [154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L154), [154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L154)]



<a name="GAS-19"></a> 
### [GAS-19] State variables only set in the constructor should be declared immutable
Accessing state variables within a function involves an `SLOAD` operation, but `immutable` variables can be accessed directly without the need of it, thus reducing gas costs. As these state variables are assigned only in the constructor, consider declaring them `immutable`.

<details>
<summary>
There are <b>12</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

48:     address public treasuryAddress;

54:     address _delegatedAddress;

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L48), [54](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L54)]


```solidity
File: src/GameItems.sol

58:     address public treasuryAddress;

```
*Github:* [[58](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L58)]


```solidity
File: src/MergingPool.sol

38:     address _rankedBattleAddress;

41:     FighterFarm _fighterFarmInstance;

```
*Github:* [[38](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L38), [41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L41)]


```solidity
File: src/Neuron.sol

46:     address public treasuryAddress;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L46)]


```solidity
File: src/RankedBattle.sol

85:     FighterFarm _fighterFarmInstance;

88:     VoltageManager _voltageManagerInstance;

```
*Github:* [[85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L85), [88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L88)]


```solidity
File: src/StakeAtRisk.sol

30:     address public treasuryAddress;

33:     address _rankedBattleAddress;

36:     Neuron _neuronInstance;

```
*Github:* [[30](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L30), [33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L33), [36](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L36)]


```solidity
File: src/VoltageManager.sol

26:     GameItems _gameItemsContractInstance;

```
*Github:* [[26](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L26)]


</details>


<a name="GAS-20"></a> 
### [GAS-20] Use smaller sizes for struct variables if possible
In Solidity, each storage slot has a size of 32 bytes. If a struct contains multiple uint values, it's efficient to pack these into as few storage slots as possible to optimize gas usage. The EVM (Ethereum Virtual Machine) charges gas for each storage operation, so minimizing the number of slots used can result in substantial gas savings. This can be achieved by ordering struct fields according to their size or by using smaller data types where possible. However, developers must balance these optimizations with the need for code clarity and the precision requirements of their application. Always ensure that data packing does not compromise the functionality or security of the contract.

*There is one instance of this issue:*
```solidity
File: src/GameItems.sol

/// @audit `itemsRemaining`
/// @audit `itemPrice`
/// @audit `dailyAllowance`
35:     struct GameItemAttributes {
            string name;
            bool finiteSupply;
            bool transferable;
            uint256 itemsRemaining;
            uint256 itemPrice;
            uint256 dailyAllowance;

```
*Github:* [[35](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L35)]



<a name="GAS-21"></a> 
### [GAS-21] Optimize external calls with assembly for memory efficiency
Using interfaces to make external contract calls in Solidity is convenient but can be inefficient in terms of memory utilization. Each such call involves creating a new memory location to store the data being passed, thus incurring memory expansion costs.

Inline assembly allows for optimized memory usage by re-using already allocated memory spaces or using the scratch space for smaller datasets. This can result in notable gas savings, especially for contracts that make frequent external calls.

Additionally, using inline assembly enables important safety checks like verifying if the target address has code deployed to it using `extcodesize(addr)` before making the call, mitigating risks associated with contract interactions.

<details>
<summary>
There are <b>17</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

/// @audit `.burn(...)`
251:             _mintpassInstance.burn(mintpassIdsToBurn[i]);

/// @audit `.approveSpender(...)`
375:         _neuronInstance.approveSpender(msg.sender, rerollCost);

```
*Github:* [[251](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L251), [375](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L375)]


```solidity
File: src/GameItems.sol

/// @audit `.approveSpender(...)`
163:         _neuronInstance.approveSpender(msg.sender, price);

```
*Github:* [[163](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L163)]


```solidity
File: src/MergingPool.sol

/// @audit `.mintFromMergingPool(...)`
154:                     _fighterFarmInstance.mintFromMergingPool(

```
*Github:* [[154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L154)]


```solidity
File: src/RankedBattle.sol

/// @audit `.setNewRound(...)`
237:         _stakeAtRiskInstance.setNewRound(roundId);

/// @audit `.approveStaker(...)`
250:         _neuronInstance.approveStaker(msg.sender, address(this), amount);

/// @audit `.updateFighterStaking(...)`
254:                 _fighterFarmInstance.updateFighterStaking(tokenId, true);

/// @audit `.getStakeAtRisk(...)`
260:                 _stakeAtRiskInstance.getStakeAtRisk(tokenId)

/// @audit `.getStakeAtRisk(...)`
279:             _stakeAtRiskInstance.getStakeAtRisk(tokenId)

/// @audit `.updateFighterStaking(...)`
286:                 _fighterFarmInstance.updateFighterStaking(tokenId, false);

/// @audit `.mint(...)`
308:             _neuronInstance.mint(msg.sender, claimableNRN);

/// @audit `.spendVoltage(...)`
346:             _voltageManagerInstance.spendVoltage(fighterOwner, VOLTAGE_COST);

/// @audit `.addPoints(...)`
451:             _mergingPoolInstance.addPoints(tokenId, mergingPoints);

/// @audit `.reclaimNRN(...)`
461:                 _stakeAtRiskInstance.reclaimNRN(curStakeAtRisk, tokenId, fighterOwner);

/// @audit `.updateAtRiskRecords(...)`
495:                     _stakeAtRiskInstance.updateAtRiskRecords(curStakeAtRisk, tokenId, fighterOwner);

```
*Github:* [[237](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L237), [250](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L250), [254](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L254), [260](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L260), [279](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L279), [286](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L286), [308](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L308), [346](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L346), [451](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L451), [461](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L461), [495](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L495)]


```solidity
File: src/VoltageManager.sol

/// @audit `.balanceOf(...)`
95:         require(_gameItemsContractInstance.balanceOf(msg.sender, 0) > 0);

/// @audit `.burn(...)`
96:         _gameItemsContractInstance.burn(msg.sender, 0, 1);

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L95), [96](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L96)]


</details>


<a name="GAS-22"></a> 
### [GAS-22] Use assembly to compute hashes to save gas
If the arguments to the encode call can fit into the scratch space (two words or fewer), then it's more efficient to use assembly to generate the hash (80 gas):

`keccak256(abi.encodePacked(x, y)) -> assembly {mstore(0x00, a); mstore(0x20, b); let hash := keccak256(0x00, 0x40); }`

*There are <b>8</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

199:         bytes32 msgHash = bytes32(keccak256(abi.encode(

214:                 uint256(keccak256(abi.encode(msg.sender, fighters.length))),

254:                 uint256(keccak256(abi.encode(mintPassDnas[i]))), 

324:             uint256(keccak256(abi.encode(msg.sender, fighters.length))), 

379:             uint256 dna = uint256(keccak256(abi.encode(msg.sender, tokenId, numRerolls[tokenId])));

```
*Github:* [[199](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L199), [214](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L214), [254](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L254), [324](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L324), [379](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L379)]


```solidity
File: src/Neuron.sol

28:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

31:     bytes32 public constant SPENDER_ROLE = keccak256("SPENDER_ROLE");

34:     bytes32 public constant STAKER_ROLE = keccak256("STAKER_ROLE");

```
*Github:* [[28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L28), [31](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L31), [34](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L34)]



<a name="GAS-23"></a> 
### [GAS-23] Use assembly to emit events
To efficiently emit events, it's possible to utilize assembly by making use of scratch space and the free memory pointer. This approach has the advantage of potentially avoiding the costs associated with memory expansion.

However, it's important to note that in order to safely optimize this process, it is preferable to cache and restore the free memory pointer.

A good example of such practice can be seen in [Solady's](https://github.com/Vectorized/solady/blob/main/src/tokens/ERC1155.sol#L167) codebase.

<details>
<summary>
There are <b>18</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

272:             emit Locked(tokenId);

274:             emit Unlocked(tokenId);

```
*Github:* [[272](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L272), [274](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L274)]


```solidity
File: src/GameItems.sol

130:           emit Unlocked(tokenId);

132:           emit Locked(tokenId);

174:             emit BoughtItem(msg.sender, tokenId, quantity);

231:           emit Locked(_itemCount);

```
*Github:* [[130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L130), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L132), [174](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L174), [231](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L231)]


```solidity
File: src/MergingPool.sol

165:             emit Claimed(msg.sender, claimIndex);

199:         emit PointsAdded(tokenId, points);

```
*Github:* [[165](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L165), [199](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L199)]


```solidity
File: src/Neuron.sol

144:         emit TokensClaimed(msg.sender, amount);

```
*Github:* [[144](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L144)]


```solidity
File: src/RankedBattle.sol

263:             emit Staked(msg.sender, amount);

288:             emit Unstaked(msg.sender, amount);

309:             emit Claimed(msg.sender, claimableNRN);

470:                 emit PointsChanged(tokenId, points, true);

489:                     emit PointsChanged(tokenId, points, false);

```
*Github:* [[263](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L263), [288](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L288), [309](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L309), [470](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L470), [489](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L489)]


```solidity
File: src/StakeAtRisk.sol

105:             emit ReclaimedStake(fighterId, nrnToReclaim);

126:         emit IncreasedStakeAtRisk(fighterId, nrnToPlaceAtRisk);

```
*Github:* [[105](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L105), [126](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L126)]


```solidity
File: src/VoltageManager.sol

98:         emit VoltageRemaining(msg.sender, ownerVoltage[msg.sender]);

111:         emit VoltageRemaining(spender, ownerVoltage[spender]);

```
*Github:* [[98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L98), [111](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L111)]


</details>


<a name="GAS-24"></a> 
### [GAS-24] Use assembly to validate `msg.sender`

<details>
<summary>
There are <b>44</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

62:         require(msg.sender == _ownerAddress);

69:         require(msg.sender == _ownerAddress);

132:         require(msg.sender == _ownerAddress);

145:         require(msg.sender == _ownerAddress);

```
*Github:* [[62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L62), [69](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L69), [132](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L132), [145](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L145)]


```solidity
File: src/FighterFarm.sol

121:         require(msg.sender == _ownerAddress);

130:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

148:         require(msg.sender == _ownerAddress);

156:         require(msg.sender == _ownerAddress);

164:         require(msg.sender == _ownerAddress);

172:         require(msg.sender == _ownerAddress);

181:         require(msg.sender == _delegatedAddress);

250:             require(msg.sender == _mintpassInstance.ownerOf(mintpassIdsToBurn[i]));

290:         require(msg.sender == ownerOf(tokenId));

321:         require(msg.sender == _mergingPoolAddress);

371:         require(msg.sender == ownerOf(tokenId));

```
*Github:* [[121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L121), [130](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L130), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L140), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L148), [156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L156), [164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L164), [172](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L172), [181](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L181), [250](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L250), [290](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L290), [321](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L321), [371](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L371)]


```solidity
File: src/GameItems.sol

109:         require(msg.sender == _ownerAddress);

118:         require(msg.sender == _ownerAddress);

127:         require(msg.sender == _ownerAddress);

140:         require(msg.sender == _ownerAddress);

```
*Github:* [[109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L109), [118](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L118), [127](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L127), [140](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L140)]


```solidity
File: src/MergingPool.sol

90:         require(msg.sender == _ownerAddress);

99:         require(msg.sender == _ownerAddress);

153:                 if (msg.sender == winnerAddresses[currentRound][j]) {

196:         require(msg.sender == _rankedBattleAddress, "Not Ranked Battle contract address");

```
*Github:* [[90](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L90), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L99), [153](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L153), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L196)]


```solidity
File: src/Neuron.sol

86:         require(msg.sender == _ownerAddress);

94:         require(msg.sender == _ownerAddress);

102:         require(msg.sender == _ownerAddress);

110:         require(msg.sender == _ownerAddress);

119:         require(msg.sender == _ownerAddress);

```
*Github:* [[86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L86), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L94), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L102), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L110), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L119)]


```solidity
File: src/RankedBattle.sol

168:         require(msg.sender == _ownerAddress);

177:         require(msg.sender == _ownerAddress);

185:         require(msg.sender == _ownerAddress);

193:         require(msg.sender == _ownerAddress);

202:         require(msg.sender == _ownerAddress);

210:         require(msg.sender == _ownerAddress);

246:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

271:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

331:         require(msg.sender == _gameServerAddress);

```
*Github:* [[168](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L168), [177](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L177), [185](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L185), [193](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L193), [202](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L202), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L210), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L246), [271](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L271), [331](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L331)]


```solidity
File: src/StakeAtRisk.sol

79:         require(msg.sender == _rankedBattleAddress, "Not authorized to set new round");

94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

122:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L79), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L122)]


```solidity
File: src/VoltageManager.sol

65:         require(msg.sender == _ownerAddress);

74:         require(msg.sender == _ownerAddress);

106:         require(spender == msg.sender || allowedVoltageSpenders[msg.sender]);

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L65), [74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L74), [106](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L106)]


</details>


<a name="GAS-25"></a> 
### [GAS-25] Use assembly to write address/contract type storage values
Using `assembly { sstore(state.slot, addr)` instead of `state = addr` can save gas.

<details>
<summary>
There are <b>37</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

42:         _ownerAddress = msg.sender;

63:         _ownerAddress = newOwnerAddress;

```
*Github:* [[42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L42), [63](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L63)]


```solidity
File: src/FighterFarm.sol

107:         _ownerAddress = ownerAddress;

108:         _delegatedAddress = delegatedAddress;

109:         treasuryAddress = treasuryAddress_;

122:         _ownerAddress = newOwnerAddress;

149:         _aiArenaHelperInstance = AiArenaHelper(aiArenaHelperAddress);

157:         _mintpassInstance = AAMintPass(mintpassAddress);

165:         _neuronInstance = Neuron(neuronAddress);

173:         _mergingPoolAddress = mergingPoolAddress;

```
*Github:* [[107](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L107), [108](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L108), [109](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L109), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L122), [149](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L149), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L157), [165](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L165), [173](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L173)]


```solidity
File: src/GameItems.sol

96:         _ownerAddress = ownerAddress;

97:         treasuryAddress = treasuryAddress_;

110:         _ownerAddress = newOwnerAddress;

141:         _neuronInstance = Neuron(nrnAddress);

```
*Github:* [[96](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L96), [97](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L97), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L110), [141](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L141)]


```solidity
File: src/MergingPool.sol

76:         _ownerAddress = ownerAddress;

77:         _rankedBattleAddress = rankedBattleAddress;

78:         _fighterFarmInstance = FighterFarm(fighterFarmAddress);

91:         _ownerAddress = newOwnerAddress;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L76), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L77), [78](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L78), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L91)]


```solidity
File: src/Neuron.sol

71:         _ownerAddress = ownerAddress;

72:         treasuryAddress = treasuryAddress_;

87:         _ownerAddress = newOwnerAddress;

```
*Github:* [[71](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L71), [72](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L72), [87](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L87)]


```solidity
File: src/RankedBattle.sol

152:         _ownerAddress = ownerAddress;

153:         _gameServerAddress = gameServerAddress;

154:         _fighterFarmInstance = FighterFarm(fighterFarmAddress);

155:         _voltageManagerInstance = VoltageManager(voltageManagerAddress);

169:         _ownerAddress = newOwnerAddress;

186:         _gameServerAddress = gameServerAddress;

194:         _stakeAtRiskAddress = stakeAtRiskAddress;

195:         _stakeAtRiskInstance = StakeAtRisk(_stakeAtRiskAddress);

203:         _neuronInstance = Neuron(nrnAddress);

211:         _mergingPoolInstance = MergingPool(mergingPoolAddress);

```
*Github:* [[152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L152), [153](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L153), [154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L154), [155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L155), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L169), [186](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L186), [194](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L194), [195](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L195), [203](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L203), [211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L211)]


```solidity
File: src/StakeAtRisk.sol

65:         treasuryAddress = treasuryAddress_;

66:         _rankedBattleAddress = rankedBattleAddress;   

67:         _neuronInstance = Neuron(nrnAddress);

```
*Github:* [[65](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L65), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L66), [67](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L67)]


```solidity
File: src/VoltageManager.sol

52:         _ownerAddress = ownerAddress;

53:         _gameItemsContractInstance = GameItems(gameItemsContractAddress);

66:         _ownerAddress = newOwnerAddress;

```
*Github:* [[52](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L52), [53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L53), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L66)]


</details>


<a name="GAS-26"></a> 
### [GAS-26] Use byte32 in place of string
For strings of 32 char strings and below you can use bytes32 instead as it's more gas efficient

*There are <b>2</b> instances of this issue:*
```solidity
File: src/GameItems.sol

49:     string public name = "AI Arena Game Items";

52:     string public symbol = "AGI";

```
*Github:* [[49](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L49), [52](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L52)]



<a name="GAS-27"></a> 
### [GAS-27] Using a double `if` statement instead of a logical AND (`&&`)
Using a double `if` statement instead of a logical AND (`&&`) can provide similar short-circuiting behavior whereas double if is slightly [more gas efficient](https://gist.github.com/DadeKuma/931ce6794a050201ec6544dbcc31316c).

*There are <b>10</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

101:                   i == 0 && iconsType == 2 || // Custom icons head (beta helmet)

102:                   i == 1 && iconsType > 0 || // Custom icons eyes (red diamond)

103:                   i == 4 && iconsType == 3 // Custom icons hands (bowling ball)

```
*Github:* [[101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L101), [102](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L102), [103](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L103)]


```solidity
File: src/FighterFarm.sol

208:         require(modelHashes.length == totalToMint && modelTypes.length == totalToMint);

244:             mintpassIdsToBurn.length == mintPassDnas.length && 

245:             mintPassDnas.length == fighterTypes.length && 

246:             fighterTypes.length == modelHashes.length &&

541:           _isApprovedOrOwner(msg.sender, tokenId) &&

542:           balanceOf(to) < MAX_FIGHTERS_ALLOWED &&

```
*Github:* [[208](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L208), [244](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L244), [245](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L245), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L246), [541](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L541), [542](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L542)]


```solidity
File: src/GameItems.sol

154:                 allGameItemAttributes[tokenId].finiteSupply == true && 

```
*Github:* [[154](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L154)]



<a name="GAS-28"></a> 
### [GAS-28] Consider using OZ EnumerateSet in place of nested mappings
Nested mappings and multi-dimensional arrays in Solidity operate through a process of double hashing, wherein the original storage slot and the first key are concatenated and hashed, and then this hash is again concatenated with the second key and hashed. This process can be quite gas expensive due to the double-hashing operation and subsequent storage operation (sstore).

A possible optimization involves manually concatenating the keys followed by a single hash operation and an sstore. However, this technique introduces the risk of storage collision, especially when there are other nested hash maps in the contract that use the same key types. Because Solidity is unaware of the number and structure of nested hash maps in a contract, it follows a conservative approach in computing the storage slot to avoid possible collisions.

OpenZeppelin's EnumerableSet provides a potential solution to this problem. It creates a data structure that combines the benefits of set operations with the ability to enumerate stored elements, which is not natively available in Solidity. EnumerableSet handles the element uniqueness internally and can therefore provide a more gas-efficient and collision-resistant alternative to nested mappings or multi-dimensional arrays in certain scenarios.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

30:     mapping(uint256 => mapping(string => uint8[])) public attributeProbabilities;

```
*Github:* [[30](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L30)]


```solidity
File: src/FighterFarm.sol

88:     mapping(address => mapping(uint8 => uint8)) public nftsClaimed;

```
*Github:* [[88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L88)]


```solidity
File: src/GameItems.sol

74:     mapping(address => mapping(uint256 => uint256)) public allowanceRemaining;

77:     mapping(address => mapping(uint256 => uint256)) public dailyAllowanceReplenishTime;

```
*Github:* [[74](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L74), [77](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L77)]


```solidity
File: src/RankedBattle.sol

113:     mapping(address => mapping(uint256 => uint256)) public accumulatedPointsPerAddress;

116:     mapping(uint256 => mapping(uint256 => uint256)) public accumulatedPointsPerFighter;

125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[113](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L113), [116](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L116), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/StakeAtRisk.sol

46:     mapping(uint256 => mapping(uint256 => uint256)) public stakeAtRisk;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L46)]



<a name="GAS-29"></a> 
### [GAS-29] Use local variables for emitting
Use the function/modifier's local copy of the state variable, rather than incurring an extra Gwarmaccess (100 gas). In the unlikely event that the state variable hasn't already been used by the function/modifier, consider whether it is really necessary to include it in the event, given the fact that it incurs a Gcoldsload (2100 gas), or whether it can be passed in to or back out of the functions that do use it

*There are <b>3</b> instances of this issue:*
```solidity
File: src/GameItems.sol

/// @audit `_itemCount`
231:           emit Locked(_itemCount);

```
*Github:* [[231](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L231)]


```solidity
File: src/VoltageManager.sol

/// @audit `ownerVoltage`
98:         emit VoltageRemaining(msg.sender, ownerVoltage[msg.sender]);

/// @audit `ownerVoltage`
111:         emit VoltageRemaining(spender, ownerVoltage[spender]);

```
*Github:* [[98](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L98), [111](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L111)]



<a name="GAS-30"></a> 
### [GAS-30] Use a more recent version of solidity
- Use a solidity version of at least 0.8.2 to get simple compiler automatic inlining.
- Use a solidity version of at least 0.8.3 to get better struct packing and cheaper multiple storage reads.
- Use a solidity version of at least 0.8.4 to get custom errors, which are cheaper at deployment than revert()/require() strings.
- Use a solidity version of at least 0.8.10 to have external calls skip contract existence checks if the external call has a return value.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

3: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[3](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L3)]


```solidity
File: src/FighterFarm.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L2)]


```solidity
File: src/GameItems.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L2)]


```solidity
File: src/MergingPool.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L2)]


```solidity
File: src/Neuron.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L2)]


```solidity
File: src/RankedBattle.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L2)]


```solidity
File: src/StakeAtRisk.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L2)]


```solidity
File: src/VoltageManager.sol

2: pragma solidity >=0.8.0 <0.9.0;

```
*Github:* [[2](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L2)]



<a name="GAS-31"></a> 
### [GAS-31] Use != 0 instead of > 0
Replace spotted instances with != 0 for uints as this uses less gas.

<details>
<summary>
There are <b>11</b> instances (click to show):
</summary>

```solidity
File: src/GameItems.sol

258:         if (bytes(customURI).length > 0) {

```
*Github:* [[258](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L258)]


```solidity
File: src/MergingPool.sol

164:         if (claimIndex > 0) {

```
*Github:* [[164](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L164)]


```solidity
File: src/RankedBattle.sol

235:         require(totalAccumulatedPoints[roundId] > 0);

245:         require(amount > 0, "Amount cannot be 0");

306:         if (claimableNRN > 0) {

342:         if (amountStaked[tokenId] + stakeAtRisk > 0) {

460:             if (curStakeAtRisk > 0) {

469:             if (points > 0) {

479:             if (accumulatedPointsPerFighter[tokenId][roundId] > 0) {

488:                 if (points > 0) {

```
*Github:* [[235](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L235), [245](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L245), [306](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L306), [342](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L342), [460](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L460), [469](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L469), [479](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L479), [488](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L488)]


```solidity
File: src/VoltageManager.sol

95:         require(_gameItemsContractInstance.balanceOf(msg.sender, 0) > 0);

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L95)]


</details>


<a name="GAS-32"></a> 
### [GAS-32] Consider Using Solady's Gas Optimized Lib for Math
In instances where many similar mathematical operations are performed, consider using Solday's math lib to benefit from the gas saving it can introduce.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

39:     uint256 public rerollCost = 1000 * 10**18;    

```
*Github:* [[39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L39)]


```solidity
File: src/Neuron.sol

37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

```
*Github:* [[37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43)]


```solidity
File: src/RankedBattle.sol

157:         rankedNrnDistribution[0] = 5000 * 10**18;

220:         rankedNrnDistribution[roundId] = newDistribution * 10**18;

439:         curStakeAtRisk = (bpsLostPerLoss * (amountStaked[tokenId] + stakeAtRisk)) / 10**4;

449:             uint256 mergingPoints = (points * mergingPortion) / 100;

528:           (amountStaked[tokenId] + stakeAtRisk) / 10**18

```
*Github:* [[157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L157), [220](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L220), [439](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L439), [449](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L449), [528](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L528)]



<a name="GAS-33"></a> 
### [GAS-33] Use solady library where possible to save gas
The following OpenZeppelin imports have a Solady equivalent, as such they can be used to save GAS as Solady modules have been specifically designed to be as GAS efficient as possible

*There is one instance of this issue:*
```solidity
File: src/Neuron.sol

4: import "@openzeppelin/contracts/token/ERC20/ERC20.sol";

```
*Github:* [[4](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L4)]



<a name="GAS-34"></a> 
### [GAS-34] Use `storage` instead of `memory` for structs/arrays
When fetching data from a storage location, assigning the data to a `memory` variable causes all fields of the struct/array to be read from storage, which incurs a Gcoldsload (**2100 gas**) for *each* field of the struct/array. If the fields are read from the new memory variable, they incur an additional `MLOAD` rather than a cheap stack read. Instead of declaring the variable with the `memory` keyword, declaring the variable with the `storage` keyword and caching any fields that need to be re-read in stack variables, will be much cheaper, only incurring the Gcoldsload for the fields actually read. The only time it makes sense to read the whole struct/array into a `memory` variable, is if the full struct/array is being returned by the function, is being passed to a function that requires `memory`, or if the array/struct is being read from another `memory` array/struct.

*There is one instance of this issue:*
```solidity
File: src/GameItems.sol

257:         string memory customURI = _tokenURIs[tokenId];

```
*Github:* [[257](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L257)]



<a name="GAS-35"></a> 
### [GAS-35] Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes
Avoids a Gsset (20000 gas) when changing from false to true, after having been true in the past. Since most of the bools aren't changed twice in one transaction, I've counted the amount of gas as half of the full amount, for each variable.

<details>
<summary>
There are <b>12</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

76:     mapping(uint256 => bool) public fighterStaked;

82:     mapping(address => bool) public hasStakerRole;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L76), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L82)]


```solidity
File: src/GameItems.sol

80:     mapping(address => bool) public allowedBurningAddresses;

83:     mapping(address => bool) public isAdmin;

```
*Github:* [[80](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L80), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L83)]


```solidity
File: src/MergingPool.sol

57:     mapping(uint256 => bool) public isSelectionComplete;

60:     mapping(address => bool) public isAdmin;

```
*Github:* [[57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L57), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L60)]


```solidity
File: src/Neuron.sol

56:     mapping(address => bool) public isAdmin;

```
*Github:* [[56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L56)]


```solidity
File: src/RankedBattle.sol

101:     mapping(address => bool) public isAdmin;

125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L101), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/VoltageManager.sol

33:     mapping(address => bool) public allowedVoltageSpenders;

42:     mapping(address => bool) public isAdmin;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L33), [42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L42)]


</details>


<a name="GAS-36"></a> 
### [GAS-36] Using bitmap to store bool states can save gas
Using a bitmap instead of a bool array or a bool mapping to store boolean states can save gas fees. This is because the bitmap can store 256 boolean values in a single slot instead of 256 slots, which can save gas when writing bool values or when reading multiple bool values from the same slot.

<details>
<summary>
There are <b>12</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

76:     mapping(uint256 => bool) public fighterStaked;

82:     mapping(address => bool) public hasStakerRole;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L76), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L82)]


```solidity
File: src/GameItems.sol

80:     mapping(address => bool) public allowedBurningAddresses;

83:     mapping(address => bool) public isAdmin;

```
*Github:* [[80](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L80), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L83)]


```solidity
File: src/MergingPool.sol

57:     mapping(uint256 => bool) public isSelectionComplete;

60:     mapping(address => bool) public isAdmin;

```
*Github:* [[57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L57), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L60)]


```solidity
File: src/Neuron.sol

56:     mapping(address => bool) public isAdmin;

```
*Github:* [[56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L56)]


```solidity
File: src/RankedBattle.sol

101:     mapping(address => bool) public isAdmin;

125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L101), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/VoltageManager.sol

33:     mapping(address => bool) public allowedVoltageSpenders;

42:     mapping(address => bool) public isAdmin;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L33), [42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L42)]


</details>


<a name="GAS-37"></a> 
### [GAS-37] `abi.encodePacked` is more gas efficient than `abi.encode`
`abi.encode` pads all elementary types to 32 bytes, whereas `abi.encodePacked` will only use the minimal required memory to encode the data. See [here](https://docs.soliditylang.org/en/v0.8.11/abi-spec.html?highlight=encodepacked#non-standard-packed-mode) for more info.

*There are <b>5</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

199:         bytes32 msgHash = bytes32(keccak256(abi.encode(

214:                 uint256(keccak256(abi.encode(msg.sender, fighters.length))),

254:                 uint256(keccak256(abi.encode(mintPassDnas[i]))), 

324:             uint256(keccak256(abi.encode(msg.sender, fighters.length))), 

379:             uint256 dna = uint256(keccak256(abi.encode(msg.sender, tokenId, numRerolls[tokenId])));

```
*Github:* [[199](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L199), [214](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L214), [254](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L254), [324](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L324), [379](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L379)]



<a name="GAS-38"></a> 
### [GAS-38] Using bools for storage incurs overhead
Use uint256(1) and uint256(2) for true/false to avoid a Gwarmaccess (100 gas), and to avoid Gsset (20000 gas) when changing from ‘false’ to ‘true’, after having been ‘true’ in the past. See [source](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/58f635312aa21f947cae5f8578638a85aa2519f5/contracts/security/ReentrancyGuard.sol#L23-L27).

<details>
<summary>
There are <b>12</b> instances (click to show):
</summary>

```solidity
File: src/FighterFarm.sol

76:     mapping(uint256 => bool) public fighterStaked;

82:     mapping(address => bool) public hasStakerRole;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L76), [82](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L82)]


```solidity
File: src/GameItems.sol

80:     mapping(address => bool) public allowedBurningAddresses;

83:     mapping(address => bool) public isAdmin;

```
*Github:* [[80](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L80), [83](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L83)]


```solidity
File: src/MergingPool.sol

57:     mapping(uint256 => bool) public isSelectionComplete;

60:     mapping(address => bool) public isAdmin;

```
*Github:* [[57](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L57), [60](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L60)]


```solidity
File: src/Neuron.sol

56:     mapping(address => bool) public isAdmin;

```
*Github:* [[56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L56)]


```solidity
File: src/RankedBattle.sol

101:     mapping(address => bool) public isAdmin;

125:     mapping(uint256 => mapping(uint256 => bool)) public hasUnstaked;

134:     mapping(uint256 => mapping(uint256 => bool)) _calculatedStakingFactor;

```
*Github:* [[101](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L101), [125](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L125), [134](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L134)]


```solidity
File: src/VoltageManager.sol

33:     mapping(address => bool) public allowedVoltageSpenders;

42:     mapping(address => bool) public isAdmin;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L33), [42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L42)]


</details>


<a name="GAS-39"></a> 
### [GAS-39] Cache array length outside of loop
If not cached, the solidity compiler will always read the length of the array during each iteration. That is, if it is a storage array, this is an extra sload operation (100 additional extra gas for each iteration except for the first) and if it is a memory array, this is an extra mload operation (3 additional gas for each iteration except for the first).

*There is one instance of this issue:*
```solidity
File: src/FighterFarm.sol

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]



<a name="GAS-40"></a> 
### [GAS-40] State variables should be cached in stack variables rather than re-reading them from storage
The instances below point to the second+ access of a state variable within a function. Caching of a state variable replaces each Gwarmaccess (100 gas) with a much cheaper stack read. Other less obvious fixes/optimizations include having local memory caches of state variable structs, or having local caches of state variable contracts/addresses.

<details>
<summary>
There are <b>19</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

/// @audit more than 1 read for `_ownerAddress`, line 63 and 62
63:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `_ownerAddress`, line 63 and 62
63:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `attributes`, line 72 and 70
72:         uint256 attributesLength = attributes.length;

```
*Github:* [[63](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L63), [63](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L63), [72](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L72)]


```solidity
File: src/FighterFarm.sol

/// @audit more than 1 read for `_ownerAddress`, line 122 and 121
122:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `_ownerAddress`, line 122 and 121
122:         _ownerAddress = newOwnerAddress;

```
*Github:* [[122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L122), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L122)]


```solidity
File: src/GameItems.sol

/// @audit more than 1 read for `_ownerAddress`, line 110 and 109
110:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `_ownerAddress`, line 110 and 109
110:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `allGameItemAttributes`, line 155 and 149
155:                 quantity <= allGameItemAttributes[tokenId].itemsRemaining

```
*Github:* [[110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L110), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L110), [155](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L155)]


```solidity
File: src/MergingPool.sol

/// @audit more than 1 read for `_ownerAddress`, line 91 and 90
91:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `_ownerAddress`, line 91 and 90
91:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `winnerAddresses`, line 153 and 151
153:                 if (msg.sender == winnerAddresses[currentRound][j]) {

/// @audit more than 1 read for `winnerAddresses`, line 179 and 177
179:                 if (claimer == winnerAddresses[currentRound][j]) {

```
*Github:* [[91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L91), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L91), [153](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L153), [179](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L179)]


```solidity
File: src/Neuron.sol

/// @audit more than 1 read for `_ownerAddress`, line 87 and 86
87:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `_ownerAddress`, line 87 and 86
87:         _ownerAddress = newOwnerAddress;

```
*Github:* [[87](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L87), [87](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L87)]


```solidity
File: src/RankedBattle.sol

/// @audit more than 1 read for `_ownerAddress`, line 169 and 168
169:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `_ownerAddress`, line 169 and 168
169:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `stakingFactor`, line 481 and 445
481:                 points = stakingFactor[tokenId] * eloFactor;

```
*Github:* [[169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L169), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L169), [481](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L481)]


```solidity
File: src/VoltageManager.sol

/// @audit more than 1 read for `_ownerAddress`, line 66 and 65
66:         _ownerAddress = newOwnerAddress;

/// @audit more than 1 read for `_ownerAddress`, line 66 and 65
66:         _ownerAddress = newOwnerAddress;

```
*Github:* [[66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L66), [66](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L66)]


</details>


<a name="GAS-41"></a> 
### [GAS-41] Use `calldata` instead of `memory` for function arguments that do not get mutated
Mark data types as `calldata` instead of `memory` where possible. This makes it so that the data is not automatically loaded into memory. If the data passed into the function does not need to be changed (like updating values in an array), it can be passed in as `calldata`. The one exception to this is if the argument must later be passed into another function that takes an argument that specifies `memory` storage.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

/// @audit make `probabilities` as a calldata
41:     constructor(uint8[][] memory probabilities) {

/// @audit make `attributeDivisors` as a calldata
68:     function addAttributeDivisor(uint8[] memory attributeDivisors) external {

/// @audit make `probabilities` as a calldata
131:     function addAttributeProbabilities(uint256 generation, uint8[][] memory probabilities) public {

/// @audit make `attribute` as a calldata
157:     function getAttributeProbabilities(uint256 generation, string memory attribute) 

/// @audit make `attribute` as a calldata
169:     function dnaToIndex(uint256 generation, uint256 rarityRank, string memory attribute) 

```
*Github:* [[41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L41), [68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L68), [131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L131), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L157), [169](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L169)]


```solidity
File: src/GameItems.sol

/// @audit make `_tokenURI` as a calldata
194:     function setTokenURI(uint256 tokenId, string memory _tokenURI) public {

/// @audit make `name_` as a calldata
209:         string memory name_,

/// @audit make `tokenURI` as a calldata
210:         string memory tokenURI,

/// @audit make `data` as a calldata
296:         bytes memory data

```
*Github:* [[194](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L194), [209](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L209), [210](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L210), [296](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L296)]



<a name="GAS-42"></a> 
### [GAS-42] Use Custom Errors
[Source](https://blog.soliditylang.org/2021/04/21/custom-errors/)
Instead of using error strings, to reduce deployment and runtime cost, you should use Custom Errors. This would save both deployment and runtime cost.

<details>
<summary>
There are <b>17</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

133:         require(probabilities.length == 6, "Invalid number of attribute arrays");

```
*Github:* [[133](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L133)]


```solidity
File: src/FighterFarm.sol

373:         require(_neuronInstance.balanceOf(msg.sender) >= rerollCost, "Not enough NRN for reroll");

```
*Github:* [[373](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L373)]


```solidity
File: src/GameItems.sol

150:         require(_neuronInstance.balanceOf(msg.sender) >= price, "Not enough NRN for purchase");

```
*Github:* [[150](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L150)]


```solidity
File: src/MergingPool.sol

120:         require(winners.length == winnersPerPeriod, "Incorrect number of winners");

121:         require(!isSelectionComplete[roundId], "Winners are already selected");

196:         require(msg.sender == _rankedBattleAddress, "Not Ranked Battle contract address");

```
*Github:* [[120](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L120), [121](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L121), [196](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L196)]


```solidity
File: src/Neuron.sol

156:         require(totalSupply() + amount < MAX_SUPPLY, "Trying to mint more than the max supply");

157:         require(hasRole(MINTER_ROLE, msg.sender), "ERC20: must have minter role to mint");

```
*Github:* [[156](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L156), [157](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L157)]


```solidity
File: src/RankedBattle.sol

245:         require(amount > 0, "Amount cannot be 0");

246:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

247:         require(_neuronInstance.balanceOf(msg.sender) >= amount, "Stake amount exceeds balance");

248:         require(hasUnstaked[tokenId][roundId] == false, "Cannot add stake after unstaking this round");

271:         require(_fighterFarmInstance.ownerOf(tokenId) == msg.sender, "Caller does not own fighter");

295:         require(numRoundsClaimed[msg.sender] < roundId, "Already claimed NRNs for this period");

```
*Github:* [[245](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L245), [246](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L246), [247](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L247), [248](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L248), [271](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L271), [295](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L295)]


```solidity
File: src/StakeAtRisk.sol

79:         require(msg.sender == _rankedBattleAddress, "Not authorized to set new round");

94:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

122:         require(msg.sender == _rankedBattleAddress, "Call must be from RankedBattle contract");

```
*Github:* [[79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L79), [94](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L94), [122](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L122)]


</details>


<a name="GAS-43"></a> 
### [GAS-43] Don't initialize variables with default value

<details>
<summary>
There are <b>26</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

48:         for (uint8 i = 0; i < attributesLength; i++) {

73:         for (uint8 i = 0; i < attributesLength; i++) {

99:             for (uint8 i = 0; i < attributesLength; i++) {

136:         for (uint8 i = 0; i < attributesLength; i++) {

148:         for (uint8 i = 0; i < attributesLength; i++) {

176:         uint256 cumProb = 0;

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L176), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

211:         for (uint16 i = 0; i < totalToMint; i++) {

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/GameItems.sol

64:     uint256 _itemCount = 0;    

```
*Github:* [[64](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L64)]


```solidity
File: src/MergingPool.sol

29:     uint256 public roundId = 0;

32:     uint256 public totalPoints = 0;    

124:         for (uint256 i = 0; i < winnersLength; i++) {

147:         uint32 claimIndex = 0;

152:             for (uint32 j = 0; j < winnersLength; j++) {

174:         uint256 numRewards = 0;

178:             for (uint32 j = 0; j < winnersLength; j++) {

207:         for (uint256 i = 0; i < maxId; i++) {

```
*Github:* [[29](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L29), [32](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L32), [124](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L124), [147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L147), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [174](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L174), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L207)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131)]


```solidity
File: src/RankedBattle.sol

56:     uint256 public totalBattles = 0;

59:     uint256 public globalStakedAmount = 0;

62:     uint256 public roundId = 0;

296:         uint256 claimableNRN = 0;

387:         uint256 claimableNRN = 0;

427:         uint256 points = 0;

```
*Github:* [[56](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L56), [59](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L59), [62](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L62), [296](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L296), [387](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L387), [427](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L427)]


```solidity
File: src/StakeAtRisk.sol

27:     uint256 public roundId = 0;    

```
*Github:* [[27](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/StakeAtRisk.sol#L27)]


</details>


<a name="GAS-44"></a> 
### [GAS-44] Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead
Using `int`s/`uint`s smaller than 32 bytes may cost more gas. This is because the EVM operates on 32 bytes at a time, so if an element is smaller than 32 bytes, the EVM must perform more operations to reduce the size of the element from 32 bytes to the desired size.

<details>
<summary>
There are <b>75</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

20:     uint8[] public defaultAttributeDivisor = [2, 3, 5, 7, 11, 13];

30:     mapping(uint256 => mapping(string => uint8[])) public attributeProbabilities;

33:     mapping(string => uint8) public attributeToDnaDivisor;

41:     constructor(uint8[][] memory probabilities) {

48:         for (uint8 i = 0; i < attributesLength; i++) {

68:     function addAttributeDivisor(uint8[] memory attributeDivisors) external {

73:         for (uint8 i = 0; i < attributesLength; i++) {

85:         uint8 generation, 

86:         uint8 iconsType, 

99:             for (uint8 i = 0; i < attributesLength; i++) {

131:     function addAttributeProbabilities(uint256 generation, uint8[][] memory probabilities) public {

136:         for (uint8 i = 0; i < attributesLength; i++) {

144:     function deleteAttributeProbabilities(uint8 generation) public {

148:         for (uint8 i = 0; i < attributesLength; i++) {

149:             attributeProbabilities[generation][attributes[i]] = new uint8[](0);

160:         returns (uint8[] memory) 

174:         uint8[] memory attrProbabilities = getAttributeProbabilities(generation, attribute);

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L20), [30](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L30), [33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L33), [41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L41), [48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [68](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L68), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L85), [86](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L86), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L131), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [144](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L144), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [149](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L149), [160](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L160), [174](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L174), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

33:     uint8 public constant MAX_FIGHTERS_ALLOWED = 10;

36:     uint8[2] public maxRerollsAllowed = [3, 3];

42:     uint8[2] public generation = [0, 0];

45:     uint32 public totalNumTrained;

79:     mapping(uint256 => uint8) public numRerolls;

85:     mapping(uint8 => uint8) public numElements;

85:     mapping(uint8 => uint8) public numElements;

88:     mapping(address => mapping(uint8 => uint8)) public nftsClaimed;

88:     mapping(address => mapping(uint8 => uint8)) public nftsClaimed;

91:     mapping(uint256 => uint32) public numTrained;

129:     function incrementGeneration(uint8 fighterType) external returns (uint8) {

129:     function incrementGeneration(uint8 fighterType) external returns (uint8) {

192:         uint8[2] calldata numToMint,

207:         uint16 totalToMint = uint16(numToMint[0] + numToMint[1]);

207:         uint16 totalToMint = uint16(numToMint[0] + numToMint[1]);

211:         for (uint16 i = 0; i < totalToMint; i++) {

235:         uint8[] calldata fighterTypes,

236:         uint8[] calldata iconsTypes,

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

370:     function reRoll(uint8 tokenId, uint8 fighterType) public {

370:     function reRoll(uint8 tokenId, uint8 fighterType) public {

433:             uint16

464:         uint8 fighterType

489:         uint8 fighterType,

490:         uint8 iconsType,

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L33), [36](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L36), [42](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L42), [45](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L45), [79](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L79), [85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L85), [85](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L85), [88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L88), [88](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L88), [91](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L91), [129](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L129), [129](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L129), [192](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L192), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L207), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L207), [211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [235](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L235), [236](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L236), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249), [370](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L370), [370](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L370), [433](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L433), [464](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L464), [489](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L489), [490](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L490)]


```solidity
File: src/GameItems.sol

215:         uint16 dailyAllowance

314:         dailyAllowanceReplenishTime[msg.sender][tokenId] = uint32(block.timestamp + 1 days);

```
*Github:* [[215](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L215), [314](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L314)]


```solidity
File: src/MergingPool.sol

19:     event Claimed(address claimer, uint32 amount);

48:     mapping(address => uint32) public numRoundsClaimed;

147:         uint32 claimIndex = 0;

148:         uint32 lowerBound = numRoundsClaimed[msg.sender];

149:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

152:             for (uint32 j = 0; j < winnersLength; j++) {

175:         uint32 lowerBound = numRoundsClaimed[claimer];

176:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

178:             for (uint32 j = 0; j < winnersLength; j++) {

```
*Github:* [[19](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L19), [48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L48), [147](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L147), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L148), [149](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L149), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [175](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L175), [176](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L176), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131)]


```solidity
File: src/RankedBattle.sol

43:         uint32 wins;

44:         uint32 ties;

45:         uint32 loses;

53:     uint8 public constant VOLTAGE_COST = 10;

110:     mapping(address => uint32) public numRoundsClaimed;

298:         uint32 lowerBound = numRoundsClaimed[msg.sender];

299:         for (uint32 currentRound = lowerBound; currentRound < roundId; currentRound++) {

325:         uint8 battleResult,

354:     function getBattleRecord(uint256 tokenId) external view returns(uint32, uint32, uint32) {

354:     function getBattleRecord(uint256 tokenId) external view returns(uint32, uint32, uint32) {

354:     function getBattleRecord(uint256 tokenId) external view returns(uint32, uint32, uint32) {

389:         uint32 lowerBound = numRoundsClaimed[claimer];

390:         for (uint32 i = lowerBound; i < roundId; i++) {

417:         uint8 battleResult, 

505:     function _updateRecord(uint256 tokenId, uint8 battleResult) private {

```
*Github:* [[43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L43), [44](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L44), [45](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L45), [53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L53), [110](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L110), [298](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L298), [299](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L299), [325](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L325), [354](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L354), [354](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L354), [354](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L354), [389](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L389), [390](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L390), [417](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L417), [505](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L505)]


```solidity
File: src/VoltageManager.sol

16:     event VoltageRemaining(address spender, uint8 voltage);  

36:     mapping(address => uint32) public ownerVoltageReplenishTime;

39:     mapping(address => uint8) public ownerVoltage;

105:     function spendVoltage(address spender, uint8 voltageSpent) public {

119:         ownerVoltageReplenishTime[owner] = uint32(block.timestamp + 1 days);

```
*Github:* [[16](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L16), [36](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L36), [39](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L39), [105](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L105), [119](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L119)]


</details>


<a name="GAS-45"></a> 
### [GAS-45] Constructors can be marked as `payable` to save deployment gas
Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. A constructor can be safely marked as payable, because only the deployer would be able to pass funds, and the project itself would not pass any funds.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/AiArenaHelper.sol

41:     constructor(uint8[][] memory probabilities) {

```
*Github:* [[41](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L41)]


```solidity
File: src/GameItems.sol

95:     constructor(address ownerAddress, address treasuryAddress_) ERC1155("https://ipfs.io/ipfs/") {

```
*Github:* [[95](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/GameItems.sol#L95)]


```solidity
File: src/VoltageManager.sol

51:     constructor(address ownerAddress, address gameItemsContractAddress) {

```
*Github:* [[51](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/VoltageManager.sol#L51)]



<a name="GAS-46"></a> 
### [GAS-46] `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too)
*Saves 5 gas per loop*

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: src/AiArenaHelper.sol

48:         for (uint8 i = 0; i < attributesLength; i++) {

73:         for (uint8 i = 0; i < attributesLength; i++) {

99:             for (uint8 i = 0; i < attributesLength; i++) {

136:         for (uint8 i = 0; i < attributesLength; i++) {

148:         for (uint8 i = 0; i < attributesLength; i++) {

178:         for (uint8 i = 0; i < attrProbabilitiesLength; i++) {

```
*Github:* [[48](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L48), [73](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L73), [99](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L99), [136](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L136), [148](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L148), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/AiArenaHelper.sol#L178)]


```solidity
File: src/FighterFarm.sol

211:         for (uint16 i = 0; i < totalToMint; i++) {

249:         for (uint16 i = 0; i < mintpassIdsToBurn.length; i++) {

```
*Github:* [[211](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L211), [249](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L249)]


```solidity
File: src/MergingPool.sol

124:         for (uint256 i = 0; i < winnersLength; i++) {

152:             for (uint32 j = 0; j < winnersLength; j++) {

178:             for (uint32 j = 0; j < winnersLength; j++) {

207:         for (uint256 i = 0; i < maxId; i++) {

```
*Github:* [[124](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L124), [152](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L152), [178](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L178), [207](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/MergingPool.sol#L207)]


```solidity
File: src/Neuron.sol

131:         for (uint32 i = 0; i < recipientsLength; i++) {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L131)]


```solidity
File: src/RankedBattle.sol

390:         for (uint32 i = lowerBound; i < roundId; i++) {

```
*Github:* [[390](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L390)]


</details>


<a name="GAS-47"></a> 
### [GAS-47] Using `private` rather than `public` for constants, saves gas
If needed, the values can be read from the verified contract source code, or if there are multiple values there can be a single getter function that [returns a tuple](https://github.com/code-423n4/2022-08-frax/blob/90f55a9ce4e25bceed3a74290b854341d8de6afa/src/contracts/FraxlendPair.sol#L156-L178) of the values of all currently-public constants. Saves **3406-3606 gas** in deployment gas due to the compiler not having to create non-payable getter functions for deployment calldata, not having to store the bytes of the value outside of where it's used, and not adding another entry to the method ID table

*There are <b>8</b> instances of this issue:*
```solidity
File: src/FighterFarm.sol

33:     uint8 public constant MAX_FIGHTERS_ALLOWED = 10;

```
*Github:* [[33](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L33)]


```solidity
File: src/Neuron.sol

28:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

31:     bytes32 public constant SPENDER_ROLE = keccak256("SPENDER_ROLE");

34:     bytes32 public constant STAKER_ROLE = keccak256("STAKER_ROLE");

37:     uint256 public constant INITIAL_TREASURY_MINT = 10**18 * 10**8 * 2;

40:     uint256 public constant INITIAL_CONTRIBUTOR_MINT = 10**18 * 10**8 * 5;

43:     uint256 public constant MAX_SUPPLY = 10**18 * 10**9;

```
*Github:* [[28](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L28), [31](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L31), [34](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L34), [37](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L37), [40](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L40), [43](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/Neuron.sol#L43)]


```solidity
File: src/RankedBattle.sol

53:     uint8 public constant VOLTAGE_COST = 10;

```
*Github:* [[53](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/RankedBattle.sol#L53)]



<a name="GAS-48"></a> 
### [GAS-48] Splitting require() statements that use && saves gas

*There is one instance of this issue:*
```solidity
File: src/FighterFarm.sol

208:         require(modelHashes.length == totalToMint && modelTypes.length == totalToMint);

```
*Github:* [[208](https://github.com/code-423n4/2024-02-ai-arena/blob/5b2ab9f9fadd0b91268ff6f22b4ae0fd5b79ec09/src/FighterFarm.sol#L208)]



