# Report

Audit report for **2023-10-party** generated by *ubl4nk_bot*.

## Medium Issues


*Total <b>18</b> instances over <b>5</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [M-1](#M-1) | `call()` should be used instead of `transfer()`/`send()` on an address payable | 1 |
| [M-2](#M-2) | The remaining ETH may be locked in the contract after call | 2 |
| [M-3](#M-3) | Unchecked return value of low-level `call()`/`delegatecall()` | 3 |
| [M-4](#M-4) | Return values of `transfer()`/`transferFrom()` not checked | 2 |
| [M-5](#M-5) | Centralization Risk for trusted owners | 10 |

## Low Issues


*Total <b>124</b> instances over <b>19</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [L-1](#L-1) | Missing zero address check in functions with address parameters | 21 |
| [L-2](#L-2) | Array is `push()`ed but not `pop()`ed | 1 |
| [L-3](#L-3) | Check division by zero is prevented | 14 |
| [L-4](#L-4) | Constructor / initialization function lacks parameter validation | 3 |
| [L-5](#L-5) | Enum values should be used instead of constant array indexes | 1 |
| [L-6](#L-6) | External call recipient can consume all remaining gas | 3 |
| [L-7](#L-7) | Loss of precision in divisions | 14 |
| [L-8](#L-8) | Missing contract existence checks before low-level calls | 3 |
| [L-9](#L-9) | Missing zero address check in constructor | 2 |
| [L-10](#L-10) | Consider some checks for `address(0)` when setting address state variables | 6 |
| [L-11](#L-11) | `receive()`/`fallback()` function does not authorize requests | 1 |
| [L-12](#L-12) | Solidity version 0.8.20 or above may not work on other chains due to PUSH0 | 10 |
| [L-13](#L-13) | Timestamp may be manipulation | 19 |
| [L-14](#L-14) | Unsafe solidity low-level call can cause gas grief attack | 3 |
| [L-15](#L-15) | Consider using `ERC721A` instead of `ERC721` | 1 |
| [L-16](#L-16) | Using zero as a parameter | 18 |
| [L-17](#L-17) | Missing zero address check in initializer | 1 |
| [L-18](#L-18) | Empty body - Consider commenting why | 1 |
| [L-19](#L-19) | Initializers could be front-run | 2 |

## Non Critical Issues


*Total <b>1264</b> instances over <b>79</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [NC-1](#NC-1) | Assembly blocks should have extensive comments | 9 |
| [NC-2](#NC-2) | `abi.encodePacked()` should be replaced with `bytes.concat()` | 1 |
| [NC-3](#NC-3) | Add inline comments for unnamed variables | 2 |
| [NC-4](#NC-4) | `assert()` should be replaced with `require()` or `revert()` | 3 |
| [NC-5](#NC-5) | Consider adding a block/deny-list | 10 |
| [NC-6](#NC-6) | Consider adding emergency-stop functionality | 10 |
| [NC-7](#NC-7) | Consider adding formal verification proofs | 1 |
| [NC-8](#NC-8) | Consider bounding input array length | 3 |
| [NC-9](#NC-9) | Consider using descriptive `constant`s when passing zero as a function argument | 11 |
| [NC-10](#NC-10) | Constants should be put on the left side of comparisons | 50 |
| [NC-11](#NC-11) | Contract does not follow the Solidity Style Guide's suggested layout ordering | 55 |
| [NC-12](#NC-12) | Contract should expose an `interface` | 62 |
| [NC-13](#NC-13) | Contract uses both `require()`/`revert()` as well as custom errors | 1 |
| [NC-14](#NC-14) | Contracts should have full test coverage | 1 |
| [NC-15](#NC-15) | Events that mark critical parameter changes should contain both the old and the new value | 35 |
| [NC-16](#NC-16) | Custom errors has no error details | 29 |
| [NC-17](#NC-17) | Polymorphic functions make security audits more time-consuming and error-prone | 4 |
| [NC-18](#NC-18) | Duplicated `require()`/`revert()` checks should be refactored | 8 |
| [NC-19](#NC-19) | `else` block not required | 2 |
| [NC-20](#NC-20) | Empty bytes check is missing | 16 |
| [NC-21](#NC-21) | Enable IR-based code generation | 1 |
| [NC-22](#NC-22) | Events are emitted without the sender information | 19 |
| [NC-23](#NC-23) | Events may be emitted out of order due to reentrancy | 14 |
| [NC-24](#NC-24) | Events should use parameters to convey information | 4 |
| [NC-25](#NC-25) |  Function ordering does not follow the Solidity Style Guide | 59 |
| [NC-26](#NC-26) | Functions and modifiers should be named in mixedCase style | 1 |
| [NC-27](#NC-27) | Functions with array parameters should have length checks in place | 9 |
| [NC-28](#NC-28) | High cyclomatic complexity | 6 |
| [NC-29](#NC-29) | Variable names for `immutable`s should use CONSTANT_CASE | 1 |
| [NC-30](#NC-30) | Import declarations should import specific identifiers, rather than the whole file | 27 |
| [NC-31](#NC-31) | Imports could be organized more systematically | 6 |
| [NC-32](#NC-32) | Large or complicated code bases should implement invariant tests | 1 |
| [NC-33](#NC-33) | Long functions should be refactored into multiple, smaller, functions | 9 |
| [NC-34](#NC-34) | Magic numbers should be replaced with constants | 16 |
| [NC-35](#NC-35) | Named mappings are recommended | 9 |
| [NC-36](#NC-36) | Named imports of parent contracts are missing | 3 |
| [NC-37](#NC-37) | Missing NatSpec from contract declarations | 5 |
| [NC-38](#NC-38) | Missing NatSpec `@author` from contract declaration | 10 |
| [NC-39](#NC-39) | Missing NatSpec `@dev` from contract declaration | 9 |
| [NC-40](#NC-40) | Missing NatSpec `@dev` from error declaration | 56 |
| [NC-41](#NC-41) | Missing NatSpec `@dev` from event declaration | 31 |
| [NC-42](#NC-42) | Missing NatSpec `@dev` from function declaration | 91 |
| [NC-43](#NC-43) | Missing NatSpec `@dev` from modifier declaration | 6 |
| [NC-44](#NC-44) | Error declarations should have NatSpec descriptions | 55 |
| [NC-45](#NC-45) | Event declarations should have NatSpec descriptions | 26 |
| [NC-46](#NC-46) | NatSpec documentation for function is missing | 44 |
| [NC-47](#NC-47) | Modifier declarations should have NatSpec descriptions | 6 |
| [NC-48](#NC-48) | Missing NatSpec `@notice` from contract declaration | 5 |
| [NC-49](#NC-49) | Missing NatSpec `@notice` from error declaration | 55 |
| [NC-50](#NC-50) | Missing NatSpec `@notice` from event declaration | 26 |
| [NC-51](#NC-51) | Missing NatSpec `@notice` from function declaration | 52 |
| [NC-52](#NC-52) | Missing NatSpec `@notice` from modifier declaration | 6 |
| [NC-53](#NC-53) | Missing NatSpec `@param` from error declaration | 27 |
| [NC-54](#NC-54) | Missing NatSpec `@param` from event declaration | 26 |
| [NC-55](#NC-55) | Missing NatSpec `@param` from function declaration | 46 |
| [NC-56](#NC-56) | Missing NatSpec `@return` from function declaration | 37 |
| [NC-57](#NC-57) | Missing NatSpec `@title` from contract declaration | 10 |
| [NC-58](#NC-58) | There is no need to initialize variables with 0 | 4 |
| [NC-59](#NC-59) | Put all system-wide constants in one file | 9 |
| [NC-60](#NC-60) | Redundant inheritance specifier | 1 |
| [NC-61](#NC-61) | Redundant `return` statement in a function with named return variables | 11 |
| [NC-62](#NC-62) | State variables should include comments | 2 |
| [NC-63](#NC-63) | Lines are too long | 2 |
| [NC-64](#NC-64) | Typos | 13 |
| [NC-65](#NC-65) | Unnecessary cast | 2 |
| [NC-66](#NC-66) | Unused `error` definition | 5 |
| [NC-67](#NC-67) | Unused named return | 14 |
| [NC-68](#NC-68) | Unused contract variables | 3 |
| [NC-69](#NC-69) | Consider using `delete` rather than assigning zero/false to clear values | 1 |
| [NC-70](#NC-70) | Expressions for constant values should use `immutable` rather than `constant` | 9 |
| [NC-71](#NC-71) | Use `@inheritdoc` for overridden functions | 3 |
| [NC-72](#NC-72) | Use the latest solidity version for deployment (`0.8.22`) | 10 |
| [NC-73](#NC-73) | Use of `override` is unnecessary | 5 |
| [NC-74](#NC-74) | Use a struct to encapsulate multiple function parameters | 2 |
| [NC-75](#NC-75) | Visibility of state variables is not explicitly defined | 2 |
| [NC-76](#NC-76) | Names of `private`/`internal` state variables should be prefixed with an underscore | 7 |
| [NC-77](#NC-77) |  `require()` / `revert()` statements should have descriptive reason strings | 2 |
| [NC-78](#NC-78) | Event is missing `indexed` fields | 21 |
| [NC-79](#NC-79) | Functions not used internally could be marked `external` | 9 |

## Gas Optimizations


*Total <b>565</b> instances over <b>48</b> issues:*

|ID|Issue|Instances|Gas|
|-|:-|:-:|:-:|
| [GAS-1](#GAS-1) | Optimize Gas by Using Do-While Loops | 10 | 2550 |
| [GAS-2](#GAS-2) | Consider activating via-ir for deploying | 1 | - |
| [GAS-3](#GAS-3) | Divisions can be `unchecked` to save gas | 14 | 280 |
| [GAS-4](#GAS-4) | Don't transfer with zero amount to save gas | 1 | - |
| [GAS-5](#GAS-5) | Operator `+=` costs more gas than `<x> = <x> + <y>` for state variables | 17 | 1921 |
| [GAS-6](#GAS-6) | Duplicated `require()`/`revert()` checks should be refactored to a modifier or function to save gas | 8 | - |
| [GAS-7](#GAS-7) | Events should be emitted outside of loops | 2 | 750 |
| [GAS-8](#GAS-8) | Increments can be `unchecked` to save gas | 13 | 780 |
| [GAS-9](#GAS-9) | Initializers can be marked as payable to save deployment gas | 2 | 42 |
| [GAS-10](#GAS-10) | `internal` functions only called once can be inlined to save gas | 9 | 270 |
| [GAS-11](#GAS-11) | `keccak256()` hash of literals should only be computed once | 5 | 210 |
| [GAS-12](#GAS-12) | Low level `call` can be optimized with assembly | 3 | 744 |
| [GAS-13](#GAS-13) | Multiple accesses of the same mapping/array key/index should be cached | 7 | 294 |
| [GAS-14](#GAS-14) | Newer versions of solidity are more gas efficient | 10 | - |
| [GAS-15](#GAS-15) | Operator `>=`/`<=` costs less gas than operator `>`/`<` | 45 | 135 |
| [GAS-16](#GAS-16) | Optimize Gas by splitting `if() revert` statements | 2 | - |
| [GAS-17](#GAS-17) | Optimize names to save gas | 5 | 110 |
| [GAS-18](#GAS-18) | Redundant state variable getters | 1 | - |
| [GAS-19](#GAS-19) | Remove or replace unused state variables | 3 | - |
| [GAS-20](#GAS-20) | The result of a function call should be cached rather than re-calling the function | 5 | 500 |
| [GAS-21](#GAS-21) | Unlimited gas consumption risk due to external call recipients | 3 | - |
| [GAS-22](#GAS-22) | Unused named return variables without optimizer waste gas | 14 | 126 |
| [GAS-23](#GAS-23) | Optimize External Calls with Assembly for Memory Efficiency | 2 | 440 |
| [GAS-24](#GAS-24) | Use assembly to compute hashes to save gas | 14 | 1120 |
| [GAS-25](#GAS-25) | Use assembly to emit events | 39 | 1482 |
| [GAS-26](#GAS-26) | Use assembly to validate `msg.sender` | 6 | - |
| [GAS-27](#GAS-27) | Use assembly to write address/contract type storage values | 10 | 500 |
| [GAS-28](#GAS-28) | Using a double `if` statement instead of a logical AND (`&&`) | 23 | 690 |
| [GAS-29](#GAS-29) | Use local variables for emitting | 1 | 97 |
| [GAS-30](#GAS-30) | Use a more recent version of solidity | 10 | - |
| [GAS-31](#GAS-31) | Use `storage` instead of `memory` for structs/arrays | 1 | 4200 |
| [GAS-32](#GAS-32) | Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes | 8 | 68400 |
| [GAS-33](#GAS-33) | Using bitmap to store bool states can save gas | 3 | - |
| [GAS-34](#GAS-34) | Using `constant`s directly, rather than caching the value, saves gas | 5 | - |
| [GAS-35](#GAS-35) | Using `this` to access functions results in an external call, wasting gas | 2 | 200 |
| [GAS-36](#GAS-36) | Use `selfbalance()` instead of `address(this).balance` | 1 | - |
| [GAS-37](#GAS-37) | Using bools for storage incurs overhead | 8 | 800 |
| [GAS-38](#GAS-38) | Cache array length outside of loop | 7 | - |
| [GAS-39](#GAS-39) | State variables should be cached in stack variables rather than re-reading them from storage | 5 | 485 |
| [GAS-40](#GAS-40) | Use `calldata` instead of `memory` for function arguments that do not get mutated | 15 | - |
| [GAS-41](#GAS-41) | Don't initialize variables with default value | 4 | - |
| [GAS-42](#GAS-42) | Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead | 140 | 7700 |
| [GAS-43](#GAS-43) | Constructors can be marked as `payable` to save deployment gas | 4 | 84 |
| [GAS-44](#GAS-44) | Functions guaranteed to revert when called by normal users can be marked `payable` | 3 | 63 |
| [GAS-45](#GAS-45) | Use shift Right/Left instead of division/multiplication if possible | 1 | - |
| [GAS-46](#GAS-46) | Use `!= 0` instead of `> 0` for unsigned integer comparison | 10 | 40 |
| [GAS-47](#GAS-47) | Using assembly to check for zero can save gas | 62 | 372 |
| [GAS-48](#GAS-48) | `internal` functions not called by the contract should be removed | 1 | - |

## Medium Issues

<a name="M-1"></a> 
### [M-1] `call()` should be used instead of `transfer()`/`send()` on an address payable
The `transfer()` and `send()` functions forward a fixed amount of 2300 gas. Historically, it has often been recommended to use these functions for value transfers to guard against reentrancy attacks. However, the gas cost of EVM instructions may change significantly during hard forks which may break already deployed contract systems that make fixed assumptions about gas costs. For example. EIP 1884 broke several existing smart contracts due to a cost increase of the `SLOAD` instruction.

*There is one instance of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

```


<a name="M-2"></a> 
### [M-2] The remaining ETH may be locked in the contract after call
After calling an external contract and forwards some ETH value, the contract balance should be checked. If there is excess eth left over due to a failed call, or more eth being delivered than needed, or any other reason, this eth must be refunded to the user or handled appropriately, otherwise the eth may be frozen in the contract forever.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```

```solidity
File: contracts/party/PartyGovernance.sol

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```


<a name="M-3"></a> 
### [M-3] Unchecked return value of low-level `call()`/`delegatecall()`
The function being called may revert, which will be indicated by the return value to `call()`/`delegatecall()`. If the return value is not checked, the code will continue on as if there was no error, rather than reverting with the error encountered.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit `s` is not checked
358:             (bool s, bytes memory r) = address(this).call(

```

```solidity
File: contracts/party/PartyGovernance.sol

825:             ).delegatecall(abi.encodeCall(IProposalExecutionEngine.cancelProposal, (proposalId)));

886:             ).delegatecall(

```


<a name="M-4"></a> 
### [M-4] Return values of `transfer()`/`transferFrom()` not checked
Not all ERC20 implementations `revert()` when there's a failure in `transfer()` or `transferFrom()`. The function signature has a boolean return value and they indicate errors that way instead. By not checking the return value, operations that should have marked as failed, may potentially go through without actually transfer anything.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

454:         super.transferFrom(owner, to, tokenId);

```


<a name="M-5"></a> 
### [M-5] Centralization Risk for trusted owners
Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

113:     ) external payable onlyInitialize {

206:     ) external payable onlyDelegateCall returns (uint96[] memory votingPowers) {

240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {

257:     ) external payable onlyDelegateCall returns (uint96[] memory votingPowers) {

```

```solidity
File: contracts/party/PartyGovernance.sol

845:     ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {

855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

479:     function addAuthority(address authority) external onlySelf {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

126:     ) external override onlyDelegateCall {

148:     ) external onlyDelegateCall returns (bytes memory nextProgressData) {

207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {

```



## Low Issues

<a name="L-1"></a> 
### [L-1] Missing zero address check in functions with address parameters
Adding a zero address check for each address type parameter can prevent errors.

<details>
<summary>
There are <b>21</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit missing zero check for `contributor`
/// @audit missing zero check for `delegate`
196:     function _processContribution(
             address payable contributor,
             address delegate,
             uint96 amount
         ) internal returns (uint96 votingPower) {
             address oldDelegate = delegationsByContributor[contributor];

/// @audit missing zero check for `targetAddress`
366:     function emergencyExecute(
             address targetAddress,
             bytes calldata targetCallData,
             uint256 amountEth
         ) external payable {
             // Must be called by the DAO.

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit missing zero check for `customMetadataProvider`
108:     function initialize(
             InitialETHCrowdfundOptions memory crowdfundOpts,
             ETHPartyOptions memory partyOpts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) external payable onlyInitialize {

/// @audit missing zero check for `delegate`
164:     function contribute(
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit missing zero check for `delegate`
185:     function contribute(
             uint256 tokenId,
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit missing zero check for `recipient`
/// @audit missing zero check for `initialDelegate`
235:     function contributeFor(
             uint256 tokenId,
             address payable recipient,
             address initialDelegate,
             bytes memory gateData
         ) external payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit missing zero check for `contributor`
275:     function _contribute(
             address payable contributor,
             address delegate,
             uint96 amount,
             uint256 tokenId,
             bytes memory gateData
         ) private returns (uint96 votingPower) {

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit missing zero check for `voter`
355:     function getVotingPowerAt(
             address voter,
             uint40 timestamp
         ) external view returns (uint96 votingPower) {
             return getVotingPowerAt(voter, timestamp, type(uint256).max);

/// @audit missing zero check for `voter`
368:     function getVotingPowerAt(
             address voter,
             uint40 timestamp,
             uint256 snapIndex
         ) public view returns (uint96 votingPower) {
             VotingPowerSnapshot memory snap = _getVotingPowerSnapshotAt(voter, timestamp, snapIndex);

/// @audit missing zero check for `voter`
423:     function findVotingPowerSnapshotIndex(
             address voter,
             uint40 timestamp
         ) public view returns (uint256 index) {
             VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];

/// @audit missing zero check for `delegate`
451:     function delegateVotingPower(address delegate) external {
             _adjustVotingPower(msg.sender, 0, delegate);

/// @audit missing zero check for `targetAddress`
841:     function emergencyExecute(
             address targetAddress,
             bytes calldata targetCallData,
             uint256 amountEth
         ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {
             (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

/// @audit missing zero check for `voter`
904:     function _getVotingPowerSnapshotAt(
             address voter,
             uint40 timestamp,
             uint256 hintIndex
         ) internal view returns (VotingPowerSnapshot memory snap) {
             VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];

/// @audit missing zero check for `from`
/// @audit missing zero check for `to`
937:     function _transferVotingPower(address from, address to, uint256 power) internal {
             int192 powerI192 = power.safeCastUint256ToInt192();

/// @audit missing zero check for `voter`
972:     function _rebalanceDelegates(
             address voter,
             address oldDelegate,
             address newDelegate,
             VotingPowerSnapshot memory oldSnap,
             VotingPowerSnapshot memory newSnap
         ) private {
             if (newDelegate == address(0) || oldDelegate == address(0)) {

/// @audit missing zero check for `voter`
1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {
              emit PartyVotingSnapshotCreated(

/// @audit missing zero check for `voter`
1043:     function _getLastVotingPowerSnapshotForVoter(
              address voter
          ) private view returns (VotingPowerSnapshot memory snap) {
              VotingPowerSnapshot[] storage voterSnaps = _votingPowerSnapshotsByVoter[voter];

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit missing zero check for `owner`
/// @audit missing zero check for `delegate`
166:     function mint(
             address owner,
             uint256 votingPower,
             address delegate
         ) external returns (uint256 tokenId) {

/// @audit missing zero check for `owner`
/// @audit missing zero check for `to`
451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit missing zero check for `owner`
/// @audit missing zero check for `to`
458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit missing zero check for `owner`
/// @audit missing zero check for `to`
465:     function safeTransferFrom(
             address owner,
             address to,
             uint256 tokenId,
             bytes calldata data
         ) public override {

```

</details>


<a name="L-2"></a> 
### [L-2] Array is `push()`ed but not `pop()`ed
There is no limit specified on the amount of gas used, so the recipient can use up all of the remaining gas (`gasleft()`), causing it to revert. Therefore, when calling an external contract, it is necessary to specify a limited amount of gas to forward.

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

1040:         voterSnaps.push(snap);

```


<a name="L-3"></a> 
### [L-3] Check division by zero is prevented

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

266:             amount = (amount * (1e4 - fundingSplitBps_)) / 1e4;

270:         votingPower = (amount * exchangeRateBps) / 1e4;

281:         amount = (votingPower * 1e4) / exchangeRateBps;

287:             amount = (amount * 1e4) / (1e4 - fundingSplitBps_);

325:             totalContributions_ -= (totalContributions_ * fundingSplitBps_) / 1e4;

329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

355:         splitAmount = (totalContributions * fundingSplitBps_) / 1e4;

```

```solidity
File: contracts/party/PartyGovernance.sol

434:             uint256 mid = (low + high) / 2;

1115:         uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1134:         return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

393:                     withdrawAmounts[i] += (balance * getVotingPowerShareOf(tokenIds[j])) / 1e18;

413:                 uint256 fee = (amount * feeBps_) / 1e4;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

74:                 signerVotingPowerBps / totalVotingPower >= thresholdBps)

```

</details>


<a name="L-4"></a> 
### [L-4] Constructor / initialization function lacks parameter validation
Constructors and initialization functions play a critical role in contracts by setting important initial states when the contract is first deployed before the system starts. The parameters passed to the constructor and initialization functions directly affect the behavior of the contract / protocol. If incorrect parameters are provided, the system may fail to run, behave abnormally, be unstable, or lack security. Therefore, it's crucial to carefully check each parameter in the constructor and initialization functions. If an exception is found, the transaction should be rolled back.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `globals` not validated
134:     constructor(IGlobals globals) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit `crowdfundOpts` not validated
/// @audit `partyOpts` not validated
/// @audit `customMetadataProvider` not validated
/// @audit `customMetadata` not validated
108:     function initialize(

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `globals` not validated
265:     constructor(IGlobals globals) {

```


<a name="L-5"></a> 
### [L-5] Enum values should be used instead of constant array indexes
Create a commented enum value to use instead of constant array indexes, this makes the code far easier to understand.

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

312:         tokenIds[0] = tokenId;

```


<a name="L-6"></a> 
### [L-6] External call recipient can consume all remaining gas
There is no limit specified on the amount of gas used, so the recipient can use up all of the remaining gas (`gasleft()`), causing it to revert. Therefore, when calling an external contract, it is necessary to specify a limited amount of gas to forward.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

358:             (bool s, bytes memory r) = address(this).call(

```

```solidity
File: contracts/party/PartyGovernance.sol

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```


<a name="L-7"></a> 
### [L-7] Loss of precision in divisions
Division by large numbers may result in the result being zero, due to solidity not supporting fractions. Consider requiring a minimum amount for the numerator to ensure that it is always larger than the denominator.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

266:             amount = (amount * (1e4 - fundingSplitBps_)) / 1e4;

270:         votingPower = (amount * exchangeRateBps) / 1e4;

281:         amount = (votingPower * 1e4) / exchangeRateBps;

287:             amount = (amount * 1e4) / (1e4 - fundingSplitBps_);

325:             totalContributions_ -= (totalContributions_ * fundingSplitBps_) / 1e4;

329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

355:         splitAmount = (totalContributions * fundingSplitBps_) / 1e4;

```

```solidity
File: contracts/party/PartyGovernance.sol

434:             uint256 mid = (low + high) / 2;

1115:         uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1134:         return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

393:                     withdrawAmounts[i] += (balance * getVotingPowerShareOf(tokenIds[j])) / 1e18;

413:                 uint256 fee = (amount * feeBps_) / 1e4;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

74:                 signerVotingPowerBps / totalVotingPower >= thresholdBps)

```

</details>


<a name="L-8"></a> 
### [L-8] Missing contract existence checks before low-level calls
Low-level calls return success if there is no code present at the specified address. In addition to the zero-address checks, add a check to verify that `<address>.code.length > 0`

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

358:             (bool s, bytes memory r) = address(this).call(

```

```solidity
File: contracts/party/PartyGovernance.sol

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```


<a name="L-9"></a> 
### [L-9] Missing zero address check in constructor
Constructors often take address parameters to initialize important components of a contract, such as owner or linked contracts. However, without a checking, there's a risk that an address parameter could be mistakenly set to the zero address (0x0). This could be due to an error or oversight during contract deployment. A zero address in a crucial role can cause serious issues, as it cannot perform actions like a normal address, and any funds sent to it will be irretrievable. It's therefore crucial to include a zero address check in constructors to prevent such potential problems. If a zero address is detected, the constructor should revert the transaction.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit missing zero check for `globals`
134:     constructor(IGlobals globals) {
             _GLOBALS = globals;

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit missing zero check for `globals`
265:     constructor(IGlobals globals) {
             _GLOBALS = globals;

```


<a name="L-10"></a> 
### [L-10] Consider some checks for `address(0)` when setting address state variables

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

135:         _GLOBALS = globals;

161:         party = opts.party;

169:         fundingSplitRecipient = opts.fundingSplitRecipient;

```

```solidity
File: contracts/party/PartyGovernance.sol

266:         _GLOBALS = globals;

298:         feeRecipient = govOpts.feeRecipient;

```

```solidity
File: contracts/utils/Implementation.sol

18:         implementation = address(this);

```


<a name="L-11"></a> 
### [L-11] `receive()`/`fallback()` function does not authorize requests
Having no access control on the function (e.g. `require(msg.sender == address(weth))`) means that someone may send Ether to the contract, and have no way to get anything back out, which is a loss of funds. If the concern is having to spend a small amount of gas to check the sender against an immutable address, the code should at least have a function to rescue mistakenly-sent Ether.

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

312:     fallback() external {

```


<a name="L-12"></a> 
### [L-12] Solidity version 0.8.20 or above may not work on other chains due to PUSH0
Solidity version 0.8.20 or above uses the new [Shanghai EVM](https://blog.soliditylang.org/2023/05/10/solidity-0.8.20-release-announcement/#important-note) which introduces the PUSH0 opcode. This op code may not yet be implemented on all evm-chains or Layer2s, so deployment on these chains will fail. Consider using an earlier solidity version.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernance.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/utils/Implementation.sol

2: pragma solidity 0.8.20;

```


<a name="L-13"></a> 
### [L-13] Timestamp may be manipulation
The `block.timestamp` can be manipulated by miners to perform MEV profiting or other time-based attacks.

<details>
<summary>
There are <b>19</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

163:         expiry = uint40(block.timestamp + opts.duration);

185:         if (block.timestamp >= expiry_) {

```

```solidity
File: contracts/party/PartyGovernance.sol

565:                 proposedTime: uint40(block.timestamp),

622:         if (lastRageQuitTimestamp == block.timestamp) {

651:             info.values.passedTime = uint40(block.timestamp);

731:             if (proposal.maxExecutableTime < block.timestamp) {

734:                     uint40(block.timestamp)

737:             proposalState.values.executedTime = uint40(block.timestamp);

745:         proposalState.values.completedTime = uint40(block.timestamp);

811:             if (block.timestamp < cancelTime) {

813:                     uint40(block.timestamp),

820:         proposalState.values.completedTime = uint40(block.timestamp | UINT40_HIGH_BIT);

954:             timestamp: uint40(block.timestamp),

988:                 timestamp: uint40(block.timestamp),

1011:                 timestamp: uint40(block.timestamp),

1086:         uint40 t = uint40(block.timestamp);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

361:                     currentRageQuitTimestamp < block.timestamp

372:         lastRageQuitTimestamp = uint40(block.timestamp);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *

```

</details>


<a name="L-14"></a> 
### [L-14] Unsafe solidity low-level call can cause gas grief attack
Using the low-level calls of a solidity address can leave the contract open to gas grief attacks. These attacks occur when the called contract returns a large amount of data. So when calling an external contract, it is necessary to check the length of the return data before reading/copying it (using `returndatasize()`).

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

358:             (bool s, bytes memory r) = address(this).call(

```

```solidity
File: contracts/party/PartyGovernance.sol

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```


<a name="L-15"></a> 
### [L-15] Consider using `ERC721A` instead of `ERC721`
[ERC721A](https://www.erc721a.org/) is an implementation of IERC721 with significant gas savings for minting multiple NFTs in a single transaction.

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```


<a name="L-16"></a> 
### [L-16] Using zero as a parameter
Taking `0` as a valid argument in Solidity without checks can lead to severe security issues. A historical example is the infamous `0x0` address bug where numerous tokens were lost. This happens because 0 can be interpreted as an uninitialized `address`, leading to transfers to the 0x0 address, effectively burning tokens. Moreover, `0` as a denominator in division operations would cause a runtime exception. It's also often indicative of a logical error in the caller's code. It's important to always validate input and handle edge cases like `0` appropriately. Use `require()` statements to enforce conditions and provide clear error messages to facilitate debugging and safer code.

<details>
<summary>
There are <b>18</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

144:             _contribute(

169:             _contribute(

289:         if (_gateKeeper != IGateKeeper(address(0))) {

```

```solidity
File: contracts/party/PartyGovernance.sol

452:         _adjustVotingPower(msg.sender, 0, delegate);

520:         emit BatchMetadataUpdate(0, type(uint256).max);

564:             ProposalStateValues({

581:         emit BatchMetadataUpdate(0, type(uint256).max);

655:             emit BatchMetadataUpdate(0, type(uint256).max);

688:         emit BatchMetadataUpdate(0, type(uint256).max);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

897:         emit BatchMetadataUpdate(0, type(uint256).max);

939:         _adjustVotingPower(from, -powerI192, address(0));

940:         _adjustVotingPower(to, powerI192, address(0));

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

229:         _adjustVotingPower(ownerOf(tokenId), votingPower.safeCastUint96ToInt192(), address(0));

241:         _adjustVotingPower(ownerOf(tokenId), -votingPower.safeCastUint96ToInt192(), address(0));

294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

295:             _adjustVotingPower(owner, -votingPower.safeCastUint96ToInt192(), address(0));

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

235:             validator = getSignatureValidatorForHash(0);

```

</details>


<a name="L-17"></a> 
### [L-17] Missing zero address check in initializer

*There is one instance of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit missing zero check for `customMetadataProvider`
108:     function initialize(
             InitialETHCrowdfundOptions memory crowdfundOpts,
             ETHPartyOptions memory partyOpts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) external payable onlyInitialize {

```


<a name="L-18"></a> 
### [L-18] Empty body - Consider commenting why

*There is one instance of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

```


<a name="L-19"></a> 
### [L-19] Initializers could be front-run
Initializers could be front-run, allowing an attacker to either set their own values, take ownership of the contract, and in the best case forcing a re-deployment

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

108:     function initialize(

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

123:     function initialize(

```



## Non Critical Issues

<a name="NC-1"></a> 
### [NC-1] Assembly blocks should have extensive comments
Assembly blocks take a lot more time to audit than normal Solidity code, and often have gotchas and side-effects that the Solidity versions of the same code do not. Consider adding more comments explaining what is being done in every step of the assembly code, and describe why assembly is being used instead of Solidity.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

319:             assembly {

407:         assembly {

1158:         assembly {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

306:         assembly {

337:         assembly {

```

```solidity
File: contracts/proposals/ProposalStorage.sol

61:         assembly {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

53:         assembly {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

32:         assembly {

41:         assembly {

```


<a name="NC-2"></a> 
### [NC-2] `abi.encodePacked()` should be replaced with `bytes.concat()`
Solidity version 0.8.4 introduces `bytes.concat()`, which can be used to replace `abi.encodePacked()` on bytes/strings. It can make the intended operation clearer, leading to less reviewer confusion.

*There is one instance of this issue:*
```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

48:         bytes memory encodedPacket = abi.encodePacked(

```


<a name="NC-3"></a> 
### [NC-3] Add inline comments for unnamed variables
`function foo(address x, address)` -> `function foo(address x, address /* y */)`

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

123:     function tokenURI(uint256) public view override returns (string memory) {

136:     function royaltyInfo(uint256, uint256) external view returns (address, uint256) {

```


<a name="NC-4"></a> 
### [NC-4] `assert()` should be replaced with `require()` or `revert()`
In versions of Solidity prior to 0.8.0, when encountering an assert all the remaining gas will be consumed. Even after solidity 0.8.0, the assert function is still not recommended, as described in the [documentation](https://docs.soliditylang.org/en/v0.8.20/control-structures.html#panic-via-assert-and-error-via-require):
> Assert should only be used to test for internal errors, and to check invariants. Properly functioning code should never create a Panic, not even on invalid external input. If this happens, then there is a bug in your contract which you should fix.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

533:         assert(tokenType == ITokenDistributor.TokenType.Erc20);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

499:         assert(false); // Will not be reached.

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

168:                 assert(currentInProgressProposalId == 0);

```


<a name="NC-5"></a> 
### [NC-5] Consider adding a block/deny-list
Doing so will significantly increase centralization, but will help to prevent hackers from using stolen tokens.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

20: contract InitialETHCrowdfund is ETHCrowdfundBase {

```

```solidity
File: contracts/party/PartyGovernance.sol

23: abstract contract PartyGovernance is
        ProposalStorage,
        Implementation,
        IERC4906,
        ReadOnlyDelegateCall
    {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

24: contract ProposalExecutionEngine is
        IProposalExecutionEngine,
        Implementation,
        ProposalStorage,
        ListOnOpenseaProposal,
        ListOnOpenseaAdvancedProposal,
        ListOnZoraProposal,
        FractionalizeProposal,
        ArbitraryCallsProposal,
        DistributeProposal,
        AddAuthorityProposal,
        OperatorProposal,
        SetSignatureValidatorProposal,
        SetGovernanceParameterProposal,
        IERC1271
    {

```

```solidity
File: contracts/proposals/ProposalStorage.sol

10: abstract contract ProposalStorage {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

7: contract SetGovernanceParameterProposal is ProposalStorage {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

7: abstract contract SetSignatureValidatorProposal {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

9: contract OffChainSignatureValidator is IERC1271 {

```

```solidity
File: contracts/utils/Implementation.sol

5: abstract contract Implementation {

```


<a name="NC-6"></a> 
### [NC-6] Consider adding emergency-stop functionality
Consider adding `Pausable` to the following contracts so it's possible to stop them in case of an emergency.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

20: contract InitialETHCrowdfund is ETHCrowdfundBase {

```

```solidity
File: contracts/party/PartyGovernance.sol

23: abstract contract PartyGovernance is

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

24: contract ProposalExecutionEngine is

```

```solidity
File: contracts/proposals/ProposalStorage.sol

10: abstract contract ProposalStorage {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

7: contract SetGovernanceParameterProposal is ProposalStorage {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

7: abstract contract SetSignatureValidatorProposal {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

9: contract OffChainSignatureValidator is IERC1271 {

```

```solidity
File: contracts/utils/Implementation.sol

5: abstract contract Implementation {

```


<a name="NC-7"></a> 
### [NC-7] Consider adding formal verification proofs
Formal verification is the act of proving or disproving the correctness of intended algorithms underlying a system with respect to a certain formal specification/property/invariant, using formal methods of mathematics.

Some tools that are currently available to perform these tests on smart contracts are [SMTChecker](https://docs.soliditylang.org/en/latest/smtchecker.html) and [Certora Prover](https://www.certora.com/).

*There is one instance of this issue:*
```solidity

Global finding

```


<a name="NC-8"></a> 
### [NC-8] Consider bounding input array length
The functions below take in an unbounded array, and make function calls for entries in the array. While the function will revert if it eventually runs out of gas, it may be a nicer user experience to require() that the length of the array is below some reasonable maximum, so that the user doesn't have to use up a full transaction's gas only to see that the transaction reverts.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit consider length check for `authorities`
102:             for (uint256 i; i < authorities.length; ++i) {

/// @audit consider length check for `tokenIds`
272:         for (uint256 i; i < tokenIds.length; ++i) {

/// @audit consider length check for `withdrawTokens`
378:             for (uint256 i; i < withdrawTokens.length; ++i) {

```


<a name="NC-9"></a> 
### [NC-9] Consider using descriptive `constant`s when passing zero as a function argument
Passing zero as a function argument can sometimes result in a security issue (e.g. passing zero as the slippage parameter). Consider using a `constant` variable with a descriptive name, so it's clear that the argument is intentionally being used, and for the right reasons.

<details>
<summary>
There are <b>11</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

144:             _contribute(
                     crowdfundOpts.initialContributor,
                     crowdfundOpts.initialDelegate,
                     initialContribution,
                     0,

169:             _contribute(
                     payable(msg.sender),
                     delegate,
                     msg.value.safeCastUint256ToUint96(),
                     0, // Mint a new party card for the contributor.

```

```solidity
File: contracts/party/PartyGovernance.sol

452:         _adjustVotingPower(msg.sender, 0, delegate);

520:         emit BatchMetadataUpdate(0, type(uint256).max);

581:         emit BatchMetadataUpdate(0, type(uint256).max);

655:             emit BatchMetadataUpdate(0, type(uint256).max);

688:         emit BatchMetadataUpdate(0, type(uint256).max);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

897:         emit BatchMetadataUpdate(0, type(uint256).max);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

235:             validator = getSignatureValidatorForHash(0);

```

</details>


<a name="NC-10"></a> 
### [NC-10] Constants should be put on the left side of comparisons
Putting constants on the left side of comparison statements is a best practice known as [Yoda conditions](https://en.wikipedia.org/wiki/Yoda_conditions). Although solidity's static typing system prevents accidental assignments within conditionals, adopting this practice can improve code readability and consistency, especially when working across multiple languages.

<details>
<summary>
There are <b>50</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

153:         if (opts.maxTotalContributions == 0) {

165:         if (opts.exchangeRateBps == 0) revert InvalidExchangeRateError(opts.exchangeRateBps);

176:         if (maxTotalContributions == 0) {

181:         if (expiry_ == 0) {

202:         if (msg.sender == contributor || oldDelegate == address(0)) {

213:         if (amount == 0) return 0;

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

272:         if (votingPower == 0) revert ZeroVotingPowerError();

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

348:         if (fundingSplitRecipient_ == address(0) || fundingSplitBps_ == 0) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

283:         if (delegate == address(0)) {

298:         if (amount == 0) return 0;

300:         if (tokenId == 0) {

384:         if (address(customMetadataProvider) == address(0)) {

```

```solidity
File: contracts/party/PartyGovernance.sol

225:         if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

460:         if (newPartyHost != address(0)) {

505:             if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

510:         if (_getSharedProposalStorage().governanceValues.totalVotingPower == 0) {

797:             if (globalMaxCancelDelay != 0) {

803:             if (globalMinCancelDelay != 0) {

911:         if (snapsLength != 0) {

979:         if (newDelegate == address(0) || oldDelegate == address(0)) {

1033:         if (n != 0) {

1048:         if (n != 0) {

1068:         if (pv.proposedTime == 0) {

1072:         if (pv.executedTime != 0) {

1073:             if (pv.completedTime == 0) {

1088:         if (pv.passedTime != 0) {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

106:         if (customizationPresetId != 0) {

179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {

196:         if (delegate_ != address(0)) {

216:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower) {

350:         if (tokenIds.length == 0) revert NothingToBurnError();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

128:         if (oldImpl != address(0)) return;

131:         if (initializeData.length == 0) return;

150:         if (params.proposalId == 0) {

155:         if (currentInProgressProposalId == 0) {

165:             if (nextProgressDataHash == 0) {

168:                 assert(currentInProgressProposalId == 0);

169:                 if (params.progressData.length != 0) {

197:         if (nextProgressData.length == 0) {

209:         if (proposalId == 0) {

231:         if (address(validator) != address(0)) {

234:         if (tx.origin == address(0)) {

236:             if (address(validator) == address(0)) {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

32:         if (proposalData.voteDuration != 0) {

42:         if (proposalData.executionDelay != 0) {

53:         if (proposalData.passThresholdBps != 0) {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {

```

</details>


<a name="NC-11"></a> 
### [NC-11] Contract does not follow the Solidity Style Guide's suggested layout ordering
The [style guide](https://docs.soliditylang.org/en/v0.8.16/style-guide.html#order-of-layout) says that, within a contract, the ordering should be `1) Type declarations`, `2) State variables`, `3) Events`, `4) Modifiers`, and `5) Functions`, but the contract(s) below do not follow this ordering

<details>
<summary>
There are <b>55</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
88:     IGlobals private immutable _GLOBALS;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
92:     Party public party;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
95:     uint96 public minContribution;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
98:     uint96 public maxContribution;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
101:     bool public disableContributingForExistingCard;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
104:     bool public fundingSplitPaid;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
106:     bool public emergencyExecuteDisabled;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
109:     uint96 public minTotalContributions;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
112:     uint96 public maxTotalContributions;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
114:     uint96 public totalContributions;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
117:     uint40 public expiry;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
120:     uint16 public exchangeRateBps;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
123:     uint16 public fundingSplitBps;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
125:     address payable public fundingSplitRecipient;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
127:     IGateKeeper public gateKeeper;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
129:     bytes12 public gateKeeperId;

/// @audit event/error `Contributed` came earlier
/// @audit event/error `Finalized` came earlier
/// @audit event/error `FundingSplitSent` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `WrongLifecycleError` came earlier
/// @audit event/error `NotAllowedByGateKeeperError` came earlier
/// @audit event/error `OnlyPartyHostError` came earlier
/// @audit event/error `OnlyPartyDaoError` came earlier
/// @audit event/error `OnlyPartyDaoOrHostError` came earlier
/// @audit event/error `NotOwnerError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `NotEnoughContributionsError` came earlier
/// @audit event/error `MinGreaterThanMaxError` came earlier
/// @audit event/error `MaxTotalContributionsCannotBeZeroError` came earlier
/// @audit event/error `BelowMinimumContributionsError` came earlier
/// @audit event/error `AboveMaximumContributionsError` came earlier
/// @audit event/error `InvalidExchangeRateError` came earlier
/// @audit event/error `ContributingForExistingCardDisabledError` came earlier
/// @audit event/error `ZeroVotingPowerError` came earlier
/// @audit event/error `FundingSplitAlreadyPaidError` came earlier
/// @audit event/error `FundingSplitNotConfiguredError` came earlier
/// @audit event/error `InvalidMessageValue` came earlier
131:     mapping(address => address) public delegationsByContributor;

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
187:     uint96 private constant VETO_VALUE = type(uint96).max;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
191:     IGlobals private immutable _GLOBALS;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
194:     bool public emergencyExecuteDisabled;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
196:     uint16 public feeBps;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
198:     address payable public feeRecipient;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
200:     uint40 public lastRageQuitTimestamp;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
202:     bytes32 public preciousListHash;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
204:     uint256 public lastProposalId;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
206:     mapping(address => bool) public isHost;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
208:     mapping(address => address) public delegationsByVoter;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
210:     uint8 public numHosts;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
212:     mapping(uint256 => ProposalState) private _proposalStateByProposalId;

/// @audit event/error `Proposed` came earlier
/// @audit event/error `ProposalAccepted` came earlier
/// @audit event/error `EmergencyExecute` came earlier
/// @audit event/error `ProposalPassed` came earlier
/// @audit event/error `ProposalVetoed` came earlier
/// @audit event/error `ProposalExecuted` came earlier
/// @audit event/error `ProposalCancelled` came earlier
/// @audit event/error `DistributionCreated` came earlier
/// @audit event/error `PartyDelegateUpdated` came earlier
/// @audit event/error `HostStatusTransferred` came earlier
/// @audit event/error `EmergencyExecuteDisabled` came earlier
/// @audit event/error `PartyVotingSnapshotCreated` came earlier
/// @audit event/error `MismatchedPreciousListLengths` came earlier
/// @audit event/error `BadProposalStatusError` came earlier
/// @audit event/error `BadProposalHashError` came earlier
/// @audit event/error `ExecutionTimeExceededError` came earlier
/// @audit event/error `NotAuthorized` came earlier
/// @audit event/error `InvalidDelegateError` came earlier
/// @audit event/error `BadPreciousListError` came earlier
/// @audit event/error `OnlyWhenEmergencyActionsAllowedError` came earlier
/// @audit event/error `OnlyWhenEnabledError` came earlier
/// @audit event/error `AlreadyVotedError` came earlier
/// @audit event/error `InvalidNewHostError` came earlier
/// @audit event/error `ProposalCannotBeCancelledYetError` came earlier
/// @audit event/error `InvalidBpsError` came earlier
/// @audit event/error `DistributionsRequireVoteError` came earlier
/// @audit event/error `PartyNotStartedError` came earlier
/// @audit event/error `CannotRageQuitAndAcceptError` came earlier
/// @audit event/error `TooManyHosts` came earlier
214:     mapping(address => VotingPowerSnapshot[]) private _votingPowerSnapshotsByVoter;

/// @audit function `_assertHost` came earlier
/// @audit function `_assertActiveMember` came earlier
231:     modifier onlyPartyDao() {

/// @audit function `_assertHost` came earlier
/// @audit function `_assertActiveMember` came earlier
242:     modifier onlyPartyDaoOrHost() {

/// @audit function `_assertHost` came earlier
/// @audit function `_assertActiveMember` came earlier
251:     modifier onlyWhenEmergencyExecuteAllowed() {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
42:     IGlobals private immutable _GLOBALS;

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
45:     uint96 public tokenCount;

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
49:     uint96 public mintedVotingPower;

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
55:     uint40 public rageQuitTimestamp;

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
57:     mapping(uint256 => uint256) public votingPowerByTokenId;

/// @audit event/error `AuthorityAdded` came earlier
/// @audit event/error `AuthorityRemoved` came earlier
/// @audit event/error `RageQuitSet` came earlier
/// @audit event/error `Burn` came earlier
/// @audit event/error `RageQuit` came earlier
/// @audit event/error `PartyCardIntrinsicVotingPowerSet` came earlier
/// @audit event/error `FixedRageQuitTimestampError` came earlier
/// @audit event/error `CannotRageQuitError` came earlier
/// @audit event/error `CannotDisableRageQuitAfterInitializationError` came earlier
/// @audit event/error `InvalidTokenOrderError` came earlier
/// @audit event/error `BelowMinWithdrawAmountError` came earlier
/// @audit event/error `NothingToBurnError` came earlier
59:     mapping(address => bool) public isAuthority;

/// @audit function `_assertAuthority` came earlier
67:     modifier onlySelf() {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit event/error `UnsupportedProposalTypeError` came earlier
48:     enum ProposalType {

/// @audit event/error `UnsupportedProposalTypeError` came earlier
68:     struct Storage {

/// @audit event/error `ProposalEngineImplementationUpgraded` came earlier
/// @audit event/error `UnsupportedProposalTypeError` came earlier
/// @audit event/error `ProposalDisabled` came earlier
/// @audit event/error `ZeroProposalIdError` came earlier
/// @audit event/error `MalformedProposalDataError` came earlier
/// @audit event/error `ProposalExecutionBlockedError` came earlier
/// @audit event/error `ProposalProgressDataInvalidError` came earlier
/// @audit event/error `ProposalNotInProgressError` came earlier
/// @audit event/error `UnexpectedProposalEngineImplementationError` came earlier
101:     IGlobals private immutable _GLOBALS;

/// @audit event/error `ProposalEngineImplementationUpgraded` came earlier
/// @audit event/error `UnsupportedProposalTypeError` came earlier
/// @audit event/error `ProposalDisabled` came earlier
/// @audit event/error `ZeroProposalIdError` came earlier
/// @audit event/error `MalformedProposalDataError` came earlier
/// @audit event/error `ProposalExecutionBlockedError` came earlier
/// @audit event/error `ProposalProgressDataInvalidError` came earlier
/// @audit event/error `ProposalNotInProgressError` came earlier
/// @audit event/error `UnexpectedProposalEngineImplementationError` came earlier
104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

/// @audit event/error `VoteDurationSet` came earlier
/// @audit event/error `ExecutionDelaySet` came earlier
/// @audit event/error `PassThresholdBpsSet` came earlier
/// @audit event/error `InvalidGovernanceParameter` came earlier
18:     struct SetGovernanceParameterProposalData {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

/// @audit state variable `_SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT` came earlier
17:     struct SetSignatureValidatorProposalData {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit event/error `SigningThresholdBpsSet` came earlier
/// @audit event/error `NotMemberOfParty` came earlier
/// @audit event/error `InsufficientVotingPower` came earlier
/// @audit event/error `MessageHashMismatch` came earlier
22:     mapping(Party party => uint96 thresholdBps) public signingThersholdBps;

```

```solidity
File: contracts/utils/Implementation.sol

/// @audit event/error `Initialized` came earlier
/// @audit event/error `AlreadyInitialized` came earlier
/// @audit event/error `OnlyDelegateCallError` came earlier
12:     address public immutable implementation;

/// @audit event/error `Initialized` came earlier
/// @audit event/error `AlreadyInitialized` came earlier
/// @audit event/error `OnlyDelegateCallError` came earlier
15:     bool public initialized;

/// @audit function `constructor` came earlier
22:     modifier onlyDelegateCall() virtual {

/// @audit function `constructor` came earlier
29:     modifier onlyInitialize() {

```

</details>


<a name="NC-12"></a> 
### [NC-12] Contract should expose an `interface`
All `external`/`public` functions should extend an `interface`. This is useful to make sure that the whole API is extracted.

*Note:* It is possible that the interface is out-of-scope and has not been seen by the bot.

<details>
<summary>
There are <b>62</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {

278:     function convertVotingPowerToContribution(

291:     function finalize() external {

339:     function sendFundingSplit() external returns (uint96 splitAmount) {

366:     function emergencyExecute(

388:     function disableEmergencyExecute() external {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

108:     function initialize(

164:     function contribute(

185:     function contribute(

204:     function batchContribute(

235:     function contributeFor(

255:     function batchContributeFor(

318:     function refund(uint256 tokenId) external returns (uint96 amount) {

350:     function batchRefund(

```

```solidity
File: contracts/party/PartyGovernance.sol

333:     function supportsInterface(bytes4 interfaceId) public pure virtual returns (bool) {

342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {

347:     function getProposalEngineOpts() external view returns (ProposalEngineOpts memory) {

355:     function getVotingPowerAt(

368:     function getVotingPowerAt(

381:     function getProposalStateInfo(

390:     function getGovernanceValues() external view returns (GovernanceValues memory) {

399:     function getProposalHash(Proposal memory proposal) public pure returns (bytes32 proposalHash) {

423:     function findVotingPowerSnapshotIndex(

451:     function delegateVotingPower(address delegate) external {

457:     function abdicateHost(address newPartyHost) external {

487:     function distribute(

553:     function propose(

595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

665:     function veto(uint256 proposalId) external {

706:     function execute(

771:     function cancel(uint256 proposalId, Proposal calldata proposal) external {

841:     function emergencyExecute(

855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

113:     function supportsInterface(

123:     function tokenURI(uint256) public view override returns (string memory) {

129:     function contractURI() external view returns (string memory) {

136:     function royaltyInfo(uint256, uint256) external view returns (address, uint256) {

146:     function getDistributionShareOf(uint256 tokenId) external view returns (uint256) {

154:     function getVotingPowerShareOf(uint256 tokenId) public view returns (uint256) {

166:     function mint(

208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

247:     function increaseTotalVotingPower(uint96 votingPower) external {

255:     function decreaseTotalVotingPower(uint96 votingPower) external {

263:     function burn(uint256[] memory tokenIds) public {

310:     function burn(uint256 tokenId) external {

318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

344:     function rageQuit(

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(

479:     function addAuthority(address authority) external onlySelf {

486:     function abdicateAuthority() external {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

123:     function initialize(

141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {

146:     function executeProposal(

207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

84:     function setSigningThresholdBps(uint96 thresholdBps) external {

```

```solidity
File: contracts/utils/Implementation.sol

40:     function IMPL() external view returns (address) {

```

</details>


<a name="NC-13"></a> 
### [NC-13] Contract uses both `require()`/`revert()` as well as custom errors
Consider using just one method in a single file.

*There is one instance of this issue:*
```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

23: /// @dev This contract will be delegatecall'ed into by `Party` proxy instances.

```


<a name="NC-14"></a> 
### [NC-14] Contracts should have full test coverage
While 100% code coverage does not guarantee that there are no bugs, it often will catch easy-to-find bugs, and will ensure that there are fewer regressions when the code invariably has to be modified. Furthermore, in order to get full coverage, code authors will often have to re-organize their code so that it is more modular, so that each component can be tested separately, which reduces interdependencies between modules and layers, and makes for code that is easier to reason about and audit.

*There is one instance of this issue:*
```solidity

Global finding

```


<a name="NC-15"></a> 
### [NC-15] Events that mark critical parameter changes should contain both the old and the new value
This should especially be done if the new value is not required to be different from the old value.

<details>
<summary>
There are <b>35</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

210:         emit Contributed(msg.sender, contributor, amount, delegate);

335:         emit Finalized();

358:         emit FundingSplitSent(fundingSplitRecipient_, splitAmount);

383:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

397:         emit EmergencyExecuteDisabled();

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

341:             emit Refunded(contributor, tokenId, amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

471:         emit HostStatusTransferred(msg.sender, newPartyHost);

517:         emit DistributionCreated(tokenType, token, tokenId);

520:         emit BatchMetadataUpdate(0, type(uint256).max);

576:         emit Proposed(proposalId, msg.sender, proposal);

581:         emit BatchMetadataUpdate(0, type(uint256).max);

640:         emit ProposalAccepted(proposalId, msg.sender, votingPower);

652:             emit ProposalPassed(proposalId);

655:             emit BatchMetadataUpdate(0, type(uint256).max);

685:         emit ProposalVetoed(proposalId, msg.sender);

688:         emit BatchMetadataUpdate(0, type(uint256).max);

830:         emit ProposalCancelled(proposalId);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

850:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

857:         emit EmergencyExecuteDisabled();

894:         emit ProposalExecuted(proposalId, msg.sender, nextProgressData);

897:         emit BatchMetadataUpdate(0, type(uint256).max);

964:         emit PartyDelegateUpdated(voter, delegate);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

192:         emit PartyCardIntrinsicVotingPowerSet(tokenId, votingPower_);

227:         emit PartyCardIntrinsicVotingPowerSet(tokenId, newIntrinsicVotingPower);

294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

300:             emit Burn(msg.sender, tokenId, votingPower);

335:         emit RageQuitSet(oldRageQuitTimestamp, rageQuitTimestamp = newRageQuitTimestamp);

447:         emit RageQuit(msg.sender, tokenIds, withdrawTokens, receiver);

482:         emit AuthorityAdded(authority);

490:         emit AuthorityRemoved(msg.sender);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

39:         emit SignatureValidatorSet(data.signatureHash, data.signatureValidator);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);

```

```solidity
File: contracts/utils/Implementation.sol

33:         emit Initialized();

```

</details>


<a name="NC-16"></a> 
### [NC-16] Custom errors has no error details
Consider adding parameters to the error to indicate which user or values caused the failure.

<details>
<summary>
There are <b>29</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

57:     error OnlyPartyHostError();

61:     error OnlyWhenEmergencyActionsAllowedError();

62:     error InvalidDelegateError();

69:     error ContributingForExistingCardDisabledError();

70:     error ZeroVotingPowerError();

71:     error FundingSplitAlreadyPaidError();

72:     error FundingSplitNotConfiguredError();

73:     error InvalidMessageValue();

```

```solidity
File: contracts/party/PartyGovernance.sol

168:     error MismatchedPreciousListLengths();

172:     error NotAuthorized();

173:     error InvalidDelegateError();

174:     error BadPreciousListError();

175:     error OnlyWhenEmergencyActionsAllowedError();

176:     error OnlyWhenEnabledError();

178:     error InvalidNewHostError();

181:     error DistributionsRequireVoteError();

182:     error PartyNotStartedError();

183:     error CannotRageQuitAndAcceptError();

184:     error TooManyHosts();

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

22:     error CannotDisableRageQuitAfterInitializationError();

23:     error InvalidTokenOrderError();

25:     error NothingToBurnError();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

86:     error ZeroProposalIdError();

87:     error MalformedProposalDataError();

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

10:     error NotMemberOfParty();

11:     error InsufficientVotingPower();

12:     error MessageHashMismatch();

```

```solidity
File: contracts/utils/Implementation.sol

8:     error AlreadyInitialized();

9:     error OnlyDelegateCallError();

```

</details>


<a name="NC-17"></a> 
### [NC-17] Polymorphic functions make security audits more time-consuming and error-prone
The instances below point to one of two functions with the same name. Consider naming each function differently, in order to make code navigation and analysis easier.

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit also found on line 185
164:     function contribute(

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit also found on line 368
355:     function getVotingPowerAt(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit also found on line 310
263:     function burn(uint256[] memory tokenIds) public {

/// @audit also found on line 465
458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

```


<a name="NC-18"></a> 
### [NC-18] Duplicated `require()`/`revert()` checks should be refactored
Refactoring duplicate `require()`/`revert()` checks into a modifier or function can make the code more concise, readable and maintainable, and less likely to make errors or omissions when modifying the `require()` or `revert()`.

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit duplicated on line 309
218:             revert WrongLifecycleError(lc);

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit duplicated on line 226
218:             revert NotAuthorized();

/// @audit duplicated on line 506
235:                 revert NotAuthorized();

/// @audit duplicated on line 679
611:                 revert BadProposalStatusError(status);

/// @audit duplicated on line 782
725:             revert BadProposalStatusError(status);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit duplicated on line 69
63:             revert NotAuthorized();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit duplicated on line 210
151:             revert ZeroProposalIdError();

/// @audit duplicated on line 273
267:                 revert ProposalDisabled(pt);

```


<a name="NC-19"></a> 
### [NC-19] `else` block not required
One level of nesting can be removed by not having an `else` block when the `if`-block always jumps at the end. For example:
```solidity
if (condition) {
	body1...
	return x;
} else {
	body2...
}
```
can be changed to:
```solidity
if (condition) {
	body1...
	return x;
}
body2...
```

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

186:             if (totalContributions >= minTotalContributions) {
                     return CrowdfundLifecycle.Won;
                 } else {
                     return CrowdfundLifecycle.Lost;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

384:         if (address(customMetadataProvider) == address(0)) {
                 return
                     opts.governanceOpts.partyFactory.createParty(
                         opts.governanceOpts.partyImpl,
                         authorities,
                         Party.PartyOptions({
                             name: opts.name,
                             symbol: opts.symbol,
                             customizationPresetId: opts.customizationPresetId,
                             governance: PartyGovernance.GovernanceOpts({
                                 hosts: opts.governanceOpts.hosts,
                                 voteDuration: opts.governanceOpts.voteDuration,
                                 executionDelay: opts.governanceOpts.executionDelay,
                                 passThresholdBps: opts.governanceOpts.passThresholdBps,
                                 totalVotingPower: 0,
                                 feeBps: opts.governanceOpts.feeBps,
                                 feeRecipient: opts.governanceOpts.feeRecipient
                             }),
                             proposalEngine: opts.proposalEngineOpts
                         }),
                         opts.preciousTokens,
                         opts.preciousTokenIds,
                         opts.rageQuitTimestamp
                     );
             } else {

```


<a name="NC-20"></a> 
### [NC-20] Empty bytes check is missing
Passing empty bytes to a function can cause unexpected behavior, such as certain operations failing, producing incorrect results, or wasting gas. It is recommended to check that all byte parameters are not empty.

<details>
<summary>
There are <b>16</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit missing empty check for `targetCallData`
366:     function emergencyExecute(
             address targetAddress,
             bytes calldata targetCallData,
             uint256 amountEth
         ) external payable {
             // Must be called by the DAO.

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit missing empty check for `customMetadata`
108:     function initialize(
             InitialETHCrowdfundOptions memory crowdfundOpts,
             ETHPartyOptions memory partyOpts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) external payable onlyInitialize {

/// @audit missing empty check for `gateData`
164:     function contribute(
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit missing empty check for `gateData`
185:     function contribute(
             uint256 tokenId,
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit missing empty check for `gateData`
235:     function contributeFor(
             uint256 tokenId,
             address payable recipient,
             address initialDelegate,
             bytes memory gateData
         ) external payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit missing empty check for `gateData`
275:     function _contribute(
             address payable contributor,
             address delegate,
             uint96 amount,
             uint256 tokenId,
             bytes memory gateData
         ) private returns (uint96 votingPower) {

/// @audit missing empty check for `customMetadata`
372:     function _createParty(
             ETHPartyOptions memory opts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) private returns (Party) {

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit missing empty check for `progressData`
/// @audit missing empty check for `extraData`
706:     function execute(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             bytes calldata progressData,
             bytes calldata extraData
         ) external payable {
             _assertNotGloballyDisabled();

/// @audit missing empty check for `targetCallData`
841:     function emergencyExecute(
             address targetAddress,
             bytes calldata targetCallData,
             uint256 amountEth
         ) external payable onlyPartyDao onlyWhenEmergencyExecuteAllowed onlyDelegateCall {
             (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

/// @audit missing empty check for `progressData`
/// @audit missing empty check for `extraData`
860:     function _executeProposal(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             uint256 flags,
             bytes memory progressData,
             bytes memory extraData
         ) private returns (bool completed) {
             // Setup the arguments for the proposal execution engine.

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit missing empty check for `data`
465:     function safeTransferFrom(
             address owner,
             address to,
             uint256 tokenId,
             bytes calldata data
         ) public override {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit missing empty check for `signature`
225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
             IERC1271 validator = getSignatureValidatorForHash(hash);

/// @audit missing empty check for `proposalData`
297:     function _extractProposalType(
             bytes memory proposalData
         ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {
             // First 4 bytes is proposal type. While the proposal type could be

/// @audit missing empty check for `proposalData`
318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {
             (address expectedImpl, bytes memory initData) = abi.decode(proposalData, (address, bytes));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

/// @audit missing empty check for `initData`
43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit missing empty check for `signature`
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

```

</details>


<a name="NC-21"></a> 
### [NC-21] Enable IR-based code generation
The IR-based code generator was introduced with an aim to not only allow code generation to be more transparent and auditable but also to enable more powerful optimization passes that span across functions. You can enable it on the command line using `--via-ir` or with the option `{"viaIR": true}`. This will take longer to compile, but you can just simple test it before deploying and if you got a better benchmark then you can add --via-ir to your deploy command More on: https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html

*There is one instance of this issue:*
```solidity

Global finding

```


<a name="NC-22"></a> 
### [NC-22] Events are emitted without the sender information
When an action is triggered based on a user's action, not being able to filter based on who triggered the action makes event processing a lot more cumbersome. Including the `msg.sender` the events of these types of action will make events much more useful to end users, especially when `msg.sender` is not `tx.origin`.

<details>
<summary>
There are <b>19</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

358:         emit FundingSplitSent(fundingSplitRecipient_, splitAmount);

383:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

```

```solidity
File: contracts/party/PartyGovernance.sol

517:         emit DistributionCreated(tokenType, token, tokenId);

520:         emit BatchMetadataUpdate(0, type(uint256).max);

581:         emit BatchMetadataUpdate(0, type(uint256).max);

688:         emit BatchMetadataUpdate(0, type(uint256).max);

830:         emit ProposalCancelled(proposalId);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

850:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

897:         emit BatchMetadataUpdate(0, type(uint256).max);

964:         emit PartyDelegateUpdated(voter, delegate);

1022:         emit PartyVotingSnapshotCreated(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

192:         emit PartyCardIntrinsicVotingPowerSet(tokenId, votingPower_);

227:         emit PartyCardIntrinsicVotingPowerSet(tokenId, newIntrinsicVotingPower);

335:         emit RageQuitSet(oldRageQuitTimestamp, rageQuitTimestamp = newRageQuitTimestamp);

482:         emit AuthorityAdded(authority);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

39:         emit SignatureValidatorSet(data.signatureHash, data.signatureValidator);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);

```

</details>


<a name="NC-23"></a> 
### [NC-23] Events may be emitted out of order due to reentrancy
Ensure that events follow the best practice of check-effects-interaction, and are emitted before external calls.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `.increaseTotalVotingPower(..)` is called before emit
330:         party.increaseTotalVotingPower(newVotingPower);
     
             // Transfer ETH to the party.
             payable(address(party)).transferEth(totalContributions_);
     
             emit Finalized();

/// @audit `.getAddress(..)` is called before emit
372:         if (_GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender) {
                 revert OnlyPartyDaoError(msg.sender);
             }
             // Must not be disabled by DAO or host.
             if (emergencyExecuteDisabled) {
                 revert OnlyWhenEmergencyActionsAllowedError();
             }
             (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);
             if (!success) {
                 res.rawRevert();
             }
             emit EmergencyExecute(targetAddress, targetCallData, amountEth);

/// @audit `.isHost(..)` is called before emit
391:             !party.isHost(msg.sender) &&
                 _GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender
             ) {
                 revert OnlyPartyDaoOrHostError(msg.sender);
             }
             emergencyExecuteDisabled = true;
             emit EmergencyExecuteDisabled();

/// @audit `.getAddress(..)` is called before emit
392:             _GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender
             ) {
                 revert OnlyPartyDaoOrHostError(msg.sender);
             }
             emergencyExecuteDisabled = true;
             emit EmergencyExecuteDisabled();

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit `.votingPowerByTokenId(..)` is called before emit
328:         uint96 votingPower = party.votingPowerByTokenId(tokenId).safeCastUint256ToUint96();
             amount = convertVotingPowerToContribution(votingPower);
     
             if (amount > 0) {
                 // Get contributor to refund.
                 address payable contributor = payable(party.ownerOf(tokenId));
     
                 // Burn contributor's party card.
                 party.burn(tokenId);
     
                 // Refund contributor.
                 contributor.transferEth(amount);
     
                 emit Refunded(contributor, tokenId, amount);

/// @audit `.ownerOf(..)` is called before emit
333:             address payable contributor = payable(party.ownerOf(tokenId));
     
                 // Burn contributor's party card.
                 party.burn(tokenId);
     
                 // Refund contributor.
                 contributor.transferEth(amount);
     
                 emit Refunded(contributor, tokenId, amount);

/// @audit `.burn(..)` is called before emit
336:             party.burn(tokenId);
     
                 // Refund contributor.
                 contributor.transferEth(amount);
     
                 emit Refunded(contributor, tokenId, amount);

/// @audit `.transferEth(..)` is called before emit
339:             contributor.transferEth(amount);
     
                 emit Refunded(contributor, tokenId, amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `.getAddress(..)` is called before emit
515:             _GLOBALS.getAddress(LibGlobals.GLOBAL_TOKEN_DISTRIBUTOR)
             );
             emit DistributionCreated(tokenType, token, tokenId);

/// @audit `.getUint256(..)` is called before emit
791:             uint256 globalMaxCancelDelay = _GLOBALS.getUint256(
                     LibGlobals.GLOBAL_PROPOSAL_MAX_CANCEL_DURATION
                 );
                 uint256 globalMinCancelDelay = _GLOBALS.getUint256(
                     LibGlobals.GLOBAL_PROPOSAL_MIN_CANCEL_DURATION
                 );
                 if (globalMaxCancelDelay != 0) {
                     // Only if we have one set.
                     if (cancelDelay > globalMaxCancelDelay) {
                         cancelDelay = globalMaxCancelDelay;
                     }
                 }
                 if (globalMinCancelDelay != 0) {
                     // Only if we have one set.
                     if (cancelDelay < globalMinCancelDelay) {
                         cancelDelay = globalMinCancelDelay;
                     }
                 }
                 uint256 cancelTime = values.executedTime + cancelDelay;
                 // Must not be too early.
                 if (block.timestamp < cancelTime) {
                     revert ProposalCannotBeCancelledYetError(
                         uint40(block.timestamp),
                         uint40(cancelTime)
                     );
                 }
             }
             // Mark the proposal as cancelled by setting the completed time to the current
             // time with the high bit set.
             proposalState.values.completedTime = uint40(block.timestamp | UINT40_HIGH_BIT);
             {
                 // Delegatecall into the proposal engine impl to perform the cancel.
                 (bool success, bytes memory resultData) = (
                     address(_getSharedProposalStorage().engineImpl)
                 ).delegatecall(abi.encodeCall(IProposalExecutionEngine.cancelProposal, (proposalId)));
                 if (!success) {
                     resultData.rawRevert();
                 }
             }
             emit ProposalCancelled(proposalId);

/// @audit `.getUint256(..)` is called before emit
794:             uint256 globalMinCancelDelay = _GLOBALS.getUint256(
                     LibGlobals.GLOBAL_PROPOSAL_MIN_CANCEL_DURATION
                 );
                 if (globalMaxCancelDelay != 0) {
                     // Only if we have one set.
                     if (cancelDelay > globalMaxCancelDelay) {
                         cancelDelay = globalMaxCancelDelay;
                     }
                 }
                 if (globalMinCancelDelay != 0) {
                     // Only if we have one set.
                     if (cancelDelay < globalMinCancelDelay) {
                         cancelDelay = globalMinCancelDelay;
                     }
                 }
                 uint256 cancelTime = values.executedTime + cancelDelay;
                 // Must not be too early.
                 if (block.timestamp < cancelTime) {
                     revert ProposalCannotBeCancelledYetError(
                         uint40(block.timestamp),
                         uint40(cancelTime)
                     );
                 }
             }
             // Mark the proposal as cancelled by setting the completed time to the current
             // time with the high bit set.
             proposalState.values.completedTime = uint40(block.timestamp | UINT40_HIGH_BIT);
             {
                 // Delegatecall into the proposal engine impl to perform the cancel.
                 (bool success, bytes memory resultData) = (
                     address(_getSharedProposalStorage().engineImpl)
                 ).delegatecall(abi.encodeCall(IProposalExecutionEngine.cancelProposal, (proposalId)));
                 if (!success) {
                     resultData.rawRevert();
                 }
             }
             emit ProposalCancelled(proposalId);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `.compatTransfer(..)` is called before emit
422:                         token.compatTransfer(feeRecipient, fee);
                         }
                     }
     
                     if (amount > 0) {
                         uint256 minAmount = minWithdrawAmounts[i];
     
                         // Check amount is at least minimum.
                         if (amount < minAmount) {
                             revert BelowMinWithdrawAmountError(amount, minAmount);
                         }
     
                         // Transfer token from party to recipient.
                         if (address(token) == ETH_ADDRESS) {
                             payable(receiver).transferEth(amount);
                         } else {
                             token.compatTransfer(receiver, amount);
                         }
                     }
                 }
             }
     
             // Update ragequit timestamp back to before.
             rageQuitTimestamp = currentRageQuitTimestamp;
     
             emit RageQuit(msg.sender, tokenIds, withdrawTokens, receiver);

/// @audit `.compatTransfer(..)` is called before emit
438:                         token.compatTransfer(receiver, amount);
                         }
                     }
                 }
             }
     
             // Update ragequit timestamp back to before.
             rageQuitTimestamp = currentRageQuitTimestamp;
     
             emit RageQuit(msg.sender, tokenIds, withdrawTokens, receiver);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `.getAddress(..)` is called before emit
322:             _GLOBALS.getAddress(LibGlobals.GLOBAL_PROPOSAL_ENGINE_IMPL)
             );
             if (expectedImpl != address(newImpl)) {
                 revert UnexpectedProposalEngineImplementationError(
                     newImpl,
                     IProposalExecutionEngine(expectedImpl)
                 );
             }
             _initProposalImpl(newImpl, initData);
             emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);

```

</details>


<a name="NC-24"></a> 
### [NC-24] Events should use parameters to convey information
For example, rather than using `event Paused()` and `event Unpaused()`, use `event PauseState(address indexed whoChangedIt, bool wasPaused, bool isNowPaused)`

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

81:     event Finalized();

83:     event EmergencyExecuteDisabled();

```

```solidity
File: contracts/party/PartyGovernance.sol

159:     event EmergencyExecuteDisabled();

```

```solidity
File: contracts/utils/Implementation.sol

6:     event Initialized();

```


<a name="NC-25"></a> 
### [NC-25]  Function ordering does not follow the Solidity Style Guide
According to the [solidity style guide](https://docs.soliditylang.org/en/v0.8.17/style-guide.html#order-of-functions), functions should be laid out in the following order: `constructor()`, `receive()`, `fallback()`, `external`, `public`, `internal`, `private`, but the cases below do not follow this pattern

<details>
<summary>
There are <b>59</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit internal function `_initialize` came earlier from this public function
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {

/// @audit internal function `_initialize` came earlier from this public function
/// @audit internal function `_processContribution` came earlier from this public function
278:     function convertVotingPowerToContribution(

/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `getCrowdfundLifecycle` came earlier from this external function
/// @audit internal function `_processContribution` came earlier from this external function
/// @audit public function `convertVotingPowerToContribution` came earlier from this external function
291:     function finalize() external {

/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `getCrowdfundLifecycle` came earlier from this external function
/// @audit internal function `_processContribution` came earlier from this external function
/// @audit public function `convertVotingPowerToContribution` came earlier from this external function
/// @audit internal function `_finalize` came earlier from this external function
339:     function sendFundingSplit() external returns (uint96 splitAmount) {

/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `getCrowdfundLifecycle` came earlier from this external function
/// @audit internal function `_processContribution` came earlier from this external function
/// @audit public function `convertVotingPowerToContribution` came earlier from this external function
/// @audit internal function `_finalize` came earlier from this external function
366:     function emergencyExecute(

/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `getCrowdfundLifecycle` came earlier from this external function
/// @audit internal function `_processContribution` came earlier from this external function
/// @audit public function `convertVotingPowerToContribution` came earlier from this external function
/// @audit internal function `_finalize` came earlier from this external function
388:     function disableEmergencyExecute() external {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit public function `contribute` came earlier from this external function
/// @audit public function `contribute` came earlier from this external function
204:     function batchContribute(

/// @audit public function `contribute` came earlier from this external function
/// @audit public function `contribute` came earlier from this external function
235:     function contributeFor(

/// @audit public function `contribute` came earlier from this external function
/// @audit public function `contribute` came earlier from this external function
255:     function batchContributeFor(

/// @audit public function `contribute` came earlier from this external function
/// @audit public function `contribute` came earlier from this external function
/// @audit private function `_contribute` came earlier from this external function
318:     function refund(uint256 tokenId) external returns (uint96 amount) {

/// @audit public function `contribute` came earlier from this external function
/// @audit public function `contribute` came earlier from this external function
/// @audit private function `_contribute` came earlier from this external function
350:     function batchRefund(

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
265:     constructor(IGlobals globals) {

/// @audit a function was seen before fallback()
/// @audit a function was seen before fallback()
/// @audit a function was seen before fallback()
/// @audit a function was seen before fallback()
312:     fallback() external {

/// @audit internal function `_assertHost` came earlier from this public function
/// @audit internal function `_assertActiveMember` came earlier from this public function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
333:     function supportsInterface(bytes4 interfaceId) public pure virtual returns (bool) {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
347:     function getProposalEngineOpts() external view returns (ProposalEngineOpts memory) {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
355:     function getVotingPowerAt(

/// @audit internal function `_assertHost` came earlier from this public function
/// @audit internal function `_assertActiveMember` came earlier from this public function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
368:     function getVotingPowerAt(

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
381:     function getProposalStateInfo(

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
390:     function getGovernanceValues() external view returns (GovernanceValues memory) {

/// @audit internal function `_assertHost` came earlier from this public function
/// @audit internal function `_assertActiveMember` came earlier from this public function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
399:     function getProposalHash(Proposal memory proposal) public pure returns (bytes32 proposalHash) {

/// @audit internal function `_assertHost` came earlier from this public function
/// @audit internal function `_assertActiveMember` came earlier from this public function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
423:     function findVotingPowerSnapshotIndex(

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
451:     function delegateVotingPower(address delegate) external {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
457:     function abdicateHost(address newPartyHost) external {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
487:     function distribute(

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
553:     function propose(

/// @audit internal function `_assertHost` came earlier from this public function
/// @audit internal function `_assertActiveMember` came earlier from this public function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
/// @audit public function `accept` came earlier from this external function
665:     function veto(uint256 proposalId) external {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
/// @audit public function `accept` came earlier from this external function
706:     function execute(

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
/// @audit public function `accept` came earlier from this external function
771:     function cancel(uint256 proposalId, Proposal calldata proposal) external {

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
/// @audit public function `accept` came earlier from this external function
841:     function emergencyExecute(

/// @audit internal function `_assertHost` came earlier from this external function
/// @audit internal function `_assertActiveMember` came earlier from this external function
/// @audit internal function `_assertNotGloballyDisabled` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `getVotingPowerAt` came earlier from this external function
/// @audit public function `getProposalHash` came earlier from this external function
/// @audit public function `findVotingPowerSnapshotIndex` came earlier from this external function
/// @audit public function `accept` came earlier from this external function
855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {

/// @audit private function `_executeProposal` came earlier from this internal function
904:     function _getVotingPowerSnapshotAt(

/// @audit private function `_executeProposal` came earlier from this internal function
937:     function _transferVotingPower(address from, address to, uint256 power) internal {

/// @audit private function `_executeProposal` came earlier from this internal function
944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

/// @audit private function `_executeProposal` came earlier from this internal function
/// @audit private function `_rebalanceDelegates` came earlier from this internal function
/// @audit private function `_insertVotingPowerSnapshot` came earlier from this internal function
/// @audit private function `_getLastVotingPowerSnapshotForVoter` came earlier from this internal function
/// @audit private function `_getProposalFlags` came earlier from this internal function
/// @audit private function `_getProposalStatus` came earlier from this internal function
/// @audit private function `_isUnanimousVotes` came earlier from this internal function
/// @audit private function `_hostsAccepted` came earlier from this internal function
/// @audit private function `_areVotesPassing` came earlier from this internal function
/// @audit private function `_setPreciousList` came earlier from this internal function
/// @audit private function `_isPreciousListCorrect` came earlier from this internal function
1154:     function _hashPreciousList(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit a function was seen before constructor
76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

/// @audit internal function `_assertAuthority` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
113:     function supportsInterface(

/// @audit internal function `_assertAuthority` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
123:     function tokenURI(uint256) public view override returns (string memory) {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
129:     function contractURI() external view returns (string memory) {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
136:     function royaltyInfo(uint256, uint256) external view returns (address, uint256) {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
146:     function getDistributionShareOf(uint256 tokenId) external view returns (uint256) {

/// @audit internal function `_assertAuthority` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
154:     function getVotingPowerShareOf(uint256 tokenId) public view returns (uint256) {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
166:     function mint(

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
247:     function increaseTotalVotingPower(uint96 votingPower) external {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
255:     function decreaseTotalVotingPower(uint96 votingPower) external {

/// @audit internal function `_assertAuthority` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
263:     function burn(uint256[] memory tokenIds) public {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
310:     function burn(uint256 tokenId) external {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
/// @audit public function `burn` came earlier from this external function
/// @audit private function `_burnAndUpdateVotingPower` came earlier from this external function
318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
/// @audit public function `burn` came earlier from this external function
/// @audit private function `_burnAndUpdateVotingPower` came earlier from this external function
344:     function rageQuit(

/// @audit internal function `_assertAuthority` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
/// @audit private function `_burnAndUpdateVotingPower` came earlier from this public function
451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit internal function `_assertAuthority` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
/// @audit private function `_burnAndUpdateVotingPower` came earlier from this public function
458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit internal function `_assertAuthority` came earlier from this public function
/// @audit internal function `_initialize` came earlier from this public function
/// @audit private function `_burnAndUpdateVotingPower` came earlier from this public function
465:     function safeTransferFrom(

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
/// @audit public function `burn` came earlier from this external function
/// @audit private function `_burnAndUpdateVotingPower` came earlier from this external function
/// @audit public function `transferFrom` came earlier from this external function
/// @audit public function `safeTransferFrom` came earlier from this external function
/// @audit public function `safeTransferFrom` came earlier from this external function
479:     function addAuthority(address authority) external onlySelf {

/// @audit internal function `_assertAuthority` came earlier from this external function
/// @audit internal function `_initialize` came earlier from this external function
/// @audit public function `supportsInterface` came earlier from this external function
/// @audit public function `tokenURI` came earlier from this external function
/// @audit public function `getVotingPowerShareOf` came earlier from this external function
/// @audit public function `burn` came earlier from this external function
/// @audit private function `_burnAndUpdateVotingPower` came earlier from this external function
/// @audit public function `transferFrom` came earlier from this external function
/// @audit public function `safeTransferFrom` came earlier from this external function
/// @audit public function `safeTransferFrom` came earlier from this external function
486:     function abdicateAuthority() external {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit private function `_extractProposalType` came earlier from this internal function
/// @audit private function `_executeUpgradeProposalsImplementation` came earlier from this internal function
335:     function _getStorage() internal pure returns (Storage storage stor) {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

/// @audit internal function `_executeSetSignatureValidator` came earlier from this public function
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

```

</details>


<a name="NC-26"></a> 
### [NC-26] Functions and modifiers should be named in mixedCase style
As the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.21/style-guide.html#function-names) suggests: functions and modifiers should be named in mixedCase style.

*There is one instance of this issue:*
```solidity
File: contracts/utils/Implementation.sol

40:     function IMPL() external view returns (address) {

```


<a name="NC-27"></a> 
### [NC-27] Functions with array parameters should have length checks in place

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
270:     function _initialize(

/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
706:     function execute(

/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
860:     function _executeProposal(

/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
1147:     function _isPreciousListCorrect(

/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
1154:     function _hashPreciousList(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `preciousTokens`
/// @audit `preciousTokenIds`
/// @audit `authorities`
81:     function _initialize(

/// @audit `tokenIds`
263:     function burn(uint256[] memory tokenIds) public {

/// @audit `tokenIds`
268:     function _burnAndUpdateVotingPower(

/// @audit `minWithdrawAmounts`
344:     function rageQuit(

```


<a name="NC-28"></a> 
### [NC-28] High cyclomatic complexity
Consider breaking down these blocks into more manageable units, by splitting things into utility functions, by reducing nesting, and by using early returns

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit Number of blocks: 10
196:     function _processContribution(

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit Number of blocks: 11
771:     function cancel(uint256 proposalId, Proposal calldata proposal) external {

/// @audit Number of blocks: 11
1064:     function _getProposalStatus(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit Number of blocks: 17
344:     function rageQuit(

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit Number of blocks: 11
146:     function executeProposal(

/// @audit Number of blocks: 16
248:     function _execute(

```


<a name="NC-29"></a> 
### [NC-29] Variable names for `immutable`s should use CONSTANT_CASE
For `immutable` variable names, each word should use all capital letters, with underscores separating each word (CONSTANT_CASE)

*There is one instance of this issue:*
```solidity
File: contracts/utils/Implementation.sol

12:     address public immutable implementation;

```


<a name="NC-30"></a> 
### [NC-30] Import declarations should import specific identifiers, rather than the whole file
Using import declarations of the form `import {<identifier_name>} from "some/file.sol"` avoids polluting the symbol namespace making flattened files smaller, and speeds up compilation (but does not save any gas).

<details>
<summary>
There are <b>27</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

4: import "../utils/LibAddress.sol";

5: import "../utils/LibSafeCast.sol";

6: import "../party/Party.sol";

7: import "../gatekeepers/IGateKeeper.sol";

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

4: import "../utils/LibSafeCast.sol";

5: import "../utils/LibAddress.sol";

6: import "openzeppelin/contracts/interfaces/IERC2981.sol";

7: import "../globals/IGlobals.sol";

8: import "../tokens/IERC721.sol";

9: import "../vendor/solmate/ERC721.sol";

10: import "./PartyGovernance.sol";

11: import "../renderers/RendererStorage.sol";

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

4: import "../utils/Implementation.sol";

5: import "../utils/LibRawResult.sol";

6: import "../globals/IGlobals.sol";

9: import "./IProposalExecutionEngine.sol";

10: import "./ListOnOpenseaProposal.sol";

11: import "./ListOnOpenseaAdvancedProposal.sol";

12: import "./ListOnZoraProposal.sol";

13: import "./FractionalizeProposal.sol";

14: import "./ArbitraryCallsProposal.sol";

15: import "./ProposalStorage.sol";

16: import "./DistributeProposal.sol";

17: import "./AddAuthorityProposal.sol";

18: import "./OperatorProposal.sol";

```

```solidity
File: contracts/proposals/ProposalStorage.sol

4: import "./IProposalExecutionEngine.sol";

5: import "../utils/LibRawResult.sol";

```

</details>


<a name="NC-31"></a> 
### [NC-31] Imports could be organized more systematically
The contract's interface should be imported first, followed by each of the interfaces it uses, followed by all other files. The examples below do not follow this layout.

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

7: import "../gatekeepers/IGateKeeper.sol";

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

6: import "openzeppelin/contracts/interfaces/IERC2981.sol";

7: import "../globals/IGlobals.sol";

8: import "../tokens/IERC721.sol";

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

6: import "../globals/IGlobals.sol";

9: import "./IProposalExecutionEngine.sol";

```


<a name="NC-32"></a> 
### [NC-32] Large or complicated code bases should implement invariant tests
This includes: large code bases, or code with lots of inline-assembly, complicated math, or complicated interactions between multiple contracts. Invariant fuzzers such as Echidna require the test writer to come up with invariants which should not be violated under any circumstances, and the fuzzer tests various inputs and function calls to ensure that the invariants always hold. Even code with 100% code coverage can still have bugs due to the order of the operations a user performs, and invariant fuzzers may help significantly.

*There is one instance of this issue:*
```solidity

Global finding

```


<a name="NC-33"></a> 
### [NC-33] Long functions should be refactored into multiple, smaller, functions

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit 77 lines
196:     function _processContribution(
             address payable contributor,
             address delegate,
             uint96 amount
         ) internal returns (uint96 votingPower) {
             address oldDelegate = delegationsByContributor[contributor];

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit 63 lines
372:     function _createParty(
             ETHPartyOptions memory opts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) private returns (Party) {

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit 55 lines
487:     function distribute(
             uint256 amount,
             ITokenDistributor.TokenType tokenType,
             address token,
             uint256 tokenId
         ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {
             _assertNotGloballyDisabled();

/// @audit 63 lines
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {
             // Get the information about the proposal.

/// @audit 54 lines
706:     function execute(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             bytes calldata progressData,
             bytes calldata extraData
         ) external payable {
             _assertNotGloballyDisabled();

/// @audit 63 lines
771:     function cancel(uint256 proposalId, Proposal calldata proposal) external {
             _assertActiveMember();

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit 104 lines
344:     function rageQuit(
             uint256[] calldata tokenIds,
             IERC20[] calldata withdrawTokens,
             uint256[] calldata minWithdrawAmounts,
             address receiver
         ) external {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit 58 lines
146:     function executeProposal(
             ExecuteProposalParams memory params
         ) external onlyDelegateCall returns (bytes memory nextProgressData) {
             // Must have a valid proposal ID.

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit 52 lines
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

```


<a name="NC-34"></a> 
### [NC-34] Magic numbers should be replaced with constants
Magic numbers are hard-coded values in code that can make it difficult for developers and maintainers to understand the code, and can also cause confusion or errors. To improve the readability and maintainability of code, it is recommended to replace magic numbers with constants that have good readability.

<details>
<summary>
There are <b>16</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

265:             // avoids rounding errors for very small contributions <1e4 wei.

266:             amount = (amount * (1e4 - fundingSplitBps_)) / 1e4;

270:         votingPower = (amount * exchangeRateBps) / 1e4;

281:         amount = (votingPower * 1e4) / exchangeRateBps;

287:             amount = (amount * 1e4) / (1e4 - fundingSplitBps_);

325:             totalContributions_ -= (totalContributions_ * fundingSplitBps_) / 1e4;

329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

355:         splitAmount = (totalContributions * fundingSplitBps_) / 1e4;

```

```solidity
File: contracts/party/PartyGovernance.sol

277:         if (govOpts.feeBps > 1e4) {

280:         if (govOpts.passThresholdBps > 1e4) {

1115:         uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1119:         return acceptanceRatio >= 0.9999e4;

1134:         return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

393:                     withdrawAmounts[i] += (balance * getVotingPowerShareOf(tokenIds[j])) / 1e18;

413:                 uint256 fee = (amount * feeBps_) / 1e4;

```

</details>


<a name="NC-35"></a> 
### [NC-35] Named mappings are recommended
[Named mappings](https://docs.soliditylang.org/en/v0.8.18/types.html#mapping-types) (with syntax `mapping(KeyType KeyName? => ValueType ValueName?)`) are recommended.It can make the mapping variables clearer, more readable and easier to maintain.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

131:     mapping(address => address) public delegationsByContributor;

```

```solidity
File: contracts/party/PartyGovernance.sol

141:         mapping(address => bool) hasVoted;

206:     mapping(address => bool) public isHost;

208:     mapping(address => address) public delegationsByVoter;

212:     mapping(uint256 => ProposalState) private _proposalStateByProposalId;

214:     mapping(address => VotingPowerSnapshot[]) private _votingPowerSnapshotsByVoter;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

57:     mapping(uint256 => uint256) public votingPowerByTokenId;

59:     mapping(address => bool) public isAuthority;

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

10:         mapping(bytes32 => IERC1271) signatureValidators;

```


<a name="NC-36"></a> 
### [NC-36] Named imports of parent contracts are missing

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `Implementation`
9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `PartyGovernance`
/// @audit `ERC721`
/// @audit `IERC2981`
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `IProposalExecutionEngine`
/// @audit `Implementation`
/// @audit `ProposalStorage`
/// @audit `ListOnOpenseaProposal`
/// @audit `ListOnOpenseaAdvancedProposal`
/// @audit `ListOnZoraProposal`
/// @audit `FractionalizeProposal`
/// @audit `ArbitraryCallsProposal`
/// @audit `DistributeProposal`
/// @audit `AddAuthorityProposal`
/// @audit `OperatorProposal`
24: contract ProposalExecutionEngine is

```


<a name="NC-37"></a> 
### [NC-37] Missing NatSpec from contract declarations
e.g. `@dev` or `@notice`, and it must appear above the contract definition braces in order to be identified by the compiler as NatSpec.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/proposals/ProposalStorage.sol

10: abstract contract ProposalStorage {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

7: contract SetGovernanceParameterProposal is ProposalStorage {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

7: abstract contract SetSignatureValidatorProposal {

```

```solidity
File: contracts/utils/Implementation.sol

5: abstract contract Implementation {

```


<a name="NC-38"></a> 
### [NC-38] Missing NatSpec `@author` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@author` notation to improve the code documentation.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

20: contract InitialETHCrowdfund is ETHCrowdfundBase {

```

```solidity
File: contracts/party/PartyGovernance.sol

23: abstract contract PartyGovernance is

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

24: contract ProposalExecutionEngine is

```

```solidity
File: contracts/proposals/ProposalStorage.sol

10: abstract contract ProposalStorage {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

7: contract SetGovernanceParameterProposal is ProposalStorage {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

7: abstract contract SetSignatureValidatorProposal {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

9: contract OffChainSignatureValidator is IERC1271 {

```

```solidity
File: contracts/utils/Implementation.sol

5: abstract contract Implementation {

```


<a name="NC-39"></a> 
### [NC-39] Missing NatSpec `@dev` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

20: contract InitialETHCrowdfund is ETHCrowdfundBase {

```

```solidity
File: contracts/party/PartyGovernance.sol

23: abstract contract PartyGovernance is

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```

```solidity
File: contracts/proposals/ProposalStorage.sol

10: abstract contract ProposalStorage {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

7: contract SetGovernanceParameterProposal is ProposalStorage {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

7: abstract contract SetSignatureValidatorProposal {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

9: contract OffChainSignatureValidator is IERC1271 {

```

```solidity
File: contracts/utils/Implementation.sol

5: abstract contract Implementation {

```


<a name="NC-40"></a> 
### [NC-40] Missing NatSpec `@dev` from error declaration
Some error definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

<details>
<summary>
There are <b>56</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

50:     error WrongLifecycleError(CrowdfundLifecycle lc);

51:     error NotAllowedByGateKeeperError(

57:     error OnlyPartyHostError();

58:     error OnlyPartyDaoError(address notDao);

59:     error OnlyPartyDaoOrHostError(address notDao);

60:     error NotOwnerError(uint256 tokenId);

61:     error OnlyWhenEmergencyActionsAllowedError();

62:     error InvalidDelegateError();

63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

65:     error MaxTotalContributionsCannotBeZeroError(uint96 maxTotalContributions);

66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

68:     error InvalidExchangeRateError(uint16 exchangeRateBps);

69:     error ContributingForExistingCardDisabledError();

70:     error ZeroVotingPowerError();

71:     error FundingSplitAlreadyPaidError();

72:     error FundingSplitNotConfiguredError();

73:     error InvalidMessageValue();

```

```solidity
File: contracts/party/PartyGovernance.sol

168:     error MismatchedPreciousListLengths();

169:     error BadProposalStatusError(ProposalStatus status);

170:     error BadProposalHashError(bytes32 proposalHash, bytes32 actualHash);

171:     error ExecutionTimeExceededError(uint40 maxExecutableTime, uint40 timestamp);

172:     error NotAuthorized();

173:     error InvalidDelegateError();

174:     error BadPreciousListError();

175:     error OnlyWhenEmergencyActionsAllowedError();

176:     error OnlyWhenEnabledError();

177:     error AlreadyVotedError(address voter);

178:     error InvalidNewHostError();

179:     error ProposalCannotBeCancelledYetError(uint40 currentTime, uint40 cancelTime);

180:     error InvalidBpsError(uint16 bps);

181:     error DistributionsRequireVoteError();

182:     error PartyNotStartedError();

183:     error CannotRageQuitAndAcceptError();

184:     error TooManyHosts();

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

20:     error FixedRageQuitTimestampError(uint40 rageQuitTimestamp);

21:     error CannotRageQuitError(uint40 rageQuitTimestamp);

22:     error CannotDisableRageQuitAfterInitializationError();

23:     error InvalidTokenOrderError();

24:     error BelowMinWithdrawAmountError(uint256 amount, uint256 minAmount);

25:     error NothingToBurnError();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

42:     error UnsupportedProposalTypeError(uint32 proposalType);

85:     error ProposalDisabled(ProposalType proposalType);

86:     error ZeroProposalIdError();

87:     error MalformedProposalDataError();

88:     error ProposalExecutionBlockedError(uint256 proposalId, uint256 currentInProgressProposalId);

89:     error ProposalProgressDataInvalidError(

93:     error ProposalNotInProgressError(uint256 proposalId);

94:     error UnexpectedProposalEngineImplementationError(

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

9:     error InvalidGovernanceParameter(uint256 value);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

10:     error NotMemberOfParty();

11:     error InsufficientVotingPower();

12:     error MessageHashMismatch();

```

```solidity
File: contracts/utils/Implementation.sol

8:     error AlreadyInitialized();

9:     error OnlyDelegateCallError();

```

</details>


<a name="NC-41"></a> 
### [NC-41] Missing NatSpec `@dev` from event declaration
Some event definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

<details>
<summary>
There are <b>31</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

75:     event Contributed(

81:     event Finalized();

82:     event FundingSplitSent(address indexed fundingSplitRecipient, uint256 amount);

83:     event EmergencyExecuteDisabled();

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

96:     event Refunded(address indexed contributor, uint256 indexed tokenId, uint256 amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

148:     event ProposalPassed(uint256 indexed proposalId);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

151:     event ProposalCancelled(uint256 indexed proposalId);

152:     event DistributionCreated(

157:     event PartyDelegateUpdated(address indexed owner, address indexed delegate);

158:     event HostStatusTransferred(address oldHost, address newHost);

159:     event EmergencyExecuteDisabled();

160:     event PartyVotingSnapshotCreated(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

27:     event AuthorityAdded(address indexed authority);

28:     event AuthorityRemoved(address indexed authority);

29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);

32:     event PartyCardIntrinsicVotingPowerSet(uint256 indexed tokenId, uint256 intrinsicVotingPower);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

11:     event VoteDurationSet(uint256 oldValue, uint256 newValue);

13:     event ExecutionDelaySet(uint256 oldValue, uint256 newValue);

15:     event PassThresholdBpsSet(uint256 oldValue, uint256 newValue);

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

25:     event SignatureValidatorSet(bytes32 indexed hash, IERC1271 indexed signatureValidator);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

15:     event SigningThresholdBpsSet(

```

```solidity
File: contracts/utils/Implementation.sol

6:     event Initialized();

```

</details>


<a name="NC-42"></a> 
### [NC-42] Missing NatSpec `@dev` from function declaration
Some function definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

<details>
<summary>
There are <b>91</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

134:     constructor(IGlobals globals) {

140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {

196:     function _processContribution(

278:     function convertVotingPowerToContribution(

291:     function finalize() external {

317:     function _finalize(uint96 totalContributions_) internal {

339:     function sendFundingSplit() external returns (uint96 splitAmount) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

108:     function initialize(

164:     function contribute(

185:     function contribute(

204:     function batchContribute(

235:     function contributeFor(

255:     function batchContributeFor(

275:     function _contribute(

318:     function refund(uint256 tokenId) external returns (uint96 amount) {

350:     function batchRefund(

372:     function _createParty(

```

```solidity
File: contracts/party/PartyGovernance.sol

216:     function _assertHost() internal view {

222:     function _assertActiveMember() internal view {

258:     function _assertNotGloballyDisabled() internal view {

265:     constructor(IGlobals globals) {

270:     function _initialize(

333:     function supportsInterface(bytes4 interfaceId) public pure virtual returns (bool) {

342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {

347:     function getProposalEngineOpts() external view returns (ProposalEngineOpts memory) {

355:     function getVotingPowerAt(

368:     function getVotingPowerAt(

381:     function getProposalStateInfo(

390:     function getGovernanceValues() external view returns (GovernanceValues memory) {

423:     function findVotingPowerSnapshotIndex(

451:     function delegateVotingPower(address delegate) external {

457:     function abdicateHost(address newPartyHost) external {

860:     function _executeProposal(

904:     function _getVotingPowerSnapshotAt(

937:     function _transferVotingPower(address from, address to, uint256 power) internal {

944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

972:     function _rebalanceDelegates(

1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {

1043:     function _getLastVotingPowerSnapshotForVoter(

1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

1064:     function _getProposalStatus(

1111:     function _isUnanimousVotes(

1122:     function _hostsAccepted(

1129:     function _areVotesPassing(

1137:     function _setPreciousList(

1147:     function _isPreciousListCorrect(

1154:     function _hashPreciousList(

1166:     function _validateProposalHash(Proposal memory proposal, bytes32 expectedHash) private pure {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

61:     function _assertAuthority() internal view {

76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

81:     function _initialize(

113:     function supportsInterface(

123:     function tokenURI(uint256) public view override returns (string memory) {

129:     function contractURI() external view returns (string memory) {

136:     function royaltyInfo(uint256, uint256) external view returns (address, uint256) {

146:     function getDistributionShareOf(uint256 tokenId) external view returns (uint256) {

154:     function getVotingPowerShareOf(uint256 tokenId) public view returns (uint256) {

166:     function mint(

208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

247:     function increaseTotalVotingPower(uint96 votingPower) external {

255:     function decreaseTotalVotingPower(uint96 votingPower) external {

263:     function burn(uint256[] memory tokenIds) public {

268:     function _burnAndUpdateVotingPower(

310:     function burn(uint256 tokenId) external {

318:     function setRageQuit(uint40 newRageQuitTimestamp) external {

344:     function rageQuit(

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(

486:     function abdicateAuthority() external {

493:     function _delegateToRenderer() private view {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

107:     constructor(

123:     function initialize(

146:     function executeProposal(

207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

248:     function _execute(

297:     function _extractProposalType(

318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {

335:     function _getStorage() internal pure returns (Storage storage stor) {

```

```solidity
File: contracts/proposals/ProposalStorage.sol

43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

55:     function _getSharedProposalStorage()

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

25:     function _executeSetGovernanceParameter(

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

28:     function _executeSetSignatureValidator(

42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

47:     function _getSetSignatureValidatorProposalStorage()

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

84:     function setSigningThresholdBps(uint96 thresholdBps) external {

```

```solidity
File: contracts/utils/Implementation.sol

17:     constructor() {

```

</details>


<a name="NC-43"></a> 
### [NC-43] Missing NatSpec `@dev` from modifier declaration
Some modifier definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

231:     modifier onlyPartyDao() {

242:     modifier onlyPartyDaoOrHost() {

251:     modifier onlyWhenEmergencyExecuteAllowed() {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

67:     modifier onlySelf() {

```

```solidity
File: contracts/utils/Implementation.sol

22:     modifier onlyDelegateCall() virtual {

29:     modifier onlyInitialize() {

```


<a name="NC-44"></a> 
### [NC-44] Error declarations should have NatSpec descriptions

<details>
<summary>
There are <b>55</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

50:     error WrongLifecycleError(CrowdfundLifecycle lc);

51:     error NotAllowedByGateKeeperError(

57:     error OnlyPartyHostError();

58:     error OnlyPartyDaoError(address notDao);

59:     error OnlyPartyDaoOrHostError(address notDao);

60:     error NotOwnerError(uint256 tokenId);

61:     error OnlyWhenEmergencyActionsAllowedError();

62:     error InvalidDelegateError();

63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

65:     error MaxTotalContributionsCannotBeZeroError(uint96 maxTotalContributions);

66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

68:     error InvalidExchangeRateError(uint16 exchangeRateBps);

69:     error ContributingForExistingCardDisabledError();

70:     error ZeroVotingPowerError();

71:     error FundingSplitAlreadyPaidError();

72:     error FundingSplitNotConfiguredError();

73:     error InvalidMessageValue();

```

```solidity
File: contracts/party/PartyGovernance.sol

168:     error MismatchedPreciousListLengths();

169:     error BadProposalStatusError(ProposalStatus status);

170:     error BadProposalHashError(bytes32 proposalHash, bytes32 actualHash);

171:     error ExecutionTimeExceededError(uint40 maxExecutableTime, uint40 timestamp);

172:     error NotAuthorized();

173:     error InvalidDelegateError();

174:     error BadPreciousListError();

175:     error OnlyWhenEmergencyActionsAllowedError();

176:     error OnlyWhenEnabledError();

177:     error AlreadyVotedError(address voter);

178:     error InvalidNewHostError();

179:     error ProposalCannotBeCancelledYetError(uint40 currentTime, uint40 cancelTime);

180:     error InvalidBpsError(uint16 bps);

181:     error DistributionsRequireVoteError();

182:     error PartyNotStartedError();

183:     error CannotRageQuitAndAcceptError();

184:     error TooManyHosts();

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

20:     error FixedRageQuitTimestampError(uint40 rageQuitTimestamp);

21:     error CannotRageQuitError(uint40 rageQuitTimestamp);

22:     error CannotDisableRageQuitAfterInitializationError();

23:     error InvalidTokenOrderError();

24:     error BelowMinWithdrawAmountError(uint256 amount, uint256 minAmount);

25:     error NothingToBurnError();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

42:     error UnsupportedProposalTypeError(uint32 proposalType);

85:     error ProposalDisabled(ProposalType proposalType);

86:     error ZeroProposalIdError();

87:     error MalformedProposalDataError();

88:     error ProposalExecutionBlockedError(uint256 proposalId, uint256 currentInProgressProposalId);

89:     error ProposalProgressDataInvalidError(

93:     error ProposalNotInProgressError(uint256 proposalId);

94:     error UnexpectedProposalEngineImplementationError(

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

10:     error NotMemberOfParty();

11:     error InsufficientVotingPower();

12:     error MessageHashMismatch();

```

```solidity
File: contracts/utils/Implementation.sol

8:     error AlreadyInitialized();

9:     error OnlyDelegateCallError();

```

</details>


<a name="NC-45"></a> 
### [NC-45] Event declarations should have NatSpec descriptions

<details>
<summary>
There are <b>26</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

75:     event Contributed(

81:     event Finalized();

82:     event FundingSplitSent(address indexed fundingSplitRecipient, uint256 amount);

83:     event EmergencyExecuteDisabled();

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

96:     event Refunded(address indexed contributor, uint256 indexed tokenId, uint256 amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

148:     event ProposalPassed(uint256 indexed proposalId);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

151:     event ProposalCancelled(uint256 indexed proposalId);

152:     event DistributionCreated(

157:     event PartyDelegateUpdated(address indexed owner, address indexed delegate);

158:     event HostStatusTransferred(address oldHost, address newHost);

159:     event EmergencyExecuteDisabled();

160:     event PartyVotingSnapshotCreated(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

27:     event AuthorityAdded(address indexed authority);

28:     event AuthorityRemoved(address indexed authority);

29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);

32:     event PartyCardIntrinsicVotingPowerSet(uint256 indexed tokenId, uint256 intrinsicVotingPower);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);

```

```solidity
File: contracts/utils/Implementation.sol

6:     event Initialized();

```

</details>


<a name="NC-46"></a> 
### [NC-46] NatSpec documentation for function is missing
It is recommended that Solidity contracts are fully annotated using NatSpec for all public interfaces (everything in the ABI). It is clearly stated in the Solidity official documentation. In complex projects such as DeFi, the interpretation of all functions and their arguments and returns is important for code readability and auditability.

<details>
<summary>
There are <b>44</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

134:     constructor(IGlobals globals) {
             _GLOBALS = globals;

140:     function _initialize(ETHCrowdfundOptions memory opts) internal {
             // Set the minimum and maximum contribution amounts.

196:     function _processContribution(
             address payable contributor,
             address delegate,
             uint96 amount
         ) internal returns (uint96 votingPower) {
             address oldDelegate = delegationsByContributor[contributor];

291:     function finalize() external {
             uint96 totalContributions_ = totalContributions;

317:     function _finalize(uint96 totalContributions_) internal {
             // Finalize the crowdfund.

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

275:     function _contribute(
             address payable contributor,
             address delegate,
             uint96 amount,
             uint256 tokenId,
             bytes memory gateData
         ) private returns (uint96 votingPower) {

372:     function _createParty(
             ETHPartyOptions memory opts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) private returns (Party) {

```

```solidity
File: contracts/party/PartyGovernance.sol

216:     function _assertHost() internal view {
             if (!isHost[msg.sender]) {

222:     function _assertActiveMember() internal view {
             VotingPowerSnapshot memory snap = _getLastVotingPowerSnapshotForVoter(msg.sender);

258:     function _assertNotGloballyDisabled() internal view {
             if (_GLOBALS.getBool(LibGlobals.GLOBAL_DISABLE_PARTY_ACTIONS)) {

265:     constructor(IGlobals globals) {
             _GLOBALS = globals;

270:     function _initialize(
             GovernanceOpts memory govOpts,
             ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds
         ) internal virtual {
             // Check BPS are valid.

860:     function _executeProposal(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             uint256 flags,
             bytes memory progressData,
             bytes memory extraData
         ) private returns (bool completed) {
             // Setup the arguments for the proposal execution engine.

904:     function _getVotingPowerSnapshotAt(
             address voter,
             uint40 timestamp,
             uint256 hintIndex
         ) internal view returns (VotingPowerSnapshot memory snap) {
             VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];

937:     function _transferVotingPower(address from, address to, uint256 power) internal {
             int192 powerI192 = power.safeCastUint256ToInt192();

944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {
             VotingPowerSnapshot memory oldSnap = _getLastVotingPowerSnapshotForVoter(voter);

972:     function _rebalanceDelegates(
             address voter,
             address oldDelegate,
             address newDelegate,
             VotingPowerSnapshot memory oldSnap,
             VotingPowerSnapshot memory newSnap
         ) private {
             if (newDelegate == address(0) || oldDelegate == address(0)) {

1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {
              emit PartyVotingSnapshotCreated(

1043:     function _getLastVotingPowerSnapshotForVoter(
              address voter
          ) private view returns (VotingPowerSnapshot memory snap) {
              VotingPowerSnapshot[] storage voterSnaps = _votingPowerSnapshotsByVoter[voter];

1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {
              uint256 flags = 0;

1064:     function _getProposalStatus(
              ProposalStateValues memory pv
          ) private view returns (ProposalStatus status) {
              // Never proposed.

1111:     function _isUnanimousVotes(
              uint96 totalVotes,
              uint96 totalVotingPower
          ) private pure returns (bool) {
              uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1122:     function _hostsAccepted(
              uint8 snapshotNumHosts,
              uint8 numHostsAccepted
          ) private pure returns (bool) {
              return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;

1129:     function _areVotesPassing(
              uint96 voteCount,
              uint96 totalVotingPower,
              uint16 passThresholdBps
          ) private pure returns (bool) {
              return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);

1137:     function _setPreciousList(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) private {
              if (preciousTokens.length != preciousTokenIds.length) {

1147:     function _isPreciousListCorrect(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) private view returns (bool) {
              return preciousListHash == _hashPreciousList(preciousTokens, preciousTokenIds);

1154:     function _hashPreciousList(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) internal pure returns (bytes32 h) {
              assembly {

1166:     function _validateProposalHash(Proposal memory proposal, bytes32 expectedHash) private pure {
              bytes32 actualHash = getProposalHash(proposal);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

61:     function _assertAuthority() internal view {

76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

81:     function _initialize(
            string memory name_,
            string memory symbol_,
            uint256 customizationPresetId,
            PartyGovernance.GovernanceOpts memory governanceOpts,
            ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
            IERC721[] memory preciousTokens,
            uint256[] memory preciousTokenIds,
            address[] memory authorities,
            uint40 rageQuitTimestamp_
        ) internal {

268:     function _burnAndUpdateVotingPower(
             uint256[] memory tokenIds,
             bool checkIfAuthorizedToBurn
         ) private returns (uint96 totalVotingPowerBurned) {

493:     function _delegateToRenderer() private view {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

107:     constructor(
             IGlobals globals,
             IReserveAuctionCoreEth zora,
             IFractionalV1VaultFactory fractionalVaultFactory
         )
             ListOnOpenseaAdvancedProposal(globals)
             ListOnZoraProposal(globals, zora)
             FractionalizeProposal(fractionalVaultFactory)
             ArbitraryCallsProposal(zora)
         {
             _GLOBALS = globals;

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
             IERC1271 validator = getSignatureValidatorForHash(hash);

248:     function _execute(
             ProposalType pt,
             ExecuteProposalParams memory params
         ) internal virtual returns (bytes memory nextProgressData) {
             if (pt == ProposalType.ListOnOpensea) {

297:     function _extractProposalType(
             bytes memory proposalData
         ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {
             // First 4 bytes is proposal type. While the proposal type could be

318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {
             (address expectedImpl, bytes memory initData) = abi.decode(proposalData, (address, bytes));

335:     function _getStorage() internal pure returns (Storage storage stor) {
             uint256 slot = _STORAGE_SLOT;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

55:     function _getSharedProposalStorage()
            internal
            pure
            returns (SharedProposalStorage storage stor)
        {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

```

```solidity
File: contracts/utils/Implementation.sol

17:     constructor() {

```

</details>


<a name="NC-47"></a> 
### [NC-47] Modifier declarations should have NatSpec descriptions

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

231:     modifier onlyPartyDao() {
             {

242:     modifier onlyPartyDaoOrHost() {
             address partyDao = _GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET);

251:     modifier onlyWhenEmergencyExecuteAllowed() {
             if (emergencyExecuteDisabled) {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

67:     modifier onlySelf() {

```

```solidity
File: contracts/utils/Implementation.sol

22:     modifier onlyDelegateCall() virtual {

29:     modifier onlyInitialize() {

```


<a name="NC-48"></a> 
### [NC-48] Missing NatSpec `@notice` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/proposals/ProposalStorage.sol

10: abstract contract ProposalStorage {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

7: contract SetGovernanceParameterProposal is ProposalStorage {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

7: abstract contract SetSignatureValidatorProposal {

```

```solidity
File: contracts/utils/Implementation.sol

5: abstract contract Implementation {

```


<a name="NC-49"></a> 
### [NC-49] Missing NatSpec `@notice` from error declaration
Some error definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

<details>
<summary>
There are <b>55</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

50:     error WrongLifecycleError(CrowdfundLifecycle lc);

51:     error NotAllowedByGateKeeperError(

57:     error OnlyPartyHostError();

58:     error OnlyPartyDaoError(address notDao);

59:     error OnlyPartyDaoOrHostError(address notDao);

60:     error NotOwnerError(uint256 tokenId);

61:     error OnlyWhenEmergencyActionsAllowedError();

62:     error InvalidDelegateError();

63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

65:     error MaxTotalContributionsCannotBeZeroError(uint96 maxTotalContributions);

66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

68:     error InvalidExchangeRateError(uint16 exchangeRateBps);

69:     error ContributingForExistingCardDisabledError();

70:     error ZeroVotingPowerError();

71:     error FundingSplitAlreadyPaidError();

72:     error FundingSplitNotConfiguredError();

73:     error InvalidMessageValue();

```

```solidity
File: contracts/party/PartyGovernance.sol

168:     error MismatchedPreciousListLengths();

169:     error BadProposalStatusError(ProposalStatus status);

170:     error BadProposalHashError(bytes32 proposalHash, bytes32 actualHash);

171:     error ExecutionTimeExceededError(uint40 maxExecutableTime, uint40 timestamp);

172:     error NotAuthorized();

173:     error InvalidDelegateError();

174:     error BadPreciousListError();

175:     error OnlyWhenEmergencyActionsAllowedError();

176:     error OnlyWhenEnabledError();

177:     error AlreadyVotedError(address voter);

178:     error InvalidNewHostError();

179:     error ProposalCannotBeCancelledYetError(uint40 currentTime, uint40 cancelTime);

180:     error InvalidBpsError(uint16 bps);

181:     error DistributionsRequireVoteError();

182:     error PartyNotStartedError();

183:     error CannotRageQuitAndAcceptError();

184:     error TooManyHosts();

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

20:     error FixedRageQuitTimestampError(uint40 rageQuitTimestamp);

21:     error CannotRageQuitError(uint40 rageQuitTimestamp);

22:     error CannotDisableRageQuitAfterInitializationError();

23:     error InvalidTokenOrderError();

24:     error BelowMinWithdrawAmountError(uint256 amount, uint256 minAmount);

25:     error NothingToBurnError();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

42:     error UnsupportedProposalTypeError(uint32 proposalType);

85:     error ProposalDisabled(ProposalType proposalType);

86:     error ZeroProposalIdError();

87:     error MalformedProposalDataError();

88:     error ProposalExecutionBlockedError(uint256 proposalId, uint256 currentInProgressProposalId);

89:     error ProposalProgressDataInvalidError(

93:     error ProposalNotInProgressError(uint256 proposalId);

94:     error UnexpectedProposalEngineImplementationError(

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

10:     error NotMemberOfParty();

11:     error InsufficientVotingPower();

12:     error MessageHashMismatch();

```

```solidity
File: contracts/utils/Implementation.sol

8:     error AlreadyInitialized();

9:     error OnlyDelegateCallError();

```

</details>


<a name="NC-50"></a> 
### [NC-50] Missing NatSpec `@notice` from event declaration
Some event definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

<details>
<summary>
There are <b>26</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

75:     event Contributed(

81:     event Finalized();

82:     event FundingSplitSent(address indexed fundingSplitRecipient, uint256 amount);

83:     event EmergencyExecuteDisabled();

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

96:     event Refunded(address indexed contributor, uint256 indexed tokenId, uint256 amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

148:     event ProposalPassed(uint256 indexed proposalId);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

151:     event ProposalCancelled(uint256 indexed proposalId);

152:     event DistributionCreated(

157:     event PartyDelegateUpdated(address indexed owner, address indexed delegate);

158:     event HostStatusTransferred(address oldHost, address newHost);

159:     event EmergencyExecuteDisabled();

160:     event PartyVotingSnapshotCreated(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

27:     event AuthorityAdded(address indexed authority);

28:     event AuthorityRemoved(address indexed authority);

29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);

32:     event PartyCardIntrinsicVotingPowerSet(uint256 indexed tokenId, uint256 intrinsicVotingPower);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);

```

```solidity
File: contracts/utils/Implementation.sol

6:     event Initialized();

```

</details>


<a name="NC-51"></a> 
### [NC-51] Missing NatSpec `@notice` from function declaration
Some function definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

<details>
<summary>
There are <b>52</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

134:     constructor(IGlobals globals) {

140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

196:     function _processContribution(

291:     function finalize() external {

317:     function _finalize(uint96 totalContributions_) internal {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

275:     function _contribute(

372:     function _createParty(

```

```solidity
File: contracts/party/PartyGovernance.sol

216:     function _assertHost() internal view {

222:     function _assertActiveMember() internal view {

258:     function _assertNotGloballyDisabled() internal view {

265:     constructor(IGlobals globals) {

270:     function _initialize(

312:     fallback() external {

860:     function _executeProposal(

904:     function _getVotingPowerSnapshotAt(

937:     function _transferVotingPower(address from, address to, uint256 power) internal {

944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {

972:     function _rebalanceDelegates(

1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {

1043:     function _getLastVotingPowerSnapshotForVoter(

1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {

1064:     function _getProposalStatus(

1111:     function _isUnanimousVotes(

1122:     function _hostsAccepted(

1129:     function _areVotesPassing(

1137:     function _setPreciousList(

1147:     function _isPreciousListCorrect(

1154:     function _hashPreciousList(

1166:     function _validateProposalHash(Proposal memory proposal, bytes32 expectedHash) private pure {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

61:     function _assertAuthority() internal view {

76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

81:     function _initialize(

113:     function supportsInterface(

123:     function tokenURI(uint256) public view override returns (string memory) {

268:     function _burnAndUpdateVotingPower(

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(

493:     function _delegateToRenderer() private view {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

107:     constructor(

146:     function executeProposal(

207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

248:     function _execute(

297:     function _extractProposalType(

318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {

335:     function _getStorage() internal pure returns (Storage storage stor) {

```

```solidity
File: contracts/proposals/ProposalStorage.sol

43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

55:     function _getSharedProposalStorage()

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

```

```solidity
File: contracts/utils/Implementation.sol

17:     constructor() {

```

</details>


<a name="NC-52"></a> 
### [NC-52] Missing NatSpec `@notice` from modifier declaration
Some modifier definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

231:     modifier onlyPartyDao() {

242:     modifier onlyPartyDaoOrHost() {

251:     modifier onlyWhenEmergencyExecuteAllowed() {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

67:     modifier onlySelf() {

```

```solidity
File: contracts/utils/Implementation.sol

22:     modifier onlyDelegateCall() virtual {

29:     modifier onlyInitialize() {

```


<a name="NC-53"></a> 
### [NC-53] Missing NatSpec `@param` from error declaration
Some error definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

<details>
<summary>
There are <b>27</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

50:     error WrongLifecycleError(CrowdfundLifecycle lc);

51:     error NotAllowedByGateKeeperError(

58:     error OnlyPartyDaoError(address notDao);

59:     error OnlyPartyDaoOrHostError(address notDao);

60:     error NotOwnerError(uint256 tokenId);

63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

65:     error MaxTotalContributionsCannotBeZeroError(uint96 maxTotalContributions);

66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

68:     error InvalidExchangeRateError(uint16 exchangeRateBps);

```

```solidity
File: contracts/party/PartyGovernance.sol

169:     error BadProposalStatusError(ProposalStatus status);

170:     error BadProposalHashError(bytes32 proposalHash, bytes32 actualHash);

171:     error ExecutionTimeExceededError(uint40 maxExecutableTime, uint40 timestamp);

177:     error AlreadyVotedError(address voter);

179:     error ProposalCannotBeCancelledYetError(uint40 currentTime, uint40 cancelTime);

180:     error InvalidBpsError(uint16 bps);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

20:     error FixedRageQuitTimestampError(uint40 rageQuitTimestamp);

21:     error CannotRageQuitError(uint40 rageQuitTimestamp);

24:     error BelowMinWithdrawAmountError(uint256 amount, uint256 minAmount);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

42:     error UnsupportedProposalTypeError(uint32 proposalType);

85:     error ProposalDisabled(ProposalType proposalType);

88:     error ProposalExecutionBlockedError(uint256 proposalId, uint256 currentInProgressProposalId);

89:     error ProposalProgressDataInvalidError(

93:     error ProposalNotInProgressError(uint256 proposalId);

94:     error UnexpectedProposalEngineImplementationError(

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

9:     error InvalidGovernanceParameter(uint256 value);

```

</details>


<a name="NC-54"></a> 
### [NC-54] Missing NatSpec `@param` from event declaration
Some event definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

<details>
<summary>
There are <b>26</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

75:     event Contributed(

82:     event FundingSplitSent(address indexed fundingSplitRecipient, uint256 amount);

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

96:     event Refunded(address indexed contributor, uint256 indexed tokenId, uint256 amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

148:     event ProposalPassed(uint256 indexed proposalId);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

151:     event ProposalCancelled(uint256 indexed proposalId);

152:     event DistributionCreated(

157:     event PartyDelegateUpdated(address indexed owner, address indexed delegate);

158:     event HostStatusTransferred(address oldHost, address newHost);

160:     event PartyVotingSnapshotCreated(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

27:     event AuthorityAdded(address indexed authority);

28:     event AuthorityRemoved(address indexed authority);

29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);

32:     event PartyCardIntrinsicVotingPowerSet(uint256 indexed tokenId, uint256 intrinsicVotingPower);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

11:     event VoteDurationSet(uint256 oldValue, uint256 newValue);

13:     event ExecutionDelaySet(uint256 oldValue, uint256 newValue);

15:     event PassThresholdBpsSet(uint256 oldValue, uint256 newValue);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

15:     event SigningThresholdBpsSet(

```

</details>


<a name="NC-55"></a> 
### [NC-55] Missing NatSpec `@param` from function declaration
Some function definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

<details>
<summary>
There are <b>46</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit missing @param for `globals`
134:     constructor(IGlobals globals) {
             _GLOBALS = globals;

/// @audit missing @param for `opts`
140:     function _initialize(ETHCrowdfundOptions memory opts) internal {
             // Set the minimum and maximum contribution amounts.

/// @audit missing @param for `contributor`
/// @audit missing @param for `delegate`
/// @audit missing @param for `amount`
196:     function _processContribution(
             address payable contributor,
             address delegate,
             uint96 amount
         ) internal returns (uint96 votingPower) {
             address oldDelegate = delegationsByContributor[contributor];

/// @audit missing @param for `totalContributions_`
317:     function _finalize(uint96 totalContributions_) internal {
             // Finalize the crowdfund.

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit missing @param for `globals`
99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

/// @audit missing @param for `contributor`
/// @audit missing @param for `delegate`
/// @audit missing @param for `amount`
/// @audit missing @param for `tokenId`
/// @audit missing @param for `gateData`
275:     function _contribute(
             address payable contributor,
             address delegate,
             uint96 amount,
             uint256 tokenId,
             bytes memory gateData
         ) private returns (uint96 votingPower) {

/// @audit missing @param for `opts`
/// @audit missing @param for `customMetadataProvider`
/// @audit missing @param for `customMetadata`
372:     function _createParty(
             ETHPartyOptions memory opts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) private returns (Party) {

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit missing @param for `globals`
265:     constructor(IGlobals globals) {
             _GLOBALS = globals;

/// @audit missing @param for `govOpts`
/// @audit missing @param for `proposalEngineOpts`
/// @audit missing @param for `preciousTokens`
/// @audit missing @param for `preciousTokenIds`
270:     function _initialize(
             GovernanceOpts memory govOpts,
             ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds
         ) internal virtual {
             // Check BPS are valid.

/// @audit missing @param for `amount`
487:     function distribute(
             uint256 amount,
             ITokenDistributor.TokenType tokenType,
             address token,
             uint256 tokenId
         ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {
             _assertNotGloballyDisabled();

/// @audit missing @param for `proposalId`
/// @audit missing @param for `proposal`
/// @audit missing @param for `preciousTokens`
/// @audit missing @param for `preciousTokenIds`
/// @audit missing @param for `flags`
/// @audit missing @param for `progressData`
/// @audit missing @param for `extraData`
860:     function _executeProposal(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             uint256 flags,
             bytes memory progressData,
             bytes memory extraData
         ) private returns (bool completed) {
             // Setup the arguments for the proposal execution engine.

/// @audit missing @param for `voter`
/// @audit missing @param for `timestamp`
/// @audit missing @param for `hintIndex`
904:     function _getVotingPowerSnapshotAt(
             address voter,
             uint40 timestamp,
             uint256 hintIndex
         ) internal view returns (VotingPowerSnapshot memory snap) {
             VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];

/// @audit missing @param for `from`
/// @audit missing @param for `to`
/// @audit missing @param for `power`
937:     function _transferVotingPower(address from, address to, uint256 power) internal {
             int192 powerI192 = power.safeCastUint256ToInt192();

/// @audit missing @param for `voter`
/// @audit missing @param for `votingPower`
/// @audit missing @param for `delegate`
944:     function _adjustVotingPower(address voter, int192 votingPower, address delegate) internal {
             VotingPowerSnapshot memory oldSnap = _getLastVotingPowerSnapshotForVoter(voter);

/// @audit missing @param for `voter`
/// @audit missing @param for `oldDelegate`
/// @audit missing @param for `newDelegate`
/// @audit missing @param for `oldSnap`
/// @audit missing @param for `newSnap`
972:     function _rebalanceDelegates(
             address voter,
             address oldDelegate,
             address newDelegate,
             VotingPowerSnapshot memory oldSnap,
             VotingPowerSnapshot memory newSnap
         ) private {
             if (newDelegate == address(0) || oldDelegate == address(0)) {

/// @audit missing @param for `voter`
/// @audit missing @param for `snap`
1021:     function _insertVotingPowerSnapshot(address voter, VotingPowerSnapshot memory snap) private {
              emit PartyVotingSnapshotCreated(

/// @audit missing @param for `voter`
1043:     function _getLastVotingPowerSnapshotForVoter(
              address voter
          ) private view returns (VotingPowerSnapshot memory snap) {
              VotingPowerSnapshot[] storage voterSnaps = _votingPowerSnapshotsByVoter[voter];

/// @audit missing @param for `pv`
1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {
              uint256 flags = 0;

/// @audit missing @param for `pv`
1064:     function _getProposalStatus(
              ProposalStateValues memory pv
          ) private view returns (ProposalStatus status) {
              // Never proposed.

/// @audit missing @param for `totalVotes`
/// @audit missing @param for `totalVotingPower`
1111:     function _isUnanimousVotes(
              uint96 totalVotes,
              uint96 totalVotingPower
          ) private pure returns (bool) {
              uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

/// @audit missing @param for `snapshotNumHosts`
/// @audit missing @param for `numHostsAccepted`
1122:     function _hostsAccepted(
              uint8 snapshotNumHosts,
              uint8 numHostsAccepted
          ) private pure returns (bool) {
              return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;

/// @audit missing @param for `voteCount`
/// @audit missing @param for `totalVotingPower`
/// @audit missing @param for `passThresholdBps`
1129:     function _areVotesPassing(
              uint96 voteCount,
              uint96 totalVotingPower,
              uint16 passThresholdBps
          ) private pure returns (bool) {
              return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);

/// @audit missing @param for `preciousTokens`
/// @audit missing @param for `preciousTokenIds`
1137:     function _setPreciousList(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) private {
              if (preciousTokens.length != preciousTokenIds.length) {

/// @audit missing @param for `preciousTokens`
/// @audit missing @param for `preciousTokenIds`
1147:     function _isPreciousListCorrect(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) private view returns (bool) {
              return preciousListHash == _hashPreciousList(preciousTokens, preciousTokenIds);

/// @audit missing @param for `preciousTokens`
/// @audit missing @param for `preciousTokenIds`
1154:     function _hashPreciousList(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) internal pure returns (bytes32 h) {
              assembly {

/// @audit missing @param for `proposal`
/// @audit missing @param for `expectedHash`
1166:     function _validateProposalHash(Proposal memory proposal, bytes32 expectedHash) private pure {
              bytes32 actualHash = getProposalHash(proposal);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit missing @param for `globals`
76:     constructor(IGlobals globals) payable PartyGovernance(globals) ERC721("", "") {

/// @audit missing @param for `name_`
/// @audit missing @param for `symbol_`
/// @audit missing @param for `customizationPresetId`
/// @audit missing @param for `governanceOpts`
/// @audit missing @param for `proposalEngineOpts`
/// @audit missing @param for `preciousTokens`
/// @audit missing @param for `preciousTokenIds`
/// @audit missing @param for `authorities`
/// @audit missing @param for `rageQuitTimestamp_`
81:     function _initialize(
            string memory name_,
            string memory symbol_,
            uint256 customizationPresetId,
            PartyGovernance.GovernanceOpts memory governanceOpts,
            ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
            IERC721[] memory preciousTokens,
            uint256[] memory preciousTokenIds,
            address[] memory authorities,
            uint40 rageQuitTimestamp_
        ) internal {

/// @audit missing @param for `interfaceId`
113:     function supportsInterface(
             bytes4 interfaceId
         ) public pure override(PartyGovernance, ERC721, IERC165) returns (bool) {

/// @audit missing @param for `tokenIds`
/// @audit missing @param for `checkIfAuthorizedToBurn`
268:     function _burnAndUpdateVotingPower(
             uint256[] memory tokenIds,
             bool checkIfAuthorizedToBurn
         ) private returns (uint96 totalVotingPowerBurned) {

/// @audit missing @param for `owner`
/// @audit missing @param for `to`
/// @audit missing @param for `tokenId`
451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit missing @param for `owner`
/// @audit missing @param for `to`
/// @audit missing @param for `tokenId`
458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

/// @audit missing @param for `owner`
/// @audit missing @param for `to`
/// @audit missing @param for `tokenId`
/// @audit missing @param for `data`
465:     function safeTransferFrom(
             address owner,
             address to,
             uint256 tokenId,
             bytes calldata data
         ) public override {

/// @audit missing @param for `authority`
479:     function addAuthority(address authority) external onlySelf {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit missing @param for `globals`
/// @audit missing @param for `zora`
/// @audit missing @param for `fractionalVaultFactory`
107:     constructor(
             IGlobals globals,
             IReserveAuctionCoreEth zora,
             IFractionalV1VaultFactory fractionalVaultFactory
         )
             ListOnOpenseaAdvancedProposal(globals)
             ListOnZoraProposal(globals, zora)
             FractionalizeProposal(fractionalVaultFactory)
             ArbitraryCallsProposal(zora)
         {
             _GLOBALS = globals;

/// @audit missing @param for `params`
146:     function executeProposal(
             ExecuteProposalParams memory params
         ) external onlyDelegateCall returns (bytes memory nextProgressData) {
             // Must have a valid proposal ID.

/// @audit missing @param for `proposalId`
207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {
             // Must be a valid proposal ID.

/// @audit missing @param for `hash`
/// @audit missing @param for `signature`
225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
             IERC1271 validator = getSignatureValidatorForHash(hash);

/// @audit missing @param for `pt`
/// @audit missing @param for `params`
248:     function _execute(
             ProposalType pt,
             ExecuteProposalParams memory params
         ) internal virtual returns (bytes memory nextProgressData) {
             if (pt == ProposalType.ListOnOpensea) {

/// @audit missing @param for `proposalData`
297:     function _extractProposalType(
             bytes memory proposalData
         ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {
             // First 4 bytes is proposal type. While the proposal type could be

/// @audit missing @param for `proposalData`
318:     function _executeUpgradeProposalsImplementation(bytes memory proposalData) private {
             (address expectedImpl, bytes memory initData) = abi.decode(proposalData, (address, bytes));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

/// @audit missing @param for `impl`
/// @audit missing @param for `initData`
43:     function _initProposalImpl(IProposalExecutionEngine impl, bytes memory initData) internal {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

/// @audit missing @param for `params`
25:     function _executeSetGovernanceParameter(
            IProposalExecutionEngine.ExecuteProposalParams memory params
        ) internal returns (bytes memory) {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

/// @audit missing @param for `params`
28:     function _executeSetSignatureValidator(
            IProposalExecutionEngine.ExecuteProposalParams memory params
        ) internal returns (bytes memory nextProgressData) {

/// @audit missing @param for `hash`
42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit missing @param for `hash`
/// @audit missing @param for `signature`
28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

```

</details>


<a name="NC-56"></a> 
### [NC-56] Missing NatSpec `@return` from function declaration
Some function definitions have an incomplete NatSpec: add a `@return` notation to improve the code documentation.

<details>
<summary>
There are <b>37</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {
             if (maxTotalContributions == 0) {

196:     function _processContribution(
             address payable contributor,
             address delegate,
             uint96 amount
         ) internal returns (uint96 votingPower) {
             address oldDelegate = delegationsByContributor[contributor];

339:     function sendFundingSplit() external returns (uint96 splitAmount) {
             // Check that the crowdfund is finalized.

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

275:     function _contribute(
             address payable contributor,
             address delegate,
             uint96 amount,
             uint256 tokenId,
             bytes memory gateData
         ) private returns (uint96 votingPower) {

372:     function _createParty(
             ETHPartyOptions memory opts,
             MetadataProvider customMetadataProvider,
             bytes memory customMetadata
         ) private returns (Party) {

```

```solidity
File: contracts/party/PartyGovernance.sol

342:     function getProposalExecutionEngine() external view returns (IProposalExecutionEngine) {
             return _getSharedProposalStorage().engineImpl;

347:     function getProposalEngineOpts() external view returns (ProposalEngineOpts memory) {
             return _getSharedProposalStorage().opts;

553:     function propose(
             Proposal memory proposal,
             uint256 latestSnapIndex
         ) external returns (uint256 proposalId) {
             _assertActiveMember();

860:     function _executeProposal(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             uint256 flags,
             bytes memory progressData,
             bytes memory extraData
         ) private returns (bool completed) {
             // Setup the arguments for the proposal execution engine.

904:     function _getVotingPowerSnapshotAt(
             address voter,
             uint40 timestamp,
             uint256 hintIndex
         ) internal view returns (VotingPowerSnapshot memory snap) {
             VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];

1043:     function _getLastVotingPowerSnapshotForVoter(
              address voter
          ) private view returns (VotingPowerSnapshot memory snap) {
              VotingPowerSnapshot[] storage voterSnaps = _votingPowerSnapshotsByVoter[voter];

1053:     function _getProposalFlags(ProposalStateValues memory pv) private pure returns (uint256) {
              uint256 flags = 0;

1064:     function _getProposalStatus(
              ProposalStateValues memory pv
          ) private view returns (ProposalStatus status) {
              // Never proposed.

1111:     function _isUnanimousVotes(
              uint96 totalVotes,
              uint96 totalVotingPower
          ) private pure returns (bool) {
              uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1122:     function _hostsAccepted(
              uint8 snapshotNumHosts,
              uint8 numHostsAccepted
          ) private pure returns (bool) {
              return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;

1129:     function _areVotesPassing(
              uint96 voteCount,
              uint96 totalVotingPower,
              uint16 passThresholdBps
          ) private pure returns (bool) {
              return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);

1147:     function _isPreciousListCorrect(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) private view returns (bool) {
              return preciousListHash == _hashPreciousList(preciousTokens, preciousTokenIds);

1154:     function _hashPreciousList(
              IERC721[] memory preciousTokens,
              uint256[] memory preciousTokenIds
          ) internal pure returns (bytes32 h) {
              assembly {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

113:     function supportsInterface(
             bytes4 interfaceId
         ) public pure override(PartyGovernance, ERC721, IERC165) returns (bool) {

123:     function tokenURI(uint256) public view override returns (string memory) {

129:     function contractURI() external view returns (string memory) {

136:     function royaltyInfo(uint256, uint256) external view returns (address, uint256) {

166:     function mint(
             address owner,
             uint256 votingPower,
             address delegate
         ) external returns (uint256 tokenId) {

268:     function _burnAndUpdateVotingPower(
             uint256[] memory tokenIds,
             bool checkIfAuthorizedToBurn
         ) private returns (uint96 totalVotingPowerBurned) {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {
             return _getStorage().currentInProgressProposalId;

146:     function executeProposal(
             ExecuteProposalParams memory params
         ) external onlyDelegateCall returns (bytes memory nextProgressData) {
             // Must have a valid proposal ID.

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
             IERC1271 validator = getSignatureValidatorForHash(hash);

248:     function _execute(
             ProposalType pt,
             ExecuteProposalParams memory params
         ) internal virtual returns (bytes memory nextProgressData) {
             if (pt == ProposalType.ListOnOpensea) {

297:     function _extractProposalType(
             bytes memory proposalData
         ) private pure returns (ProposalType proposalType, bytes memory offsetProposalData) {
             // First 4 bytes is proposal type. While the proposal type could be

335:     function _getStorage() internal pure returns (Storage storage stor) {
             uint256 slot = _STORAGE_SLOT;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

55:     function _getSharedProposalStorage()
            internal
            pure
            returns (SharedProposalStorage storage stor)
        {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

25:     function _executeSetGovernanceParameter(
            IProposalExecutionEngine.ExecuteProposalParams memory params
        ) internal returns (bytes memory) {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

28:     function _executeSetSignatureValidator(
            IProposalExecutionEngine.ExecuteProposalParams memory params
        ) internal returns (bytes memory nextProgressData) {

42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

47:     function _getSetSignatureValidatorProposalStorage()
            private
            pure
            returns (SetSignatureValidatorProposalStorage storage stor)
        {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

```

```solidity
File: contracts/utils/Implementation.sol

40:     function IMPL() external view returns (address) {

```

</details>


<a name="NC-57"></a> 
### [NC-57] Missing NatSpec `@title` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@title` notation to improve the code documentation.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

20: contract InitialETHCrowdfund is ETHCrowdfundBase {

```

```solidity
File: contracts/party/PartyGovernance.sol

23: abstract contract PartyGovernance is

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

24: contract ProposalExecutionEngine is

```

```solidity
File: contracts/proposals/ProposalStorage.sol

10: abstract contract ProposalStorage {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

7: contract SetGovernanceParameterProposal is ProposalStorage {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

7: abstract contract SetSignatureValidatorProposal {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

9: contract OffChainSignatureValidator is IERC1271 {

```

```solidity
File: contracts/utils/Implementation.sol

5: abstract contract Implementation {

```


<a name="NC-58"></a> 
### [NC-58] There is no need to initialize variables with 0
Since the variables are automatically set to 0 when created, it is redundant to initialize it with 0 again.

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {

```

```solidity
File: contracts/party/PartyGovernance.sol

305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

432:         uint256 low = 0;

1054:         uint256 flags = 0;

```


<a name="NC-59"></a> 
### [NC-59] Put all system-wide constants in one file
Putting all the system-wide constants in a single file improves code readability, makes it easier to understand the basic configuration and limitations of the system, and makes maintenance easier.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

187:     uint96 private constant VETO_VALUE = type(uint96).max;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

13:     uint256 private constant _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT =

```


<a name="NC-60"></a> 
### [NC-60] Redundant inheritance specifier
The contracts below already extend the specified contract, so there is no need to list it in the inheritance list again.

*There is one instance of this issue:*
```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit no need for ProposalExecutionEngine to inherit from ProposalStorage, SetGovernanceParameterProposal is already inherited from ProposalStorage
24: contract ProposalExecutionEngine is
        IProposalExecutionEngine,
        Implementation,
        ProposalStorage,
        ListOnOpenseaProposal,
        ListOnOpenseaAdvancedProposal,
        ListOnZoraProposal,
        FractionalizeProposal,
        ArbitraryCallsProposal,
        DistributeProposal,
        AddAuthorityProposal,
        OperatorProposal,
        SetSignatureValidatorProposal,
        SetGovernanceParameterProposal,
        IERC1271

```


<a name="NC-61"></a> 
### [NC-61] Redundant `return` statement in a function with named return variables
Because the return variable (or its default value) has been assigned, explicit return at the end of the function is unnecessary, as it is returned automatically.

<details>
<summary>
There are <b>11</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {

196:     function _processContribution(

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

275:     function _contribute(

```

```solidity
File: contracts/party/PartyGovernance.sol

355:     function getVotingPowerAt(

368:     function getVotingPowerAt(

423:     function findVotingPowerSnapshotIndex(

595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {

860:     function _executeProposal(

904:     function _getVotingPowerSnapshotAt(

1064:     function _getProposalStatus(

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

141:     function getCurrentInProgressProposalId() external view returns (uint256 id) {

```

</details>


<a name="NC-62"></a> 
### [NC-62] State variables should include comments
Consider adding some comments on critical state variables to explain what they are supposed to do: this will help for future code reviews.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/proposals/ProposalStorage.sol

39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =

```


<a name="NC-63"></a> 
### [NC-63] Lines are too long
The [solidity style guide](https://docs.soliditylang.org/en/v0.8.17/style-guide.html#maximum-line-length) recommends a maximum line length of 120 characters. Lines of code that are longer than 120 should be wrapped.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

```


<a name="NC-64"></a> 
### [NC-64] Typos

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit `ragequit`
59:         // The timestamp until which ragequit is enabled.

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `recipeint`
83:         // Fee recipeint for distributions.

/// @audit `yeeted`
765:     ///      simply be yeeted out of existence so another proposal can execute.

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `ragequit`
50:     /// @notice The timestamp until which ragequit is enabled. Can be set to the

/// @audit `ragequit`
52:     ///         values to enable/disable ragequit permanently.

/// @audit `ragequit`
316:     /// @notice Set the timestamp until which ragequit is enabled.

/// @audit `ragequit`
317:     /// @param newRageQuitTimestamp The new ragequit timestamp.

/// @audit `ragequit`
320:         // Prevent disabling ragequit after initialization.

/// @audit `ragequit`
355:         // Check if ragequit is allowed.

/// @audit `ragequit`
444:         // Update ragequit timestamp back to before.

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `delegatecall'ed`
23: /// @dev This contract will be delegatecall'ed into by `Party` proxy instances.

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit `emmitted`
14:     /// @notice Event emmitted when signing threshold updated

/// @audit `delegatated`
63:             // Must own a party card or be delegatated voting power

```

</details>


<a name="NC-65"></a> 
### [NC-65] Unnecessary cast
The variable is being cast to its own type.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

/// @audit no need to cast `cancelTime` into uint40
814:                     uint40(cancelTime)

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit no need to cast `newImpl` into address
324:         if (expectedImpl != address(newImpl)) {

```


<a name="NC-66"></a> 
### [NC-66] Unused `error` definition
The following `error`s are defined but not used. It is recommended to check the code for logical omissions that cause them not to be used. If it's determined that they are not needed anywhere, it's best to remove them from the codebase to improve code clarity and minimize confusion. Note that there may be cases where an error appears to be used because it has multiple definitions in different files. In such cases, the definitions should be moved to a separate file.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

51:     error NotAllowedByGateKeeperError(

60:     error NotOwnerError(uint256 tokenId);

62:     error InvalidDelegateError();

69:     error ContributingForExistingCardDisabledError();

73:     error InvalidMessageValue();

```


<a name="NC-67"></a> 
### [NC-67] Unused named return
Declaring named returns, but not using them, is confusing to the reader. Consider either completely removing them (by declaring just the type without a name), or remove the return statement and do a variable assignment. This would improve the readability of the code, and it may also help reduce regressions during future code refactors.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `lifecycle` not used
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {
             if (maxTotalContributions == 0) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit `votingPower` not used
164:     function contribute(
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit `votingPower` not used
185:     function contribute(
             uint256 tokenId,
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit `votingPower` not used
235:     function contributeFor(
             uint256 tokenId,
             address payable recipient,
             address initialDelegate,
             bytes memory gateData
         ) external payable onlyDelegateCall returns (uint96 votingPower) {

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `votingPower` not used
355:     function getVotingPowerAt(
             address voter,
             uint40 timestamp
         ) external view returns (uint96 votingPower) {
             return getVotingPowerAt(voter, timestamp, type(uint256).max);

/// @audit `votingPower` not used
368:     function getVotingPowerAt(
             address voter,
             uint40 timestamp,
             uint256 snapIndex
         ) public view returns (uint96 votingPower) {
             VotingPowerSnapshot memory snap = _getVotingPowerSnapshotAt(voter, timestamp, snapIndex);

/// @audit `index` not used
423:     function findVotingPowerSnapshotIndex(
             address voter,
             uint40 timestamp
         ) public view returns (uint256 index) {
             VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];

/// @audit `distInfo` not used
487:     function distribute(
             uint256 amount,
             ITokenDistributor.TokenType tokenType,
             address token,
             uint256 tokenId
         ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {
             _assertNotGloballyDisabled();

/// @audit `totalVotes` not used
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {
             // Get the information about the proposal.

/// @audit `completed` not used
860:     function _executeProposal(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             uint256 flags,
             bytes memory progressData,
             bytes memory extraData
         ) private returns (bool completed) {
             // Setup the arguments for the proposal execution engine.

/// @audit `status` not used
1064:     function _getProposalStatus(
              ProposalStateValues memory pv
          ) private view returns (ProposalStatus status) {
              // Never proposed.

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `stor` not used
335:     function _getStorage() internal pure returns (Storage storage stor) {
             uint256 slot = _STORAGE_SLOT;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

/// @audit `stor` not used
55:     function _getSharedProposalStorage()
            internal
            pure
            returns (SharedProposalStorage storage stor)
        {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

/// @audit `stor` not used
47:     function _getSetSignatureValidatorProposalStorage()
            private
            pure
            returns (SetSignatureValidatorProposalStorage storage stor)
        {

```

</details>


<a name="NC-68"></a> 
### [NC-68] Unused contract variables
The following state variables are defined but not used. It is recommended to check the code for logical omissions that cause them not to be used. If it's determined that they are not needed anywhere, it's best to remove them from the codebase to improve code clarity and minimize confusion.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

40:     uint256 private constant SHARED_STORAGE_SLOT =

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

13:     uint256 private constant _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT =

```


<a name="NC-69"></a> 
### [NC-69] Consider using `delete` rather than assigning zero/false to clear values
The `delete` keyword more closely matches the semantics of what is being done, and draws more attention to the changing of state, which may lead to a more thorough audit of its associated logic.

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

470:         isHost[msg.sender] = false;

```


<a name="NC-70"></a> 
### [NC-70] Expressions for constant values should use `immutable` rather than `constant`
While it doesn't save any gas because the compiler knows that developers often make this mistake, it's still best to use the right tool for the task at hand. There is a difference between `constant` variables and `immutable` variables, and they should each be used in their appropriate contexts. `constants` should be used for literal values written into the code, and `immutable` variables should be used for expressions, or values calculated in, or passed into the constructor.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

187:     uint96 private constant VETO_VALUE = type(uint96).max;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

13:     uint256 private constant _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT =

```


<a name="NC-71"></a> 
### [NC-71] Use `@inheritdoc` for overridden functions

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

123:     function tokenURI(uint256) public view override returns (string memory) {

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

```


<a name="NC-72"></a> 
### [NC-72] Use the latest solidity version for deployment (`0.8.22`)
Upgrading to a newer Solidity release can optimize gas usage, take advantage of new features and improve overall contract efficiency. Where possible, based on compatibility requirements, it is recommended to use newer/latest solidity version to take advantage of the latest optimizations and features.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernance.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/utils/Implementation.sol

2: pragma solidity 0.8.20;

```


<a name="NC-73"></a> 
### [NC-73] Use of `override` is unnecessary
Starting with Solidity version [0.8.8](https://docs.soliditylang.org/en/v0.8.20/contracts.html#function-overriding), using the `override` keyword when the function solely overrides an interface function, and the function doesn't exist in multiple base contracts, is unnecessary.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

123:     function tokenURI(uint256) public view override returns (string memory) {

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

470:     ) public override {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

126:     ) external override onlyDelegateCall {

```


<a name="NC-74"></a> 
### [NC-74] Use a struct to encapsulate multiple function parameters
If a function has too many parameters, replacing them with a struct can improve code readability and maintainability, increase reusability, and reduce the likelihood of errors when passing the parameters.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

/// @audit 7 parameters
860:     function _executeProposal(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             uint256 flags,
             bytes memory progressData,
             bytes memory extraData
         ) private returns (bool completed) {
             // Setup the arguments for the proposal execution engine.

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit 9 parameters
81:     function _initialize(
            string memory name_,
            string memory symbol_,
            uint256 customizationPresetId,
            PartyGovernance.GovernanceOpts memory governanceOpts,
            ProposalStorage.ProposalEngineOpts memory proposalEngineOpts,
            IERC721[] memory preciousTokens,
            uint256[] memory preciousTokenIds,
            address[] memory authorities,
            uint40 rageQuitTimestamp_
        ) internal {

```


<a name="NC-75"></a> 
### [NC-75] Visibility of state variables is not explicitly defined
To avoid misunderstandings and unexpected state accesses, it is recommended to explicitly define the visibility of each state variable.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/proposals/ProposalStorage.sol

41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

14:         uint256(keccak256("SetSignatureValidatorProposal.Storage"));

```


<a name="NC-76"></a> 
### [NC-76] Names of `private`/`internal` state variables should be prefixed with an underscore
It is recommended by the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.20/style-guide.html#underscore-prefix-for-non-external-functions-and-variables)

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

186:     uint256 private constant UINT40_HIGH_BIT = 1 << 39;

187:     uint96 private constant VETO_VALUE = type(uint96).max;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

38:     address private constant ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

39:     uint256 internal constant PROPOSAL_FLAG_UNANIMOUS = 0x1;

40:     uint256 private constant SHARED_STORAGE_SLOT =

```


<a name="NC-77"></a> 
### [NC-77]  `require()` / `revert()` statements should have descriptive reason strings

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

313:         require(proposalType != ProposalType.Invalid);

314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));

```


<a name="NC-78"></a> 
### [NC-78] Event is missing `indexed` fields
Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

<details>
<summary>
There are <b>21</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

75:     event Contributed(

82:     event FundingSplitSent(address indexed fundingSplitRecipient, uint256 amount);

84:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

96:     event Refunded(address indexed contributor, uint256 indexed tokenId, uint256 amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

144:     event Proposed(uint256 proposalId, address proposer, Proposal proposal);

145:     event ProposalAccepted(uint256 proposalId, address voter, uint256 weight);

146:     event EmergencyExecute(address target, bytes data, uint256 amountEth);

149:     event ProposalVetoed(uint256 indexed proposalId, address host);

150:     event ProposalExecuted(uint256 indexed proposalId, address executor, bytes nextProgressData);

152:     event DistributionCreated(

158:     event HostStatusTransferred(address oldHost, address newHost);

160:     event PartyVotingSnapshotCreated(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

29:     event RageQuitSet(uint40 oldRageQuitTimestamp, uint40 newRageQuitTimestamp);

30:     event Burn(address caller, uint256 tokenId, uint256 votingPower);

31:     event RageQuit(address caller, uint256[] tokenIds, IERC20[] withdrawTokens, address receiver);

32:     event PartyCardIntrinsicVotingPowerSet(uint256 indexed tokenId, uint256 intrinsicVotingPower);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

83:     event ProposalEngineImplementationUpgraded(address oldImpl, address newImpl);

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

11:     event VoteDurationSet(uint256 oldValue, uint256 newValue);

13:     event ExecutionDelaySet(uint256 oldValue, uint256 newValue);

15:     event PassThresholdBpsSet(uint256 oldValue, uint256 newValue);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

15:     event SigningThresholdBpsSet(

```

</details>


<a name="NC-79"></a> 
### [NC-79] Functions not used internally could be marked `external`

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

278:     function convertVotingPowerToContribution(

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

164:     function contribute(

185:     function contribute(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

113:     function supportsInterface(

123:     function tokenURI(uint256) public view override returns (string memory) {

451:     function transferFrom(address owner, address to, uint256 tokenId) public override {

458:     function safeTransferFrom(address owner, address to, uint256 tokenId) public override {

465:     function safeTransferFrom(

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

42:     function getSignatureValidatorForHash(bytes32 hash) public view returns (IERC1271) {

```



## Gas Optimizations

<a name="GAS-1"></a> 
### [GAS-1] Optimize Gas by Using Do-While Loops
Using `do-while` loops instead of `for` loops can be more gas-efficient. Even if you add an `if` condition to account for the case where the loop doesn't execute at all, a `do-while` loop can still be cheaper in terms of gas.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

211:         for (uint256 i; i < numContributions; ++i) {

260:         for (uint256 i; i < args.recipients.length; ++i) {

357:         for (uint256 i; i < numRefunds; ++i) {

379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {

```

```solidity
File: contracts/party/PartyGovernance.sol

305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

102:             for (uint256 i; i < authorities.length; ++i) {

272:         for (uint256 i; i < tokenIds.length; ++i) {

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {

```


<a name="GAS-2"></a> 
### [GAS-2] Consider activating via-ir for deploying
By using `--via-ir` or `{"viaIR": true}`, the compiler is able to use more advanced [multi-function optimizations](https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html#solidity-ir-based-codegen-changes), for extra gas savings.

*There is one instance of this issue:*
```solidity

Global finding

```


<a name="GAS-3"></a> 
### [GAS-3] Divisions can be `unchecked` to save gas
The expression `type(int).min/(-1)` is the only case where division causes an overflow. Therefore, uncheck can be used to [save gas](https://gist.github.com/DadeKuma/3bc597338ae774b8b3bd43280d55271f) in scenarios where it is certain that such an overflow will not occur.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

266:             amount = (amount * (1e4 - fundingSplitBps_)) / 1e4;

270:         votingPower = (amount * exchangeRateBps) / 1e4;

281:         amount = (votingPower * 1e4) / exchangeRateBps;

287:             amount = (amount * 1e4) / (1e4 - fundingSplitBps_);

325:             totalContributions_ -= (totalContributions_ * fundingSplitBps_) / 1e4;

329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

355:         splitAmount = (totalContributions * fundingSplitBps_) / 1e4;

```

```solidity
File: contracts/party/PartyGovernance.sol

434:             uint256 mid = (low + high) / 2;

1115:         uint256 acceptanceRatio = (totalVotes * 1e4) / totalVotingPower;

1134:         return (uint256(voteCount) * 1e4) / uint256(totalVotingPower) >= uint256(passThresholdBps);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

393:                     withdrawAmounts[i] += (balance * getVotingPowerShareOf(tokenIds[j])) / 1e18;

413:                 uint256 fee = (amount * feeBps_) / 1e4;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

74:                 signerVotingPowerBps / totalVotingPower >= thresholdBps)

```

</details>


<a name="GAS-4"></a> 
### [GAS-4] Don't transfer with zero amount to save gas
In Solidity, unnecessary operations can waste gas. For example, a transfer function without a zero amount check uses gas even if called with a zero amount, since the contract state remains unchanged. Implementing a zero amount check avoids these unnecessary function calls, saving gas and improving efficiency.

*There is one instance of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

```


<a name="GAS-5"></a> 
### [GAS-5] Operator `+=` costs more gas than `<x> = <x> + <y>` for state variables

<details>
<summary>
There are <b>17</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

240:                 amount -= refundAmount;

325:             totalContributions_ -= (totalContributions_ * fundingSplitBps_) / 1e4;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

212:             ethAvailable -= args.values[i];

268:             valuesSum += args.values[i];

```

```solidity
File: contracts/party/PartyGovernance.sol

635:         values.votes += votingPower;

1008:                 newDelegateDelegatedVotingPower -= oldSnap.intrinsicVotingPower;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

189:         mintedVotingPower += votingPower_;

223:         mintedVotingPower += votingPower;

238:         mintedVotingPower -= votingPower;

239:         votingPowerByTokenId[tokenId] -= votingPower;

249:         _getSharedProposalStorage().governanceValues.totalVotingPower += votingPower;

257:         _getSharedProposalStorage().governanceValues.totalVotingPower -= votingPower;

290:             totalVotingPowerBurned += votingPower;

304:         mintedVotingPower -= totalVotingPowerBurned;

393:                     withdrawAmounts[i] += (balance * getVotingPowerShareOf(tokenIds[j])) / 1e18;

404:             _getSharedProposalStorage().governanceValues.totalVotingPower -= totalVotingPowerBurned;

416:                     amount -= fee;

```

</details>


<a name="GAS-6"></a> 
### [GAS-6] Duplicated `require()`/`revert()` checks should be refactored to a modifier or function to save gas
Saves deployment costs.

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit duplicated on line 309
218:             revert WrongLifecycleError(lc);

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit duplicated on line 226
218:             revert NotAuthorized();

/// @audit duplicated on line 506
235:                 revert NotAuthorized();

/// @audit duplicated on line 679
611:                 revert BadProposalStatusError(status);

/// @audit duplicated on line 782
725:             revert BadProposalStatusError(status);

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit duplicated on line 69
63:             revert NotAuthorized();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit duplicated on line 210
151:             revert ZeroProposalIdError();

/// @audit duplicated on line 273
267:                 revert ProposalDisabled(pt);

```


<a name="GAS-7"></a> 
### [GAS-7] Events should be emitted outside of loops
Emitting an event has an overhead of 375 gas, which will be incurred on every iteration of the loop. It is cheaper to emit only once after the loop has finished.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

300:             emit Burn(msg.sender, tokenId, votingPower);

```


<a name="GAS-8"></a> 
### [GAS-8] Increments can be `unchecked` to save gas
Using `unchecked` increments can save gas by bypassing the built-in overflow checks. This can save 30-40 gas per iteration. So it is recommended to use unchecked increments when overflow is not possible.

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

211:         for (uint256 i; i < numContributions; ++i) {

260:         for (uint256 i; i < args.recipients.length; ++i) {

357:         for (uint256 i; i < numRefunds; ++i) {

379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {

```

```solidity
File: contracts/party/PartyGovernance.sol

305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

558:         proposalId = ++lastProposalId;

637:             ++values.numHostsAccepted;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

102:             for (uint256 i; i < authorities.length; ++i) {

187:             tokenId = ++tokenCount;

272:         for (uint256 i; i < tokenIds.length; ++i) {

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {

```

</details>


<a name="GAS-9"></a> 
### [GAS-9] Initializers can be marked as payable to save deployment gas
Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. Initializers can be safely marked as payable, because only the deployer or the factory contract would call the function without carrying any funds.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

108:     function initialize(

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

123:     function initialize(

```


<a name="GAS-10"></a> 
### [GAS-10] `internal` functions only called once can be inlined to save gas
If an `internal` function is only used once, there is no need to modularize it, unless the function calling it would otherwise be too long and complex. Not inlining costs 20 to 40 gas because of two extra JUMP instructions and additional stack operations needed for function calls.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `_initialize` is used only once
140:     function _initialize(ETHCrowdfundOptions memory opts) internal {

/// @audit `_processContribution` is used only once
196:     function _processContribution(

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `_initialize` is used only once
270:     function _initialize(

/// @audit `_getVotingPowerSnapshotAt` is used only once
904:     function _getVotingPowerSnapshotAt(

/// @audit `_transferVotingPower` is used only once
937:     function _transferVotingPower(address from, address to, uint256 power) internal {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `_initialize` is used only once
81:     function _initialize(

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `_execute` is used only once
248:     function _execute(

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

/// @audit `_executeSetGovernanceParameter` is used only once
25:     function _executeSetGovernanceParameter(

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

/// @audit `_executeSetSignatureValidator` is used only once
28:     function _executeSetSignatureValidator(

```


<a name="GAS-11"></a> 
### [GAS-11] `keccak256()` hash of literals should only be computed once
The result of the hash should be stored in an immutable variable, and the variable should be used instead. If the hash is being used as a part of a function selector, the cast to `bytes4` should also only be done once.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

14:         uint256(keccak256("SetSignatureValidatorProposal.Storage"));

```


<a name="GAS-12"></a> 
### [GAS-12] Low level `call` can be optimized with assembly
When using low-level calls, the `returnData` is copied to memory even if the variable is not utilized. The proper way to handle this is through a low level assembly call.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

358:             (bool s, bytes memory r) = address(this).call(

```

```solidity
File: contracts/party/PartyGovernance.sol

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```


<a name="GAS-13"></a> 
### [GAS-13] Multiple accesses of the same mapping/array key/index should be cached
The instances below point to the second+ access of a value inside a mapping/array, within a function. Caching a mapping's value in a local `storage` or `calldata` variable when the value is accessed [multiple times](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0), saves ~42 gas per access due to not having to recalculate the key's keccak256 hash (Gkeccak256 - 30 gas) and that calculation's associated stack operations. Caching an array's struct avoids recalculating the array offsets into memory/calldata

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `delegationsByContributor[contributor]` is also accessed on line 201
204:             delegationsByContributor[contributor] = delegate;

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `isHost[newPartyHost]` is also accessed on line 462
465:             isHost[newPartyHost] = true;

/// @audit `_proposalStateByProposalId[proposalId]` is also accessed on line 561
562:             _proposalStateByProposalId[proposalId].hash

/// @audit `delegationsByVoter[voter]` is also accessed on line 946
961:         delegationsByVoter[voter] = delegate;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `votingPowerByTokenId[tokenId]` is also accessed on line 224
225:         votingPowerByTokenId[tokenId] = newIntrinsicVotingPower;

/// @audit `votingPowerByTokenId[tokenId]` is also accessed on line 288
293:             delete votingPowerByTokenId[tokenId];

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit `signingThersholdBps[party]` is also accessed on line 86
87:         signingThersholdBps[party] = thresholdBps;

```


<a name="GAS-14"></a> 
### [GAS-14] Newer versions of solidity are more gas efficient
The solidity language continues to pursue more efficient gas optimization schemes. Adopting a newer version of solidity can be more gas efficient.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernance.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/utils/Implementation.sol

2: pragma solidity 0.8.20;

```


<a name="GAS-15"></a> 
### [GAS-15] Operator `>=`/`<=` costs less gas than operator `>`/`<`
The compiler uses opcodes `GT` and `ISZERO` for code that uses `>`, but only requires `LT` for `>=`. A similar behavior applies for `>`, which uses opcodes `LT` and `ISZERO`, but only requires `GT` for `<=`. It can save 3 gas for each. It should be converted to the `<=`/`>=` equivalent when comparing against integer literals.

<details>
<summary>
There are <b>45</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

142:         if (opts.minContribution > opts.maxContribution) {

148:         if (opts.minTotalContributions > opts.maxTotalContributions) {

223:         if (amount > maxContribution_) {

239:             if (refundAmount > 0) {

256:         if (amount < minContribution_) {

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

302:             if (totalContributions_ < minTotalContributions_) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

141:         if (initialContribution > 0) {

211:         for (uint256 i; i < numContributions; ++i) {

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

260:         for (uint256 i; i < args.recipients.length; ++i) {

331:         if (amount > 0) {

357:         for (uint256 i; i < numRefunds; ++i) {

379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {

```

```solidity
File: contracts/party/PartyGovernance.sol

277:         if (govOpts.feeBps > 1e4) {

280:         if (govOpts.passThresholdBps > 1e4) {

302:         if (govOpts.hosts.length > type(uint8).max) {

305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

433:         while (low < high) {

435:             if (snaps[mid].timestamp > timestamp) {

731:             if (proposal.maxExecutableTime < block.timestamp) {

799:                 if (cancelDelay > globalMaxCancelDelay) {

805:                 if (cancelDelay < globalMinCancelDelay) {

811:             if (block.timestamp < cancelTime) {

914:                 hintIndex < snapsLength &&

918:                 (hintIndex == snapsLength - 1 || snaps[hintIndex + 1].timestamp > timestamp)

1126:         return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

102:             for (uint256 i; i < authorities.length; ++i) {

179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {

216:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower) {

272:         for (uint256 i; i < tokenIds.length; ++i) {

361:                     currentRageQuitTimestamp < block.timestamp

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {

415:                 if (fee > 0) {

426:                 if (amount > 0) {

430:                     if (amount < minAmount) {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

303:         if (proposalData.length < 4) {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

33:             if (proposalData.voteDuration < 1 hours) {

43:             if (proposalData.executionDelay > 30 days) {

54:             if (proposalData.passThresholdBps > 10000) {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

73:             (signerVotingPowerBps > totalVotingPower &&

```

</details>


<a name="GAS-16"></a> 
### [GAS-16] Optimize Gas by splitting `if() revert` statements
Using boolean operators in a single `if() revert` statement can consume more gas than necessary. Consider splitting these statements to save gas.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

348:         if (fundingSplitRecipient_ == address(0) || fundingSplitBps_ == 0) {

```

```solidity
File: contracts/party/PartyGovernance.sol

979:         if (newDelegate == address(0) || oldDelegate == address(0)) {

```


<a name="GAS-17"></a> 
### [GAS-17] Optimize names to save gas
`public`/`external` function names and `public` member variable names can be optimized to save gas. See this [link](https://gist.github.com/IllIllI000/a5d8b486a8259f9f77891a919febd1a9) for an example of how it works. Below are the interfaces/abstract contracts that can be optimized so that the most frequently-called functions use the least amount of gas possible during method lookup. Method IDs that have two leading zero bytes can save 128 gas each during deployment, and renaming functions to have lower method IDs will save 22 gas per call, [per sorted position shifted](https://medium.com/joyso/solidity-how-does-function-name-affect-gas-consumption-in-smart-contract-47d270d8ac92)

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `getCrowdfundLifecycle`, `convertVotingPowerToContribution`, `finalize`, `sendFundingSplit`, `emergencyExecute`, `disableEmergencyExecute`
9: contract ETHCrowdfundBase is Implementation {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit `initialize`, `contribute`, `contribute`, `batchContribute`, `contributeFor`, `batchContributeFor`, `refund`, `batchRefund`
20: contract InitialETHCrowdfund is ETHCrowdfundBase {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `supportsInterface`, `tokenURI`, `contractURI`, `royaltyInfo`, `getDistributionShareOf`, `getVotingPowerShareOf`, `mint`, `increaseVotingPower`, `decreaseVotingPower`, `increaseTotalVotingPower`, `decreaseTotalVotingPower`, `burn`, `burn`, `setRageQuit`, `rageQuit`, `transferFrom`, `safeTransferFrom`, `safeTransferFrom`, `addAuthority`, `abdicateAuthority`
14: contract PartyGovernanceNFT is PartyGovernance, ERC721, IERC2981 {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `initialize`, `getCurrentInProgressProposalId`, `executeProposal`, `cancelProposal`, `isValidSignature`
24: contract ProposalExecutionEngine is

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit `isValidSignature`, `setSigningThresholdBps`
9: contract OffChainSignatureValidator is IERC1271 {

```


<a name="GAS-18"></a> 
### [GAS-18] Redundant state variable getters
Getters for public state variables are automatically generated so there is no need to code them manually and waste gas.

*There is one instance of this issue:*
```solidity
File: contracts/utils/Implementation.sol

40:     function IMPL() external view returns (address) {
            return implementation;

```


<a name="GAS-19"></a> 
### [GAS-19] Remove or replace unused state variables
Saves a storage slot. If the variable is assigned a non-zero value, saves Gsset (20000 gas). If it's assigned a zero value, saves Gsreset (2900 gas). If the variable remains unassigned, there is no gas savings unless the variable is `public`, in which case the compiler-generated non-payable getter deployment cost is saved. If the state variable is overriding an interface's public function, mark the variable as `constant` or `immutable` so that it does not use a storage slot.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

40:     uint256 private constant SHARED_STORAGE_SLOT =

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

13:     uint256 private constant _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT =

```


<a name="GAS-20"></a> 
### [GAS-20] The result of a function call should be cached rather than re-calling the function
The function calls in solidity are expensive. If the same result of the same function calls are to be used several times, the result should be cached to reduce the gas consumption of repeated calls.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `_getSharedProposalStorage` is called 2 times
487:     function distribute(
             uint256 amount,
             ITokenDistributor.TokenType tokenType,
             address token,
             uint256 tokenId
         ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {
             _assertNotGloballyDisabled();

/// @audit `_getLastVotingPowerSnapshotForVoter` is called 2 times
972:     function _rebalanceDelegates(
             address voter,
             address oldDelegate,
             address newDelegate,
             VotingPowerSnapshot memory oldSnap,
             VotingPowerSnapshot memory newSnap
         ) private {
             if (newDelegate == address(0) || oldDelegate == address(0)) {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `getSignatureValidatorForHash` is called 2 times
225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {
             IERC1271 validator = getSignatureValidatorForHash(hash);

/// @audit `_getSharedProposalStorage` is called 4 times
248:     function _execute(
             ProposalType pt,
             ExecuteProposalParams memory params
         ) internal virtual returns (bytes memory nextProgressData) {
             if (pt == ProposalType.ListOnOpensea) {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

/// @audit `_getSharedProposalStorage` is called 6 times
25:     function _executeSetGovernanceParameter(
            IProposalExecutionEngine.ExecuteProposalParams memory params
        ) internal returns (bytes memory) {

```


<a name="GAS-21"></a> 
### [GAS-21] Unlimited gas consumption risk due to external call recipients
When calling an external function without specifying a gas limit , the called contract may consume all the remaining gas, causing the tx to be reverted. To mitigate this, it is recommended to explicitly set a gas limit when making low level external calls.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

379:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

358:             (bool s, bytes memory r) = address(this).call(

```

```solidity
File: contracts/party/PartyGovernance.sol

846:         (bool success, bytes memory res) = targetAddress.call{ value: amountEth }(targetCallData);

```


<a name="GAS-22"></a> 
### [GAS-22] Unused named return variables without optimizer waste gas
Consider changing the variable to be an unnamed one, since the variable is never assigned, nor is it returned by name. If the optimizer is not turned on, leaving the code as it is will also waste gas for the stack variable.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit `lifecycle` not used
175:     function getCrowdfundLifecycle() public view returns (CrowdfundLifecycle lifecycle) {
             if (maxTotalContributions == 0) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

/// @audit `votingPower` not used
164:     function contribute(
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit `votingPower` not used
185:     function contribute(
             uint256 tokenId,
             address delegate,
             bytes memory gateData
         ) public payable onlyDelegateCall returns (uint96 votingPower) {

/// @audit `votingPower` not used
235:     function contributeFor(
             uint256 tokenId,
             address payable recipient,
             address initialDelegate,
             bytes memory gateData
         ) external payable onlyDelegateCall returns (uint96 votingPower) {

```

```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `votingPower` not used
355:     function getVotingPowerAt(
             address voter,
             uint40 timestamp
         ) external view returns (uint96 votingPower) {
             return getVotingPowerAt(voter, timestamp, type(uint256).max);

/// @audit `votingPower` not used
368:     function getVotingPowerAt(
             address voter,
             uint40 timestamp,
             uint256 snapIndex
         ) public view returns (uint96 votingPower) {
             VotingPowerSnapshot memory snap = _getVotingPowerSnapshotAt(voter, timestamp, snapIndex);

/// @audit `index` not used
423:     function findVotingPowerSnapshotIndex(
             address voter,
             uint40 timestamp
         ) public view returns (uint256 index) {
             VotingPowerSnapshot[] storage snaps = _votingPowerSnapshotsByVoter[voter];

/// @audit `distInfo` not used
487:     function distribute(
             uint256 amount,
             ITokenDistributor.TokenType tokenType,
             address token,
             uint256 tokenId
         ) external returns (ITokenDistributor.DistributionInfo memory distInfo) {
             _assertNotGloballyDisabled();

/// @audit `totalVotes` not used
595:     function accept(uint256 proposalId, uint256 snapIndex) public returns (uint256 totalVotes) {
             // Get the information about the proposal.

/// @audit `completed` not used
860:     function _executeProposal(
             uint256 proposalId,
             Proposal memory proposal,
             IERC721[] memory preciousTokens,
             uint256[] memory preciousTokenIds,
             uint256 flags,
             bytes memory progressData,
             bytes memory extraData
         ) private returns (bool completed) {
             // Setup the arguments for the proposal execution engine.

/// @audit `status` not used
1064:     function _getProposalStatus(
              ProposalStateValues memory pv
          ) private view returns (ProposalStatus status) {
              // Never proposed.

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `stor` not used
335:     function _getStorage() internal pure returns (Storage storage stor) {
             uint256 slot = _STORAGE_SLOT;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

/// @audit `stor` not used
55:     function _getSharedProposalStorage()
            internal
            pure
            returns (SharedProposalStorage storage stor)
        {

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

/// @audit `stor` not used
47:     function _getSetSignatureValidatorProposalStorage()
            private
            pure
            returns (SetSignatureValidatorProposalStorage storage stor)
        {

```

</details>


<a name="GAS-23"></a> 
### [GAS-23] Optimize External Calls with Assembly for Memory Efficiency
Using interfaces to make external contract calls in Solidity is convenient but can be inefficient in terms of memory utilization. Each such call involves creating a new memory location to store the data being passed, thus incurring memory expansion costs.

Inline assembly allows for optimized memory usage by re-using already allocated memory spaces or using the scratch space for smaller datasets. This can result in notable gas savings, especially for contracts that make frequent external calls.

Additionally, using inline assembly enables important safety checks like verifying if the target address has code deployed to it using `extcodesize(addr)` before making the call, mitigating risks associated with contract interactions.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

330:         party.increaseTotalVotingPower(newVotingPower);

```

```solidity
File: contracts/party/PartyGovernance.sol

534:         IERC20(token).compatTransfer(address(distributor), amount);

```


<a name="GAS-24"></a> 
### [GAS-24] Use assembly to compute hashes to save gas
If the arguments to the encode call can fit into the scratch space (two words or fewer), then it's more efficient to use assembly to generate the hash (80 gas):

`keccak256(abi.encodePacked(x, y)) -> assembly {mstore(0x00, a); mstore(0x20, b); let hash := keccak256(0x00, 0x40); }`

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/party/PartyGovernance.sol

406:         bytes32 dataHash = keccak256(proposal.proposalData);

413:             proposalHash := keccak256(proposal, 0x60)

1159:             mstore(0x00, keccak256(add(preciousTokens, 0x20), mul(mload(preciousTokens), 0x20)))

1160:             mstore(0x20, keccak256(add(preciousTokenIds, 0x20), mul(mload(preciousTokenIds), 0x20)))

1161:             h := keccak256(0x00, 0x40)

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

34:     uint40 private constant ENABLE_RAGEQUIT_PERMANENTLY = 0x6b5b567bfe; // uint40(uint256(keccak256("ENABLE_RAGEQUIT_PERMANENTLY")))

35:     uint40 private constant DISABLE_RAGEQUIT_PERMANENTLY = 0xab2cb21860; // uint40(uint256(keccak256("DISABLE_RAGEQUIT_PERMANENTLY")))

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

104:     uint256 private constant _STORAGE_SLOT = uint256(keccak256("ProposalExecutionEngine.Storage"));

171:                         keccak256(params.progressData),

177:                 bytes32 progressDataHash = keccak256(params.progressData);

202:             stor.nextProgressDataHash = keccak256(nextProgressData);

```

```solidity
File: contracts/proposals/ProposalStorage.sol

41:         uint256(keccak256("ProposalStorage.SharedProposalStorage"));

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

14:         uint256(keccak256("SetSignatureValidatorProposal.Storage"));

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

53:         if (keccak256(encodedPacket) != hash) {

```

</details>


<a name="GAS-25"></a> 
### [GAS-25] Use assembly to emit events
To efficiently emit events, it's possible to utilize assembly by making use of scratch space and the free memory pointer. This approach has the advantage of potentially avoiding the costs associated with memory expansion.

However, it's important to note that in order to safely optimize this process, it is preferable to cache and restore the free memory pointer.

A good example of such practice can be seen in [Solady's](https://github.com/Vectorized/solady/blob/main/src/tokens/ERC1155.sol#L167) codebase.

<details>
<summary>
There are <b>39</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

210:         emit Contributed(msg.sender, contributor, amount, delegate);

335:         emit Finalized();

358:         emit FundingSplitSent(fundingSplitRecipient_, splitAmount);

383:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

397:         emit EmergencyExecuteDisabled();

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

341:             emit Refunded(contributor, tokenId, amount);

```

```solidity
File: contracts/party/PartyGovernance.sol

471:         emit HostStatusTransferred(msg.sender, newPartyHost);

517:         emit DistributionCreated(tokenType, token, tokenId);

520:         emit BatchMetadataUpdate(0, type(uint256).max);

576:         emit Proposed(proposalId, msg.sender, proposal);

581:         emit BatchMetadataUpdate(0, type(uint256).max);

640:         emit ProposalAccepted(proposalId, msg.sender, votingPower);

652:             emit ProposalPassed(proposalId);

655:             emit BatchMetadataUpdate(0, type(uint256).max);

685:         emit ProposalVetoed(proposalId, msg.sender);

688:         emit BatchMetadataUpdate(0, type(uint256).max);

830:         emit ProposalCancelled(proposalId);

833:         emit BatchMetadataUpdate(0, type(uint256).max);

850:         emit EmergencyExecute(targetAddress, targetCallData, amountEth);

857:         emit EmergencyExecuteDisabled();

894:         emit ProposalExecuted(proposalId, msg.sender, nextProgressData);

897:         emit BatchMetadataUpdate(0, type(uint256).max);

964:         emit PartyDelegateUpdated(voter, delegate);

1022:         emit PartyVotingSnapshotCreated(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

192:         emit PartyCardIntrinsicVotingPowerSet(tokenId, votingPower_);

227:         emit PartyCardIntrinsicVotingPowerSet(tokenId, newIntrinsicVotingPower);

294:             emit PartyCardIntrinsicVotingPowerSet(tokenId, 0);

300:             emit Burn(msg.sender, tokenId, votingPower);

335:         emit RageQuitSet(oldRageQuitTimestamp, rageQuitTimestamp = newRageQuitTimestamp);

447:         emit RageQuit(msg.sender, tokenIds, withdrawTokens, receiver);

482:         emit AuthorityAdded(authority);

490:         emit AuthorityRemoved(msg.sender);

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

331:         emit ProposalEngineImplementationUpgraded(address(implementation), expectedImpl);

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

36:             emit VoteDurationSet(

46:             emit ExecutionDelaySet(

57:             emit PassThresholdBpsSet(

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

39:         emit SignatureValidatorSet(data.signatureHash, data.signatureValidator);

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);

```

```solidity
File: contracts/utils/Implementation.sol

33:         emit Initialized();

```

</details>


<a name="GAS-26"></a> 
### [GAS-26] Use assembly to validate `msg.sender`

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

202:         if (msg.sender == contributor || oldDelegate == address(0)) {

372:         if (_GLOBALS.getAddress(LibGlobals.GLOBAL_DAO_WALLET) != msg.sender) {

```

```solidity
File: contracts/party/PartyGovernance.sol

234:             if (msg.sender != partyDao) {

244:         if (msg.sender != partyDao && !isHost[msg.sender]) {

496:         if (msg.sender != address(this)) {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

68:         if (msg.sender != address(this)) {

```


<a name="GAS-27"></a> 
### [GAS-27] Use assembly to write address/contract type storage values
Using `assembly { sstore(state.slot, addr)` instead of `state = addr` can save gas.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

161:         party = opts.party;

161:         party = opts.party;

169:         fundingSplitRecipient = opts.fundingSplitRecipient;

169:         fundingSplitRecipient = opts.fundingSplitRecipient;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

154:         gateKeeper = crowdfundOpts.gateKeeper;

154:         gateKeeper = crowdfundOpts.gateKeeper;

288:         IGateKeeper _gateKeeper = gateKeeper;

```

```solidity
File: contracts/party/PartyGovernance.sol

298:         feeRecipient = govOpts.feeRecipient;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

57:         Party party = Party(payable(msg.sender));

85:         Party party = Party(payable(msg.sender));

```


<a name="GAS-28"></a> 
### [GAS-28] Using a double `if` statement instead of a logical AND (`&&`)
Using a double `if` statement instead of a logical AND (`&&`) can provide similar short-circuiting behavior whereas double if is slightly [more gas efficient](https://gist.github.com/DadeKuma/931ce6794a050201ec6544dbcc31316c).

<details>
<summary>
There are <b>23</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

391:             !party.isHost(msg.sender) &&

```

```solidity
File: contracts/party/PartyGovernance.sol

225:         if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

244:         if (msg.sender != partyDao && !isHost[msg.sender]) {

505:             if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

607:                 status != ProposalStatus.Voting &&

608:                 status != ProposalStatus.Passed &&

644:             values.passedTime == 0 &&

675:                 status != ProposalStatus.Voting &&

676:                 status != ProposalStatus.Passed &&

724:         if (status != ProposalStatus.Ready && status != ProposalStatus.InProgress) {

914:                 hintIndex < snapsLength &&

916:                 snaps[hintIndex].timestamp <= timestamp &&

982:         if (oldDelegate != voter && oldDelegate != newDelegate) {

1126:         return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {

216:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower) {

279:                     msg.sender != owner &&

280:                     getApproved[tokenId] != msg.sender &&

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {

73:             (signerVotingPowerBps > totalVotingPower &&

```

</details>


<a name="GAS-29"></a> 
### [GAS-29] Use local variables for emitting
Use the function/modifier's local copy of the state variable, rather than incurring an extra Gwarmaccess (100 gas). In the unlikely event that the state variable hasn't already been used by the function/modifier, consider whether it is really necessary to include it in the event, given the fact that it incurs a Gcoldsload (2100 gas), or whether it can be passed in to or back out of the functions that do use it

*There is one instance of this issue:*
```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

/// @audit `signingThersholdBps`
86:         emit SigningThresholdBpsSet(party, signingThersholdBps[party], thresholdBps);

```


<a name="GAS-30"></a> 
### [GAS-30] Use a more recent version of solidity
- Use a solidity version of at least 0.8.2 to get simple compiler automatic inlining.
- Use a solidity version of at least 0.8.3 to get better struct packing and cheaper multiple storage reads.
- Use a solidity version of at least 0.8.4 to get custom errors, which are cheaper at deployment than revert()/require() strings.
- Use a solidity version of at least 0.8.10 to have external calls skip contract existence checks if the external call has a return value.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernance.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

2: pragma solidity 0.8.20;

```

```solidity
File: contracts/utils/Implementation.sol

2: pragma solidity 0.8.20;

```


<a name="GAS-31"></a> 
### [GAS-31] Use `storage` instead of `memory` for structs/arrays
When fetching data from a storage location, assigning the data to a `memory` variable causes all fields of the struct/array to be read from storage, which incurs a Gcoldsload (**2100 gas**) for *each* field of the struct/array. If the fields are read from the new memory variable, they incur an additional `MLOAD` rather than a cheap stack read. Instead of declaring the variable with the `memory` keyword, declaring the variable with the `storage` keyword and caching any fields that need to be re-read in stack variables, will be much cheaper, only incurring the Gcoldsload for the fields actually read. The only time it makes sense to read the whole struct/array into a `memory` variable, is if the full struct/array is being returned by the function, is being passed to a function that requires `memory`, or if the array/struct is being read from another `memory` array/struct.

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

1034:             VotingPowerSnapshot memory lastSnap = voterSnaps[n - 1];

```


<a name="GAS-32"></a> 
### [GAS-32] Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes
Avoids a Gsset (20000 gas) when changing from false to true, after having been true in the past. Since most of the bools aren't changed twice in one transaction, I've counted the amount of gas as half of the full amount, for each variable.

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

101:     bool public disableContributingForExistingCard;

104:     bool public fundingSplitPaid;

106:     bool public emergencyExecuteDisabled;

```

```solidity
File: contracts/party/PartyGovernance.sol

141:         mapping(address => bool) hasVoted;

194:     bool public emergencyExecuteDisabled;

206:     mapping(address => bool) public isHost;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

59:     mapping(address => bool) public isAuthority;

```

```solidity
File: contracts/utils/Implementation.sol

15:     bool public initialized;

```


<a name="GAS-33"></a> 
### [GAS-33] Using bitmap to store bool states can save gas
Using a bitmap instead of a bool array or a bool mapping to store boolean states can save gas fees. This is because the bitmap can store 256 boolean values in a single slot instead of 256 slots, which can save gas when writing bool values or when reading multiple bool values from the same slot.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

141:         mapping(address => bool) hasVoted;

206:     mapping(address => bool) public isHost;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

59:     mapping(address => bool) public isAuthority;

```


<a name="GAS-34"></a> 
### [GAS-34] Using `constant`s directly, rather than caching the value, saves gas

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

/// @audit `VETO_VALUE`
684:         info.values.votes = VETO_VALUE;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit `DISABLE_RAGEQUIT_PERMANENTLY`
369:         rageQuitTimestamp = DISABLE_RAGEQUIT_PERMANENTLY;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

/// @audit `_STORAGE_SLOT`
336:         uint256 slot = _STORAGE_SLOT;

```

```solidity
File: contracts/proposals/ProposalStorage.sol

/// @audit `SHARED_STORAGE_SLOT`
60:         uint256 s = SHARED_STORAGE_SLOT;

```

```solidity
File: contracts/proposals/SetSignatureValidatorProposal.sol

/// @audit `_SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT`
52:         uint256 slot = _SET_SIGNATURE_VALIDATOR_PROPOSAL_STORAGE_SLOT;

```


<a name="GAS-35"></a> 
### [GAS-35] Using `this` to access functions results in an external call, wasting gas
External calls have an overhead of 100 gas, which can be avoided by not referencing the function using `this`. Contracts are allowed to override their parents' functions and change the visibility from `external` to `public`, so make this change if it's required in order to call the function internally.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

358:             (bool s, bytes memory r) = address(this).call(

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

387:                     ? address(this).balance

```


<a name="GAS-36"></a> 
### [GAS-36] Use `selfbalance()` instead of `address(this).balance`
Use assembly when getting a contract's balance of ETH.

You can use `selfbalance()` instead of `address(this).balance` when getting your contract's balance of ETH to save gas.
Additionally, you can use `balance(address)` instead of `address.balance()` when getting an external contract's balance of ETH.

*Saves 15 gas when checking internal balance, 6 for external*

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

387:                     ? address(this).balance

```


<a name="GAS-37"></a> 
### [GAS-37] Using bools for storage incurs overhead
Use uint256(1) and uint256(2) for true/false to avoid a Gwarmaccess (100 gas), and to avoid Gsset (20000 gas) when changing from ‘false’ to ‘true’, after having been ‘true’ in the past. See [source](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/58f635312aa21f947cae5f8578638a85aa2519f5/contracts/security/ReentrancyGuard.sol#L23-L27).

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

101:     bool public disableContributingForExistingCard;

104:     bool public fundingSplitPaid;

106:     bool public emergencyExecuteDisabled;

```

```solidity
File: contracts/party/PartyGovernance.sol

141:         mapping(address => bool) hasVoted;

194:     bool public emergencyExecuteDisabled;

206:     mapping(address => bool) public isHost;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

59:     mapping(address => bool) public isAuthority;

```

```solidity
File: contracts/utils/Implementation.sol

15:     bool public initialized;

```


<a name="GAS-38"></a> 
### [GAS-38] Cache array length outside of loop
If not cached, the solidity compiler will always read the length of the array during each iteration. That is, if it is a storage array, this is an extra sload operation (100 additional extra gas for each iteration except for the first) and if it is a memory array, this is an extra mload operation (3 additional gas for each iteration except for the first).

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

260:         for (uint256 i; i < args.recipients.length; ++i) {

```

```solidity
File: contracts/party/PartyGovernance.sol

305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

102:             for (uint256 i; i < authorities.length; ++i) {

272:         for (uint256 i; i < tokenIds.length; ++i) {

378:             for (uint256 i; i < withdrawTokens.length; ++i) {

391:                 for (uint256 j; j < tokenIds.length; ++j) {

408:             for (uint256 i; i < withdrawTokens.length; ++i) {

```


<a name="GAS-39"></a> 
### [GAS-39] State variables should be cached in stack variables rather than re-reading them from storage
The instances below point to the second+ access of a state variable within a function. Caching of a state variable replaces each Gwarmaccess (100 gas) with a much cheaper stack read. Other less obvious fixes/optimizations include having local memory caches of state variable structs, or having local caches of state variable contracts/addresses.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

/// @audit more than 1 read for `expiry`, line 185 and 180
185:         if (block.timestamp >= expiry_) {

/// @audit more than 1 read for `totalContributions`, line 230 and 227
230:             totalContributions = maxTotalContributions_;

/// @audit more than 1 read for `totalContributions`, line 244 and 227
244:             totalContributions = newTotalContributions;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

/// @audit more than 1 read for `mintedVotingPower`, line 189 and 172
189:         mintedVotingPower += votingPower_;

/// @audit more than 1 read for `mintedVotingPower`, line 223 and 210
223:         mintedVotingPower += votingPower;

```


<a name="GAS-40"></a> 
### [GAS-40] Use `calldata` instead of `memory` for function arguments that do not get mutated
Mark data types as `calldata` instead of `memory` where possible. This makes it so that the data is not automatically loaded into memory. If the data passed into the function does not need to be changed (like updating values in an array), it can be passed in as `calldata`. The one exception to this is if the argument must later be passed into another function that takes an argument that specifies `memory` storage.

<details>
<summary>
There are <b>15</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

109:         InitialETHCrowdfundOptions memory crowdfundOpts,

110:         ETHPartyOptions memory partyOpts,

112:         bytes memory customMetadata

166:         bytes memory gateData

188:         bytes memory gateData

239:         bytes memory gateData

```

```solidity
File: contracts/party/PartyGovernance.sol

399:     function getProposalHash(Proposal memory proposal) public pure returns (bytes32 proposalHash) {

554:         Proposal memory proposal,

708:         Proposal memory proposal,

709:         IERC721[] memory preciousTokens,

710:         uint256[] memory preciousTokenIds,

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

263:     function burn(uint256[] memory tokenIds) public {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

147:         ExecuteProposalParams memory params

225:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

28:     function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4) {

```

</details>


<a name="GAS-41"></a> 
### [GAS-41] Don't initialize variables with default value

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

379:         for (uint i = 0; i < authoritiesLength - 1; ++i) {

```

```solidity
File: contracts/party/PartyGovernance.sol

305:         for (uint256 i = 0; i < govOpts.hosts.length; ++i) {

432:         uint256 low = 0;

1054:         uint256 flags = 0;

```


<a name="GAS-42"></a> 
### [GAS-42] Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead
Using `int`s/`uint`s smaller than 32 bytes may cost more gas. This is because the EVM operates on 32 bytes at a time, so if an element is smaller than 32 bytes, the EVM must perform more operations to reduce the size of the element from 32 bytes to the desired size.

<details>
<summary>
There are <b>140</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

37:         uint96 minContribution;

38:         uint96 maxContribution;

40:         uint96 minTotalContributions;

41:         uint96 maxTotalContributions;

42:         uint16 exchangeRateBps;

43:         uint16 fundingSplitBps;

63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

63:     error NotEnoughContributionsError(uint96 totalContribution, uint96 minTotalContributions);

64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

64:     error MinGreaterThanMaxError(uint96 min, uint96 max);

65:     error MaxTotalContributionsCannotBeZeroError(uint96 maxTotalContributions);

66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

66:     error BelowMinimumContributionsError(uint96 contributions, uint96 minContributions);

67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

67:     error AboveMaximumContributionsError(uint96 contributions, uint96 maxContributions);

68:     error InvalidExchangeRateError(uint16 exchangeRateBps);

95:     uint96 public minContribution;

98:     uint96 public maxContribution;

109:     uint96 public minTotalContributions;

112:     uint96 public maxTotalContributions;

114:     uint96 public totalContributions;

120:     uint16 public exchangeRateBps;

123:     uint16 public fundingSplitBps;

199:         uint96 amount

200:     ) internal returns (uint96 votingPower) {

222:         uint96 maxContribution_ = maxContribution;

227:         uint96 newTotalContributions = totalContributions + amount;

228:         uint96 maxTotalContributions_ = maxTotalContributions;

238:             uint96 refundAmount = newTotalContributions - maxTotalContributions;

255:         uint96 minContribution_ = minContribution;

262:         uint16 fundingSplitBps_ = fundingSplitBps;

279:         uint96 votingPower

280:     ) public view returns (uint96 amount) {

285:         uint16 fundingSplitBps_ = fundingSplitBps;

292:         uint96 totalContributions_ = totalContributions;

301:             uint96 minTotalContributions_ = minTotalContributions;

317:     function _finalize(uint96 totalContributions_) internal {

323:         uint16 fundingSplitBps_ = fundingSplitBps;

329:         uint96 newVotingPower = (totalContributions_ * exchangeRateBps) / 1e4;

339:     function sendFundingSplit() external returns (uint96 splitAmount) {

347:         uint16 fundingSplitBps_ = fundingSplitBps;

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

29:         uint96 minContribution;

30:         uint96 maxContribution;

32:         uint96 minTotalContributions;

33:         uint96 maxTotalContributions;

34:         uint16 exchangeRateBps;

35:         uint16 fundingSplitBps;

72:         uint96[] values;

90:         uint96[] values;

140:         uint96 initialContribution = msg.value.safeCastUint256ToUint96();

140:         uint96 initialContribution = msg.value.safeCastUint256ToUint96();

167:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

172:                 msg.value.safeCastUint256ToUint96(),

189:     ) public payable onlyDelegateCall returns (uint96 votingPower) {

194:                 msg.value.safeCastUint256ToUint96(),

206:     ) external payable onlyDelegateCall returns (uint96[] memory votingPowers) {

208:         votingPowers = new uint96[](numContributions);

240:     ) external payable onlyDelegateCall returns (uint96 votingPower) {

245:                 msg.value.safeCastUint256ToUint96(),

257:     ) external payable onlyDelegateCall returns (uint96[] memory votingPowers) {

258:         votingPowers = new uint96[](args.recipients.length);

278:         uint96 amount,

281:     ) private returns (uint96 votingPower) {

318:     function refund(uint256 tokenId) external returns (uint96 amount) {

328:         uint96 votingPower = party.votingPowerByTokenId(tokenId).safeCastUint256ToUint96();

328:         uint96 votingPower = party.votingPowerByTokenId(tokenId).safeCastUint256ToUint96();

353:     ) external returns (uint96[] memory amounts) {

355:         amounts = new uint96[](numRefunds);

367:                 amounts[i] = abi.decode(r, (uint96));

```

```solidity
File: contracts/party/PartyGovernance.sol

33:     using LibSafeCast for uint96;

78:         uint16 passThresholdBps;

80:         uint96 totalVotingPower;

82:         uint16 feeBps;

92:         uint96 delegatedVotingPower;

94:         uint96 intrinsicVotingPower;

125:         uint96 votes; // -1 == vetoed

127:         uint96 totalVotingPower;

129:         uint8 numHosts;

131:         uint8 numHostsAccepted;

163:         uint96 delegatedVotingPower,

164:         uint96 intrinsicVotingPower,

180:     error InvalidBpsError(uint16 bps);

187:     uint96 private constant VETO_VALUE = type(uint96).max;

187:     uint96 private constant VETO_VALUE = type(uint96).max;

196:     uint16 public feeBps;

210:     uint8 public numHosts;

295:         numHosts = uint8(govOpts.hosts.length);

302:         if (govOpts.hosts.length > type(uint8).max) {

358:     ) external view returns (uint96 votingPower) {

372:     ) public view returns (uint96 votingPower) {

523:         uint16 feeBps_ = feeBps;

634:         uint96 votingPower = getVotingPowerAt(msg.sender, values.proposedTime - 1, snapIndex);

956:             intrinsicVotingPower: (oldSnap.intrinsicVotingPower.safeCastUint96ToInt192() +

957:                 votingPower).safeCastInt192ToUint96(),

1002:             uint96 newDelegateDelegatedVotingPower = newDelegateSnap.delegatedVotingPower +

1083:         if (pv.votes == type(uint96).max) {

1112:         uint96 totalVotes,

1113:         uint96 totalVotingPower

1123:         uint8 snapshotNumHosts,

1124:         uint8 numHostsAccepted

1130:         uint96 voteCount,

1131:         uint96 totalVotingPower,

1132:         uint16 passThresholdBps

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

16:     using LibSafeCast for uint96;

45:     uint96 public tokenCount;

49:     uint96 public mintedVotingPower;

172:         uint96 mintedVotingPower_ = mintedVotingPower;

173:         uint96 totalVotingPower = _getSharedProposalStorage().governanceValues.totalVotingPower;

176:         uint96 votingPower_ = votingPower.safeCastUint256ToUint96();

176:         uint96 votingPower_ = votingPower.safeCastUint256ToUint96();

200:         _adjustVotingPower(owner, votingPower_.safeCastUint96ToInt192(), delegate);

208:     function increaseVotingPower(uint256 tokenId, uint96 votingPower) external {

210:         uint96 mintedVotingPower_ = mintedVotingPower;

211:         uint96 totalVotingPower = _getSharedProposalStorage().governanceValues.totalVotingPower;

229:         _adjustVotingPower(ownerOf(tokenId), votingPower.safeCastUint96ToInt192(), address(0));

236:     function decreaseVotingPower(uint256 tokenId, uint96 votingPower) external {

241:         _adjustVotingPower(ownerOf(tokenId), -votingPower.safeCastUint96ToInt192(), address(0));

247:     function increaseTotalVotingPower(uint96 votingPower) external {

255:     function decreaseTotalVotingPower(uint96 votingPower) external {

271:     ) private returns (uint96 totalVotingPowerBurned) {

288:             uint96 votingPower = votingPowerByTokenId[tokenId].safeCastUint256ToUint96();

288:             uint96 votingPower = votingPowerByTokenId[tokenId].safeCastUint256ToUint96();

295:             _adjustVotingPower(owner, -votingPower.safeCastUint96ToInt192(), address(0));

401:             uint96 totalVotingPowerBurned = _burnAndUpdateVotingPower(tokenIds, !isAuthority_);

407:             uint16 feeBps_ = feeBps;

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

42:     error UnsupportedProposalTypeError(uint32 proposalType);

290:             revert UnsupportedProposalTypeError(uint32(pt));

314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));

314:         require(uint8(proposalType) <= uint8(type(ProposalType).max));

```

```solidity
File: contracts/proposals/ProposalStorage.sol

23:         uint16 passThresholdBps;

24:         uint96 totalVotingPower;

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

21:         uint16 passThresholdBps;

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

17:         uint96 oldThresholdBps,

18:         uint96 newThresholdBps

22:     mapping(Party party => uint96 thresholdBps) public signingThersholdBps;

29:         uint8 v;

59:         uint96 signerVotingPowerBps = party.getVotingPowerAt(signer, uint40(block.timestamp)) *

67:         uint96 totalVotingPower = party.getGovernanceValues().totalVotingPower;

68:         uint96 thresholdBps = signingThersholdBps[party];

84:     function setSigningThresholdBps(uint96 thresholdBps) external {

```

</details>


<a name="GAS-43"></a> 
### [GAS-43] Constructors can be marked as `payable` to save deployment gas
Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. A constructor can be safely marked as payable, because only the deployer would be able to pass funds, and the project itself would not pass any funds.

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

134:     constructor(IGlobals globals) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

99:     constructor(IGlobals globals) ETHCrowdfundBase(globals) {}

```

```solidity
File: contracts/party/PartyGovernance.sol

265:     constructor(IGlobals globals) {

```

```solidity
File: contracts/utils/Implementation.sol

17:     constructor() {

```


<a name="GAS-44"></a> 
### [GAS-44] Functions guaranteed to revert when called by normal users can be marked `payable`
If a function modifier such as `onlyOwner` is used, the function will revert if a normal user tries to pay the function. Marking the function as `payable` will lower the gas cost for legitimate callers because the compiler will not include checks for whether a payment was provided.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

855:     function disableEmergencyExecute() external onlyPartyDaoOrHost {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

479:     function addAuthority(address authority) external onlySelf {

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

207:     function cancelProposal(uint256 proposalId) external onlyDelegateCall {

```


<a name="GAS-45"></a> 
### [GAS-45] Use shift Right/Left instead of division/multiplication if possible

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernance.sol

434:             uint256 mid = (low + high) / 2;

```


<a name="GAS-46"></a> 
### [GAS-46] Use `!= 0` instead of `> 0` for unsigned integer comparison
Using `== 0`, `!= 0` instead of `> 0`, `>= 1`, `< 1`, `<= 0` can save gas.

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

239:             if (refundAmount > 0) {

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

141:         if (initialContribution > 0) {

224:         if (ethAvailable > 0) payable(msg.sender).transfer(ethAvailable);

331:         if (amount > 0) {

```

```solidity
File: contracts/party/PartyGovernance.sol

1126:         return snapshotNumHosts > 0 && snapshotNumHosts == numHostsAccepted;

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

415:                 if (fee > 0) {

426:                 if (amount > 0) {

```


<a name="GAS-47"></a> 
### [GAS-47] Using assembly to check for zero can save gas
Using assembly to check for zero can save gas by allowing more direct access to the evm and reducing some of the overhead associated with high-level operations in solidity.

<details>
<summary>
There are <b>62</b> instances (click to show):
</summary>

```solidity
File: contracts/crowdfund/ETHCrowdfundBase.sol

153:         if (opts.maxTotalContributions == 0) {

165:         if (opts.exchangeRateBps == 0) revert InvalidExchangeRateError(opts.exchangeRateBps);

176:         if (maxTotalContributions == 0) {

181:         if (expiry_ == 0) {

202:         if (msg.sender == contributor || oldDelegate == address(0)) {

213:         if (amount == 0) return 0;

263:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

272:         if (votingPower == 0) revert ZeroVotingPowerError();

286:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

324:         if (fundingSplitRecipient_ != address(0) && fundingSplitBps_ > 0) {

348:         if (fundingSplitRecipient_ == address(0) || fundingSplitBps_ == 0) {

348:         if (fundingSplitRecipient_ == address(0) || fundingSplitBps_ == 0) {

```

```solidity
File: contracts/crowdfund/InitialETHCrowdfund.sol

283:         if (delegate == address(0)) {

298:         if (amount == 0) return 0;

300:         if (tokenId == 0) {

384:         if (address(customMetadataProvider) == address(0)) {

```

```solidity
File: contracts/party/PartyGovernance.sol

225:         if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

225:         if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

445:         return high == 0 ? type(uint256).max : high - 1;

460:         if (newPartyHost != address(0)) {

505:             if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

505:             if (snap.intrinsicVotingPower == 0 && snap.delegatedVotingPower == 0) {

510:         if (_getSharedProposalStorage().governanceValues.totalVotingPower == 0) {

644:             values.passedTime == 0 &&

797:             if (globalMaxCancelDelay != 0) {

803:             if (globalMinCancelDelay != 0) {

900:         return nextProgressData.length == 0;

911:         if (snapsLength != 0) {

949:         oldDelegate = oldDelegate == address(0) ? voter : oldDelegate;

951:         delegate = delegate == address(0) ? oldDelegate : delegate;

979:         if (newDelegate == address(0) || oldDelegate == address(0)) {

979:         if (newDelegate == address(0) || oldDelegate == address(0)) {

1033:         if (n != 0) {

1048:         if (n != 0) {

1068:         if (pv.proposedTime == 0) {

1072:         if (pv.executedTime != 0) {

1073:             if (pv.completedTime == 0) {

1088:         if (pv.passedTime != 0) {

```

```solidity
File: contracts/party/PartyGovernanceNFT.sol

106:         if (customizationPresetId != 0) {

157:             totalVotingPower == 0 ? 0 : (votingPowerByTokenId[tokenId] * 1e18) / totalVotingPower;

179:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower_) {

196:         if (delegate_ != address(0)) {

216:         if (totalVotingPower != 0 && totalVotingPower - mintedVotingPower_ < votingPower) {

350:         if (tokenIds.length == 0) revert NothingToBurnError();

```

```solidity
File: contracts/proposals/ProposalExecutionEngine.sol

128:         if (oldImpl != address(0)) return;

131:         if (initializeData.length == 0) return;

150:         if (params.proposalId == 0) {

155:         if (currentInProgressProposalId == 0) {

165:             if (nextProgressDataHash == 0) {

168:                 assert(currentInProgressProposalId == 0);

169:                 if (params.progressData.length != 0) {

197:         if (nextProgressData.length == 0) {

209:         if (proposalId == 0) {

231:         if (address(validator) != address(0)) {

234:         if (tx.origin == address(0)) {

236:             if (address(validator) == address(0)) {

```

```solidity
File: contracts/proposals/SetGovernanceParameterProposal.sol

32:         if (proposalData.voteDuration != 0) {

42:         if (proposalData.executionDelay != 0) {

53:         if (proposalData.passThresholdBps != 0) {

```

```solidity
File: contracts/signature-validators/OffChainSignatureValidator.sol

62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {

62:         if (signerVotingPowerBps == 0 && party.balanceOf(signer) == 0) {

72:             thresholdBps == 0 ||

```

</details>


<a name="GAS-48"></a> 
### [GAS-48] `internal` functions not called by the contract should be removed
If the functions are required by an interface, the contract should inherit from that interface and use the `override` keyword

*There is one instance of this issue:*
```solidity
File: contracts/party/PartyGovernanceNFT.sol

81:     function _initialize(

```


