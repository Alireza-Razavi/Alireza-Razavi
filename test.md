# Report

Audit report for **2024-02-althea-liquid-infrastructure** generated by *ubl4nk_bot*.

## Medium Issues


*Total <b>4</b> instances over <b>3</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [M-1](#M-1) | Non-compliant `IERC20` tokens may revert with `transfer` | 1 |
| [M-2](#M-2) | Use of `transferFrom()` rather than `safeTransferFrom()` for NFTs in will lead to the loss of NFTs | 1 |
| [M-3](#M-3) | `transfer`/`transferFrom` may never return `true` for some tokens | 2 |

## Low Issues


*Total <b>53</b> instances over <b>15</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [L-1](#L-1) | Missing zero address check in functions with address parameters | 8 |
| [L-2](#L-2) | Array is `push()`ed but not `pop()`ed | 5 |
| [L-3](#L-3) | Constructor / initialization function lacks parameter validation | 2 |
| [L-4](#L-4) | Code does not follow the best practice of check-effects-interaction | 5 |
| [L-5](#L-5) | External function calls within loops | 7 |
| [L-6](#L-6) | Missing checks for state variable assignments | 4 |
| [L-7](#L-7) | Owner can renounce ownership | 1 |
| [L-8](#L-8) | Some functions do not work correctly with fee-on-transfer tokens | 2 |
| [L-9](#L-9) | Some tokens may revert when large transfers are made | 2 |
| [L-10](#L-10) | Some tokens may revert when zero value transfers are made | 2 |
| [L-11](#L-11) | Tokens may be minted to `address(0)` | 1 |
| [L-12](#L-12) | Use Ownable2Step instead of Ownable | 1 |
| [L-13](#L-13) | Consider using `ERC721A` instead of `ERC721` | 3 |
| [L-14](#L-14) | Vulnerable version of OZ contarcts is used (`4.3.1`) | 1 |
| [L-15](#L-15) | Centralization Risk for trusted owners | 9 |

## Non Critical Issues


*Total <b>309</b> instances over <b>56</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [NC-1](#NC-1) | Avoid the use of sensitive terms | 1 |
| [NC-2](#NC-2) | Consider adding a block/deny-list | 3 |
| [NC-3](#NC-3) | Consider adding emergency-stop functionality | 2 |
| [NC-4](#NC-4) | Consider adding formal verification proofs | 1 |
| [NC-5](#NC-5) | Consider bounding input array length | 1 |
| [NC-6](#NC-6) | Constant redefined elsewhere | 1 |
| [NC-7](#NC-7) | Constants should be put on the left side of comparisons | 6 |
| [NC-8](#NC-8) | Variable names for `constant`s should use CONSTANT_CASE | 3 |
| [NC-9](#NC-9) | `Constructor` should emit an event | 1 |
| [NC-10](#NC-10) | Contract does not follow the Solidity Style Guide's suggested layout ordering | 15 |
| [NC-11](#NC-11) | Contract should expose an `interface` | 19 |
| [NC-12](#NC-12) | Contracts should have full test coverage | 1 |
| [NC-13](#NC-13) | Events that mark critical parameter changes should contain both the old and the new value | 12 |
| [NC-14](#NC-14) | Custom errors should be used rather than `revert()`/`require()` | 8 |
| [NC-15](#NC-15) | Enable IR-based code generation | 1 |
| [NC-16](#NC-16) | Events are emitted without the sender information | 4 |
| [NC-17](#NC-17) | Events may be emitted out of order due to reentrancy | 7 |
| [NC-18](#NC-18) | Events should use parameters to convey information | 6 |
| [NC-19](#NC-19) |  Function ordering does not follow the Solidity Style Guide | 13 |
| [NC-20](#NC-20) | Functions with array parameters should have length checks in place | 3 |
| [NC-21](#NC-21) | Import declarations should import specific identifiers, rather than the whole file | 13 |
| [NC-22](#NC-22) | Imports could be organized more systematically | 1 |
| [NC-23](#NC-23) | Inconsistent spacing in comments | 3 |
| [NC-24](#NC-24) | Incorrect withdraw declaration | 5 |
| [NC-25](#NC-25) | It is best practice to use linear inheritance | 3 |
| [NC-26](#NC-26) | Large or complicated code bases should implement invariant tests | 1 |
| [NC-27](#NC-27) | Missing disallow list for `ERC721` | 3 |
| [NC-28](#NC-28) | Named mappings are recommended | 1 |
| [NC-29](#NC-29) | Named imports of parent contracts are missing | 3 |
| [NC-30](#NC-30) | Missing NatSpec from contract/error/event/function/modifier declarations | 19 |
| [NC-31](#NC-31) | Missing NatSpec `@author` from contract declaration | 1 |
| [NC-32](#NC-32) | Missing NatSpec `@dev` from contract/event/function/modifier declarations | 35 |
| [NC-33](#NC-33) | Missing NatSpec `@notice` from contract/event/function/modifier declarations | 34 |
| [NC-34](#NC-34) | Missing NatSpec `@param` from event/function/modifier declarations | 14 |
| [NC-35](#NC-35) | Missing NatSpec `@return` from function declaration | 2 |
| [NC-36](#NC-36) | Missing NatSpec `@title` from contract declaration | 1 |
| [NC-37](#NC-37) | There is no need to initialize variables with 0 | 7 |
| [NC-38](#NC-38) | Put all system-wide constants in one file | 3 |
| [NC-39](#NC-39) | Redundant inheritance specifier | 1 |
| [NC-40](#NC-40) | Setters should prevent re-setting the same value | 1 |
| [NC-41](#NC-41) | The `nonReentrant` modifier should occur before all other modifiers | 2 |
| [NC-42](#NC-42) | Unused `event` definition | 1 |
| [NC-43](#NC-43) | Unused arguments should be removed or implemented | 2 |
| [NC-44](#NC-44) | Unused contract variables | 2 |
| [NC-45](#NC-45) | Consider using `delete` rather than assigning zero/false to clear values | 1 |
| [NC-46](#NC-46) | Expressions for constant values should use `immutable` rather than `constant` | 3 |
| [NC-47](#NC-47) | Upgrade `openzeppelin` to the latest version (`5.0.1`) | 1 |
| [NC-48](#NC-48) | Use the latest solidity version for deployment (`0.8.24`) | 3 |
| [NC-49](#NC-49) | Use the Modern Upgradeable Contract Paradigm | 3 |
| [NC-50](#NC-50) | Use of `override` is unnecessary | 2 |
| [NC-51](#NC-51) | Whitespace in Expressions | 1 |
| [NC-52](#NC-52) | Names of `private`/`internal` state variables should be prefixed with an underscore | 7 |
| [NC-53](#NC-53) | Internal function calls within for loops | 1 |
| [NC-54](#NC-54) | Variables should be named in mixedCase style | 5 |
| [NC-55](#NC-55) | Event is missing `indexed` fields | 7 |
| [NC-56](#NC-56) | Functions not used internally could be marked `external` | 9 |

## Gas Optimizations


*Total <b>173</b> instances over <b>36</b> issues:*

|ID|Issue|Instances|Gas|
|-|:-|:-:|:-:|
| [GAS-1](#GAS-1) | Avoid Using `_msgSender()` if not Supporting EIP-2771 | 4 | 64 |
| [GAS-2](#GAS-2) | Optimize gas by using do-while loops | 9 | 2295 |
| [GAS-3](#GAS-3) | Consider activating via-ir for deploying | 1 | - |
| [GAS-4](#GAS-4) | Counting down in for statements is more gas efficient | 9 | - |
| [GAS-5](#GAS-5) | Divisions can be `unchecked` to save gas | 1 | 20 |
| [GAS-6](#GAS-6) | Don't transfer with zero amount to save gas | 1 | - |
| [GAS-7](#GAS-7) | Events should be emitted outside of loops | 2 | 750 |
| [GAS-8](#GAS-8) | Increments can be `unchecked` to save gas | 9 | 540 |
| [GAS-9](#GAS-9) | Inline `modifier`s that are only used once, to save gas | 1 | - |
| [GAS-10](#GAS-10) | `internal` functions only called once can be inlined to save gas | 3 | 90 |
| [GAS-11](#GAS-11) | Multiple accesses of the same mapping/array key/index should be cached | 2 | 84 |
| [GAS-12](#GAS-12) | Operator `>=`/`<=` costs less gas than operator `>`/`<` | 13 | 39 |
| [GAS-13](#GAS-13) | Optimize names to save gas | 2 | 44 |
| [GAS-14](#GAS-14) | Remove or replace unused state variables | 2 | - |
| [GAS-15](#GAS-15) | `require()`/`revert()` strings longer than 32 bytes cost extra gas | 10 | 30 |
| [GAS-16](#GAS-16) | State variables access within a loop | 13 | 3445 |
| [GAS-17](#GAS-17) | State variables only set in the constructor should be declared immutable | 2 | 40000 |
| [GAS-18](#GAS-18) | Optimize external calls with assembly for memory efficiency | 3 | 660 |
| [GAS-19](#GAS-19) | Use assembly to emit events | 12 | 456 |
| [GAS-20](#GAS-20) | Use local variables for emitting | 1 | 97 |
| [GAS-21](#GAS-21) | Use a more recent version of solidity | 3 | - |
| [GAS-22](#GAS-22) | Use != 0 instead of > 0 | 4 | 12 |
| [GAS-23](#GAS-23) | Use solady library where possible to save gas | 4 | 4000 |
| [GAS-24](#GAS-24) | Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes | 2 | 17100 |
| [GAS-25](#GAS-25) | Using bitmap to store bool states can save gas | 1 | - |
| [GAS-26](#GAS-26) | Using `this` to access functions results in an external call, wasting gas | 1 | 100 |
| [GAS-27](#GAS-27) | Using bools for storage incurs overhead | 2 | 200 |
| [GAS-28](#GAS-28) | Cache array length outside of loop | 7 | - |
| [GAS-29](#GAS-29) | State variables should be cached in stack variables rather than re-reading them from storage | 8 | 776 |
| [GAS-30](#GAS-30) | Use `calldata` instead of `memory` for function arguments that do not get mutated | 7 | - |
| [GAS-31](#GAS-31) | Use Custom Errors | 8 | 400 |
| [GAS-32](#GAS-32) | Don't initialize variables with default value | 7 | - |
| [GAS-33](#GAS-33) | Functions guaranteed to revert when called by normal users can be marked `payable` | 4 | 84 |
| [GAS-34](#GAS-34) | `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too) | 9 | 45 |
| [GAS-35](#GAS-35) | Using `private` rather than `public` for constants, saves gas | 3 | - |
| [GAS-36](#GAS-36) | Use assembly to check for `address(0)` | 3 | 18 |

## Medium Issues

<a name="M-1"></a> 
### [M-1] Non-compliant `IERC20` tokens may revert with `transfer`
Some `IERC20` tokens (e.g. BNB, OMG, USDT) do not implement the standard properly, but they are still accepted by most code that accepts `ERC20` tokens.

For example, USDT `transfer` functions on L1 do not return booleans: when casted to `IERC20`, their function signatures do not match, and therefore the calls made will revert.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureNFT.sol

179:                 bool result = IERC20(erc20).transfer(destination, balance);

```
*Github:* [[179](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L179)]



<a name="M-2"></a> 
### [M-2] Use of `transferFrom()` rather than `safeTransferFrom()` for NFTs in will lead to the loss of NFTs
The EIP-721 standard says the following about `transferFrom()`:

```solidity
/// @notice Transfer ownership of an NFT -- THE CALLER IS RESPONSIBLE
///  TO CONFIRM THAT `_to` IS CAPABLE OF RECEIVING NFTS OR ELSE
///  THEY MAY BE PERMANENTLY LOST
/// @dev Throws unless `msg.sender` is the current owner, an authorized
///  operator, or the approved address for this NFT. Throws if `_from` is
///  not the current owner. Throws if `_to` is the zero address. Throws if
///  `_tokenId` is not a valid NFT.
/// @param _from The current owner of the NFT
/// @param _to The new owner
/// @param _tokenId The NFT to transfer
function transferFrom(address _from, address _to, uint256 _tokenId) external payable;
```

https://github.com/ethereum/EIPs/blob/78e2c297611f5e92b6a5112819ab71f74041ff25/EIPS/eip-721.md?plain=1#L103-L113

Code must use the `safeTransferFrom()` flavor if it hasn't otherwise verified that the receiving address can handle it

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

418:         nft.transferFrom(address(this), to, nft.AccountId());

```
*Github:* [[418](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L418)]



<a name="M-3"></a> 
### [M-3] `transfer`/`transferFrom` may never return `true` for some tokens
Some tokens do not return a bool (e.g. USDT, OMG) on transfer. As there are some conditions that rely on this `bool` value, these tokens may cause issues, as the return value of the following conditions will always be `false`.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

224:                     if (toDistribute.transfer(recipient, entitlement)) {

```
*Github:* [[224](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L224)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

179:                 bool result = IERC20(erc20).transfer(destination, balance);

```
*Github:* [[179](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L179)]




## Low Issues

<a name="L-1"></a> 
### [L-1] Missing zero address check in functions with address parameters
Adding a zero address check for each address type parameter can prevent errors.

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit missing zero check for `account`
96:     function isApprovedHolder(address account) public view returns (bool) {

/// @audit missing zero check for `to`
164:     function _afterTokenTransfer(
             address from,
             address to,
             uint256 amount
         ) internal virtual override {

/// @audit missing zero check for `account`
303:     function mintAndDistribute(
             address account,
             uint256 amount
         ) public onlyOwner {

/// @audit missing zero check for `account`
318:     function mint(
             address account,
             uint256 amount
         ) public onlyOwner nonReentrant {

/// @audit missing zero check for `account`
344:     function burnFromAndDistribute(address account, uint256 amount) public {

/// @audit missing zero check for `to`
413:     function releaseManagedNFT(
             address nftContract,
             address to
         ) public onlyOwner nonReentrant {

```
*Github:* [[96](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L96), [164](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L164), [303](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L303), [318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318), [344](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L344), [413](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L413)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit missing zero check for `destination`
153:     function withdrawBalancesTo(
             address[] calldata erc20s,
             address destination
         ) public virtual {

/// @audit missing zero check for `destination`
170:     function _withdrawBalancesTo(
             address[] calldata erc20s,
             address destination
         ) internal {

```
*Github:* [[153](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L153), [170](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L170)]



<a name="L-2"></a> 
### [L-2] Array is `push()`ed but not `pop()`ed
There is no limit specified on the amount of gas used, so the recipient can use up all of the remaining gas (`gasleft()`), causing it to revert. Therefore, when calling an external contract, it is necessary to specify a limited amount of gas to forward.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

144:             holders.push(to);

276:             erc20EntitlementPerUnit.push(entitlement);

401:         ManagedNFTs.push(nftContract);

```
*Github:* [[144](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L144), [276](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L276), [401](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L401)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

121:             thresholdErc20s.push(newErc20s[i]);

122:             thresholdAmounts.push(newAmounts[i]);

```
*Github:* [[121](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L121), [122](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L122)]



<a name="L-3"></a> 
### [L-3] Constructor / initialization function lacks parameter validation
Constructors and initialization functions play a critical role in contracts by setting important initial states when the contract is first deployed before the system starts. The parameters passed to the constructor and initialization functions directly affect the behavior of the contract / protocol. If incorrect parameters are provided, the system may fail to run, behave abnormally, be unstable, or lack security. Therefore, it's crucial to carefully check each parameter in the constructor and initialization functions. If an exception is found, the transaction should be rolled back.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `_name` not validated
/// @audit `_symbol` not validated
/// @audit `_managedNFTs` not validated
/// @audit `_minDistributionPeriod` not validated
/// @audit `_distributableErc20s` not validated
456:     constructor(

```
*Github:* [[456](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L456)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit `accountName` not validated
62:     constructor(

```
*Github:* [[62](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L62)]



<a name="L-4"></a> 
### [L-4] Code does not follow the best practice of check-effects-interaction
Code should follow the best-practice of [check-effects-interaction](https://blockchain-academy.hs-mittweida.de/courses/solidity-coding-beginners-to-intermediate/lessons/solidity-11-coding-patterns/topic/checks-effects-interactions/), where state variables are updated before any external calls are made. Doing so prevents a large class of reentrancy bugs.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `.transfer(...)` is called on line 224
232:         nextDistributionRecipient = i;

/// @audit `.balanceOf(...)` is called on line 272
279:         nextDistributionRecipient = 0;

/// @audit `.getThresholds(...)` is called on line 376
/// @audit `.withdrawBalancesTo(...)` is called on line 377
380:         nextWithdrawal = i;

/// @audit `.getThresholds(...)` is called on line 376
/// @audit `.withdrawBalancesTo(...)` is called on line 377
383:             nextWithdrawal = 0;

/// @audit `.AccountId(...)` is called on line 418
/// @audit `.transferFrom(...)` is called on line 418
425:                 ManagedNFTs[i] = ManagedNFTs[ManagedNFTs.length - 1];

```
*Github:* [[232](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L232), [279](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L279), [380](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L380), [383](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L383), [425](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L425)]



<a name="L-5"></a> 
### [L-5] External function calls within loops
Calling external functions within loops can easily result in insufficient gas. This greatly increases the likelihood of transaction failures, DOS attacks, and other unexpected actions. It is recommended to limit the number of loops within loops that call external functions, and to limit the gas line for each external call.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `.transfer(...)`
224:                     if (toDistribute.transfer(recipient, entitlement)) {

/// @audit `.transfer(...)`
224:                     if (toDistribute.transfer(recipient, entitlement)) {

/// @audit `.balanceOf(...)`
272:             uint256 balance = IERC20(distributableERC20s[i]).balanceOf(

/// @audit `.getThresholds(...)`
376:             (address[] memory withdrawERC20s, ) = withdrawFrom.getThresholds();

/// @audit `.withdrawBalancesTo(...)`
377:             withdrawFrom.withdrawBalancesTo(withdrawERC20s, address(this));

```
*Github:* [[224](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L224), [224](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L224), [272](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L272), [376](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L376), [377](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L377)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit `.balanceOf(...)`
177:             uint256 balance = IERC20(erc20).balanceOf(address(this));

/// @audit `.transfer(...)`
179:                 bool result = IERC20(erc20).transfer(destination, balance);

```
*Github:* [[177](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L177), [179](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L179)]



<a name="L-6"></a> 
### [L-6] Missing checks for state variable assignments
There are some missing checks in these functions, and this could lead to unexpected scenarios. Consider always adding a sanity check for state variables.

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `_distributableERC20s`
444:         distributableERC20s = _distributableERC20s;

/// @audit `_managedNFTs`
464:         ManagedNFTs = _managedNFTs;

/// @audit `_minDistributionPeriod`
471:         MinDistributionPeriod = _minDistributionPeriod;

/// @audit `_distributableErc20s`
473:         distributableERC20s = _distributableErc20s;

```
*Github:* [[444](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L444), [464](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L464), [471](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L471), [473](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L473)]



<a name="L-7"></a> 
### [L-7] Owner can renounce ownership
Each of the following contracts implements or inherits the `renounceOwnership()` function. This can represent a certain risk if the ownership is renounced for any other reason than by design. Renouncing ownership will leave the contract without an owner, thereby removing any functionality that is only available to the owner.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is
        ERC20,
        ERC20Burnable,
        Ownable,

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]



<a name="L-8"></a> 
### [L-8] Some functions do not work correctly with fee-on-transfer tokens
Some tokens take a transfer fee (e.g. `STA`, `PAXG`), some do not currently charge a fee but may do so in the future (e.g. `USDT`, `USDC`).

Should a fee-on-transfer token be added as an asset and deposited, it could be abused, as the accounting is wrong. In the current implementation the following function calls do not work well with fee-on-transfer tokens as the amount variable is the pre-fee amount, including the fee, whereas the final balance do not include the fee anymore.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

224:                     if (toDistribute.transfer(recipient, entitlement)) {

```
*Github:* [[224](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L224)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

179:                 bool result = IERC20(erc20).transfer(destination, balance);

```
*Github:* [[179](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L179)]



<a name="L-9"></a> 
### [L-9] Some tokens may revert when large transfers are made
Tokens such as COMP or UNI will revert when an address' balance reaches `type(uint96).max`. Ensure that the calls below can be broken up into smaller batches if necessary.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

224:                     if (toDistribute.transfer(recipient, entitlement)) {

```
*Github:* [[224](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L224)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

179:                 bool result = IERC20(erc20).transfer(destination, balance);

```
*Github:* [[179](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L179)]



<a name="L-10"></a> 
### [L-10] Some tokens may revert when zero value transfers are made
Despite the fact that [EIP-20 states](https://github.com/ethereum/EIPs/blob/7500ac4fc1bbdfaf684e7ef851f798f6b667b2fe/EIPS/eip-20.md?plain=1#L116) that zero-value transfers must be accepted, some tokens, such as LEND, will revert if this is attempted, which may cause transactions that involve other tokens (such as batch operations) to fully revert. Consider skipping the transfer if the amount is zero, which will also save gas.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

224:                     if (toDistribute.transfer(recipient, entitlement)) {

```
*Github:* [[224](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L224)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

179:                 bool result = IERC20(erc20).transfer(destination, balance);

```
*Github:* [[179](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L179)]



<a name="L-11"></a> 
### [L-11] Tokens may be minted to `address(0)`

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

318:     function mint(
             address account,
             uint256 amount
         ) public onlyOwner nonReentrant {
             _mint(account, amount);
         }

```
*Github:* [[318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318)]



<a name="L-12"></a> 
### [L-12] Use Ownable2Step instead of Ownable
`Ownable2Step` and `Ownable2StepUpgradeable` prevent the contract ownership from mistakenly being transferred to an address that cannot handle it (e.g. due to a typo in the address), by requiring that the recipient of the owner permissions actively accept via a contract call of its own.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is
        ERC20,
        ERC20Burnable,
        Ownable,

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]



<a name="L-13"></a> 
### [L-13] Consider using `ERC721A` instead of `ERC721`
[ERC721A](https://www.erc721a.org/) is an implementation of IERC721 with significant gas savings for minting multiple NFTs in a single transaction.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is
        ERC20,
        ERC20Burnable,
        Ownable,
        ERC721Holder,

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]


```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="L-14"></a> 
### [L-14] Vulnerable version of OZ contarcts is used (`4.3.1`)
The project is using a vulnerable version.
See the list of OZ vulnerabilities [here](https://security.snyk.io/package/npm/@openzeppelin%2Fcontracts).

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/)]



<a name="L-15"></a> 
### [L-15] Centralization Risk for trusted owners
Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

106:     function approveHolder(address holder) public onlyOwner {

116:     function disapproveHolder(address holder) public onlyOwner {

303:     function mintAndDistribute(
             address account,
             uint256 amount
         ) public onlyOwner {

318:     function mint(
             address account,
             uint256 amount
         ) public onlyOwner nonReentrant {

394:     function addManagedNFT(address nftContract) public onlyOwner {

413:     function releaseManagedNFT(
             address nftContract,
             address to
         ) public onlyOwner nonReentrant {

441:     function setDistributableERC20s(
             address[] memory _distributableERC20s
         ) public onlyOwner {

```
*Github:* [[106](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L106), [116](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L116), [303](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L303), [318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318), [394](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L394), [413](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L413), [441](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L441)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

108:     function setThresholds(
             address[] calldata newErc20s,
             uint256[] calldata newAmounts
         ) public virtual onlyOwnerOrApproved(AccountId) {

203:     function recoverAccount() public virtual onlyOwner(AccountId) {

```
*Github:* [[108](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L108), [203](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L203)]




## Non Critical Issues

<a name="NC-1"></a> 
### [NC-1] Avoid the use of sensitive terms
Use [alternative variants](https://www.zdnet.com/article/mysql-drops-master-slave-and-blacklist-whitelist-terminology/), e.g. allowlist/denylist instead of whitelist/blacklist

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

63:      * @notice This collection holds the whitelist for accounts approved to hold the LiquidInfrastructureERC20

```
*Github:* [[63](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L63)]



<a name="NC-2"></a> 
### [NC-2] Consider adding a block/deny-list
Doing so will significantly increase centralization, but will help to prevent hackers from using stolen tokens.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is
        ERC20,
        ERC20Burnable,
        Ownable,
        ERC721Holder,
        ReentrancyGuard
    {

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]


```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="NC-3"></a> 
### [NC-3] Consider adding emergency-stop functionality
Consider adding `Pausable` to the following contracts so it's possible to stop them in case of an emergency.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]



<a name="NC-4"></a> 
### [NC-4] Consider adding formal verification proofs
Formal verification is the act of proving or disproving the correctness of intended algorithms underlying a system with respect to a certain formal specification/property/invariant, using formal methods of mathematics.

Some tools that are currently available to perform these tests on smart contracts are [SMTChecker](https://docs.soliditylang.org/en/latest/smtchecker.html) and [Certora Prover](https://www.certora.com/).

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/)]



<a name="NC-5"></a> 
### [NC-5] Consider bounding input array length
The functions below take in an unbounded array, and make function calls for entries in the array. While the function will revert if it eventually runs out of gas, it may be a nicer user experience to require() that the length of the array is below some reasonable maximum, so that the user doesn't have to use up a full transaction's gas only to see that the transaction reverts.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit consider length check for `erc20s`
175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="NC-6"></a> 
### [NC-6] Constant redefined elsewhere
Consider defining in only one contract so that values cannot become out of sync when only one location is updated. A [cheap way](https://medium.com/coinmonks/gas-cost-of-solidity-library-functions-dbe0cedd4678) to store constants in a single location is to create an `internal constant` in a `library`. If the variable is a local cache of another contract's value, consider making the cache variable internal or private, which will require external users to query the contract with the source of truth, so that callers don't get out of sync.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit also seen in contracts/LiquidInfrastructureNFT.sol
54:     uint256 public constant Version = 1;

```
*Github:* [[54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54)]



<a name="NC-7"></a> 
### [NC-7] Constants should be put on the left side of comparisons
Putting constants on the left side of comparison statements is a best practice known as [Yoda conditions](https://en.wikipedia.org/wiki/Yoda_conditions). Although solidity's static typing system prevents accidental assignments within conditionals, adopting this practice can improve code readability and consistency, especially when working across multiple languages.

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

133:         if (!(to == address(0))) {

139:         if (from == address(0) || to == address(0)) {

142:         bool exists = (this.balanceOf(to) != 0);

169:         bool stillHolding = (this.balanceOf(from) != 0);

245:         if (totalSupply() == 0 || holders.length == 0) {

362:         if (nextWithdrawal == 0) {

```
*Github:* [[133](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L133), [139](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L139), [142](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L142), [169](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L169), [245](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L245), [362](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L362)]



<a name="NC-8"></a> 
### [NC-8] Variable names for `constant`s should use CONSTANT_CASE
For `constant` variable names, each word should use all capital letters, with underscores separating each word (CONSTANT_CASE)

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

54:     uint256 public constant Version = 1;

```
*Github:* [[54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

46:     uint256 public constant Version = 1;

53:     uint256 public constant AccountId = 1;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L46), [53](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L53)]



<a name="NC-9"></a> 
### [NC-9] `Constructor` should emit an event
Use events to signal significant changes to off-chain monitoring tools.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureNFT.sol

62:     constructor(

```
*Github:* [[62](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L62)]



<a name="NC-10"></a> 
### [NC-10] Contract does not follow the Solidity Style Guide's suggested layout ordering
The [style guide](https://docs.soliditylang.org/en/v0.8.16/style-guide.html#order-of-layout) says that, within a contract, the ordering should be `1) Type declarations`, `2) State variables`, `3) Events`, `4) Modifiers`, and `5) Functions`, but the contract(s) below do not follow this ordering

<details>
<summary>
There are <b>15</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
46:     address[] private distributableERC20s;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
47:     uint256[] private erc20EntitlementPerUnit;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
48:     address[] private holders;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
54:     uint256 public constant Version = 1;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
60:     address[] public ManagedNFTs;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
65:     mapping(address => bool) public HolderAllowlist;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
70:     uint256 public LastDistribution;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
75:     uint256 public MinDistributionPeriod;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
80:     bool public LockedForDistribution;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
85:     uint256 internal nextDistributionRecipient;

/// @audit event/error `Deployed` came earlier
/// @audit event/error `DistributionStarted` came earlier
/// @audit event/error `Distribution` came earlier
/// @audit event/error `DistributionFinished` came earlier
/// @audit event/error `WithdrawalStarted` came earlier
/// @audit event/error `Withdrawal` came earlier
/// @audit event/error `WithdrawalFinished` came earlier
/// @audit event/error `AddManagedNFT` came earlier
/// @audit event/error `ReleaseManagedNFT` came earlier
90:     uint256 private nextWithdrawal;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L46), [47](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L47), [48](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L48), [54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54), [60](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L60), [65](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L65), [70](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L70), [75](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L75), [80](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L80), [85](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L85), [90](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L90)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit event/error `SuccessfulWithdrawal` came earlier
/// @audit event/error `TryRecover` came earlier
/// @audit event/error `SuccessfulRecovery` came earlier
/// @audit event/error `ThresholdsChanged` came earlier
39:     address[] private thresholdErc20s;

/// @audit event/error `SuccessfulWithdrawal` came earlier
/// @audit event/error `TryRecover` came earlier
/// @audit event/error `SuccessfulRecovery` came earlier
/// @audit event/error `ThresholdsChanged` came earlier
40:     uint256[] private thresholdAmounts;

/// @audit event/error `SuccessfulWithdrawal` came earlier
/// @audit event/error `TryRecover` came earlier
/// @audit event/error `SuccessfulRecovery` came earlier
/// @audit event/error `ThresholdsChanged` came earlier
46:     uint256 public constant Version = 1;

/// @audit event/error `SuccessfulWithdrawal` came earlier
/// @audit event/error `TryRecover` came earlier
/// @audit event/error `SuccessfulRecovery` came earlier
/// @audit event/error `ThresholdsChanged` came earlier
53:     uint256 public constant AccountId = 1;

```
*Github:* [[39](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L39), [40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L40), [46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L46), [53](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L53)]


</details>


<a name="NC-11"></a> 
### [NC-11] Contract should expose an `interface`
All `external`/`public` functions should extend an `interface`. This is useful to make sure that the whole API is extracted.

*Note:* It is possible that the interface is out-of-scope and has not been seen by the bot.

<details>
<summary>
There are <b>19</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

96:     function isApprovedHolder(address account) public view returns (bool) {

106:     function approveHolder(address holder) public onlyOwner {

116:     function disapproveHolder(address holder) public onlyOwner {

184:     function distributeToAllHolders() public {

198:     function distribute(uint256 numDistributions) public nonReentrant {

303:     function mintAndDistribute(

318:     function mint(

331:     function burnAndDistribute(uint256 amount) public {

344:     function burnFromAndDistribute(address account, uint256 amount) public {

351:     function withdrawFromAllManagedNFTs() public {

359:     function withdrawFromManagedNFTs(uint256 numWithdrawals) public {

394:     function addManagedNFT(address nftContract) public onlyOwner {

413:     function releaseManagedNFT(

441:     function setDistributableERC20s(

```
*Github:* [[96](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L96), [106](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L106), [116](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L116), [184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L184), [198](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L198), [303](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L303), [318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318), [331](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L331), [344](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L344), [351](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L351), [359](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L359), [394](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L394), [413](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L413), [441](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L441)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

84:     function getThresholds()

108:     function setThresholds(

135:     function withdrawBalances(address[] calldata erc20s) public virtual {

153:     function withdrawBalancesTo(

203:     function recoverAccount() public virtual onlyOwner(AccountId) {

```
*Github:* [[84](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L84), [108](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L108), [135](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L135), [153](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L153), [203](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L203)]


</details>


<a name="NC-12"></a> 
### [NC-12] Contracts should have full test coverage
While 100% code coverage does not guarantee that there are no bugs, it often will catch easy-to-find bugs, and will ensure that there are fewer regressions when the code invariably has to be modified. Furthermore, in order to get full coverage, code authors will often have to re-organize their code so that it is more modular, so that each component can be tested separately, which reduces interdependencies between modules and layers, and makes for code that is easier to reason about and audit.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/)]



<a name="NC-13"></a> 
### [NC-13] Events that mark critical parameter changes should contain both the old and the new value
This should especially be done if the new value is not required to be different from the old value.

<details>
<summary>
There are <b>12</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

229:                 emit Distribution(recipient, distributableERC20s, receipts);

280:         emit DistributionStarted();

294:         emit DistributionFinished();

363:             emit WithdrawalStarted();

378:             emit Withdrawal(address(withdrawFrom));

384:             emit WithdrawalFinished();

402:         emit AddManagedNFT(nftContract);

433:         emit ReleaseManagedNFT(nftContract, to);

475:         emit Deployed();

```
*Github:* [[229](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L229), [280](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L280), [294](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L294), [363](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L363), [378](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L378), [384](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L384), [402](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L402), [433](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L433), [475](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L475)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

124:         emit ThresholdsChanged(newErc20s, newAmounts);

184:         emit SuccessfulWithdrawal(destination, erc20s, amounts);

204:         emit TryRecover();

```
*Github:* [[124](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L124), [184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L184), [204](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L204)]


</details>


<a name="NC-14"></a> 
### [NC-14] Custom errors should be used rather than `revert()`/`require()`
Custom errors are available from solidity version 0.8.4. Custom errors are more easily processed in try-catch blocks, and are easier to re-use and maintain.

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

107:         require(!isApprovedHolder(holder), "holder already approved");

117:         require(isApprovedHolder(holder), "holder not approved");

132:         require(!LockedForDistribution, "distribution in progress");

199:         require(numDistributions > 0, "must process at least 1 distribution");

360:         require(!LockedForDistribution, "cannot withdraw during distribution");

431:         require(true, "unable to find released NFT in ManagedNFTs");

```
*Github:* [[107](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L107), [117](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L117), [132](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L132), [199](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L199), [360](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L360), [431](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L431)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

180:                 require(result, "unsuccessful withdrawal");

```
*Github:* [[180](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L180)]


```solidity
File: contracts/OwnableApprovableERC721.sol

40:             revert("OwnableApprovable: caller is not owner nor approved");

```
*Github:* [[40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L40)]



<a name="NC-15"></a> 
### [NC-15] Enable IR-based code generation
The IR-based code generator was introduced with an aim to not only allow code generation to be more transparent and auditable but also to enable more powerful optimization passes that span across functions. You can enable it on the command line using `--via-ir` or with the option `{"viaIR": true}`. This will take longer to compile, but you can just simple test it before deploying and if you got a better benchmark then you can add --via-ir to your deploy command More on: https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/)]



<a name="NC-16"></a> 
### [NC-16] Events are emitted without the sender information
When an action is triggered based on a user's action, not being able to filter based on who triggered the action makes event processing a lot more cumbersome. Including the `msg.sender` the events of these types of action will make events much more useful to end users, especially when `msg.sender` is not `tx.origin`.

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

402:         emit AddManagedNFT(nftContract);

433:         emit ReleaseManagedNFT(nftContract, to);

```
*Github:* [[402](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L402), [433](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L433)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

124:         emit ThresholdsChanged(newErc20s, newAmounts);

184:         emit SuccessfulWithdrawal(destination, erc20s, amounts);

```
*Github:* [[124](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L124), [184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L184)]



<a name="NC-17"></a> 
### [NC-17] Events may be emitted out of order due to reentrancy
Ensure that events follow the best practice of check-effects-interaction, and are emitted before external calls.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `.transfer(...)` is called on line 224
229:                 emit Distribution(recipient, distributableERC20s, receipts);

/// @audit `.balanceOf(...)` is called on line 272
280:         emit DistributionStarted();

/// @audit `.getThresholds(...)` is called on line 376
/// @audit `.withdrawBalancesTo(...)` is called on line 377
378:             emit Withdrawal(address(withdrawFrom));

/// @audit `.getThresholds(...)` is called on line 376
/// @audit `.withdrawBalancesTo(...)` is called on line 377
384:             emit WithdrawalFinished();

/// @audit `.AccountId(...)` is called on line 396
/// @audit `.ownerOf(...)` is called on line 396
402:         emit AddManagedNFT(nftContract);

/// @audit `.AccountId(...)` is called on line 418
/// @audit `.transferFrom(...)` is called on line 418
433:         emit ReleaseManagedNFT(nftContract, to);

```
*Github:* [[229](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L229), [280](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L280), [378](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L378), [384](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L384), [402](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L402), [433](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L433)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit `.balanceOf(...)` is called on line 177
/// @audit `.transfer(...)` is called on line 179
184:         emit SuccessfulWithdrawal(destination, erc20s, amounts);

```
*Github:* [[184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L184)]



<a name="NC-18"></a> 
### [NC-18] Events should use parameters to convey information
For example, rather than using `event Paused()` and `event Unpaused()`, use `event PauseState(address indexed whoChangedIt, bool wasPaused, bool isNowPaused)`

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

36:     event Deployed();

37:     event DistributionStarted();

39:     event DistributionFinished();

40:     event WithdrawalStarted();

42:     event WithdrawalFinished();

```
*Github:* [[36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L37), [39](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L39), [40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L40), [42](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L42)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

35:     event TryRecover();

```
*Github:* [[35](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L35)]



<a name="NC-19"></a> 
### [NC-19]  Function ordering does not follow the Solidity Style Guide
According to the [solidity style guide](https://docs.soliditylang.org/en/v0.8.17/style-guide.html#order-of-functions), functions should be laid out in the following order: `constructor()`, `receive()`, `fallback()`, `external`, `public`, `internal`, `private`, but the cases below do not follow this pattern

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
184:     function distributeToAllHolders() public {

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
198:     function distribute(uint256 numDistributions) public nonReentrant {

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
303:     function mintAndDistribute(

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
318:     function mint(

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
331:     function burnAndDistribute(uint256 amount) public {

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
344:     function burnFromAndDistribute(address account, uint256 amount) public {

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
351:     function withdrawFromAllManagedNFTs() public {

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
359:     function withdrawFromManagedNFTs(uint256 numWithdrawals) public {

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
394:     function addManagedNFT(address nftContract) public onlyOwner {

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
413:     function releaseManagedNFT(

/// @audit internal function `_beforeTokenTransfer` came earlier from this public function
/// @audit internal function `_beforeMintOrBurn` came earlier from this public function
/// @audit internal function `_afterTokenTransfer` came earlier from this public function
/// @audit internal function `_isPastMinDistributionPeriod` came earlier from this public function
/// @audit internal function `_beginDistribution` came earlier from this public function
/// @audit internal function `_endDistribution` came earlier from this public function
441:     function setDistributableERC20s(

/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
/// @audit a function was seen before constructor
456:     constructor(

```
*Github:* [[184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L184), [198](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L198), [303](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L303), [318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318), [331](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L331), [344](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L344), [351](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L351), [359](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L359), [394](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L394), [413](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L413), [441](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L441), [456](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L456)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit internal function `_withdrawBalancesTo` came earlier from this public function
203:     function recoverAccount() public virtual onlyOwner(AccountId) {

```
*Github:* [[203](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L203)]


</details>


<a name="NC-20"></a> 
### [NC-20] Functions with array parameters should have length checks in place

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `_distributableERC20s`
441:     function setDistributableERC20s(

```
*Github:* [[441](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L441)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit `erc20s`
135:     function withdrawBalances(address[] calldata erc20s) public virtual {

/// @audit `erc20s`
153:     function withdrawBalancesTo(

```
*Github:* [[135](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L135), [153](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L153)]



<a name="NC-21"></a> 
### [NC-21] Import declarations should import specific identifiers, rather than the whole file
Using import declarations of the form `import {<identifier_name>} from "some/file.sol"` avoids polluting the symbol namespace making flattened files smaller, and speeds up compilation (but does not save any gas).

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

4: import "@openzeppelin/contracts/utils/math/Math.sol";

5: import "@openzeppelin/contracts/access/Ownable.sol";

6: import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

7: import "@openzeppelin/contracts/token/ERC20/ERC20.sol";

8: import "@openzeppelin/contracts/token/ERC721/utils/ERC721Holder.sol";

9: import "@openzeppelin/contracts/token/ERC20/extensions/ERC20Burnable.sol";

10: import "@openzeppelin/contracts/security/ReentrancyGuard.sol";

11: import "./LiquidInfrastructureNFT.sol";

```
*Github:* [[4](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L4), [5](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L5), [6](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L6), [7](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L7), [8](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L8), [9](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L9), [10](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L10), [11](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L11)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

4: import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

5: import "@openzeppelin/contracts/token/ERC721/ERC721.sol";

6: import "./OwnableApprovableERC721.sol";

```
*Github:* [[4](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L4), [5](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L5), [6](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L6)]


```solidity
File: contracts/OwnableApprovableERC721.sol

4: import "@openzeppelin/contracts/utils/Context.sol";

5: import "@openzeppelin/contracts/token/ERC721/ERC721.sol";

```
*Github:* [[4](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L4), [5](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L5)]


</details>


<a name="NC-22"></a> 
### [NC-22] Imports could be organized more systematically
The contract's interface should be imported first, followed by each of the interfaces it uses, followed by all other files. The examples below do not follow this layout.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

6: import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

```
*Github:* [[6](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L6)]



<a name="NC-23"></a> 
### [NC-23] Inconsistent spacing in comments
Some lines use `// x` and some use `//x`. The instances below point out the usages that don't follow the majority, within each file

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

1: //SPDX-License-Identifier: Apache-2.0

```
*Github:* [[1](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L1)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

1: //SPDX-License-Identifier: Apache-2.0

```
*Github:* [[1](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L1)]


```solidity
File: contracts/OwnableApprovableERC721.sol

1: //SPDX-License-Identifier: Apache-2.0

```
*Github:* [[1](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L1)]



<a name="NC-24"></a> 
### [NC-24] Incorrect withdraw declaration
In Solidity, it's essential for clarity and interoperability to correctly specify return types in function declarations. If the `withdraw` function is expected to return a `bool` to indicate success or failure, its omission could lead to ambiguity or unexpected behavior when interacting with or calling this function from other contracts or off-chain systems. Missing return values can mislead developers and potentially lead to contract integrations built on incorrect assumptions. To resolve this, the function declaration for withdraw should be modified to explicitly include the `bool` return type, ensuring clarity and correctness in contract interactions.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

351:     function withdrawFromAllManagedNFTs() public {

359:     function withdrawFromManagedNFTs(uint256 numWithdrawals) public {

```
*Github:* [[351](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L351), [359](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L359)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

135:     function withdrawBalances(address[] calldata erc20s) public virtual {

153:     function withdrawBalancesTo(
             address[] calldata erc20s,
             address destination
         ) public virtual {

170:     function _withdrawBalancesTo(
             address[] calldata erc20s,
             address destination
         ) internal {

```
*Github:* [[135](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L135), [153](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L153), [170](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L170)]



<a name="NC-25"></a> 
### [NC-25] It is best practice to use linear inheritance
In Solidity, complex inheritance structures can obfuscate code understanding, introducing potential security risks. Multiple inheritance, especially with overlapping function names or state variables, can cause unintentional overrides or ambiguous behavior. 

Resolution: Strive for linear and simple inheritance chains. Avoid diamond or circular inheritance patterns. Clearly document the purpose and relationships of base contracts, ensuring that overrides are intentional. Tools like Remix or Hardhat can visualize inheritance chains, assisting in verification. Keeping inheritance streamlined aids in better code readability, reduces potential errors, and ensures smoother audits and upgrades.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is
        ERC20,
        ERC20Burnable,
        Ownable,
        ERC721Holder,
        ReentrancyGuard

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]


```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="NC-26"></a> 
### [NC-26] Large or complicated code bases should implement invariant tests
This includes: large code bases, or code with lots of inline-assembly, complicated math, or complicated interactions between multiple contracts. Invariant fuzzers such as Echidna require the test writer to come up with invariants which should not be violated under any circumstances, and the fuzzer tests various inputs and function calls to ensure that the invariants always hold. Even code with 100% code coverage can still have bugs due to the order of the operations a user performs, and invariant fuzzers may help significantly.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/)]



<a name="NC-27"></a> 
### [NC-27] Missing disallow list for `ERC721`
Recently, there has been an increase in the theft of NFTs. These stolen NFTs are then added to platforms where they can be easily converted into liquidity.

Some popular marketplaces(e.g. Opensea), have already taken steps to combat this problem by introducing a disallow list feature. This means that if an NFT is reported as stolen, it won't be listed or sold on their platform. This may increase the centralization of the project, but it can help solve this problem if it is a concern.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]


```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="NC-28"></a> 
### [NC-28] Named mappings are recommended
[Named mappings](https://docs.soliditylang.org/en/v0.8.18/types.html#mapping-types) (with syntax `mapping(KeyType KeyName? => ValueType ValueName?)`) are recommended.It can make the mapping variables clearer, more readable and easier to maintain.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

65:     mapping(address => bool) public HolderAllowlist;

```
*Github:* [[65](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L65)]



<a name="NC-29"></a> 
### [NC-29] Named imports of parent contracts are missing

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `ERC20`
/// @audit `ERC20Burnable`
/// @audit `Ownable`
/// @audit `ERC721Holder`
/// @audit `ReentrancyGuard`
29: contract LiquidInfrastructureERC20 is

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit `ERC721`
/// @audit `OwnableApprovableERC721`
33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]


```solidity
File: contracts/OwnableApprovableERC721.sol

/// @audit `Context`
/// @audit `ERC721`
20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="NC-30"></a> 
### [NC-30] Missing NatSpec from contract/error/event/function/modifier declarations
e.g. `@dev` or `@notice`, and it must appear above the contract definition braces in order to be identified by the compiler as NatSpec.

<details>
<summary>
There are <b>19</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

36:     event Deployed();

37:     event DistributionStarted();

38:     event Distribution(address recipient, address[] tokens, uint256[] amounts);

39:     event DistributionFinished();

40:     event WithdrawalStarted();

41:     event Withdrawal(address source);

42:     event WithdrawalFinished();

43:     event AddManagedNFT(address nft);

44:     event ReleaseManagedNFT(address nft, address to);

151:     function _beforeMintOrBurn() internal view {

184:     function distributeToAllHolders() public {

243:     function _isPastMinDistributionPeriod() internal view returns (bool) {

257:     function _beginDistribution() internal {

286:     function _endDistribution() internal {

351:     function withdrawFromAllManagedNFTs() public {

```
*Github:* [[36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L37), [38](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L38), [39](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L39), [40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L40), [41](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L41), [42](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L42), [43](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L43), [44](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L44), [151](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L151), [184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L184), [243](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L243), [257](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L257), [286](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L286), [351](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L351)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

34:     event SuccessfulWithdrawal(address to, address[] erc20s, uint256[] amounts);

35:     event TryRecover();

36:     event SuccessfulRecovery(address[] erc20s, uint256[] amounts);

37:     event ThresholdsChanged(address[] newErc20s, uint256[] newAmounts);

```
*Github:* [[34](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L34), [35](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L35), [36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L37)]


</details>


<a name="NC-31"></a> 
### [NC-31] Missing NatSpec `@author` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@author` notation to improve the code documentation.

*There is one instance of this issue:*
```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="NC-32"></a> 
### [NC-32] Missing NatSpec `@dev` from contract/event/function/modifier declarations
Some contract definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

<details>
<summary>
There are <b>35</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

36:     event Deployed();

37:     event DistributionStarted();

38:     event Distribution(address recipient, address[] tokens, uint256[] amounts);

39:     event DistributionFinished();

40:     event WithdrawalStarted();

41:     event Withdrawal(address source);

42:     event WithdrawalFinished();

43:     event AddManagedNFT(address nft);

44:     event ReleaseManagedNFT(address nft, address to);

96:     function isApprovedHolder(address account) public view returns (bool) {

106:     function approveHolder(address holder) public onlyOwner {

116:     function disapproveHolder(address holder) public onlyOwner {

127:     function _beforeTokenTransfer(

151:     function _beforeMintOrBurn() internal view {

164:     function _afterTokenTransfer(

184:     function distributeToAllHolders() public {

198:     function distribute(uint256 numDistributions) public nonReentrant {

243:     function _isPastMinDistributionPeriod() internal view returns (bool) {

257:     function _beginDistribution() internal {

286:     function _endDistribution() internal {

303:     function mintAndDistribute(

318:     function mint(

331:     function burnAndDistribute(uint256 amount) public {

344:     function burnFromAndDistribute(address account, uint256 amount) public {

351:     function withdrawFromAllManagedNFTs() public {

359:     function withdrawFromManagedNFTs(uint256 numWithdrawals) public {

394:     function addManagedNFT(address nftContract) public onlyOwner {

413:     function releaseManagedNFT(

441:     function setDistributableERC20s(

456:     constructor(

```
*Github:* [[36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L37), [38](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L38), [39](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L39), [40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L40), [41](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L41), [42](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L42), [43](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L43), [44](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L44), [96](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L96), [106](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L106), [116](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L116), [127](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L127), [151](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L151), [164](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L164), [184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L184), [198](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L198), [243](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L243), [257](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L257), [286](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L286), [303](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L303), [318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318), [331](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L331), [344](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L344), [351](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L351), [359](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L359), [394](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L394), [413](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L413), [441](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L441), [456](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L456)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

34:     event SuccessfulWithdrawal(address to, address[] erc20s, uint256[] amounts);

35:     event TryRecover();

36:     event SuccessfulRecovery(address[] erc20s, uint256[] amounts);

37:     event ThresholdsChanged(address[] newErc20s, uint256[] newAmounts);

62:     constructor(

```
*Github:* [[34](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L34), [35](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L35), [36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L37), [62](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L62)]


</details>


<a name="NC-33"></a> 
### [NC-33] Missing NatSpec `@notice` from contract/event/function/modifier declarations
Some contract definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

<details>
<summary>
There are <b>34</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is

36:     event Deployed();

37:     event DistributionStarted();

38:     event Distribution(address recipient, address[] tokens, uint256[] amounts);

39:     event DistributionFinished();

40:     event WithdrawalStarted();

41:     event Withdrawal(address source);

42:     event WithdrawalFinished();

43:     event AddManagedNFT(address nft);

44:     event ReleaseManagedNFT(address nft, address to);

96:     function isApprovedHolder(address account) public view returns (bool) {

116:     function disapproveHolder(address holder) public onlyOwner {

127:     function _beforeTokenTransfer(

151:     function _beforeMintOrBurn() internal view {

164:     function _afterTokenTransfer(

184:     function distributeToAllHolders() public {

243:     function _isPastMinDistributionPeriod() internal view returns (bool) {

257:     function _beginDistribution() internal {

286:     function _endDistribution() internal {

351:     function withdrawFromAllManagedNFTs() public {

359:     function withdrawFromManagedNFTs(uint256 numWithdrawals) public {

441:     function setDistributableERC20s(

456:     constructor(

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29), [36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L37), [38](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L38), [39](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L39), [40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L40), [41](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L41), [42](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L42), [43](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L43), [44](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L44), [96](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L96), [116](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L116), [127](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L127), [151](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L151), [164](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L164), [184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L184), [243](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L243), [257](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L257), [286](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L286), [351](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L351), [359](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L359), [441](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L441), [456](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L456)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

34:     event SuccessfulWithdrawal(address to, address[] erc20s, uint256[] amounts);

35:     event TryRecover();

36:     event SuccessfulRecovery(address[] erc20s, uint256[] amounts);

37:     event ThresholdsChanged(address[] newErc20s, uint256[] newAmounts);

62:     constructor(

84:     function getThresholds()

170:     function _withdrawBalancesTo(

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33), [34](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L34), [35](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L35), [36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L37), [62](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L62), [84](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L84), [170](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L170)]


```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

24:     modifier onlyOwner(uint256 tokenId) {

35:     modifier onlyOwnerOrApproved(uint256 tokenId) {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20), [24](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L24), [35](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L35)]


</details>


<a name="NC-34"></a> 
### [NC-34] Missing NatSpec `@param` from event/function/modifier declarations
Some event definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

<details>
<summary>
There are <b>14</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

38:     event Distribution(address recipient, address[] tokens, uint256[] amounts);

41:     event Withdrawal(address source);

43:     event AddManagedNFT(address nft);

44:     event ReleaseManagedNFT(address nft, address to);

/// @audit missing @param for `account`
/// @audit missing @param for `amount`
303:     function mintAndDistribute(
             address account,
             uint256 amount
         ) public onlyOwner {

/// @audit missing @param for `account`
/// @audit missing @param for `amount`
318:     function mint(
             address account,
             uint256 amount
         ) public onlyOwner nonReentrant {

/// @audit missing @param for `amount`
331:     function burnAndDistribute(uint256 amount) public {

/// @audit missing @param for `account`
/// @audit missing @param for `amount`
344:     function burnFromAndDistribute(address account, uint256 amount) public {

/// @audit missing @param for `_minDistributionPeriod`
456:     constructor(
             string memory _name,
             string memory _symbol,
             address[] memory _managedNFTs,
             address[] memory _approvedHolders,
             uint256 _minDistributionPeriod,
             address[] memory _distributableErc20s
         ) ERC20(_name, _symbol) Ownable() {

```
*Github:* [[38](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L38), [41](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L41), [43](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L43), [44](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L44), [303](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L303), [318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318), [331](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L331), [344](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L344), [456](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L456)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

34:     event SuccessfulWithdrawal(address to, address[] erc20s, uint256[] amounts);

36:     event SuccessfulRecovery(address[] erc20s, uint256[] amounts);

37:     event ThresholdsChanged(address[] newErc20s, uint256[] newAmounts);

```
*Github:* [[34](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L34), [36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L37)]


```solidity
File: contracts/OwnableApprovableERC721.sol

24:     modifier onlyOwner(uint256 tokenId) {

35:     modifier onlyOwnerOrApproved(uint256 tokenId) {

```
*Github:* [[24](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L24), [35](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L35)]


</details>


<a name="NC-35"></a> 
### [NC-35] Missing NatSpec `@return` from function declaration
Some function definitions have an incomplete NatSpec: add a `@return` notation to improve the code documentation.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

96:     function isApprovedHolder(address account) public view returns (bool) {

243:     function _isPastMinDistributionPeriod() internal view returns (bool) {

```
*Github:* [[96](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L96), [243](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L243)]



<a name="NC-36"></a> 
### [NC-36] Missing NatSpec `@title` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@title` notation to improve the code documentation.

*There is one instance of this issue:*
```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="NC-37"></a> 
### [NC-37] There is no need to initialize variables with 0
Since the variables are automatically set to 0 when created, it is redundant to initialize it with 0 again.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="NC-38"></a> 
### [NC-38] Put all system-wide constants in one file
Putting all the system-wide constants in a single file improves code readability, makes it easier to understand the basic configuration and limitations of the system, and makes maintenance easier.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

54:     uint256 public constant Version = 1;

```
*Github:* [[54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

46:     uint256 public constant Version = 1;

53:     uint256 public constant AccountId = 1;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L46), [53](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L53)]



<a name="NC-39"></a> 
### [NC-39] Redundant inheritance specifier
The contracts below already extend the specified contract, so there is no need to list it in the inheritance list again.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit no need for LiquidInfrastructureNFT to inherit from ERC721, OwnableApprovableERC721 is already inherited from ERC721
33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]



<a name="NC-40"></a> 
### [NC-40] Setters should prevent re-setting the same value
Not only is wasteful in terms of gas, but this is especially problematic when an event is emitted and the old and new values set are the same, as listeners might not expect this kind of scenario.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

444:         distributableERC20s = _distributableERC20s;

```
*Github:* [[444](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L444)]



<a name="NC-41"></a> 
### [NC-41] The `nonReentrant` modifier should occur before all other modifiers
This is a best-practice to protect against reentrancy in other modifiers.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

318:     function mint(
             address account,
             uint256 amount
         ) public onlyOwner nonReentrant {

413:     function releaseManagedNFT(
             address nftContract,
             address to
         ) public onlyOwner nonReentrant {

```
*Github:* [[318](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L318), [413](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L413)]



<a name="NC-42"></a> 
### [NC-42] Unused `event` definition
Note that there may be cases where an event superficially appears to be used, but this is only because there are multiple definitions of the event in different files. In such cases, the event definition should be moved into a separate file. The instances below are the unused definitions.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureNFT.sol

36:     event SuccessfulRecovery(address[] erc20s, uint256[] amounts);

```
*Github:* [[36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L36)]



<a name="NC-43"></a> 
### [NC-43] Unused arguments should be removed or implemented
Some arguments are never used: if this is intentional, consider removing these arguments from the function. Otherwise, implement the missing logic accordingly.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `amount`
127:     function _beforeTokenTransfer(

/// @audit `amount`
164:     function _afterTokenTransfer(

```
*Github:* [[127](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L127), [164](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L164)]



<a name="NC-44"></a> 
### [NC-44] Unused contract variables
The following state variables are defined but not used. It is recommended to check the code for logical omissions that cause them not to be used. If it's determined that they are not needed anywhere, it's best to remove them from the codebase to improve code clarity and minimize confusion.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

54:     uint256 public constant Version = 1;

```
*Github:* [[54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

46:     uint256 public constant Version = 1;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L46)]



<a name="NC-45"></a> 
### [NC-45] Consider using `delete` rather than assigning zero/false to clear values
The `delete` keyword more closely matches the semantics of what is being done, and draws more attention to the changing of state, which may lead to a more thorough audit of its associated logic.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

118:         HolderAllowlist[holder] = false;

```
*Github:* [[118](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L118)]



<a name="NC-46"></a> 
### [NC-46] Expressions for constant values should use `immutable` rather than `constant`
While it doesn't save any gas because the compiler knows that developers often make this mistake, it's still best to use the right tool for the task at hand. There is a difference between `constant` variables and `immutable` variables, and they should each be used in their appropriate contexts. `constants` should be used for literal values written into the code, and `immutable` variables should be used for expressions, or values calculated in, or passed into the constructor.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

54:     uint256 public constant Version = 1;

```
*Github:* [[54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

46:     uint256 public constant Version = 1;

53:     uint256 public constant AccountId = 1;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L46), [53](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L53)]



<a name="NC-47"></a> 
### [NC-47] Upgrade `openzeppelin` to the latest version (`5.0.1`)
These contracts import contracts from openzeppelin contracts but they are not using the latest version. For more information, please visit: [OpenZeppelin GitHub Releases](https://github.com/OpenZeppelin/openzeppelin-contracts/releases) It is recommended to always use the latest version to take advantage of updates and security fixes.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/)]



<a name="NC-48"></a> 
### [NC-48] Use the latest solidity version for deployment (`0.8.24`)
Upgrading to a newer Solidity release can optimize gas usage, take advantage of new features and improve overall contract efficiency. Where possible, based on compatibility requirements, it is recommended to use newer/latest solidity version to take advantage of the latest optimizations and features.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

2: pragma solidity 0.8.12; // Force solidity compliance

```
*Github:* [[2](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L2)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

2: pragma solidity 0.8.12; // Force solidity compliance

```
*Github:* [[2](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L2)]


```solidity
File: contracts/OwnableApprovableERC721.sol

2: pragma solidity 0.8.12; // Force solidity compliance

```
*Github:* [[2](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L2)]



<a name="NC-49"></a> 
### [NC-49] Use the Modern Upgradeable Contract Paradigm
Modern smart contract development often employs upgradeable contract structures, utilizing proxy patterns like OpenZeppelins Upgradeable Contracts. This paradigm separates logic and state, allowing developers to amend and enhance the contract's functionality without altering its state or the deployed contract address. Transitioning to this approach enhances long-term maintainability.

Resolution: Adopt a well-established proxy pattern for upgradeability, ensuring proper initialization and employing transparent proxies to mitigate potential risks. Embrace comprehensive testing and audit practices, particularly when updating contract logic, to ensure state consistency and security are preserved across upgrades. This ensures your contract remains robust and adaptable to future requirements.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

29: contract LiquidInfrastructureERC20 is

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]


```solidity
File: contracts/OwnableApprovableERC721.sol

20: abstract contract OwnableApprovableERC721 is Context, ERC721 {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L20)]



<a name="NC-50"></a> 
### [NC-50] Use of `override` is unnecessary
Starting with Solidity version [0.8.8](https://docs.soliditylang.org/en/v0.8.20/contracts.html#function-overriding), using the `override` keyword when the function solely overrides an interface function, and the function doesn't exist in multiple base contracts, is unnecessary.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

131:     ) internal virtual override {

168:     ) internal virtual override {

```
*Github:* [[131](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L131), [168](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L168)]



<a name="NC-51"></a> 
### [NC-51] Whitespace in Expressions
See the [Whitespace in Expressions](https://docs.soliditylang.org/en/latest/style-guide.html#whitespace-in-expressions) section of the Solidity Style Guide.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

376:             (address[] memory withdrawERC20s, ) = withdrawFrom.getThresholds();

```
*Github:* [[376](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L376)]



<a name="NC-52"></a> 
### [NC-52] Names of `private`/`internal` state variables should be prefixed with an underscore
It is recommended by the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.20/style-guide.html#underscore-prefix-for-non-external-functions-and-variables)

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

46:     address[] private distributableERC20s;

47:     uint256[] private erc20EntitlementPerUnit;

48:     address[] private holders;

85:     uint256 internal nextDistributionRecipient;

90:     uint256 private nextWithdrawal;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L46), [47](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L47), [48](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L48), [85](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L85), [90](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L90)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

39:     address[] private thresholdErc20s;

40:     uint256[] private thresholdAmounts;

```
*Github:* [[39](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L39), [40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L40)]



<a name="NC-53"></a> 
### [NC-53] Internal function calls within for loops
Making function calls or external calls within loops in Solidity can lead to inefficient gas usage, potential bottlenecks, and increased vulnerability to attacks. Each function call or external call consumes gas, and when executed within a loop, the gas cost multiplies, potentially causing the transaction to run out of gas or exceed block gas limits. This can result in transaction failure or unpredictable behavior.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `isApprovedHolder`
467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]



<a name="NC-54"></a> 
### [NC-54] Variables should be named in mixedCase style
As the [Solidity Style Guide](https://docs.soliditylang.org/en/latest/style-guide.html#naming-styles) suggests: `arguments`, `local variables` and `mutable state variables` should be named in mixedCase style.

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `ManagedNFTs`
60:     address[] public ManagedNFTs;

/// @audit `HolderAllowlist`
65:     mapping(address => bool) public HolderAllowlist;

/// @audit `LastDistribution`
70:     uint256 public LastDistribution;

/// @audit `MinDistributionPeriod`
75:     uint256 public MinDistributionPeriod;

/// @audit `LockedForDistribution`
80:     bool public LockedForDistribution;

```
*Github:* [[60](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L60), [65](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L65), [70](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L70), [75](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L75), [80](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L80)]



<a name="NC-55"></a> 
### [NC-55] Event is missing `indexed` fields
Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

38:     event Distribution(address recipient, address[] tokens, uint256[] amounts);

41:     event Withdrawal(address source);

43:     event AddManagedNFT(address nft);

44:     event ReleaseManagedNFT(address nft, address to);

```
*Github:* [[38](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L38), [41](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L41), [43](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L43), [44](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L44)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

34:     event SuccessfulWithdrawal(address to, address[] erc20s, uint256[] amounts);

36:     event SuccessfulRecovery(address[] erc20s, uint256[] amounts);

37:     event ThresholdsChanged(address[] newErc20s, uint256[] newAmounts);

```
*Github:* [[34](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L34), [36](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L36), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L37)]



<a name="NC-56"></a> 
### [NC-56] Functions not used internally could be marked `external`

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

106:     function approveHolder(address holder) public onlyOwner {

116:     function disapproveHolder(address holder) public onlyOwner {

303:     function mintAndDistribute(

331:     function burnAndDistribute(uint256 amount) public {

344:     function burnFromAndDistribute(address account, uint256 amount) public {

351:     function withdrawFromAllManagedNFTs() public {

394:     function addManagedNFT(address nftContract) public onlyOwner {

413:     function releaseManagedNFT(

441:     function setDistributableERC20s(

```
*Github:* [[106](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L106), [116](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L116), [303](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L303), [331](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L331), [344](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L344), [351](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L351), [394](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L394), [413](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L413), [441](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L441)]




## Gas Optimizations

<a name="GAS-1"></a> 
### [GAS-1] Avoid Using `_msgSender()` if not Supporting EIP-2771
From a gas efficiency perspective, using `_msgSender()` in a contract not intended to support EIP-2771 could add unnecessary overhead. The _msgSender() function includes checks to determine if the transaction was forwarded, which involves extra function calls that consume more gas than a simple msg.sender.

If a contract doesn't require EIP-2771 meta-transaction support, using msg.sender directly is more gas efficient. msg.sender is a globally accessible variable in Solidity that doesn't require an extra function call, making it a less costly choice.

In the context of Ethereum, where every operation has a gas cost, it's crucial to eliminate unnecessary computations to optimize contract execution and minimize transaction fees. Therefore, if EIP-2771 support isn't necessary, it's recommended to use msg.sender instead of _msgSender().

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureNFT.sol

137:             _isApprovedOrOwner(_msgSender(), AccountId),

158:             _isApprovedOrOwner(_msgSender(), AccountId),

```
*Github:* [[137](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L137), [158](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L158)]


```solidity
File: contracts/OwnableApprovableERC721.sol

26:             ERC721(this).ownerOf(tokenId) == _msgSender(),

37:         if (_isApprovedOrOwner(_msgSender(), tokenId)) {

```
*Github:* [[26](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L26), [37](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L37)]



<a name="GAS-2"></a> 
### [GAS-2] Optimize gas by using do-while loops
Using `do-while` loops instead of `for` loops can be more gas-efficient. Even if you add an `if` condition to account for the case where the loop doesn't execute at all, a `do-while` loop can still be cheaper in terms of gas.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

214:         for (i = nextDistributionRecipient; i < limit; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

371:         for (i = nextWithdrawal; i < limit; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [214](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L214), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [371](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L371), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="GAS-3"></a> 
### [GAS-3] Consider activating via-ir for deploying
By using `--via-ir` or `{"viaIR": true}`, the compiler is able to use more advanced [multi-function optimizations](https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html#solidity-ir-based-codegen-changes), for extra gas savings.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/)]



<a name="GAS-4"></a> 
### [GAS-4] Counting down in for statements is more gas efficient
Looping downwards in Solidity is more gas efficient due to how the EVM compares variables. In a 'for' loop that counts down, the end condition is usually to compare with zero, which is cheaper than comparing with another number. As such, restructure your loops to count downwards where possible.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

214:         for (i = nextDistributionRecipient; i < limit; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

371:         for (i = nextWithdrawal; i < limit; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [214](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L214), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [371](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L371), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="GAS-5"></a> 
### [GAS-5] Divisions can be `unchecked` to save gas
The expression `type(int).min/(-1)` is the only case where division causes an overflow. Therefore, uncheck can be used to [save gas](https://gist.github.com/DadeKuma/3bc597338ae774b8b3bd43280d55271f) in scenarios where it is certain that such an overflow will not occur.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

275:             uint256 entitlement = balance / supply;

```
*Github:* [[275](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L275)]



<a name="GAS-6"></a> 
### [GAS-6] Don't transfer with zero amount to save gas
In Solidity, unnecessary operations can waste gas. For example, a transfer function without a zero amount check uses gas even if called with a zero amount, since the contract state remains unchanged. Implementing a zero amount check avoids these unnecessary function calls, saving gas and improving efficiency.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureNFT.sol

179:                 bool result = IERC20(erc20).transfer(destination, balance);

```
*Github:* [[179](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L179)]



<a name="GAS-7"></a> 
### [GAS-7] Events should be emitted outside of loops
Emitting an event has an overhead of 375 gas, which will be incurred on every iteration of the loop. It is cheaper to emit only once after the loop has finished.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

229:                 emit Distribution(recipient, distributableERC20s, receipts);

378:             emit Withdrawal(address(withdrawFrom));

```
*Github:* [[229](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L229), [378](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L378)]



<a name="GAS-8"></a> 
### [GAS-8] Increments can be `unchecked` to save gas
Using `unchecked` increments can save gas by bypassing the built-in overflow checks. This can save 30-40 gas per iteration. So it is recommended to use unchecked increments when overflow is not possible.

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

214:         for (i = nextDistributionRecipient; i < limit; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

371:         for (i = nextWithdrawal; i < limit; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [214](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L214), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [371](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L371), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="GAS-9"></a> 
### [GAS-9] Inline `modifier`s that are only used once, to save gas

*There is one instance of this issue:*
```solidity
File: contracts/OwnableApprovableERC721.sol

35:     modifier onlyOwnerOrApproved(uint256 tokenId) {

```
*Github:* [[35](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L35)]



<a name="GAS-10"></a> 
### [GAS-10] `internal` functions only called once can be inlined to save gas
If an `internal` function is only used once, there is no need to modularize it, unless the function calling it would otherwise be too long and complex. Not inlining costs 20 to 40 gas because of two extra JUMP instructions and additional stack operations needed for function calls.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `_beforeMintOrBurn` is used only once
151:     function _beforeMintOrBurn() internal view {

/// @audit `_beginDistribution` is used only once
257:     function _beginDistribution() internal {

/// @audit `_endDistribution` is used only once
286:     function _endDistribution() internal {

```
*Github:* [[151](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L151), [257](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L257), [286](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L286)]



<a name="GAS-11"></a> 
### [GAS-11] Multiple accesses of the same mapping/array key/index should be cached
The instances below point to the second+ access of a value inside a mapping/array, within a function. Caching a mapping's value in a local `storage` or `calldata` variable when the value is accessed [multiple times](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0), saves ~42 gas per access due to not having to recalculate the key's keccak256 hash (Gkeccak256 - 30 gas) and that calculation's associated stack operations. Caching an array's struct avoids recalculating the array offsets into memory/calldata

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `holders[i]` is also accessed on line 172
174:                     holders[i] = holders[holders.length - 1];

/// @audit `ManagedNFTs[i]` is also accessed on line 422
425:                 ManagedNFTs[i] = ManagedNFTs[ManagedNFTs.length - 1];

```
*Github:* [[174](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L174), [425](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L425)]



<a name="GAS-12"></a> 
### [GAS-12] Operator `>=`/`<=` costs less gas than operator `>`/`<`
The compiler uses opcodes `GT` and `ISZERO` for code that uses `>`, but only requires `LT` for `>=`. A similar behavior applies for `>`, which uses opcodes `LT` and `ISZERO`, but only requires `GT` for `<=`. It can save 3 gas for each. It should be converted to the `<=`/`>=` equivalent when comparing against integer literals.

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

186:         if (num > 0) {

199:         require(numDistributions > 0, "must process at least 1 distribution");

214:         for (i = nextDistributionRecipient; i < limit; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

265:         if (erc20EntitlementPerUnit.length > 0) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

371:         for (i = nextWithdrawal; i < limit; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [186](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L186), [199](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L199), [214](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L214), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [265](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L265), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [371](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L371), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

178:             if (balance > 0) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175), [178](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L178)]


</details>


<a name="GAS-13"></a> 
### [GAS-13] Optimize names to save gas
`public`/`external` function names and `public` member variable names can be optimized to save gas. See this [link](https://gist.github.com/IllIllI000/a5d8b486a8259f9f77891a919febd1a9) for an example of how it works. Below are the interfaces/abstract contracts that can be optimized so that the most frequently-called functions use the least amount of gas possible during method lookup. Method IDs that have two leading zero bytes can save 128 gas each during deployment, and renaming functions to have lower method IDs will save 22 gas per call, [per sorted position shifted](https://medium.com/joyso/solidity-how-does-function-name-affect-gas-consumption-in-smart-contract-47d270d8ac92)

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `isApprovedHolder`, `approveHolder`, `disapproveHolder`, `distributeToAllHolders`, `distribute`, `mintAndDistribute`, `mint`, `burnAndDistribute`, `burnFromAndDistribute`, `withdrawFromAllManagedNFTs`, `withdrawFromManagedNFTs`, `addManagedNFT`, `releaseManagedNFT`, `setDistributableERC20s`
29: contract LiquidInfrastructureERC20 is

```
*Github:* [[29](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L29)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit `getThresholds`, `setThresholds`, `withdrawBalances`, `withdrawBalancesTo`, `recoverAccount`
33: contract LiquidInfrastructureNFT is ERC721, OwnableApprovableERC721 {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L33)]



<a name="GAS-14"></a> 
### [GAS-14] Remove or replace unused state variables
Saves a storage slot. If the variable is assigned a non-zero value, saves Gsset (20000 gas). If it's assigned a zero value, saves Gsreset (2900 gas). If the variable remains unassigned, there is no gas savings unless the variable is `public`, in which case the compiler-generated non-payable getter deployment cost is saved. If the state variable is overriding an interface's public function, mark the variable as `constant` or `immutable` so that it does not use a storage slot.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

54:     uint256 public constant Version = 1;

```
*Github:* [[54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

46:     uint256 public constant Version = 1;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L46)]



<a name="GAS-15"></a> 
### [GAS-15] `require()`/`revert()` strings longer than 32 bytes cost extra gas
Each extra memory word of bytes past the original 32 [incurs an MSTORE](https://gist.github.com/hrkrshnn/ee8fabd532058307229d65dcd5836ddc#consider-having-short-revert-strings) which costs 3 gas

*There are <b>10</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

152:         require(
                 !_isPastMinDistributionPeriod(),
                 "must distribute before minting or burning"

199:         require(numDistributions > 0, "must process at least 1 distribution");

258:         require(
                 !LockedForDistribution,
                 "cannot begin distribution when already locked"

287:         require(
                 LockedForDistribution,
                 "cannot end distribution when not locked"

360:         require(!LockedForDistribution, "cannot withdraw during distribution");

397:         require(
                 nftOwner == address(this),
                 "this contract does not own the new ManagedNFT"

431:         require(true, "unable to find released NFT in ManagedNFTs");

```
*Github:* [[152](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L152), [199](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L199), [258](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L258), [287](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L287), [360](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L360), [397](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L397), [431](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L431)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

112:         require(
                 newErc20s.length == newAmounts.length,
                 "threshold values must have the same length"

136:         require(
                 _isApprovedOrOwner(_msgSender(), AccountId),
                 "caller is not the owner of the Account token and is not approved either"

157:         require(
                 _isApprovedOrOwner(_msgSender(), AccountId),
                 "caller is not the owner of the Account token and is not approved either"

```
*Github:* [[112](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L112), [136](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L136), [157](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L157)]



<a name="GAS-16"></a> 
### [GAS-16] State variables access within a loop
State variable reads and writes are more expensive than local variable reads and writes. Therefore, it is recommended to replace state variable reads and writes within loops with a local variable. Gas savings should be multiplied by the average loop length.

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `holders`
171:             for (uint i = 0; i < holders.length; i++) {

/// @audit `holders`
174:                     holders[i] = holders[holders.length - 1];

/// @audit `holders`
175:                     holders.pop();

/// @audit `distributableERC20s`
218:                     distributableERC20s.length

/// @audit `distributableERC20s`
220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

/// @audit `distributableERC20s`
220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

/// @audit `distributableERC20s`
271:         for (uint i = 0; i < distributableERC20s.length; i++) {

/// @audit `erc20EntitlementPerUnit`
276:             erc20EntitlementPerUnit.push(entitlement);

/// @audit `ManagedNFTs`
421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

/// @audit `ManagedNFTs`
425:                 ManagedNFTs[i] = ManagedNFTs[ManagedNFTs.length - 1];

/// @audit `ManagedNFTs`
426:                 ManagedNFTs.pop();

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [174](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L174), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L175), [218](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L218), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [276](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L276), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [425](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L425), [426](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L426)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit `thresholdErc20s`
121:             thresholdErc20s.push(newErc20s[i]);

/// @audit `thresholdAmounts`
122:             thresholdAmounts.push(newAmounts[i]);

```
*Github:* [[121](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L121), [122](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L122)]


</details>


<a name="GAS-17"></a> 
### [GAS-17] State variables only set in the constructor should be declared immutable
Accessing state variables within a function involves an `SLOAD` operation, but `immutable` variables can be accessed directly without the need of it, thus reducing gas costs. As these state variables are assigned only in the constructor, consider declaring them `immutable`.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

60:     address[] public ManagedNFTs;

75:     uint256 public MinDistributionPeriod;

```
*Github:* [[60](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L60), [75](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L75)]



<a name="GAS-18"></a> 
### [GAS-18] Optimize external calls with assembly for memory efficiency
Using interfaces to make external contract calls in Solidity is convenient but can be inefficient in terms of memory utilization. Each such call involves creating a new memory location to store the data being passed, thus incurring memory expansion costs.

Inline assembly allows for optimized memory usage by re-using already allocated memory spaces or using the scratch space for smaller datasets. This can result in notable gas savings, especially for contracts that make frequent external calls.

Additionally, using inline assembly enables important safety checks like verifying if the target address has code deployed to it using `extcodesize(addr)` before making the call, mitigating risks associated with contract interactions.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `.withdrawBalancesTo(...)`
377:             withdrawFrom.withdrawBalancesTo(withdrawERC20s, address(this));

/// @audit `.AccountId(...)`
418:         nft.transferFrom(address(this), to, nft.AccountId());

/// @audit `.transferFrom(...)`
418:         nft.transferFrom(address(this), to, nft.AccountId());

```
*Github:* [[377](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L377), [418](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L418), [418](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L418)]



<a name="GAS-19"></a> 
### [GAS-19] Use assembly to emit events
To efficiently emit events, it's possible to utilize assembly by making use of scratch space and the free memory pointer. This approach has the advantage of potentially avoiding the costs associated with memory expansion.

However, it's important to note that in order to safely optimize this process, it is preferable to cache and restore the free memory pointer.

A good example of such practice can be seen in [Solady's](https://github.com/Vectorized/solady/blob/main/src/tokens/ERC1155.sol#L167) codebase.

<details>
<summary>
There are <b>12</b> instances (click to show):
</summary>

```solidity
File: contracts/LiquidInfrastructureERC20.sol

229:                 emit Distribution(recipient, distributableERC20s, receipts);

280:         emit DistributionStarted();

294:         emit DistributionFinished();

363:             emit WithdrawalStarted();

378:             emit Withdrawal(address(withdrawFrom));

384:             emit WithdrawalFinished();

402:         emit AddManagedNFT(nftContract);

433:         emit ReleaseManagedNFT(nftContract, to);

475:         emit Deployed();

```
*Github:* [[229](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L229), [280](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L280), [294](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L294), [363](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L363), [378](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L378), [384](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L384), [402](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L402), [433](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L433), [475](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L475)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

124:         emit ThresholdsChanged(newErc20s, newAmounts);

184:         emit SuccessfulWithdrawal(destination, erc20s, amounts);

204:         emit TryRecover();

```
*Github:* [[124](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L124), [184](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L184), [204](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L204)]


</details>


<a name="GAS-20"></a> 
### [GAS-20] Use local variables for emitting
Use the function/modifier's local copy of the state variable, rather than incurring an extra Gwarmaccess (100 gas). In the unlikely event that the state variable hasn't already been used by the function/modifier, consider whether it is really necessary to include it in the event, given the fact that it incurs a Gcoldsload (2100 gas), or whether it can be passed in to or back out of the functions that do use it

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit `distributableERC20s`
229:                 emit Distribution(recipient, distributableERC20s, receipts);

```
*Github:* [[229](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L229)]



<a name="GAS-21"></a> 
### [GAS-21] Use a more recent version of solidity
- Use a solidity version of at least 0.8.2 to get simple compiler automatic inlining.
- Use a solidity version of at least 0.8.3 to get better struct packing and cheaper multiple storage reads.
- Use a solidity version of at least 0.8.4 to get custom errors, which are cheaper at deployment than revert()/require() strings.
- Use a solidity version of at least 0.8.10 to have external calls skip contract existence checks if the external call has a return value.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

2: pragma solidity 0.8.12; // Force solidity compliance

```
*Github:* [[2](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L2)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

2: pragma solidity 0.8.12; // Force solidity compliance

```
*Github:* [[2](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L2)]


```solidity
File: contracts/OwnableApprovableERC721.sol

2: pragma solidity 0.8.12; // Force solidity compliance

```
*Github:* [[2](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L2)]



<a name="GAS-22"></a> 
### [GAS-22] Use != 0 instead of > 0
Replace spotted instances with != 0 for uints as this uses less gas.

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

186:         if (num > 0) {

199:         require(numDistributions > 0, "must process at least 1 distribution");

265:         if (erc20EntitlementPerUnit.length > 0) {

```
*Github:* [[186](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L186), [199](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L199), [265](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L265)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

178:             if (balance > 0) {

```
*Github:* [[178](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L178)]



<a name="GAS-23"></a> 
### [GAS-23] Use solady library where possible to save gas
The following OpenZeppelin imports have a Solady equivalent, as such they can be used to save GAS as Solady modules have been specifically designed to be as GAS efficient as possible

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

5: import "@openzeppelin/contracts/access/Ownable.sol";

6: import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

7: import "@openzeppelin/contracts/token/ERC20/ERC20.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L5), [6](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L6), [7](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L7)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

4: import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

```
*Github:* [[4](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L4)]



<a name="GAS-24"></a> 
### [GAS-24] Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes
Avoids a Gsset (20000 gas) when changing from false to true, after having been true in the past. Since most of the bools aren't changed twice in one transaction, I've counted the amount of gas as half of the full amount, for each variable.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

65:     mapping(address => bool) public HolderAllowlist;

80:     bool public LockedForDistribution;

```
*Github:* [[65](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L65), [80](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L80)]



<a name="GAS-25"></a> 
### [GAS-25] Using bitmap to store bool states can save gas
Using a bitmap instead of a bool array or a bool mapping to store boolean states can save gas fees. This is because the bitmap can store 256 boolean values in a single slot instead of 256 slots, which can save gas when writing bool values or when reading multiple bool values from the same slot.

*There is one instance of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

65:     mapping(address => bool) public HolderAllowlist;

```
*Github:* [[65](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L65)]



<a name="GAS-26"></a> 
### [GAS-26] Using `this` to access functions results in an external call, wasting gas
External calls have an overhead of 100 gas, which can be avoided by not referencing the function using `this`. Contracts are allowed to override their parents' functions and change the visibility from `external` to `public`, so make this change if it's required in order to call the function internally.

*There is one instance of this issue:*
```solidity
File: contracts/OwnableApprovableERC721.sol

26:             ERC721(this).ownerOf(tokenId) == _msgSender(),

```
*Github:* [[26](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L26)]



<a name="GAS-27"></a> 
### [GAS-27] Using bools for storage incurs overhead
Use uint256(1) and uint256(2) for true/false to avoid a Gwarmaccess (100 gas), and to avoid Gsset (20000 gas) when changing from false to true, after having been true in the past. See [source](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/58f635312aa21f947cae5f8578638a85aa2519f5/contracts/security/ReentrancyGuard.sol#L23-L27).

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

65:     mapping(address => bool) public HolderAllowlist;

80:     bool public LockedForDistribution;

```
*Github:* [[65](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L65), [80](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L80)]



<a name="GAS-28"></a> 
### [GAS-28] Cache array length outside of loop
If not cached, the solidity compiler will always read the length of the array during each iteration. That is, if it is a storage array, this is an extra sload operation (100 additional extra gas for each iteration except for the first) and if it is a memory array, this is an extra mload operation (3 additional gas for each iteration except for the first).

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="GAS-29"></a> 
### [GAS-29] State variables should be cached in stack variables rather than re-reading them from storage
The instances below point to the second+ access of a state variable within a function. Caching of a state variable replaces each Gwarmaccess (100 gas) with a much cheaper stack read. Other less obvious fixes/optimizations include having local memory caches of state variable structs, or having local caches of state variable contracts/addresses.

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit more than 1 read for `nextDistributionRecipient`, line 232 and 214
232:         nextDistributionRecipient = i;

/// @audit more than 1 read for `holders`, line 234 and 215
234:         if (nextDistributionRecipient == holders.length) {

/// @audit more than 1 read for `nextDistributionRecipient`, line 234 and 214
234:         if (nextDistributionRecipient == holders.length) {

/// @audit more than 1 read for `nextWithdrawal`, line 371 and 362
371:         for (i = nextWithdrawal; i < limit; i++) {

/// @audit more than 1 read for `nextWithdrawal`, line 380 and 362
380:         nextWithdrawal = i;

/// @audit more than 1 read for `nextWithdrawal`, line 382 and 362
382:         if (nextWithdrawal == ManagedNFTs.length) {

/// @audit more than 1 read for `nextWithdrawal`, line 383 and 362
383:             nextWithdrawal = 0;

/// @audit more than 1 read for `ManagedNFTs`, line 425 and 422
425:                 ManagedNFTs[i] = ManagedNFTs[ManagedNFTs.length - 1];

```
*Github:* [[232](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L232), [234](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L234), [234](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L234), [371](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L371), [380](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L380), [382](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L382), [383](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L383), [425](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L425)]



<a name="GAS-30"></a> 
### [GAS-30] Use `calldata` instead of `memory` for function arguments that do not get mutated
Mark data types as `calldata` instead of `memory` where possible. This makes it so that the data is not automatically loaded into memory. If the data passed into the function does not need to be changed (like updating values in an array), it can be passed in as `calldata`. The one exception to this is if the argument must later be passed into another function that takes an argument that specifies `memory` storage.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

/// @audit make `_distributableERC20s` as a calldata
442:         address[] memory _distributableERC20s

/// @audit make `_name` as a calldata
457:         string memory _name,

/// @audit make `_symbol` as a calldata
458:         string memory _symbol,

/// @audit make `_managedNFTs` as a calldata
459:         address[] memory _managedNFTs,

/// @audit make `_approvedHolders` as a calldata
460:         address[] memory _approvedHolders,

/// @audit make `_distributableErc20s` as a calldata
462:         address[] memory _distributableErc20s

```
*Github:* [[442](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L442), [457](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L457), [458](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L458), [459](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L459), [460](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L460), [462](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L462)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

/// @audit make `accountName` as a calldata
63:         string memory accountName

```
*Github:* [[63](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L63)]



<a name="GAS-31"></a> 
### [GAS-31] Use Custom Errors
[Source](https://blog.soliditylang.org/2021/04/21/custom-errors/)
Instead of using error strings, to reduce deployment and runtime cost, you should use Custom Errors. This would save both deployment and runtime cost.

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

107:         require(!isApprovedHolder(holder), "holder already approved");

117:         require(isApprovedHolder(holder), "holder not approved");

132:         require(!LockedForDistribution, "distribution in progress");

199:         require(numDistributions > 0, "must process at least 1 distribution");

360:         require(!LockedForDistribution, "cannot withdraw during distribution");

431:         require(true, "unable to find released NFT in ManagedNFTs");

```
*Github:* [[107](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L107), [117](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L117), [132](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L132), [199](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L199), [360](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L360), [431](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L431)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

180:                 require(result, "unsuccessful withdrawal");

```
*Github:* [[180](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L180)]


```solidity
File: contracts/OwnableApprovableERC721.sol

40:             revert("OwnableApprovable: caller is not owner nor approved");

```
*Github:* [[40](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/OwnableApprovableERC721.sol#L40)]



<a name="GAS-32"></a> 
### [GAS-32] Don't initialize variables with default value

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="GAS-33"></a> 
### [GAS-33] Functions guaranteed to revert when called by normal users can be marked `payable`
If a function modifier such as `onlyOwner` is used, the function will revert if a normal user tries to pay the function. Marking the function as `payable` will lower the gas cost for legitimate callers because the compiler will not include checks for whether a payment was provided.

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

106:     function approveHolder(address holder) public onlyOwner {

116:     function disapproveHolder(address holder) public onlyOwner {

394:     function addManagedNFT(address nftContract) public onlyOwner {

```
*Github:* [[106](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L106), [116](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L116), [394](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L394)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

203:     function recoverAccount() public virtual onlyOwner(AccountId) {

```
*Github:* [[203](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L203)]



<a name="GAS-34"></a> 
### [GAS-34] `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too)
*Saves 5 gas per loop*

*There are <b>9</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

171:             for (uint i = 0; i < holders.length; i++) {

214:         for (i = nextDistributionRecipient; i < limit; i++) {

220:                 for (uint j = 0; j < distributableERC20s.length; j++) {

271:         for (uint i = 0; i < distributableERC20s.length; i++) {

371:         for (i = nextWithdrawal; i < limit; i++) {

421:         for (uint i = 0; i < ManagedNFTs.length; i++) {

467:         for (uint i = 0; i < _approvedHolders.length; i++) {

```
*Github:* [[171](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L171), [214](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L214), [220](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L220), [271](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L271), [371](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L371), [421](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L421), [467](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L467)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

120:         for (uint i = 0; i < newErc20s.length; i++) {

175:         for (uint i = 0; i < erc20s.length; i++) {

```
*Github:* [[120](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L120), [175](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L175)]



<a name="GAS-35"></a> 
### [GAS-35] Using `private` rather than `public` for constants, saves gas
If needed, the values can be read from the verified contract source code, or if there are multiple values there can be a single getter function that [returns a tuple](https://github.com/code-423n4/2022-08-frax/blob/90f55a9ce4e25bceed3a74290b854341d8de6afa/src/contracts/FraxlendPair.sol#L156-L178) of the values of all currently-public constants. Saves **3406-3606 gas** in deployment gas due to the compiler not having to create non-payable getter functions for deployment calldata, not having to store the bytes of the value outside of where it's used, and not adding another entry to the method ID table

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

54:     uint256 public constant Version = 1;

```
*Github:* [[54](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L54)]


```solidity
File: contracts/LiquidInfrastructureNFT.sol

46:     uint256 public constant Version = 1;

53:     uint256 public constant AccountId = 1;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L46), [53](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureNFT.sol#L53)]



<a name="GAS-36"></a> 
### [GAS-36] Use assembly to check for `address(0)`
Saves 6 gas per instance.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/LiquidInfrastructureERC20.sol

133:         if (!(to == address(0))) {

139:         if (from == address(0) || to == address(0)) {

139:         if (from == address(0) || to == address(0)) {

```
*Github:* [[133](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L133), [139](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L139), [139](https://github.com/code-423n4/2024-02-althea-liquid-infrastructure/blob/2b26c04f0448505635210416bef9d3ce96391b16/liquid-infrastructure/contracts/LiquidInfrastructureERC20.sol#L139)]



