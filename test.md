# Report

Audit report for **2023-11-kelp** generated by *ubl4nk_bot*.

## Medium Issues


*Total <b>36</b> instances over <b>7</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [M-1](#M-1) | `approve` will always revert as the `IERC20` interface mismatch | 1 |
| [M-2](#M-2) | Non-compliant `IERC20` tokens may revert with `transfer` | 2 |
| [M-3](#M-3) | Return values of `approve()` not checked | 1 |
| [M-4](#M-4) | Some `ERC20` can revert on a zero value transfer | 2 |
| [M-5](#M-5) | Some functions do not work correctly with fee-on-transfer tokens | 1 |
| [M-6](#M-6) | Centralization Risk for trusted owners | 26 |
| [M-7](#M-7) | `transfer`/`transferFrom` may never return `true` for some tokens | 3 |

## Low Issues


*Total <b>48</b> instances over <b>15</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [L-1](#L-1) | Missing zero address check in functions with address parameters | 6 |
| [L-2](#L-2) | `approve()`/`safeApprove()` may revert if the current approval is not zero | 1 |
| [L-3](#L-3) | Array is `push()`ed but not `pop()`ed | 2 |
| [L-4](#L-4) | Avoid the use of deprecated Chainlink functions | 1 |
| [L-5](#L-5) | Check division by zero is prevented | 2 |
| [L-6](#L-6) | Consider implementing two-step procedure for updating protocol addresses | 2 |
| [L-7](#L-7) | External function calls within loops | 5 |
| [L-8](#L-8) | Governance functions should be controlled by time locks | 1 |
| [L-9](#L-9) | Large approvals may not work with some `ERC20` tokens | 1 |
| [L-10](#L-10) | Loss of precision in divisions | 2 |
| [L-11](#L-11) | Check storage gap for upgradable contracts | 5 |
| [L-12](#L-12) | Solidity version 0.8.20 or above may not work on other chains due to PUSH0 | 9 |
| [L-13](#L-13) | Tokens may be minted to `address(0)` | 1 |
| [L-14](#L-14) | Unsafe use of ERC20 `transfer()`/`transferFrom()`/`approve()` | 4 |
| [L-15](#L-15) | Initializers could be front-run | 6 |

## Non Critical Issues


*Total <b>385</b> instances over <b>59</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [NC-1](#NC-1) | Consider adding a block/deny-list | 7 |
| [NC-2](#NC-2) | Consider adding emergency-stop functionality | 2 |
| [NC-3](#NC-3) | Consider adding formal verification proofs | 1 |
| [NC-4](#NC-4) | Constants should be put on the left side of comparisons | 3 |
| [NC-5](#NC-5) | Contract does not follow the Solidity Style Guide's suggested layout ordering | 2 |
| [NC-6](#NC-6) | Contract should expose an `interface` | 46 |
| [NC-7](#NC-7) | Contracts should each be defined in separate files | 2 |
| [NC-8](#NC-8) | Contracts should have full test coverage | 1 |
| [NC-9](#NC-9) | Events that mark critical parameter changes should contain both the old and the new value | 17 |
| [NC-10](#NC-10) | Custom errors has no error details | 1 |
| [NC-11](#NC-11) | Duplicated `require()`/`revert()` checks should be refactored | 2 |
| [NC-12](#NC-12) | Enable IR-based code generation | 1 |
| [NC-13](#NC-13) | Events are emitted without the sender information | 16 |
| [NC-14](#NC-14) | Events may be emitted out of order due to reentrancy | 4 |
| [NC-15](#NC-15) |  Function ordering does not follow the Solidity Style Guide | 20 |
| [NC-16](#NC-16) | Inconsistent spacing in comments | 12 |
| [NC-17](#NC-17) | Interfaces should have an `I` prefix in the contract name | 1 |
| [NC-18](#NC-18) | Large or complicated code bases should implement invariant tests | 1 |
| [NC-19](#NC-19) | Large multiples of ten should use scientific notation | 3 |
| [NC-20](#NC-20) | Magic numbers should be replaced with constants | 4 |
| [NC-21](#NC-21) | Missing NatSpec from contract declarations | 2 |
| [NC-22](#NC-22) | Missing NatSpec `@author` from contract declaration | 9 |
| [NC-23](#NC-23) | Missing NatSpec `@dev` from contract declaration | 10 |
| [NC-24](#NC-24) | Missing NatSpec `@dev` from event declaration | 1 |
| [NC-25](#NC-25) | Missing NatSpec `@dev` from function declaration | 20 |
| [NC-26](#NC-26) | Missing NatSpec `@dev` from modifier declaration | 4 |
| [NC-27](#NC-27) | Error declarations should have NatSpec descriptions | 1 |
| [NC-28](#NC-28) | Event declarations should have NatSpec descriptions | 1 |
| [NC-29](#NC-29) | NatSpec documentation for function is missing | 6 |
| [NC-30](#NC-30) | Modifier declarations should have NatSpec descriptions | 4 |
| [NC-31](#NC-31) | Public variable declarations should have NatSpec descriptions | 20 |
| [NC-32](#NC-32) | Missing NatSpec `@notice` from contract declaration | 2 |
| [NC-33](#NC-33) | Missing NatSpec `@notice` from event declaration | 1 |
| [NC-34](#NC-34) | Missing NatSpec `@notice` from function declaration | 39 |
| [NC-35](#NC-35) | Missing NatSpec `@notice` from modifier declaration | 4 |
| [NC-36](#NC-36) | Missing NatSpec `@param` from event declaration | 1 |
| [NC-37](#NC-37) | Missing NatSpec `@param` from function declaration | 5 |
| [NC-38](#NC-38) | Missing NatSpec `@param` from modifier declaration | 2 |
| [NC-39](#NC-39) | Missing NatSpec `@return` from function declaration | 4 |
| [NC-40](#NC-40) | Missing NatSpec `@title` from contract declaration | 2 |
| [NC-41](#NC-41) | There is no need to initialize variables with 0 | 1 |
| [NC-42](#NC-42) | Put all system-wide constants in one file | 9 |
| [NC-43](#NC-43) | Redundant `return` statement in a function with named return variables | 2 |
| [NC-44](#NC-44) | Setters should prevent re-setting the same value | 8 |
| [NC-45](#NC-45) | State variables should include comments | 2 |
| [NC-46](#NC-46) | The `nonReentrant` modifier should occur before all other modifiers | 3 |
| [NC-47](#NC-47) | Lines are too long | 13 |
| [NC-48](#NC-48) | Typos | 10 |
| [NC-49](#NC-49) | Unnecessary cast | 2 |
| [NC-50](#NC-50) | Unused import | 2 |
| [NC-51](#NC-51) | Unused named return | 2 |
| [NC-52](#NC-52) | Expressions for constant values should use `immutable` rather than `constant` | 9 |
| [NC-53](#NC-53) | Use `@inheritdoc` for overridden functions | 8 |
| [NC-54](#NC-54) | Use the latest solidity version for deployment (`0.8.23`) | 9 |
| [NC-55](#NC-55) | Use of `override` is unnecessary | 8 |
| [NC-56](#NC-56) | Common functions should be refactored to a common base contract | 8 |
| [NC-57](#NC-57) | Names of `private`/`internal` functions should be prefixed with an underscore | 1 |
| [NC-58](#NC-58) |  `require()` / `revert()` statements should have descriptive reason strings | 3 |
| [NC-59](#NC-59) | Variables should be named in mixedCase style | 1 |

## Gas Optimizations


*Total <b>156</b> instances over <b>31</b> issues:*

|ID|Issue|Instances|Gas|
|-|:-|:-:|:-:|
| [GAS-1](#GAS-1) | Optimize Gas by Using Do-While Loops | 4 | 1020 |
| [GAS-2](#GAS-2) | Consider activating via-ir for deploying | 1 | - |
| [GAS-3](#GAS-3) | Divisions can be `unchecked` to save gas | 2 | 40 |
| [GAS-4](#GAS-4) | Operator `+=` costs more gas than `<x> = <x> + <y>` for state variables | 3 | 339 |
| [GAS-5](#GAS-5) | Duplicated `require()`/`revert()` checks should be refactored to a modifier or function to save gas | 2 | - |
| [GAS-6](#GAS-6) | Events should be emitted outside of loops | 1 | 375 |
| [GAS-7](#GAS-7) | Initializers can be marked as payable to save deployment gas | 6 | 126 |
| [GAS-8](#GAS-8) | `keccak256()` hash of literals should only be computed once | 9 | 378 |
| [GAS-9](#GAS-9) | Multiple accesses of the same mapping/array key/index should be cached | 5 | 210 |
| [GAS-10](#GAS-10) | Newer versions of solidity are more gas efficient | 9 | - |
| [GAS-11](#GAS-11) | Operator `>=`/`<=` costs less gas than operator `>`/`<` | 6 | 18 |
| [GAS-12](#GAS-12) | Optimize names to save gas | 6 | 132 |
| [GAS-13](#GAS-13) | Redundant state variable getters | 2 | - |
| [GAS-14](#GAS-14) | State variables access within a loop | 1 | 265 |
| [GAS-15](#GAS-15) | Unused named return variables without optimizer waste gas | 2 | 18 |
| [GAS-16](#GAS-16) | Optimize External Calls with Assembly for Memory Efficiency | 7 | 1540 |
| [GAS-17](#GAS-17) | Use assembly to compute hashes to save gas | 9 | 720 |
| [GAS-18](#GAS-18) | Use assembly to emit events | 17 | 646 |
| [GAS-19](#GAS-19) | Use assembly to write address/contract type storage values | 9 | 450 |
| [GAS-20](#GAS-20) | Use local variables for emitting | 1 | 97 |
| [GAS-21](#GAS-21) | Use a more recent version of solidity | 9 | - |
| [GAS-22](#GAS-22) | Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes | 1 | 8550 |
| [GAS-23](#GAS-23) | Using bitmap to store bool states can save gas | 1 | - |
| [GAS-24](#GAS-24) | Using bools for storage incurs overhead | 1 | 100 |
| [GAS-25](#GAS-25) | Don't initialize variables with default value | 1 | - |
| [GAS-26](#GAS-26) | Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead | 1 | 55 |
| [GAS-27](#GAS-27) | Constructors can be marked as `payable` to save deployment gas | 6 | 126 |
| [GAS-28](#GAS-28) | Functions guaranteed to revert when called by normal users can be marked `payable` | 21 | 441 |
| [GAS-29](#GAS-29) | Using `private` rather than `public` for constants, saves gas | 9 | - |
| [GAS-30](#GAS-30) | Using assembly to check for zero can save gas | 3 | 18 |
| [GAS-31](#GAS-31) | `internal` functions not called by the contract should be removed | 1 | - |

## Medium Issues

<a name="M-1"></a> 
### [M-1] `approve` will always revert as the `IERC20` interface mismatch
Some tokens, such as [USDT](https://etherscan.io/token/0xdac17f958d2ee523a2206206994597c13d831ec7#code#L199), have a different implementation for the approve function: when the address is cast to a compliant `IERC20` interface and the approve function is used, it will always revert due to the interface mismatch.

*There is one instance of this issue:*
```solidity
File: src/NodeDelegator.sol

45:         IERC20(asset).approve(eigenlayerStrategyManagerAddress, type(uint256).max);

```
*Github:* [[45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L45)]



<a name="M-2"></a> 
### [M-2] Non-compliant `IERC20` tokens may revert with `transfer`
Some `IERC20` tokens (e.g. BNB, OMG, USDT) do not implement the standard properly, but they are still accepted by most code that accepts `ERC20` tokens.

For example, USDT `transfer` functions on L1 do not return booleans: when casted to `IERC20`, their function signatures do not match, and therefore the calls made will revert.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

194:         if (!IERC20(asset).transfer(nodeDelegator, amount)) {

```
*Github:* [[194](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L194)]


```solidity
File: src/NodeDelegator.sol

86:         if (!IERC20(asset).transfer(lrtDepositPool, amount)) {

```
*Github:* [[86](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L86)]



<a name="M-3"></a> 
### [M-3] Return values of `approve()` not checked
Not all IERC20 implementations `revert()` when there's a failure in `approve()`. The function signature has a boolean return value and they indicate errors that way instead. By not checking the return value, operations that should have marked as failed, may potentially go through without actually approving anything

*There is one instance of this issue:*
```solidity
File: src/NodeDelegator.sol

45:         IERC20(asset).approve(eigenlayerStrategyManagerAddress, type(uint256).max);

```
*Github:* [[45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L45)]



<a name="M-4"></a> 
### [M-4] Some `ERC20` can revert on a zero value transfer
Not all `ERC20` implementations are totally compliant, and some (e.g `LEND`) may fail while transfering a zero amount.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

194:         if (!IERC20(asset).transfer(nodeDelegator, amount)) {

```
*Github:* [[194](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L194)]


```solidity
File: src/NodeDelegator.sol

86:         if (!IERC20(asset).transfer(lrtDepositPool, amount)) {

```
*Github:* [[86](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L86)]



<a name="M-5"></a> 
### [M-5] Some functions do not work correctly with fee-on-transfer tokens
Some tokens take a transfer fee (e.g. `STA`, `PAXG`), some do not currently charge a fee but may do so in the future (e.g. `USDT`, `USDC`).

Should a fee-on-transfer token be added as an asset and deposited, it could be abused, as the accounting is wrong. In the current implementation the following function calls do not work well with fee-on-transfer tokens as the amount variable is the pre-fee amount, including the fee, whereas the final balance do not include the fee anymore.

*There is one instance of this issue:*
```solidity
File: src/LRTDepositPool.sol

136:         if (!IERC20(asset).transferFrom(msg.sender, address(this), depositAmount)) {

```
*Github:* [[136](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L136)]



<a name="M-6"></a> 
### [M-6] Centralization Risk for trusted owners
Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details>
<summary>
There are <b>26</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

73:     function addNewSupportedAsset(address asset, uint256 depositLimit) external onlyRole(LRTConstants.MANAGER) {

98:         external

113:         external

144:     function setRSETH(address rsETH_) external onlyRole(DEFAULT_ADMIN_ROLE) {

149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L73), [98](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L98), [113](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L113), [144](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L144), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/LRTDepositPool.sol

162:     function addNodeDelegatorContractToQueue(address[] calldata nodeDelegatorContracts) external onlyLRTAdmin {

202:     function updateMaxNodeDelegatorCount(uint256 maxNodeDelegatorCount_) external onlyLRTAdmin {

208:     function pause() external onlyLRTManager {

213:     function unpause() external onlyLRTAdmin {

```
*Github:* [[162](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L162), [202](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L202), [208](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L208), [213](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L213)]


```solidity
File: src/LRTOracle.sol

92:         external

102:     function pause() external onlyLRTManager {

107:     function unpause() external onlyLRTAdmin {

```
*Github:* [[92](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L92), [102](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L102), [107](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L107)]


```solidity
File: src/NodeDelegator.sol

127:     function pause() external onlyLRTManager {

132:     function unpause() external onlyLRTAdmin {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L127), [132](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L132)]


```solidity
File: src/RSETH.sol

47:     function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) whenNotPaused {

54:     function burnFrom(address account, uint256 amount) external onlyRole(BURNER_ROLE) whenNotPaused {

60:     function pause() external onlyLRTManager {

66:     function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {

73:     function updateLRTConfig(address _lrtConfig) external override onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L47), [54](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L54), [60](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L60), [66](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L66), [73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L73)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

37:     function getAssetPrice(address asset) external view onlySupportedAsset(asset) returns (uint256) {

45:     function updatePriceFeedFor(address asset, address priceFeed) external onlyLRTManager onlySupportedAsset(asset) {

```
*Github:* [[37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L37), [45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L45)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

9: import { IAccessControl } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts/contracts/access/IAccessControl.sol";

21:         if (!IAccessControl(address(lrtConfig)).hasRole(LRTConstants.MANAGER, msg.sender)) {

29:         if (!IAccessControl(address(lrtConfig)).hasRole(DEFAULT_ADMIN_ROLE, msg.sender)) {

47:     function updateLRTConfig(address lrtConfigAddr) external virtual onlyLRTAdmin {

```
*Github:* [[9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L9), [21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L21), [29](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L29), [47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L47)]


</details>


<a name="M-7"></a> 
### [M-7] `transfer`/`transferFrom` may never return `true` for some tokens
Some tokens do not return a bool (e.g. USDT, OMG) on transfer. As there are some conditions that rely on this `bool` value, these tokens may cause issues, as the return value of the following conditions will always be `false`.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

136:         if (!IERC20(asset).transferFrom(msg.sender, address(this), depositAmount)) {

194:         if (!IERC20(asset).transfer(nodeDelegator, amount)) {

```
*Github:* [[136](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L136), [194](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L194)]


```solidity
File: src/NodeDelegator.sol

86:         if (!IERC20(asset).transfer(lrtDepositPool, amount)) {

```
*Github:* [[86](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L86)]




## Low Issues

<a name="L-1"></a> 
### [L-1] Missing zero address check in functions with address parameters
Adding a zero address check for each address type parameter can prevent errors.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

/// @audit missing zero check for `asset`
73:     function addNewSupportedAsset(address asset, uint256 depositLimit) external onlyRole(LRTConstants.MANAGER) {

/// @audit missing zero check for `assetAddress`
149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

/// @audit missing zero check for `contractAddress`
165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L73), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/LRTDepositPool.sol

/// @audit missing zero check for `_asset`
151:     function _mintRsETH(address _asset, uint256 _amount) private returns (uint256 rsethAmountToMint) {

```
*Github:* [[151](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L151)]


```solidity
File: src/RSETH.sol

/// @audit missing zero check for `to`
47:     function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) whenNotPaused {

/// @audit missing zero check for `account`
54:     function burnFrom(address account, uint256 amount) external onlyRole(BURNER_ROLE) whenNotPaused {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L47), [54](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L54)]



<a name="L-2"></a> 
### [L-2] `approve()`/`safeApprove()` may revert if the current approval is not zero
Calling `approve()` without first calling `approve(0)` if the current approval is non-zero will revert with some tokens, such as Tether (USDT). While Tether is known to do this, it applies to other tokens as well, which are trying to protect against [this attack vector](https://docs.google.com/document/d/1YLPtQxZu1UAvO9cZ1O2RPXBbT0mooh4DYKjA_jp-RLM/edit). `safeApprove()` itself also implements this protection. Always reset the approval to zero before changing it to a new value (`SafeERC20.forceApprove()` does this for you), or use `safeIncreaseAllowance()`/`safeDecreaseAllowance()`

*There is one instance of this issue:*
```solidity
File: src/NodeDelegator.sol

45:         IERC20(asset).approve(eigenlayerStrategyManagerAddress, type(uint256).max);

```
*Github:* [[45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L45)]



<a name="L-3"></a> 
### [L-3] Array is `push()`ed but not `pop()`ed
There is no limit specified on the amount of gas used, so the recipient can use up all of the remaining gas (`gasleft()`), causing it to revert. Therefore, when calling an external contract, it is necessary to specify a limited amount of gas to forward.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

86:         supportedAssetList.push(asset);

```
*Github:* [[86](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L86)]


```solidity
File: src/LRTDepositPool.sol

170:             nodeDelegatorQueue.push(nodeDelegatorContracts[i]);

```
*Github:* [[170](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L170)]



<a name="L-4"></a> 
### [L-4] Avoid the use of deprecated Chainlink functions
Some functions use a deprecated version of Chainlink functions, consider following the [documentation](https://docs.chain.link/data-feeds/api-reference) to use the supported alternatives.

*There is one instance of this issue:*
```solidity
File: src/oracles/ChainlinkPriceOracle.sol

38:         return AggregatorInterface(assetPriceFeed[asset]).latestAnswer();

```
*Github:* [[38](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L38)]



<a name="L-5"></a> 
### [L-5] Check division by zero is prevented

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

109:         rsethAmountToMint = (amount * lrtOracle.getAssetPrice(asset)) / lrtOracle.getRSETHPrice();

```
*Github:* [[109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L109)]


```solidity
File: src/LRTOracle.sol

78:         return totalETHInPool / rsEthSupply;

```
*Github:* [[78](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L78)]



<a name="L-6"></a> 
### [L-6] Consider implementing two-step procedure for updating protocol addresses
A copy-paste error or a typo may end up bricking protocol functionality, or sending tokens to an address with no known private key. Consider implementing a two-step procedure for updating protocol addresses, where the recipient is set as pending, and must "accept" the assignment by making an affirmative call. A straight forward way of doing this would be to have the target contracts implement [EIP-165](https://eips.ethereum.org/EIPS/eip-165), and to have the "set" functions ensure that the recipient is of the right interface type.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

73:     function addNewSupportedAsset(address asset, uint256 depositLimit) external onlyRole(LRTConstants.MANAGER) {

144:     function setRSETH(address rsETH_) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L73), [144](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L144)]



<a name="L-7"></a> 
### [L-7] External function calls within loops
Calling external functions within loops can easily result in insufficient gas. This greatly increases the likelihood of transaction failures, DOS attacks, and other unexpected actions. It is recommended to limit the number of loops within loops that call external functions, and to limit the gas line for each external call.

*There are <b>5</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `.balanceOf(...)`
83:             assetLyingInNDCs += IERC20(asset).balanceOf(nodeDelegatorQueue[i]);

/// @audit `.getAssetBalance(...)`
84:             assetStakedInEigenLayer += INodeDelegator(nodeDelegatorQueue[i]).getAssetBalance(asset);

```
*Github:* [[83](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L83), [84](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L84)]


```solidity
File: src/LRTOracle.sol

/// @audit `.getTotalAssetDeposits(...)`
70:             uint256 totalAssetAmt = ILRTDepositPool(lrtDepositPoolAddr).getTotalAssetDeposits(asset);

```
*Github:* [[70](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L70)]


```solidity
File: src/NodeDelegator.sol

/// @audit `.underlyingToken(...)`
110:             assets[i] = address(IStrategy(strategies[i]).underlyingToken());

/// @audit `.userUnderlyingView(...)`
111:             assetBalances[i] = IStrategy(strategies[i]).userUnderlyingView(address(this));

```
*Github:* [[110](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L110), [111](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L111)]



<a name="L-8"></a> 
### [L-8] Governance functions should be controlled by time locks
Governance functions (such as upgrading contracts, setting critical parameters) should be controlled using time locks to introduce a delay between a proposal and its execution. This gives users time to exit before a potentially dangerous or malicious operation is applied.

*There is one instance of this issue:*
```solidity
File: src/LRTConfig.sol

144:     function setRSETH(address rsETH_) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[144](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L144)]



<a name="L-9"></a> 
### [L-9] Large approvals may not work with some `ERC20` tokens
Not all `IERC20` implementations are totally compliant, and some (e.g `UNI`, `COMP`) may fail if the valued passed to `approve` is larger than `uint96`. If the approval amount is `type(uint256).max`, which may cause issues with systems that expect the value passed to approve to be reflected in the allowances mapping.

*There is one instance of this issue:*
```solidity
File: src/NodeDelegator.sol

45:         IERC20(asset).approve(eigenlayerStrategyManagerAddress, type(uint256).max);

```
*Github:* [[45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L45)]



<a name="L-10"></a> 
### [L-10] Loss of precision in divisions
Division by large numbers may result in the result being zero, due to solidity not supporting fractions. Consider requiring a minimum amount for the numerator to ensure that it is always larger than the denominator.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

109:         rsethAmountToMint = (amount * lrtOracle.getAssetPrice(asset)) / lrtOracle.getRSETHPrice();

```
*Github:* [[109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L109)]


```solidity
File: src/LRTOracle.sol

78:         return totalETHInPool / rsEthSupply;

```
*Github:* [[78](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L78)]



<a name="L-11"></a> 
### [L-11] Check storage gap for upgradable contracts
Each upgradable contract should include a state variable (usually named `__gap`) to provide reserved space in storage. This allows the team to freely add new state variables in the future upgrades without compromising the storage compatibility with existing deployments.

*There are <b>5</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

12: contract LRTConfig is ILRTConfig, AccessControlUpgradeable {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L12)]


```solidity
File: src/LRTDepositPool.sol

19: contract LRTDepositPool is ILRTDepositPool, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L19)]


```solidity
File: src/LRTOracle.sol

19: contract LRTOracle is ILRTOracle, LRTConfigRoleChecker, PausableUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L19)]


```solidity
File: src/NodeDelegator.sol

18: contract NodeDelegator is INodeDelegator, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L18)]


```solidity
File: src/RSETH.sol

14: contract RSETH is
        Initializable,
        LRTConfigRoleChecker,
        ERC20Upgradeable,

```
*Github:* [[14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L14)]



<a name="L-12"></a> 
### [L-12] Solidity version 0.8.20 or above may not work on other chains due to PUSH0
Solidity version 0.8.20 or above uses the new [Shanghai EVM](https://blog.soliditylang.org/2023/05/10/solidity-0.8.20-release-announcement/#important-note) which introduces the PUSH0 opcode. This op code may not yet be implemented on all evm-chains or Layer2s, so deployment on these chains will fail. Consider using an earlier solidity version.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L2)]


```solidity
File: src/LRTDepositPool.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L2)]


```solidity
File: src/LRTOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L2)]


```solidity
File: src/NodeDelegator.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L2)]


```solidity
File: src/RSETH.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L2)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L2)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L2)]


```solidity
File: src/utils/LRTConstants.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L2)]


```solidity
File: src/utils/UtilLib.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L2)]



<a name="L-13"></a> 
### [L-13] Tokens may be minted to `address(0)`

*There is one instance of this issue:*
```solidity
File: src/RSETH.sol

47:     function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) whenNotPaused {
            _mint(to, amount);
        }

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L47)]



<a name="L-14"></a> 
### [L-14] Unsafe use of ERC20 `transfer()`/`transferFrom()`/`approve()`
Some tokens do not implement the ERC20 standard properly. For example Tether (USDT)'s `transfer()` and `transferFrom()` functions do not return booleans as the ERC20 specification requires, and instead have no return value. When these sorts of tokens are cast to IERC20/ERC20, their function signatures do not match and therefore the calls made will revert.It is recommended to use the [`SafeERC20`](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/f347b410cf6aeeaaf5197e1fece139c793c03b2b/contracts/token/ERC20/utils/SafeERC20.sol#L19)'s `safeTransfer()` and `safeTransferFrom()` from OpenZeppelin instead.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

136:         if (!IERC20(asset).transferFrom(msg.sender, address(this), depositAmount)) {

194:         if (!IERC20(asset).transfer(nodeDelegator, amount)) {

```
*Github:* [[136](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L136), [194](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L194)]


```solidity
File: src/NodeDelegator.sol

45:         IERC20(asset).approve(eigenlayerStrategyManagerAddress, type(uint256).max);

86:         if (!IERC20(asset).transfer(lrtDepositPool, amount)) {

```
*Github:* [[45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L45), [86](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L86)]



<a name="L-15"></a> 
### [L-15] Initializers could be front-run
Initializers could be front-run, allowing an attacker to either set their own values, take ownership of the contract, and in the best case forcing a re-deployment

*There are <b>6</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

41:     function initialize(

```
*Github:* [[41](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L41)]


```solidity
File: src/LRTDepositPool.sol

31:     function initialize(address lrtConfigAddr) external initializer {

```
*Github:* [[31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L31)]


```solidity
File: src/LRTOracle.sol

29:     function initialize(address lrtConfigAddr) external initializer {

```
*Github:* [[29](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L29)]


```solidity
File: src/NodeDelegator.sol

26:     function initialize(address lrtConfigAddr) external initializer {

```
*Github:* [[26](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L26)]


```solidity
File: src/RSETH.sol

32:     function initialize(address admin, address lrtConfigAddr) external initializer {

```
*Github:* [[32](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L32)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

27:     function initialize(address lrtConfig_) external initializer {

```
*Github:* [[27](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L27)]




## Non Critical Issues

<a name="NC-1"></a> 
### [NC-1] Consider adding a block/deny-list
Doing so will significantly increase centralization, but will help to prevent hackers from using stolen tokens.

*There are <b>7</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

12: contract LRTConfig is ILRTConfig, AccessControlUpgradeable {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L12)]


```solidity
File: src/LRTDepositPool.sol

19: contract LRTDepositPool is ILRTDepositPool, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L19)]


```solidity
File: src/LRTOracle.sol

19: contract LRTOracle is ILRTOracle, LRTConfigRoleChecker, PausableUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L19)]


```solidity
File: src/NodeDelegator.sol

18: contract NodeDelegator is INodeDelegator, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L18)]


```solidity
File: src/RSETH.sol

14: contract RSETH is
        Initializable,
        LRTConfigRoleChecker,
        ERC20Upgradeable,
        PausableUpgradeable,
        AccessControlUpgradeable
    {

```
*Github:* [[14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L14)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

17: contract ChainlinkPriceOracle is IPriceFetcher, LRTConfigRoleChecker, Initializable {

```
*Github:* [[17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L17)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

13: abstract contract LRTConfigRoleChecker {

```
*Github:* [[13](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L13)]



<a name="NC-2"></a> 
### [NC-2] Consider adding emergency-stop functionality
Consider adding `Pausable` to the following contracts so it's possible to stop them in case of an emergency.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

12: contract LRTConfig is ILRTConfig, AccessControlUpgradeable {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L12)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

17: contract ChainlinkPriceOracle is IPriceFetcher, LRTConfigRoleChecker, Initializable {

```
*Github:* [[17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L17)]



<a name="NC-3"></a> 
### [NC-3] Consider adding formal verification proofs
Formal verification is the act of proving or disproving the correctness of intended algorithms underlying a system with respect to a certain formal specification/property/invariant, using formal methods of mathematics.

Some tools that are currently available to perform these tests on smart contracts are [SMTChecker](https://docs.soliditylang.org/en/latest/smtchecker.html) and [Certora Prover](https://www.certora.com/).

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/)]



<a name="NC-4"></a> 
### [NC-4] Constants should be put on the left side of comparisons
Putting constants on the left side of comparison statements is a best practice known as [Yoda conditions](https://en.wikipedia.org/wiki/Yoda_conditions). Although solidity's static typing system prevents accidental assignments within conditionals, adopting this practice can improve code readability and consistency, especially when working across multiple languages.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

129:         if (depositAmount == 0) {

```
*Github:* [[129](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L129)]


```solidity
File: src/LRTOracle.sol

56:         if (rsEthSupply == 0) {

```
*Github:* [[56](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L56)]


```solidity
File: src/utils/UtilLib.sol

12:         if (address_ == address(0)) revert ZeroAddressNotAllowed();

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L12)]



<a name="NC-5"></a> 
### [NC-5] Contract does not follow the Solidity Style Guide's suggested layout ordering
The [style guide](https://docs.soliditylang.org/en/v0.8.16/style-guide.html#order-of-layout) says that, within a contract, the ordering should be `1) Type declarations`, `2) State variables`, `3) Events`, `4) Modifiers`, and `5) Functions`, but the contract(s) below do not follow this ordering

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

/// @audit function `constructor` came earlier
28:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[28](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L28)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

/// @audit function `latestAnswer` came earlier
18:     mapping(address asset => address priceFeed) public override assetPriceFeed;

```
*Github:* [[18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L18)]



<a name="NC-6"></a> 
### [NC-6] Contract should expose an `interface`
All `external`/`public` functions should extend an `interface`. This is useful to make sure that the whole API is extracted.

*Note:* It is possible that the interface is out-of-scope and has not been seen by the bot.

<details>
<summary>
There are <b>46</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

41:     function initialize(

73:     function addNewSupportedAsset(address asset, uint256 depositLimit) external onlyRole(LRTConstants.MANAGER) {

94:     function updateAssetDepositLimit(

109:     function updateAssetStrategy(

127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

131:     function getContract(bytes32 contractKey) external view override returns (address) {

135:     function getSupportedAssetList() external view override returns (address[] memory) {

144:     function setRSETH(address rsETH_) external onlyRole(DEFAULT_ADMIN_ROLE) {

149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[41](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L41), [73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L73), [94](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L94), [109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L109), [127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135), [144](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L144), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/LRTDepositPool.sol

31:     function initialize(address lrtConfigAddr) external initializer {

47:     function getTotalAssetDeposits(address asset) public view override returns (uint256 totalAssetDeposit) {

56:     function getAssetCurrentLimit(address asset) public view override returns (uint256) {

62:     function getNodeDelegatorQueue() external view override returns (address[] memory) {

71:     function getAssetDistributionData(address asset)

95:     function getRsETHAmountToMint(

119:     function depositAsset(

162:     function addNodeDelegatorContractToQueue(address[] calldata nodeDelegatorContracts) external onlyLRTAdmin {

183:     function transferAssetToNodeDelegator(

202:     function updateMaxNodeDelegatorCount(uint256 maxNodeDelegatorCount_) external onlyLRTAdmin {

208:     function pause() external onlyLRTManager {

213:     function unpause() external onlyLRTAdmin {

```
*Github:* [[31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L31), [47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L47), [56](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L56), [62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L62), [71](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L71), [95](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L95), [119](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L119), [162](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L162), [183](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L183), [202](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L202), [208](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L208), [213](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L213)]


```solidity
File: src/LRTOracle.sol

29:     function initialize(address lrtConfigAddr) external initializer {

45:     function getAssetPrice(address asset) public view onlySupportedAsset(asset) returns (uint256) {

52:     function getRSETHPrice() external view returns (uint256 rsETHPrice) {

88:     function updatePriceOracleFor(

102:     function pause() external onlyLRTManager {

107:     function unpause() external onlyLRTAdmin {

```
*Github:* [[29](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L29), [45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L45), [52](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L52), [88](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L88), [102](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L102), [107](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L107)]


```solidity
File: src/NodeDelegator.sol

26:     function initialize(address lrtConfigAddr) external initializer {

38:     function maxApproveToEigenStrategyManager(address asset)

51:     function depositAssetIntoStrategy(address asset)

74:     function transferBackToLRTDepositPool(

94:     function getAssetBalances()

121:     function getAssetBalance(address asset) external view override returns (uint256) {

127:     function pause() external onlyLRTManager {

132:     function unpause() external onlyLRTAdmin {

```
*Github:* [[26](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L26), [38](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L38), [51](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L51), [74](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L74), [94](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L94), [121](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L121), [127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L127), [132](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L132)]


```solidity
File: src/RSETH.sol

32:     function initialize(address admin, address lrtConfigAddr) external initializer {

47:     function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) whenNotPaused {

54:     function burnFrom(address account, uint256 amount) external onlyRole(BURNER_ROLE) whenNotPaused {

60:     function pause() external onlyLRTManager {

66:     function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {

73:     function updateLRTConfig(address _lrtConfig) external override onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[32](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L32), [47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L47), [54](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L54), [60](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L60), [66](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L66), [73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L73)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

27:     function initialize(address lrtConfig_) external initializer {

37:     function getAssetPrice(address asset) external view onlySupportedAsset(asset) returns (uint256) {

45:     function updatePriceFeedFor(address asset, address priceFeed) external onlyLRTManager onlySupportedAsset(asset) {

```
*Github:* [[27](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L27), [37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L37), [45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L45)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

47:     function updateLRTConfig(address lrtConfigAddr) external virtual onlyLRTAdmin {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L47)]


</details>


<a name="NC-7"></a> 
### [NC-7] Contracts should each be defined in separate files
Keeping each contract in a separate file makes it easier to work with multiple people, makes the code easier to maintain, and is a common practice on most projects. The following files each contains more than one contract/library/interface.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/oracles/ChainlinkPriceOracle.sol

/// @audit another contract is defined in this file
11: interface AggregatorInterface {

/// @audit another contract is defined in this file
17: contract ChainlinkPriceOracle is IPriceFetcher, LRTConfigRoleChecker, Initializable {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L11), [17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L17)]



<a name="NC-8"></a> 
### [NC-8] Contracts should have full test coverage
While 100% code coverage does not guarantee that there are no bugs, it often will catch easy-to-find bugs, and will ensure that there are fewer regressions when the code invariably has to be modified. Furthermore, in order to get full coverage, code authors will often have to re-organize their code so that it is more modular, so that each component can be tested separately, which reduces interdependencies between modules and layers, and makes for code that is easier to reason about and audit.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/)]



<a name="NC-9"></a> 
### [NC-9] Events that mark critical parameter changes should contain both the old and the new value
This should especially be done if the new value is not required to be different from the old value.

<details>
<summary>
There are <b>17</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

88:         emit AddedNewSupportedAsset(asset, depositLimit);

103:         emit AssetDepositLimitUpdate(asset, depositLimit);

162:         emit SetToken(key, val);

178:         emit SetContract(key, val);

```
*Github:* [[88](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L88), [103](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L103), [162](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L162), [178](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L178)]


```solidity
File: src/LRTDepositPool.sol

37:         emit UpdatedLRTConfig(lrtConfigAddr);

143:         emit AssetDeposit(asset, depositAmount, rsethAmountMinted);

171:             emit NodeDelegatorAddedinQueue(nodeDelegatorContracts[i]);

204:         emit MaxNodeDelegatorCountUpdated(maxNodeDelegatorCount);

```
*Github:* [[37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L37), [143](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L143), [171](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L171), [204](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L204)]


```solidity
File: src/LRTOracle.sol

34:         emit UpdatedLRTConfig(lrtConfigAddr);

98:         emit AssetPriceOracleUpdate(asset, priceOracle);

```
*Github:* [[34](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L34), [98](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L98)]


```solidity
File: src/NodeDelegator.sol

32:         emit UpdatedLRTConfig(lrtConfigAddr);

65:         emit AssetDepositIntoStrategy(asset, strategy, balance);

```
*Github:* [[32](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L32), [65](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L65)]


```solidity
File: src/RSETH.sol

41:         emit UpdatedLRTConfig(lrtConfigAddr);

76:         emit UpdatedLRTConfig(_lrtConfig);

```
*Github:* [[41](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L41), [76](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L76)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

31:         emit UpdatedLRTConfig(lrtConfig_);

48:         emit AssetPriceFeedUpdate(asset, priceFeed);

```
*Github:* [[31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L31), [48](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L48)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

50:         emit UpdatedLRTConfig(lrtConfigAddr);

```
*Github:* [[50](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L50)]


</details>


<a name="NC-10"></a> 
### [NC-10] Custom errors has no error details
Consider adding parameters to the error to indicate which user or values caused the failure.

*There is one instance of this issue:*
```solidity
File: src/utils/UtilLib.sol

7:     error ZeroAddressNotAllowed();

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L7)]



<a name="NC-11"></a> 
### [NC-11] Duplicated `require()`/`revert()` checks should be refactored
Refactoring duplicate `require()`/`revert()` checks into a modifier or function can make the code more concise, readable and maintainable, and less likely to make errors or omissions when modifying the `require()` or `revert()`.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

/// @audit duplicated on line 159
119:             revert ValueAlreadyInUse();

```
*Github:* [[119](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L119)]


```solidity
File: src/LRTDepositPool.sol

/// @audit duplicated on line 195
137:             revert TokenTransferFailed();

```
*Github:* [[137](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L137)]



<a name="NC-12"></a> 
### [NC-12] Enable IR-based code generation
The IR-based code generator was introduced with an aim to not only allow code generation to be more transparent and auditable but also to enable more powerful optimization passes that span across functions. You can enable it on the command line using `--via-ir` or with the option `{"viaIR": true}`. This will take longer to compile, but you can just simple test it before deploying and if you got a better benchmark then you can add --via-ir to your deploy command More on: https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/)]



<a name="NC-13"></a> 
### [NC-13] Events are emitted without the sender information
When an action is triggered based on a user's action, not being able to filter based on who triggered the action makes event processing a lot more cumbersome. Including the `msg.sender` the events of these types of action will make events much more useful to end users, especially when `msg.sender` is not `tx.origin`.

<details>
<summary>
There are <b>16</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

88:         emit AddedNewSupportedAsset(asset, depositLimit);

103:         emit AssetDepositLimitUpdate(asset, depositLimit);

162:         emit SetToken(key, val);

178:         emit SetContract(key, val);

```
*Github:* [[88](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L88), [103](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L103), [162](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L162), [178](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L178)]


```solidity
File: src/LRTDepositPool.sol

37:         emit UpdatedLRTConfig(lrtConfigAddr);

143:         emit AssetDeposit(asset, depositAmount, rsethAmountMinted);

204:         emit MaxNodeDelegatorCountUpdated(maxNodeDelegatorCount);

```
*Github:* [[37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L37), [143](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L143), [204](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L204)]


```solidity
File: src/LRTOracle.sol

34:         emit UpdatedLRTConfig(lrtConfigAddr);

98:         emit AssetPriceOracleUpdate(asset, priceOracle);

```
*Github:* [[34](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L34), [98](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L98)]


```solidity
File: src/NodeDelegator.sol

32:         emit UpdatedLRTConfig(lrtConfigAddr);

65:         emit AssetDepositIntoStrategy(asset, strategy, balance);

```
*Github:* [[32](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L32), [65](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L65)]


```solidity
File: src/RSETH.sol

41:         emit UpdatedLRTConfig(lrtConfigAddr);

76:         emit UpdatedLRTConfig(_lrtConfig);

```
*Github:* [[41](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L41), [76](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L76)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

31:         emit UpdatedLRTConfig(lrtConfig_);

48:         emit AssetPriceFeedUpdate(asset, priceFeed);

```
*Github:* [[31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L31), [48](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L48)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

50:         emit UpdatedLRTConfig(lrtConfigAddr);

```
*Github:* [[50](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L50)]


</details>


<a name="NC-14"></a> 
### [NC-14] Events may be emitted out of order due to reentrancy
Ensure that events follow the best practice of check-effects-interaction, and are emitted before external calls.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `.transferFrom(..)` is called before emit
143:         emit AssetDeposit(asset, depositAmount, rsethAmountMinted);

```
*Github:* [[143](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L143)]


```solidity
File: src/NodeDelegator.sol

/// @audit `.assetStrategy(..)` is called before emit
65:         emit AssetDepositIntoStrategy(asset, strategy, balance);

/// @audit `.getContract(..)` is called before emit
65:         emit AssetDepositIntoStrategy(asset, strategy, balance);

/// @audit `.balanceOf(..)` is called before emit
65:         emit AssetDepositIntoStrategy(asset, strategy, balance);

```
*Github:* [[65](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L65), [65](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L65), [65](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L65)]



<a name="NC-15"></a> 
### [NC-15]  Function ordering does not follow the Solidity Style Guide
According to the [solidity style guide](https://docs.soliditylang.org/en/v0.8.17/style-guide.html#order-of-functions), functions should be laid out in the following order: `constructor()`, `receive()`, `fallback()`, `external`, `public`, `internal`, `private`, but the cases below do not follow this pattern

<details>
<summary>
There are <b>20</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
94:     function updateAssetDepositLimit(

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
109:     function updateAssetStrategy(

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
131:     function getContract(bytes32 contractKey) external view override returns (address) {

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
135:     function getSupportedAssetList() external view override returns (address[] memory) {

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
144:     function setRSETH(address rsETH_) external onlyRole(DEFAULT_ADMIN_ROLE) {

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

/// @audit private function `_addNewSupportedAsset` came earlier from this external function
/// @audit private function `_setToken` came earlier from this external function
165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[94](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L94), [109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L109), [127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135), [144](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L144), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/LRTDepositPool.sol

/// @audit public function `getTotalAssetDeposits` came earlier from this external function
/// @audit public function `getAssetCurrentLimit` came earlier from this external function
62:     function getNodeDelegatorQueue() external view override returns (address[] memory) {

/// @audit public function `getTotalAssetDeposits` came earlier from this external function
/// @audit public function `getAssetCurrentLimit` came earlier from this external function
/// @audit public function `getAssetDistributionData` came earlier from this external function
/// @audit public function `getRsETHAmountToMint` came earlier from this external function
119:     function depositAsset(

/// @audit public function `getTotalAssetDeposits` came earlier from this external function
/// @audit public function `getAssetCurrentLimit` came earlier from this external function
/// @audit public function `getAssetDistributionData` came earlier from this external function
/// @audit public function `getRsETHAmountToMint` came earlier from this external function
/// @audit private function `_mintRsETH` came earlier from this external function
162:     function addNodeDelegatorContractToQueue(address[] calldata nodeDelegatorContracts) external onlyLRTAdmin {

/// @audit public function `getTotalAssetDeposits` came earlier from this external function
/// @audit public function `getAssetCurrentLimit` came earlier from this external function
/// @audit public function `getAssetDistributionData` came earlier from this external function
/// @audit public function `getRsETHAmountToMint` came earlier from this external function
/// @audit private function `_mintRsETH` came earlier from this external function
183:     function transferAssetToNodeDelegator(

/// @audit public function `getTotalAssetDeposits` came earlier from this external function
/// @audit public function `getAssetCurrentLimit` came earlier from this external function
/// @audit public function `getAssetDistributionData` came earlier from this external function
/// @audit public function `getRsETHAmountToMint` came earlier from this external function
/// @audit private function `_mintRsETH` came earlier from this external function
202:     function updateMaxNodeDelegatorCount(uint256 maxNodeDelegatorCount_) external onlyLRTAdmin {

/// @audit public function `getTotalAssetDeposits` came earlier from this external function
/// @audit public function `getAssetCurrentLimit` came earlier from this external function
/// @audit public function `getAssetDistributionData` came earlier from this external function
/// @audit public function `getRsETHAmountToMint` came earlier from this external function
/// @audit private function `_mintRsETH` came earlier from this external function
208:     function pause() external onlyLRTManager {

/// @audit public function `getTotalAssetDeposits` came earlier from this external function
/// @audit public function `getAssetCurrentLimit` came earlier from this external function
/// @audit public function `getAssetDistributionData` came earlier from this external function
/// @audit public function `getRsETHAmountToMint` came earlier from this external function
/// @audit private function `_mintRsETH` came earlier from this external function
213:     function unpause() external onlyLRTAdmin {

```
*Github:* [[62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L62), [119](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L119), [162](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L162), [183](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L183), [202](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L202), [208](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L208), [213](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L213)]


```solidity
File: src/LRTOracle.sol

/// @audit public function `getAssetPrice` came earlier from this external function
52:     function getRSETHPrice() external view returns (uint256 rsETHPrice) {

/// @audit public function `getAssetPrice` came earlier from this external function
88:     function updatePriceOracleFor(

/// @audit public function `getAssetPrice` came earlier from this external function
102:     function pause() external onlyLRTManager {

/// @audit public function `getAssetPrice` came earlier from this external function
107:     function unpause() external onlyLRTAdmin {

```
*Github:* [[52](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L52), [88](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L88), [102](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L102), [107](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L107)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

/// @audit a function was seen before constructor
21:     constructor() {

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L21)]


</details>


<a name="NC-16"></a> 
### [NC-16] Inconsistent spacing in comments
Some lines use `// x` and some use `//x`. The instances below point out the usages that don't follow the majority, within each file

<details>
<summary>
There are <b>12</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

126:     //////////////////////////////////////////////////////////////*/

141:     //////////////////////////////////////////////////////////////*/

```
*Github:* [[126](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L126), [141](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L141)]


```solidity
File: src/LRTDepositPool.sol

42:     //////////////////////////////////////////////////////////////*/

114:     //////////////////////////////////////////////////////////////*/

```
*Github:* [[42](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L42), [114](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L114)]


```solidity
File: src/LRTOracle.sol

39:     //////////////////////////////////////////////////////////////*/

83:     //////////////////////////////////////////////////////////////*/

```
*Github:* [[39](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L39), [83](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L83)]


```solidity
File: src/utils/LRTConstants.sol

5:     //tokens

6:     //rETH token

8:     //stETH token

10:     //cbETH token

13:     //contracts

18:     //Roles

```
*Github:* [[5](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L5), [6](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L6), [8](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L8), [10](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L10), [13](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L13), [18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L18)]


</details>


<a name="NC-17"></a> 
### [NC-17] Interfaces should have an `I` prefix in the contract name
As a best practice, any `interface` should have an `I` as a prefix in their contract name.

*There is one instance of this issue:*
```solidity
File: src/oracles/ChainlinkPriceOracle.sol

11: interface AggregatorInterface {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L11)]



<a name="NC-18"></a> 
### [NC-18] Large or complicated code bases should implement invariant tests
This includes: large code bases, or code with lots of inline-assembly, complicated math, or complicated interactions between multiple contracts. Invariant fuzzers such as Echidna require the test writer to come up with invariants which should not be violated under any circumstances, and the fuzzer tests various inputs and function calls to ensure that the invariants always hold. Even code with 100% code coverage can still have bugs due to the order of the operations a user performs, and invariant fuzzers may help significantly.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/)]



<a name="NC-19"></a> 
### [NC-19] Large multiples of ten should use scientific notation
Use a scientific notation rather than decimal literals (e.g. `1e6` instead of `1000000`), for better code readability.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

61:         _addNewSupportedAsset(stETH, 100_000 ether);

62:         _addNewSupportedAsset(rETH, 100_000 ether);

63:         _addNewSupportedAsset(cbETH, 100_000 ether);

```
*Github:* [[61](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L61), [62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L62), [63](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L63)]



<a name="NC-20"></a> 
### [NC-20] Magic numbers should be replaced with constants
Magic numbers are hard-coded values in code that can make it difficult for developers and maintainers to understand the code, and can also cause confusion or errors. To improve the readability and maintainability of code, it is recommended to replace magic numbers with constants that have good readability.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

// @audit `100_000`
61:         _addNewSupportedAsset(stETH, 100_000 ether);

// @audit `100_000`
62:         _addNewSupportedAsset(rETH, 100_000 ether);

// @audit `100_000`
63:         _addNewSupportedAsset(cbETH, 100_000 ether);

```
*Github:* [[61](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L61), [62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L62), [63](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L63)]


```solidity
File: src/LRTDepositPool.sol

// @audit `10`
35:         maxNodeDelegatorCount = 10;

```
*Github:* [[35](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L35)]



<a name="NC-21"></a> 
### [NC-21] Missing NatSpec from contract declarations
e.g. `@dev` or `@notice`, and it must appear above the contract definition braces in order to be identified by the compiler as NatSpec.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/oracles/ChainlinkPriceOracle.sol

11: interface AggregatorInterface {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L11)]


```solidity
File: src/utils/LRTConstants.sol

4: library LRTConstants {

```
*Github:* [[4](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L4)]



<a name="NC-22"></a> 
### [NC-22] Missing NatSpec `@author` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@author` notation to improve the code documentation.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

12: contract LRTConfig is ILRTConfig, AccessControlUpgradeable {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L12)]


```solidity
File: src/LRTDepositPool.sol

19: contract LRTDepositPool is ILRTDepositPool, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L19)]


```solidity
File: src/LRTOracle.sol

19: contract LRTOracle is ILRTOracle, LRTConfigRoleChecker, PausableUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L19)]


```solidity
File: src/NodeDelegator.sol

18: contract NodeDelegator is INodeDelegator, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L18)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

11: interface AggregatorInterface {

17: contract ChainlinkPriceOracle is IPriceFetcher, LRTConfigRoleChecker, Initializable {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L11), [17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L17)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

13: abstract contract LRTConfigRoleChecker {

```
*Github:* [[13](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L13)]


```solidity
File: src/utils/LRTConstants.sol

4: library LRTConstants {

```
*Github:* [[4](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L4)]


```solidity
File: src/utils/UtilLib.sol

6: library UtilLib {

```
*Github:* [[6](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L6)]



<a name="NC-23"></a> 
### [NC-23] Missing NatSpec `@dev` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

*There are <b>10</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

12: contract LRTConfig is ILRTConfig, AccessControlUpgradeable {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L12)]


```solidity
File: src/LRTDepositPool.sol

19: contract LRTDepositPool is ILRTDepositPool, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L19)]


```solidity
File: src/LRTOracle.sol

19: contract LRTOracle is ILRTOracle, LRTConfigRoleChecker, PausableUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L19)]


```solidity
File: src/NodeDelegator.sol

18: contract NodeDelegator is INodeDelegator, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L18)]


```solidity
File: src/RSETH.sol

14: contract RSETH is

```
*Github:* [[14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L14)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

11: interface AggregatorInterface {

17: contract ChainlinkPriceOracle is IPriceFetcher, LRTConfigRoleChecker, Initializable {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L11), [17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L17)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

13: abstract contract LRTConfigRoleChecker {

```
*Github:* [[13](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L13)]


```solidity
File: src/utils/LRTConstants.sol

4: library LRTConstants {

```
*Github:* [[4](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L4)]


```solidity
File: src/utils/UtilLib.sol

6: library UtilLib {

```
*Github:* [[6](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L6)]



<a name="NC-24"></a> 
### [NC-24] Missing NatSpec `@dev` from event declaration
Some event definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

*There is one instance of this issue:*
```solidity
File: src/utils/LRTConfigRoleChecker.sol

17:     event UpdatedLRTConfig(address indexed lrtConfig);

```
*Github:* [[17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L17)]



<a name="NC-25"></a> 
### [NC-25] Missing NatSpec `@dev` from function declaration
Some function definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

<details>
<summary>
There are <b>20</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

24:     constructor() {

127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

131:     function getContract(bytes32 contractKey) external view override returns (address) {

135:     function getSupportedAssetList() external view override returns (address[] memory) {

149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[24](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L24), [127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/LRTDepositPool.sol

25:     constructor() {

47:     function getTotalAssetDeposits(address asset) public view override returns (uint256 totalAssetDeposit) {

56:     function getAssetCurrentLimit(address asset) public view override returns (uint256) {

95:     function getRsETHAmountToMint(

119:     function depositAsset(

```
*Github:* [[25](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L25), [47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L47), [56](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L56), [95](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L95), [119](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L119)]


```solidity
File: src/LRTOracle.sol

23:     constructor() {

```
*Github:* [[23](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L23)]


```solidity
File: src/NodeDelegator.sol

20:     constructor() {

94:     function getAssetBalances()

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L20), [94](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L94)]


```solidity
File: src/RSETH.sol

25:     constructor() {

47:     function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) whenNotPaused {

54:     function burnFrom(address account, uint256 amount) external onlyRole(BURNER_ROLE) whenNotPaused {

```
*Github:* [[25](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L25), [47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L47), [54](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L54)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

12:     function latestAnswer() external view returns (uint256);

21:     constructor() {

37:     function getAssetPrice(address asset) external view onlySupportedAsset(asset) returns (uint256) {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L12), [21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L21), [37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L37)]


</details>


<a name="NC-26"></a> 
### [NC-26] Missing NatSpec `@dev` from modifier declaration
Some modifier definitions have an incomplete NatSpec: add a `@dev` notation to improve the code documentation.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

28:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[28](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L28)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

20:     modifier onlyLRTManager() {

27:     modifier onlyLRTAdmin() {

35:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L20), [27](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L27), [35](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L35)]



<a name="NC-27"></a> 
### [NC-27] Error declarations should have NatSpec descriptions

*There is one instance of this issue:*
```solidity
File: src/utils/UtilLib.sol

7:     error ZeroAddressNotAllowed();

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L7)]



<a name="NC-28"></a> 
### [NC-28] Event declarations should have NatSpec descriptions

*There is one instance of this issue:*
```solidity
File: src/utils/LRTConfigRoleChecker.sol

17:     event UpdatedLRTConfig(address indexed lrtConfig);

```
*Github:* [[17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L17)]



<a name="NC-29"></a> 
### [NC-29] NatSpec documentation for function is missing
It is recommended that Solidity contracts are fully annotated using NatSpec for all public interfaces (everything in the ABI). It is clearly stated in the Solidity official documentation. In complex projects such as DeFi, the interpretation of all functions and their arguments and returns is important for code readability and auditability.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

131:     function getContract(bytes32 contractKey) external view override returns (address) {

135:     function getSupportedAssetList() external view override returns (address[] memory) {

149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

12:     function latestAnswer() external view returns (uint256);

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L12)]



<a name="NC-30"></a> 
### [NC-30] Modifier declarations should have NatSpec descriptions

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

28:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[28](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L28)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

20:     modifier onlyLRTManager() {

27:     modifier onlyLRTAdmin() {

35:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L20), [27](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L27), [35](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L35)]



<a name="NC-31"></a> 
### [NC-31] Public variable declarations should have NatSpec descriptions

<details>
<summary>
There are <b>20</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

13:     mapping(bytes32 tokenKey => address tokenAddress) public tokenMap;

14:     mapping(bytes32 contractKey => address contractAddress) public contractMap;

15:     mapping(address token => bool isSupported) public isSupportedAsset;

16:     mapping(address token => uint256 amount) public depositLimitByAsset;

17:     mapping(address token => address strategy) public override assetStrategy;

19:     address[] public supportedAssetList;

21:     address public rsETH;

```
*Github:* [[13](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L13), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L15), [16](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L16), [17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L17), [19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L19), [21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L21)]


```solidity
File: src/LRTDepositPool.sol

20:     uint256 public maxNodeDelegatorCount;

22:     address[] public nodeDelegatorQueue;

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L20), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L22)]


```solidity
File: src/LRTOracle.sol

20:     mapping(address asset => address priceOracle) public override assetPriceOracle;

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L20)]


```solidity
File: src/RSETH.sol

21:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

22:     bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L21), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L22)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

18:     mapping(address asset => address priceFeed) public override assetPriceFeed;

```
*Github:* [[18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L18)]


```solidity
File: src/utils/LRTConstants.sol

7:     bytes32 public constant R_ETH_TOKEN = keccak256("R_ETH_TOKEN");

9:     bytes32 public constant ST_ETH_TOKEN = keccak256("ST_ETH_TOKEN");

11:     bytes32 public constant CB_ETH_TOKEN = keccak256("CB_ETH_TOKEN");

14:     bytes32 public constant LRT_ORACLE = keccak256("LRT_ORACLE");

15:     bytes32 public constant LRT_DEPOSIT_POOL = keccak256("LRT_DEPOSIT_POOL");

16:     bytes32 public constant EIGEN_STRATEGY_MANAGER = keccak256("EIGEN_STRATEGY_MANAGER");

19:     bytes32 public constant MANAGER = keccak256("MANAGER");

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L7), [9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L9), [11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L11), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L15), [16](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L16), [19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L19)]


</details>


<a name="NC-32"></a> 
### [NC-32] Missing NatSpec `@notice` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/oracles/ChainlinkPriceOracle.sol

11: interface AggregatorInterface {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L11)]


```solidity
File: src/utils/LRTConstants.sol

4: library LRTConstants {

```
*Github:* [[4](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L4)]



<a name="NC-33"></a> 
### [NC-33] Missing NatSpec `@notice` from event declaration
Some event definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

*There is one instance of this issue:*
```solidity
File: src/utils/LRTConfigRoleChecker.sol

17:     event UpdatedLRTConfig(address indexed lrtConfig);

```
*Github:* [[17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L17)]



<a name="NC-34"></a> 
### [NC-34] Missing NatSpec `@notice` from function declaration
Some function definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

<details>
<summary>
There are <b>39</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

24:     constructor() {

41:     function initialize(

73:     function addNewSupportedAsset(address asset, uint256 depositLimit) external onlyRole(LRTConstants.MANAGER) {

80:     function _addNewSupportedAsset(address asset, uint256 depositLimit) private {

94:     function updateAssetDepositLimit(

109:     function updateAssetStrategy(

127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

131:     function getContract(bytes32 contractKey) external view override returns (address) {

135:     function getSupportedAssetList() external view override returns (address[] memory) {

144:     function setRSETH(address rsETH_) external onlyRole(DEFAULT_ADMIN_ROLE) {

149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

156:     function _setToken(bytes32 key, address val) private {

165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

172:     function _setContract(bytes32 key, address val) private {

```
*Github:* [[24](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L24), [41](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L41), [73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L73), [80](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L80), [94](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L94), [109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L109), [127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135), [144](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L144), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [156](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L156), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165), [172](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L172)]


```solidity
File: src/LRTDepositPool.sol

25:     constructor() {

31:     function initialize(address lrtConfigAddr) external initializer {

62:     function getNodeDelegatorQueue() external view override returns (address[] memory) {

71:     function getAssetDistributionData(address asset)

151:     function _mintRsETH(address _asset, uint256 _amount) private returns (uint256 rsethAmountToMint) {

208:     function pause() external onlyLRTManager {

213:     function unpause() external onlyLRTAdmin {

```
*Github:* [[25](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L25), [31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L31), [62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L62), [71](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L71), [151](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L151), [208](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L208), [213](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L213)]


```solidity
File: src/LRTOracle.sol

23:     constructor() {

29:     function initialize(address lrtConfigAddr) external initializer {

88:     function updatePriceOracleFor(

102:     function pause() external onlyLRTManager {

107:     function unpause() external onlyLRTAdmin {

```
*Github:* [[23](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L23), [29](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L29), [88](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L88), [102](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L102), [107](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L107)]


```solidity
File: src/NodeDelegator.sol

20:     constructor() {

26:     function initialize(address lrtConfigAddr) external initializer {

121:     function getAssetBalance(address asset) external view override returns (uint256) {

127:     function pause() external onlyLRTManager {

132:     function unpause() external onlyLRTAdmin {

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L20), [26](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L26), [121](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L121), [127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L127), [132](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L132)]


```solidity
File: src/RSETH.sol

25:     constructor() {

32:     function initialize(address admin, address lrtConfigAddr) external initializer {

60:     function pause() external onlyLRTManager {

```
*Github:* [[25](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L25), [32](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L32), [60](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L60)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

12:     function latestAnswer() external view returns (uint256);

21:     constructor() {

27:     function initialize(address lrtConfig_) external initializer {

45:     function updatePriceFeedFor(address asset, address priceFeed) external onlyLRTManager onlySupportedAsset(asset) {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L12), [21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L21), [27](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L27), [45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L45)]


```solidity
File: src/utils/UtilLib.sol

11:     function checkNonZeroAddress(address address_) internal pure {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L11)]


</details>


<a name="NC-35"></a> 
### [NC-35] Missing NatSpec `@notice` from modifier declaration
Some modifier definitions have an incomplete NatSpec: add a `@notice` notation to improve the code documentation.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

28:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[28](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L28)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

20:     modifier onlyLRTManager() {

27:     modifier onlyLRTAdmin() {

35:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L20), [27](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L27), [35](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L35)]



<a name="NC-36"></a> 
### [NC-36] Missing NatSpec `@param` from event declaration
Some event definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

*There is one instance of this issue:*
```solidity
File: src/utils/LRTConfigRoleChecker.sol

17:     event UpdatedLRTConfig(address indexed lrtConfig);

```
*Github:* [[17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L17)]



<a name="NC-37"></a> 
### [NC-37] Missing NatSpec `@param` from function declaration
Some function definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

*There are <b>5</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

/// @audit missing @param for `tokenKey`
127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

/// @audit missing @param for `contractKey`
131:     function getContract(bytes32 contractKey) external view override returns (address) {

/// @audit missing @param for `tokenKey`
/// @audit missing @param for `assetAddress`
149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

/// @audit missing @param for `contractKey`
/// @audit missing @param for `contractAddress`
165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/LRTOracle.sol

/// @audit missing @param for `priceOracle`
88:     function updatePriceOracleFor(
            address asset,
            address priceOracle
        )
            external
            onlyLRTManager
            onlySupportedAsset(asset)
        {

```
*Github:* [[88](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L88)]



<a name="NC-38"></a> 
### [NC-38] Missing NatSpec `@param` from modifier declaration
Some modifier definitions have an incomplete NatSpec: add a `@param` notation to improve the code documentation.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

28:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[28](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L28)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

35:     modifier onlySupportedAsset(address asset) {

```
*Github:* [[35](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L35)]



<a name="NC-39"></a> 
### [NC-39] Missing NatSpec `@return` from function declaration
Some function definitions have an incomplete NatSpec: add a `@return` notation to improve the code documentation.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

131:     function getContract(bytes32 contractKey) external view override returns (address) {

135:     function getSupportedAssetList() external view override returns (address[] memory) {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

12:     function latestAnswer() external view returns (uint256);

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L12)]



<a name="NC-40"></a> 
### [NC-40] Missing NatSpec `@title` from contract declaration
Some contract definitions have an incomplete NatSpec: add a `@title` notation to improve the code documentation.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/oracles/ChainlinkPriceOracle.sol

11: interface AggregatorInterface {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L11)]


```solidity
File: src/utils/LRTConstants.sol

4: library LRTConstants {

```
*Github:* [[4](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L4)]



<a name="NC-41"></a> 
### [NC-41] There is no need to initialize variables with 0
Since the variables are automatically set to 0 when created, it is redundant to initialize it with 0 again.

*There is one instance of this issue:*
```solidity
File: src/NodeDelegator.sol

109:         for (uint256 i = 0; i < strategiesLength;) {

```
*Github:* [[109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L109)]



<a name="NC-42"></a> 
### [NC-42] Put all system-wide constants in one file
Putting all the system-wide constants in a single file improves code readability, makes it easier to understand the basic configuration and limitations of the system, and makes maintenance easier.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/RSETH.sol

21:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

22:     bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L21), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L22)]


```solidity
File: src/utils/LRTConstants.sol

7:     bytes32 public constant R_ETH_TOKEN = keccak256("R_ETH_TOKEN");

9:     bytes32 public constant ST_ETH_TOKEN = keccak256("ST_ETH_TOKEN");

11:     bytes32 public constant CB_ETH_TOKEN = keccak256("CB_ETH_TOKEN");

14:     bytes32 public constant LRT_ORACLE = keccak256("LRT_ORACLE");

15:     bytes32 public constant LRT_DEPOSIT_POOL = keccak256("LRT_DEPOSIT_POOL");

16:     bytes32 public constant EIGEN_STRATEGY_MANAGER = keccak256("EIGEN_STRATEGY_MANAGER");

19:     bytes32 public constant MANAGER = keccak256("MANAGER");

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L7), [9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L9), [11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L11), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L15), [16](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L16), [19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L19)]



<a name="NC-43"></a> 
### [NC-43] Redundant `return` statement in a function with named return variables
Because the return variable (or its default value) has been assigned, explicit return at the end of the function is unnecessary, as it is returned automatically.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

47:     function getTotalAssetDeposits(address asset) public view override returns (uint256 totalAssetDeposit) {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L47)]


```solidity
File: src/LRTOracle.sol

52:     function getRSETHPrice() external view returns (uint256 rsETHPrice) {

```
*Github:* [[52](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L52)]



<a name="NC-44"></a> 
### [NC-44] Setters should prevent re-setting the same value
Not only is wasteful in terms of gas, but this is especially problematic when an event is emitted and the old and new values set are the same, as listeners might not expect this kind of scenario.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

102:         depositLimitByAsset[asset] = depositLimit;

121:         assetStrategy[asset] = strategy;

146:         rsETH = rsETH_;

161:         tokenMap[key] = val;

177:         contractMap[key] = val;

```
*Github:* [[102](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L102), [121](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L121), [146](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L146), [161](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L161), [177](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L177)]


```solidity
File: src/LRTDepositPool.sol

203:         maxNodeDelegatorCount = maxNodeDelegatorCount_;

```
*Github:* [[203](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L203)]


```solidity
File: src/LRTOracle.sol

97:         assetPriceOracle[asset] = priceOracle;

```
*Github:* [[97](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L97)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

47:         assetPriceFeed[asset] = priceFeed;

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L47)]



<a name="NC-45"></a> 
### [NC-45] State variables should include comments
Consider adding some comments on critical state variables to explain what they are supposed to do: this will help for future code reviews.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

20:     uint256 public maxNodeDelegatorCount;

22:     address[] public nodeDelegatorQueue;

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L20), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L22)]



<a name="NC-46"></a> 
### [NC-46] The `nonReentrant` modifier should occur before all other modifiers
This is a best-practice to protect against reentrancy in other modifiers.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

119:     function depositAsset(
             address asset,
             uint256 depositAmount
         )
             external
             whenNotPaused
             nonReentrant

```
*Github:* [[119](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L119)]


```solidity
File: src/NodeDelegator.sol

51:     function depositAssetIntoStrategy(address asset)
            external
            override
            whenNotPaused
            nonReentrant

74:     function transferBackToLRTDepositPool(
            address asset,
            uint256 amount
        )
            external
            whenNotPaused
            nonReentrant

```
*Github:* [[51](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L51), [74](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L74)]



<a name="NC-47"></a> 
### [NC-47] Lines are too long
The [solidity style guide](https://docs.soliditylang.org/en/v0.8.17/style-guide.html#maximum-line-length) recommends a maximum line length of 120 characters. Lines of code that are longer than 120 should be wrapped.

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

8: import { AccessControlUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/access/AccessControlUpgradeable.sol";

```
*Github:* [[8](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L8)]


```solidity
File: src/LRTDepositPool.sol

13: import { IERC20 } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol";

14: import { PausableUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/security/PausableUpgradeable.sol";

15: import { ReentrancyGuardUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol";

```
*Github:* [[13](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L13), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L15)]


```solidity
File: src/LRTOracle.sol

15: import { PausableUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/security/PausableUpgradeable.sol";

```
*Github:* [[15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L15)]


```solidity
File: src/NodeDelegator.sol

13: import { PausableUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/security/PausableUpgradeable.sol";

14: import { ReentrancyGuardUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/security/ReentrancyGuardUpgradeable.sol";

67:         IEigenStrategyManager(eigenlayerStrategyManagerAddress).depositIntoStrategy(IStrategy(strategy), token, balance);

```
*Github:* [[13](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L13), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L14), [67](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L67)]


```solidity
File: src/RSETH.sol

7: import { ERC20Upgradeable, Initializable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/token/ERC20/ERC20Upgradeable.sol";

8: import { AccessControlUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/access/AccessControlUpgradeable.sol";

9: import { PausableUpgradeable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/security/PausableUpgradeable.sol";

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L7), [8](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L8), [9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L9)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

9: import { Initializable } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol";

```
*Github:* [[9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L9)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

9: import { IAccessControl } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts/contracts/access/IAccessControl.sol";

```
*Github:* [[9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L9)]


</details>


<a name="NC-48"></a> 
### [NC-48] Typos

*There are <b>10</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `eigen`
70:     /// @return assetStakedInEigenLayer asset amount staked in eigen layer through all NDCs

/// @audit `rseth`
94:     /// @return rsethAmountToMint Amount of rseth to mint

/// @audit `rseth`
108:         // calculate rseth amount to mint based on asset amount and asset exchange rate

/// @audit `rseth`
146:     /// @dev private function to mint rseth. It calculates rseth amount to mint based on asset amount and asset exchange

/// @audit `rseth`
149:     /// @param _amount Asset amount to mint rseth

/// @audit `rseth`
150:     /// @return rsethAmountToMint Amount of rseth minted

/// @audit `rseth`
155:         // mint rseth for user

```
*Github:* [[70](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L70), [94](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L94), [108](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L108), [146](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L146), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L149), [150](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L150), [155](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L155)]


```solidity
File: src/LRTOracle.sol

/// @audit `eigen`
50:     /// @dev calculates based on stakedAsset value received from eigen layer

```
*Github:* [[50](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L50)]


```solidity
File: src/NodeDelegator.sol

/// @audit `eigen`
35:     /// @notice Approves the maximum amount of an asset to the eigen strategy manager

/// @audit `eigen`
91:     /// @notice Fetches balance of all assets staked in eigen layer through this contract

```
*Github:* [[35](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L35), [91](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L91)]



<a name="NC-49"></a> 
### [NC-49] Unnecessary cast
The variable is being cast to its own type.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/utils/LRTConfigRoleChecker.sol

/// @audit no need to cast `lrtConfig` into address
21:         if (!IAccessControl(address(lrtConfig)).hasRole(LRTConstants.MANAGER, msg.sender)) {

/// @audit no need to cast `lrtConfig` into address
29:         if (!IAccessControl(address(lrtConfig)).hasRole(DEFAULT_ADMIN_ROLE, msg.sender)) {

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L21), [29](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L29)]



<a name="NC-50"></a> 
### [NC-50] Unused import
The identifier is imported but never used within the file.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTOracle.sol

/// @audit `INodeDelegator`
12: import { INodeDelegator } from "./interfaces/INodeDelegator.sol";

/// @audit `IERC20`
14: import { IERC20 } from "/home/myubuntu/Desktop/2023-11-kelp/lib/openzeppelin-contracts/contracts/interfaces/IERC20.sol";

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L12), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L14)]



<a name="NC-51"></a> 
### [NC-51] Unused named return
Declaring named returns, but not using them, is confusing to the reader. Consider either completely removing them (by declaring just the type without a name), or remove the return statement and do a variable assignment. This would improve the readability of the code, and it may also help reduce regressions during future code refactors.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `totalAssetDeposit` not used
47:     function getTotalAssetDeposits(address asset) public view override returns (uint256 totalAssetDeposit) {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L47)]


```solidity
File: src/LRTOracle.sol

/// @audit `rsETHPrice` not used
52:     function getRSETHPrice() external view returns (uint256 rsETHPrice) {

```
*Github:* [[52](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L52)]



<a name="NC-52"></a> 
### [NC-52] Expressions for constant values should use `immutable` rather than `constant`
While it doesn't save any gas because the compiler knows that developers often make this mistake, it's still best to use the right tool for the task at hand. There is a difference between `constant` variables and `immutable` variables, and they should each be used in their appropriate contexts. `constants` should be used for literal values written into the code, and `immutable` variables should be used for expressions, or values calculated in, or passed into the constructor.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/RSETH.sol

21:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

22:     bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L21), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L22)]


```solidity
File: src/utils/LRTConstants.sol

7:     bytes32 public constant R_ETH_TOKEN = keccak256("R_ETH_TOKEN");

9:     bytes32 public constant ST_ETH_TOKEN = keccak256("ST_ETH_TOKEN");

11:     bytes32 public constant CB_ETH_TOKEN = keccak256("CB_ETH_TOKEN");

14:     bytes32 public constant LRT_ORACLE = keccak256("LRT_ORACLE");

15:     bytes32 public constant LRT_DEPOSIT_POOL = keccak256("LRT_DEPOSIT_POOL");

16:     bytes32 public constant EIGEN_STRATEGY_MANAGER = keccak256("EIGEN_STRATEGY_MANAGER");

19:     bytes32 public constant MANAGER = keccak256("MANAGER");

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L7), [9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L9), [11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L11), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L15), [16](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L16), [19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L19)]



<a name="NC-53"></a> 
### [NC-53] Use `@inheritdoc` for overridden functions

*There are <b>8</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

131:     function getContract(bytes32 contractKey) external view override returns (address) {

135:     function getSupportedAssetList() external view override returns (address[] memory) {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135)]


```solidity
File: src/LRTDepositPool.sol

47:     function getTotalAssetDeposits(address asset) public view override returns (uint256 totalAssetDeposit) {

56:     function getAssetCurrentLimit(address asset) public view override returns (uint256) {

62:     function getNodeDelegatorQueue() external view override returns (address[] memory) {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L47), [56](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L56), [62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L62)]


```solidity
File: src/NodeDelegator.sol

121:     function getAssetBalance(address asset) external view override returns (uint256) {

```
*Github:* [[121](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L121)]


```solidity
File: src/RSETH.sol

73:     function updateLRTConfig(address _lrtConfig) external override onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L73)]



<a name="NC-54"></a> 
### [NC-54] Use the latest solidity version for deployment (`0.8.23`)
Upgrading to a newer Solidity release can optimize gas usage, take advantage of new features and improve overall contract efficiency. Where possible, based on compatibility requirements, it is recommended to use newer/latest solidity version to take advantage of the latest optimizations and features.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L2)]


```solidity
File: src/LRTDepositPool.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L2)]


```solidity
File: src/LRTOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L2)]


```solidity
File: src/NodeDelegator.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L2)]


```solidity
File: src/RSETH.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L2)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L2)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L2)]


```solidity
File: src/utils/LRTConstants.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L2)]


```solidity
File: src/utils/UtilLib.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L2)]



<a name="NC-55"></a> 
### [NC-55] Use of `override` is unnecessary
Starting with Solidity version [0.8.8](https://docs.soliditylang.org/en/v0.8.20/contracts.html#function-overriding), using the `override` keyword when the function solely overrides an interface function, and the function doesn't exist in multiple base contracts, is unnecessary.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

127:     function getLSTToken(bytes32 tokenKey) external view override returns (address) {

131:     function getContract(bytes32 contractKey) external view override returns (address) {

135:     function getSupportedAssetList() external view override returns (address[] memory) {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L127), [131](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L131), [135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135)]


```solidity
File: src/LRTDepositPool.sol

47:     function getTotalAssetDeposits(address asset) public view override returns (uint256 totalAssetDeposit) {

56:     function getAssetCurrentLimit(address asset) public view override returns (uint256) {

62:     function getNodeDelegatorQueue() external view override returns (address[] memory) {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L47), [56](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L56), [62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L62)]


```solidity
File: src/NodeDelegator.sol

121:     function getAssetBalance(address asset) external view override returns (uint256) {

```
*Github:* [[121](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L121)]


```solidity
File: src/RSETH.sol

73:     function updateLRTConfig(address _lrtConfig) external override onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L73)]



<a name="NC-56"></a> 
### [NC-56] Common functions should be refactored to a common base contract
The functions below have the same implementation as is seen in other files. The functions should be refactored into functions of a common base contract.

*There are <b>8</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit seen in src/NodeDelegator.sol
208:     function pause() external onlyLRTManager {

/// @audit seen in src/NodeDelegator.sol
213:     function unpause() external onlyLRTAdmin {

```
*Github:* [[208](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L208), [213](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L213)]


```solidity
File: src/LRTOracle.sol

/// @audit seen in src/LRTDepositPool.sol
102:     function pause() external onlyLRTManager {

/// @audit seen in src/LRTDepositPool.sol
107:     function unpause() external onlyLRTAdmin {

```
*Github:* [[102](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L102), [107](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L107)]


```solidity
File: src/NodeDelegator.sol

/// @audit seen in src/LRTDepositPool.sol
127:     function pause() external onlyLRTManager {

/// @audit seen in src/LRTDepositPool.sol
132:     function unpause() external onlyLRTAdmin {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L127), [132](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L132)]


```solidity
File: src/RSETH.sol

/// @audit seen in src/LRTDepositPool.sol
60:     function pause() external onlyLRTManager {

/// @audit seen in src/LRTDepositPool.sol
66:     function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[60](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L60), [66](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L66)]



<a name="NC-57"></a> 
### [NC-57] Names of `private`/`internal` functions should be prefixed with an underscore
It is recommended by the [Solidity Style Guide](https://docs.soliditylang.org/en/v0.8.20/style-guide.html#underscore-prefix-for-non-external-functions-and-variables)

*There is one instance of this issue:*
```solidity
File: src/utils/UtilLib.sol

11:     function checkNonZeroAddress(address address_) internal pure {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L11)]



<a name="NC-58"></a> 
### [NC-58]  `require()` / `revert()` statements should have descriptive reason strings

*There are <b>3</b> instances of this issue:*
```solidity
File: src/utils/LRTConfigRoleChecker.sol

22:             revert ILRTConfig.CallerNotLRTConfigManager();

30:             revert ILRTConfig.CallerNotLRTConfigAdmin();

37:             revert ILRTConfig.AssetNotSupported();

```
*Github:* [[22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L22), [30](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L30), [37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L37)]



<a name="NC-59"></a> 
### [NC-59] Variables should be named in mixedCase style
As the [Solidity Style Guide](https://docs.soliditylang.org/en/latest/style-guide.html#naming-styles) suggests: `arguments`, `local variables` and `mutable state variables` should be named in mixedCase style.

*There is one instance of this issue:*
```solidity
File: src/utils/LRTConfigRoleChecker.sol

/// @audit `DEFAULT_ADMIN_ROLE`
28:         bytes32 DEFAULT_ADMIN_ROLE = 0x00;

```
*Github:* [[28](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L28)]




## Gas Optimizations

<a name="GAS-1"></a> 
### [GAS-1] Optimize Gas by Using Do-While Loops
Using `do-while` loops instead of `for` loops can be more gas-efficient. Even if you add an `if` condition to account for the case where the loop doesn't execute at all, a `do-while` loop can still be cheaper in terms of gas.

*There are <b>4</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

82:         for (uint256 i; i < ndcsCount;) {

168:         for (uint256 i; i < length;) {

```
*Github:* [[82](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L82), [168](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L168)]


```solidity
File: src/LRTOracle.sol

66:         for (uint16 asset_idx; asset_idx < supportedAssetCount;) {

```
*Github:* [[66](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L66)]


```solidity
File: src/NodeDelegator.sol

109:         for (uint256 i = 0; i < strategiesLength;) {

```
*Github:* [[109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L109)]



<a name="GAS-2"></a> 
### [GAS-2] Consider activating via-ir for deploying
By using `--via-ir` or `{"viaIR": true}`, the compiler is able to use more advanced [multi-function optimizations](https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html#solidity-ir-based-codegen-changes), for extra gas savings.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/)]



<a name="GAS-3"></a> 
### [GAS-3] Divisions can be `unchecked` to save gas
The expression `type(int).min/(-1)` is the only case where division causes an overflow. Therefore, uncheck can be used to [save gas](https://gist.github.com/DadeKuma/3bc597338ae774b8b3bd43280d55271f) in scenarios where it is certain that such an overflow will not occur.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

109:         rsethAmountToMint = (amount * lrtOracle.getAssetPrice(asset)) / lrtOracle.getRSETHPrice();

```
*Github:* [[109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L109)]


```solidity
File: src/LRTOracle.sol

78:         return totalETHInPool / rsEthSupply;

```
*Github:* [[78](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L78)]



<a name="GAS-4"></a> 
### [GAS-4] Operator `+=` costs more gas than `<x> = <x> + <y>` for state variables

*There are <b>3</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

83:             assetLyingInNDCs += IERC20(asset).balanceOf(nodeDelegatorQueue[i]);

84:             assetStakedInEigenLayer += INodeDelegator(nodeDelegatorQueue[i]).getAssetBalance(asset);

```
*Github:* [[83](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L83), [84](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L84)]


```solidity
File: src/LRTOracle.sol

71:             totalETHInPool += totalAssetAmt * assetER;

```
*Github:* [[71](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L71)]



<a name="GAS-5"></a> 
### [GAS-5] Duplicated `require()`/`revert()` checks should be refactored to a modifier or function to save gas
Saves deployment costs.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

/// @audit duplicated on line 159
119:             revert ValueAlreadyInUse();

```
*Github:* [[119](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L119)]


```solidity
File: src/LRTDepositPool.sol

/// @audit duplicated on line 195
137:             revert TokenTransferFailed();

```
*Github:* [[137](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L137)]



<a name="GAS-6"></a> 
### [GAS-6] Events should be emitted outside of loops
Emitting an event has an overhead of 375 gas, which will be incurred on every iteration of the loop. It is cheaper to emit only once after the loop has finished.

*There is one instance of this issue:*
```solidity
File: src/LRTDepositPool.sol

171:             emit NodeDelegatorAddedinQueue(nodeDelegatorContracts[i]);

```
*Github:* [[171](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L171)]



<a name="GAS-7"></a> 
### [GAS-7] Initializers can be marked as payable to save deployment gas
Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. Initializers can be safely marked as payable, because only the deployer or the factory contract would call the function without carrying any funds.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

41:     function initialize(

```
*Github:* [[41](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L41)]


```solidity
File: src/LRTDepositPool.sol

31:     function initialize(address lrtConfigAddr) external initializer {

```
*Github:* [[31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L31)]


```solidity
File: src/LRTOracle.sol

29:     function initialize(address lrtConfigAddr) external initializer {

```
*Github:* [[29](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L29)]


```solidity
File: src/NodeDelegator.sol

26:     function initialize(address lrtConfigAddr) external initializer {

```
*Github:* [[26](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L26)]


```solidity
File: src/RSETH.sol

32:     function initialize(address admin, address lrtConfigAddr) external initializer {

```
*Github:* [[32](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L32)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

27:     function initialize(address lrtConfig_) external initializer {

```
*Github:* [[27](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L27)]



<a name="GAS-8"></a> 
### [GAS-8] `keccak256()` hash of literals should only be computed once
The result of the hash should be stored in an immutable variable, and the variable should be used instead. If the hash is being used as a part of a function selector, the cast to `bytes4` should also only be done once.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/RSETH.sol

21:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

22:     bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L21), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L22)]


```solidity
File: src/utils/LRTConstants.sol

7:     bytes32 public constant R_ETH_TOKEN = keccak256("R_ETH_TOKEN");

9:     bytes32 public constant ST_ETH_TOKEN = keccak256("ST_ETH_TOKEN");

11:     bytes32 public constant CB_ETH_TOKEN = keccak256("CB_ETH_TOKEN");

14:     bytes32 public constant LRT_ORACLE = keccak256("LRT_ORACLE");

15:     bytes32 public constant LRT_DEPOSIT_POOL = keccak256("LRT_DEPOSIT_POOL");

16:     bytes32 public constant EIGEN_STRATEGY_MANAGER = keccak256("EIGEN_STRATEGY_MANAGER");

19:     bytes32 public constant MANAGER = keccak256("MANAGER");

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L7), [9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L9), [11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L11), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L15), [16](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L16), [19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L19)]



<a name="GAS-9"></a> 
### [GAS-9] Multiple accesses of the same mapping/array key/index should be cached
The instances below point to the second+ access of a value inside a mapping/array, within a function. Caching a mapping's value in a local `storage` or `calldata` variable when the value is accessed [multiple times](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0), saves ~42 gas per access due to not having to recalculate the key's keccak256 hash (Gkeccak256 - 30 gas) and that calculation's associated stack operations. Caching an array's struct avoids recalculating the array offsets into memory/calldata

*There are <b>5</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

/// @audit `isSupportedAsset[asset]` is also accessed on line 82
85:         isSupportedAsset[asset] = true;

/// @audit `assetStrategy[asset]` is also accessed on line 118
121:         assetStrategy[asset] = strategy;

/// @audit `tokenMap[key]` is also accessed on line 158
161:         tokenMap[key] = val;

/// @audit `contractMap[key]` is also accessed on line 174
177:         contractMap[key] = val;

```
*Github:* [[85](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L85), [121](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L121), [161](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L161), [177](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L177)]


```solidity
File: src/LRTDepositPool.sol

/// @audit `nodeDelegatorQueue[i]` is also accessed on line 83
84:             assetStakedInEigenLayer += INodeDelegator(nodeDelegatorQueue[i]).getAssetBalance(asset);

```
*Github:* [[84](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L84)]



<a name="GAS-10"></a> 
### [GAS-10] Newer versions of solidity are more gas efficient
The solidity language continues to pursue more efficient gas optimization schemes. Adopting a newer version of solidity can be more gas efficient.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L2)]


```solidity
File: src/LRTDepositPool.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L2)]


```solidity
File: src/LRTOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L2)]


```solidity
File: src/NodeDelegator.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L2)]


```solidity
File: src/RSETH.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L2)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L2)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L2)]


```solidity
File: src/utils/LRTConstants.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L2)]


```solidity
File: src/utils/UtilLib.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L2)]



<a name="GAS-11"></a> 
### [GAS-11] Operator `>=`/`<=` costs less gas than operator `>`/`<`
The compiler uses opcodes `GT` and `ISZERO` for code that uses `>`, but only requires `LT` for `>=`. A similar behavior applies for `>`, which uses opcodes `LT` and `ISZERO`, but only requires `GT` for `<=`. It can save 3 gas for each. It should be converted to the `<=`/`>=` equivalent when comparing against integer literals.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

82:         for (uint256 i; i < ndcsCount;) {

132:         if (depositAmount > getAssetCurrentLimit(asset)) {

164:         if (nodeDelegatorQueue.length + length > maxNodeDelegatorCount) {

168:         for (uint256 i; i < length;) {

```
*Github:* [[82](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L82), [132](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L132), [164](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L164), [168](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L168)]


```solidity
File: src/LRTOracle.sol

66:         for (uint16 asset_idx; asset_idx < supportedAssetCount;) {

```
*Github:* [[66](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L66)]


```solidity
File: src/NodeDelegator.sol

109:         for (uint256 i = 0; i < strategiesLength;) {

```
*Github:* [[109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L109)]



<a name="GAS-12"></a> 
### [GAS-12] Optimize names to save gas
`public`/`external` function names and `public` member variable names can be optimized to save gas. See this [link](https://gist.github.com/IllIllI000/a5d8b486a8259f9f77891a919febd1a9) for an example of how it works. Below are the interfaces/abstract contracts that can be optimized so that the most frequently-called functions use the least amount of gas possible during method lookup. Method IDs that have two leading zero bytes can save 128 gas each during deployment, and renaming functions to have lower method IDs will save 22 gas per call, [per sorted position shifted](https://medium.com/joyso/solidity-how-does-function-name-affect-gas-consumption-in-smart-contract-47d270d8ac92)

*There are <b>6</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

/// @audit `initialize`, `addNewSupportedAsset`, `updateAssetDepositLimit`, `updateAssetStrategy`, `getLSTToken`, `getContract`, `getSupportedAssetList`, `setRSETH`, `setToken`, `setContract`
12: contract LRTConfig is ILRTConfig, AccessControlUpgradeable {

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L12)]


```solidity
File: src/LRTDepositPool.sol

/// @audit `initialize`, `getTotalAssetDeposits`, `getAssetCurrentLimit`, `getNodeDelegatorQueue`, `getAssetDistributionData`, `getRsETHAmountToMint`, `depositAsset`, `addNodeDelegatorContractToQueue`, `transferAssetToNodeDelegator`, `updateMaxNodeDelegatorCount`, `pause`, `unpause`
19: contract LRTDepositPool is ILRTDepositPool, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L19)]


```solidity
File: src/LRTOracle.sol

/// @audit `initialize`, `getAssetPrice`, `getRSETHPrice`, `updatePriceOracleFor`, `pause`, `unpause`
19: contract LRTOracle is ILRTOracle, LRTConfigRoleChecker, PausableUpgradeable {

```
*Github:* [[19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L19)]


```solidity
File: src/NodeDelegator.sol

/// @audit `initialize`, `maxApproveToEigenStrategyManager`, `depositAssetIntoStrategy`, `transferBackToLRTDepositPool`, `getAssetBalances`, `getAssetBalance`, `pause`, `unpause`
18: contract NodeDelegator is INodeDelegator, LRTConfigRoleChecker, PausableUpgradeable, ReentrancyGuardUpgradeable {

```
*Github:* [[18](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L18)]


```solidity
File: src/RSETH.sol

/// @audit `initialize`, `mint`, `burnFrom`, `pause`, `unpause`, `updateLRTConfig`
14: contract RSETH is

```
*Github:* [[14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L14)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

/// @audit `initialize`, `getAssetPrice`, `updatePriceFeedFor`
17: contract ChainlinkPriceOracle is IPriceFetcher, LRTConfigRoleChecker, Initializable {

```
*Github:* [[17](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L17)]



<a name="GAS-13"></a> 
### [GAS-13] Redundant state variable getters
Getters for public state variables are automatically generated so there is no need to code them manually and waste gas.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

135:     function getSupportedAssetList() external view override returns (address[] memory) {
             return supportedAssetList;

```
*Github:* [[135](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L135)]


```solidity
File: src/LRTDepositPool.sol

62:     function getNodeDelegatorQueue() external view override returns (address[] memory) {
            return nodeDelegatorQueue;

```
*Github:* [[62](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L62)]



<a name="GAS-14"></a> 
### [GAS-14] State variables access within a loop
State variable reads and writes are more expensive than local variable reads and writes. Therefore, it is recommended to replace state variable reads and writes within loops with a local variable. Gas savings should be multiplied by the average loop length.

*There is one instance of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `nodeDelegatorQueue`
170:             nodeDelegatorQueue.push(nodeDelegatorContracts[i]);

```
*Github:* [[170](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L170)]



<a name="GAS-15"></a> 
### [GAS-15] Unused named return variables without optimizer waste gas
Consider changing the variable to be an unnamed one, since the variable is never assigned, nor is it returned by name. If the optimizer is not turned on, leaving the code as it is will also waste gas for the stack variable.

*There are <b>2</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `totalAssetDeposit` not used
47:     function getTotalAssetDeposits(address asset) public view override returns (uint256 totalAssetDeposit) {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L47)]


```solidity
File: src/LRTOracle.sol

/// @audit `rsETHPrice` not used
52:     function getRSETHPrice() external view returns (uint256 rsETHPrice) {

```
*Github:* [[52](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L52)]



<a name="GAS-16"></a> 
### [GAS-16] Optimize External Calls with Assembly for Memory Efficiency
Using interfaces to make external contract calls in Solidity is convenient but can be inefficient in terms of memory utilization. Each such call involves creating a new memory location to store the data being passed, thus incurring memory expansion costs.

Inline assembly allows for optimized memory usage by re-using already allocated memory spaces or using the scratch space for smaller datasets. This can result in notable gas savings, especially for contracts that make frequent external calls.

Additionally, using inline assembly enables important safety checks like verifying if the target address has code deployed to it using `extcodesize(addr)` before making the call, mitigating risks associated with contract interactions.

*There are <b>7</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `.transferFrom(...)`
136:         if (!IERC20(asset).transferFrom(msg.sender, address(this), depositAmount)) {

/// @audit `.mint(...)`
156:         IRSETH(rsethToken).mint(msg.sender, rsethAmountToMint);

/// @audit `.transfer(...)`
194:         if (!IERC20(asset).transfer(nodeDelegator, amount)) {

```
*Github:* [[136](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L136), [156](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L156), [194](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L194)]


```solidity
File: src/NodeDelegator.sol

/// @audit `.approve(...)`
45:         IERC20(asset).approve(eigenlayerStrategyManagerAddress, type(uint256).max);

/// @audit `.depositIntoStrategy(...)`
67:         IEigenStrategyManager(eigenlayerStrategyManagerAddress).depositIntoStrategy(IStrategy(strategy), token, balance);

/// @audit `.transfer(...)`
86:         if (!IERC20(asset).transfer(lrtDepositPool, amount)) {

/// @audit `.getDeposits(...)`
103:             IEigenStrategyManager(eigenlayerStrategyManagerAddress).getDeposits(address(this));

```
*Github:* [[45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L45), [67](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L67), [86](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L86), [103](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L103)]



<a name="GAS-17"></a> 
### [GAS-17] Use assembly to compute hashes to save gas
If the arguments to the encode call can fit into the scratch space (two words or fewer), then it's more efficient to use assembly to generate the hash (80 gas):

`keccak256(abi.encodePacked(x, y)) -> assembly {mstore(0x00, a); mstore(0x20, b); let hash := keccak256(0x00, 0x40); }`

*There are <b>9</b> instances of this issue:*
```solidity
File: src/RSETH.sol

21:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

22:     bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L21), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L22)]


```solidity
File: src/utils/LRTConstants.sol

7:     bytes32 public constant R_ETH_TOKEN = keccak256("R_ETH_TOKEN");

9:     bytes32 public constant ST_ETH_TOKEN = keccak256("ST_ETH_TOKEN");

11:     bytes32 public constant CB_ETH_TOKEN = keccak256("CB_ETH_TOKEN");

14:     bytes32 public constant LRT_ORACLE = keccak256("LRT_ORACLE");

15:     bytes32 public constant LRT_DEPOSIT_POOL = keccak256("LRT_DEPOSIT_POOL");

16:     bytes32 public constant EIGEN_STRATEGY_MANAGER = keccak256("EIGEN_STRATEGY_MANAGER");

19:     bytes32 public constant MANAGER = keccak256("MANAGER");

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L7), [9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L9), [11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L11), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L15), [16](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L16), [19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L19)]



<a name="GAS-18"></a> 
### [GAS-18] Use assembly to emit events
To efficiently emit events, it's possible to utilize assembly by making use of scratch space and the free memory pointer. This approach has the advantage of potentially avoiding the costs associated with memory expansion.

However, it's important to note that in order to safely optimize this process, it is preferable to cache and restore the free memory pointer.

A good example of such practice can be seen in [Solady's](https://github.com/Vectorized/solady/blob/main/src/tokens/ERC1155.sol#L167) codebase.

<details>
<summary>
There are <b>17</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

88:         emit AddedNewSupportedAsset(asset, depositLimit);

103:         emit AssetDepositLimitUpdate(asset, depositLimit);

162:         emit SetToken(key, val);

178:         emit SetContract(key, val);

```
*Github:* [[88](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L88), [103](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L103), [162](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L162), [178](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L178)]


```solidity
File: src/LRTDepositPool.sol

37:         emit UpdatedLRTConfig(lrtConfigAddr);

143:         emit AssetDeposit(asset, depositAmount, rsethAmountMinted);

171:             emit NodeDelegatorAddedinQueue(nodeDelegatorContracts[i]);

204:         emit MaxNodeDelegatorCountUpdated(maxNodeDelegatorCount);

```
*Github:* [[37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L37), [143](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L143), [171](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L171), [204](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L204)]


```solidity
File: src/LRTOracle.sol

34:         emit UpdatedLRTConfig(lrtConfigAddr);

98:         emit AssetPriceOracleUpdate(asset, priceOracle);

```
*Github:* [[34](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L34), [98](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L98)]


```solidity
File: src/NodeDelegator.sol

32:         emit UpdatedLRTConfig(lrtConfigAddr);

65:         emit AssetDepositIntoStrategy(asset, strategy, balance);

```
*Github:* [[32](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L32), [65](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L65)]


```solidity
File: src/RSETH.sol

41:         emit UpdatedLRTConfig(lrtConfigAddr);

76:         emit UpdatedLRTConfig(_lrtConfig);

```
*Github:* [[41](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L41), [76](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L76)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

31:         emit UpdatedLRTConfig(lrtConfig_);

48:         emit AssetPriceFeedUpdate(asset, priceFeed);

```
*Github:* [[31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L31), [48](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L48)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

50:         emit UpdatedLRTConfig(lrtConfigAddr);

```
*Github:* [[50](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L50)]


</details>


<a name="GAS-19"></a> 
### [GAS-19] Use assembly to write address/contract type storage values
Using `assembly { sstore(state.slot, addr)` instead of `state = addr` can save gas.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

67:         rsETH = rsETH_;

146:         rsETH = rsETH_;

```
*Github:* [[67](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L67), [146](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L146)]


```solidity
File: src/LRTDepositPool.sol

36:         lrtConfig = ILRTConfig(lrtConfigAddr);

```
*Github:* [[36](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L36)]


```solidity
File: src/LRTOracle.sol

33:         lrtConfig = ILRTConfig(lrtConfigAddr);

```
*Github:* [[33](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L33)]


```solidity
File: src/NodeDelegator.sol

31:         lrtConfig = ILRTConfig(lrtConfigAddr);

```
*Github:* [[31](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L31)]


```solidity
File: src/RSETH.sol

40:         lrtConfig = ILRTConfig(lrtConfigAddr);

75:         lrtConfig = ILRTConfig(_lrtConfig);

```
*Github:* [[40](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L40), [75](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L75)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

30:         lrtConfig = ILRTConfig(lrtConfig_);

```
*Github:* [[30](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L30)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

49:         lrtConfig = ILRTConfig(lrtConfigAddr);

```
*Github:* [[49](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L49)]



<a name="GAS-20"></a> 
### [GAS-20] Use local variables for emitting
Use the function/modifier's local copy of the state variable, rather than incurring an extra Gwarmaccess (100 gas). In the unlikely event that the state variable hasn't already been used by the function/modifier, consider whether it is really necessary to include it in the event, given the fact that it incurs a Gcoldsload (2100 gas), or whether it can be passed in to or back out of the functions that do use it

*There is one instance of this issue:*
```solidity
File: src/LRTDepositPool.sol

/// @audit `maxNodeDelegatorCount`
204:         emit MaxNodeDelegatorCountUpdated(maxNodeDelegatorCount);

```
*Github:* [[204](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L204)]



<a name="GAS-21"></a> 
### [GAS-21] Use a more recent version of solidity
- Use a solidity version of at least 0.8.2 to get simple compiler automatic inlining.
- Use a solidity version of at least 0.8.3 to get better struct packing and cheaper multiple storage reads.
- Use a solidity version of at least 0.8.4 to get custom errors, which are cheaper at deployment than revert()/require() strings.
- Use a solidity version of at least 0.8.10 to have external calls skip contract existence checks if the external call has a return value.

*There are <b>9</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L2)]


```solidity
File: src/LRTDepositPool.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L2)]


```solidity
File: src/LRTOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L2)]


```solidity
File: src/NodeDelegator.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L2)]


```solidity
File: src/RSETH.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L2)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L2)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L2)]


```solidity
File: src/utils/LRTConstants.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L2)]


```solidity
File: src/utils/UtilLib.sol

2: pragma solidity 0.8.21;

```
*Github:* [[2](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L2)]



<a name="GAS-22"></a> 
### [GAS-22] Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes
Avoids a Gsset (20000 gas) when changing from false to true, after having been true in the past. Since most of the bools aren't changed twice in one transaction, I've counted the amount of gas as half of the full amount, for each variable.

*There is one instance of this issue:*
```solidity
File: src/LRTConfig.sol

15:     mapping(address token => bool isSupported) public isSupportedAsset;

```
*Github:* [[15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L15)]



<a name="GAS-23"></a> 
### [GAS-23] Using bitmap to store bool states can save gas
Using a bitmap instead of a bool array or a bool mapping to store boolean states can save gas fees. This is because the bitmap can store 256 boolean values in a single slot instead of 256 slots, which can save gas when writing bool values or when reading multiple bool values from the same slot.

*There is one instance of this issue:*
```solidity
File: src/LRTConfig.sol

15:     mapping(address token => bool isSupported) public isSupportedAsset;

```
*Github:* [[15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L15)]



<a name="GAS-24"></a> 
### [GAS-24] Using bools for storage incurs overhead
Use uint256(1) and uint256(2) for true/false to avoid a Gwarmaccess (100 gas), and to avoid Gsset (20000 gas) when changing from ‘false’ to ‘true’, after having been ‘true’ in the past. See [source](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/58f635312aa21f947cae5f8578638a85aa2519f5/contracts/security/ReentrancyGuard.sol#L23-L27).

*There is one instance of this issue:*
```solidity
File: src/LRTConfig.sol

15:     mapping(address token => bool isSupported) public isSupportedAsset;

```
*Github:* [[15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L15)]



<a name="GAS-25"></a> 
### [GAS-25] Don't initialize variables with default value

*There is one instance of this issue:*
```solidity
File: src/NodeDelegator.sol

109:         for (uint256 i = 0; i < strategiesLength;) {

```
*Github:* [[109](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L109)]



<a name="GAS-26"></a> 
### [GAS-26] Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead
Using `int`s/`uint`s smaller than 32 bytes may cost more gas. This is because the EVM operates on 32 bytes at a time, so if an element is smaller than 32 bytes, the EVM must perform more operations to reduce the size of the element from 32 bytes to the desired size.

*There is one instance of this issue:*
```solidity
File: src/LRTOracle.sol

66:         for (uint16 asset_idx; asset_idx < supportedAssetCount;) {

```
*Github:* [[66](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L66)]



<a name="GAS-27"></a> 
### [GAS-27] Constructors can be marked as `payable` to save deployment gas
Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. A constructor can be safely marked as payable, because only the deployer would be able to pass funds, and the project itself would not pass any funds.

*There are <b>6</b> instances of this issue:*
```solidity
File: src/LRTConfig.sol

24:     constructor() {

```
*Github:* [[24](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L24)]


```solidity
File: src/LRTDepositPool.sol

25:     constructor() {

```
*Github:* [[25](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L25)]


```solidity
File: src/LRTOracle.sol

23:     constructor() {

```
*Github:* [[23](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L23)]


```solidity
File: src/NodeDelegator.sol

20:     constructor() {

```
*Github:* [[20](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L20)]


```solidity
File: src/RSETH.sol

25:     constructor() {

```
*Github:* [[25](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L25)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

21:     constructor() {

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L21)]



<a name="GAS-28"></a> 
### [GAS-28] Functions guaranteed to revert when called by normal users can be marked `payable`
If a function modifier such as `onlyOwner` is used, the function will revert if a normal user tries to pay the function. Marking the function as `payable` will lower the gas cost for legitimate callers because the compiler will not include checks for whether a payment was provided.

<details>
<summary>
There are <b>21</b> instances (click to show):
</summary>

```solidity
File: src/LRTConfig.sol

73:     function addNewSupportedAsset(address asset, uint256 depositLimit) external onlyRole(LRTConstants.MANAGER) {

144:     function setRSETH(address rsETH_) external onlyRole(DEFAULT_ADMIN_ROLE) {

149:     function setToken(bytes32 tokenKey, address assetAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

165:     function setContract(bytes32 contractKey, address contractAddress) external onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L73), [144](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L144), [149](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L149), [165](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTConfig.sol#L165)]


```solidity
File: src/LRTDepositPool.sol

162:     function addNodeDelegatorContractToQueue(address[] calldata nodeDelegatorContracts) external onlyLRTAdmin {

202:     function updateMaxNodeDelegatorCount(uint256 maxNodeDelegatorCount_) external onlyLRTAdmin {

208:     function pause() external onlyLRTManager {

213:     function unpause() external onlyLRTAdmin {

```
*Github:* [[162](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L162), [202](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L202), [208](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L208), [213](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L213)]


```solidity
File: src/LRTOracle.sol

45:     function getAssetPrice(address asset) public view onlySupportedAsset(asset) returns (uint256) {

102:     function pause() external onlyLRTManager {

107:     function unpause() external onlyLRTAdmin {

```
*Github:* [[45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L45), [102](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L102), [107](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L107)]


```solidity
File: src/NodeDelegator.sol

127:     function pause() external onlyLRTManager {

132:     function unpause() external onlyLRTAdmin {

```
*Github:* [[127](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L127), [132](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/NodeDelegator.sol#L132)]


```solidity
File: src/RSETH.sol

47:     function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) whenNotPaused {

54:     function burnFrom(address account, uint256 amount) external onlyRole(BURNER_ROLE) whenNotPaused {

60:     function pause() external onlyLRTManager {

66:     function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {

73:     function updateLRTConfig(address _lrtConfig) external override onlyRole(DEFAULT_ADMIN_ROLE) {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L47), [54](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L54), [60](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L60), [66](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L66), [73](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L73)]


```solidity
File: src/oracles/ChainlinkPriceOracle.sol

37:     function getAssetPrice(address asset) external view onlySupportedAsset(asset) returns (uint256) {

45:     function updatePriceFeedFor(address asset, address priceFeed) external onlyLRTManager onlySupportedAsset(asset) {

```
*Github:* [[37](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L37), [45](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/oracles/ChainlinkPriceOracle.sol#L45)]


```solidity
File: src/utils/LRTConfigRoleChecker.sol

47:     function updateLRTConfig(address lrtConfigAddr) external virtual onlyLRTAdmin {

```
*Github:* [[47](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConfigRoleChecker.sol#L47)]


</details>


<a name="GAS-29"></a> 
### [GAS-29] Using `private` rather than `public` for constants, saves gas
If needed, the values can be read from the verified contract source code, or if there are multiple values there can be a single getter function that [returns a tuple](https://github.com/code-423n4/2022-08-frax/blob/90f55a9ce4e25bceed3a74290b854341d8de6afa/src/contracts/FraxlendPair.sol#L156-L178) of the values of all currently-public constants. Saves **3406-3606 gas** in deployment gas due to the compiler not having to create non-payable getter functions for deployment calldata, not having to store the bytes of the value outside of where it's used, and not adding another entry to the method ID table

*There are <b>9</b> instances of this issue:*
```solidity
File: src/RSETH.sol

21:     bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

22:     bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```
*Github:* [[21](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L21), [22](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/RSETH.sol#L22)]


```solidity
File: src/utils/LRTConstants.sol

7:     bytes32 public constant R_ETH_TOKEN = keccak256("R_ETH_TOKEN");

9:     bytes32 public constant ST_ETH_TOKEN = keccak256("ST_ETH_TOKEN");

11:     bytes32 public constant CB_ETH_TOKEN = keccak256("CB_ETH_TOKEN");

14:     bytes32 public constant LRT_ORACLE = keccak256("LRT_ORACLE");

15:     bytes32 public constant LRT_DEPOSIT_POOL = keccak256("LRT_DEPOSIT_POOL");

16:     bytes32 public constant EIGEN_STRATEGY_MANAGER = keccak256("EIGEN_STRATEGY_MANAGER");

19:     bytes32 public constant MANAGER = keccak256("MANAGER");

```
*Github:* [[7](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L7), [9](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L9), [11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L11), [14](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L14), [15](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L15), [16](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L16), [19](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/LRTConstants.sol#L19)]



<a name="GAS-30"></a> 
### [GAS-30] Using assembly to check for zero can save gas
Using assembly to check for zero can save gas by allowing more direct access to the evm and reducing some of the overhead associated with high-level operations in solidity.

*There are <b>3</b> instances of this issue:*
```solidity
File: src/LRTDepositPool.sol

129:         if (depositAmount == 0) {

```
*Github:* [[129](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTDepositPool.sol#L129)]


```solidity
File: src/LRTOracle.sol

56:         if (rsEthSupply == 0) {

```
*Github:* [[56](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/LRTOracle.sol#L56)]


```solidity
File: src/utils/UtilLib.sol

12:         if (address_ == address(0)) revert ZeroAddressNotAllowed();

```
*Github:* [[12](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L12)]



<a name="GAS-31"></a> 
### [GAS-31] `internal` functions not called by the contract should be removed
If the functions are required by an interface, the contract should inherit from that interface and use the `override` keyword

*There is one instance of this issue:*
```solidity
File: src/utils/UtilLib.sol

11:     function checkNonZeroAddress(address address_) internal pure {

```
*Github:* [[11](https://github.com/code-423n4/2023-11-kelp/blob/4b34abc952205e2a34bff893a0de0c75b8052149/src/utils/UtilLib.sol#L11)]



