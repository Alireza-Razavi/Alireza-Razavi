# Report

Audit report for **2024-02-wise-lending** generated by *ubl4nk_bot*.

## Low Issues


*Total <b>1</b> instance over <b>1</b> issue:*

|ID|Issue|Instances|
|-|:-|:-:|
| [L-1](#L-1) | Initializers could be front-run | 1 |

## Non Critical Issues


*Total <b>503</b> instances over <b>23</b> issues:*

|ID|Issue|Instances|
|-|:-|:-:|
| [NC-1](#NC-1) | `abi.encodePacked()` should be replaced with `bytes.concat()` | 6 |
| [NC-2](#NC-2) | Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, for readability | 7 |
| [NC-3](#NC-3) | Complex casting | 1 |
| [NC-4](#NC-4) | Consider adding formal verification proofs | 1 |
| [NC-5](#NC-5) | Consider using SafeTransferLib.safeTransferETH() or Address.sendValue() for clearer semantic meaning | 2 |
| [NC-6](#NC-6) | Constants should be put on the left side of comparisons | 57 |
| [NC-7](#NC-7) | Contracts should have full test coverage | 1 |
| [NC-8](#NC-8) | Custom errors has no error details | 124 |
| [NC-9](#NC-9) | Enable IR-based code generation | 1 |
| [NC-10](#NC-10) | Execution at deadlines should be allowed | 2 |
| [NC-11](#NC-11) | Import declarations should import specific identifiers, rather than the whole file | 115 |
| [NC-12](#NC-12) | Lack of brace spacing | 2 |
| [NC-13](#NC-13) | Large or complicated code bases should implement invariant tests | 1 |
| [NC-14](#NC-14) | Named mappings are recommended | 52 |
| [NC-15](#NC-15) | There is no need to initialize variables with 0 | 2 |
| [NC-16](#NC-16) | Non-assembly method available | 1 |
| [NC-17](#NC-17) | Use `abi.encodeCall()` instead of `abi.encodeWithSignature()`/`abi.encodeWithSelector()` | 4 |
| [NC-18](#NC-18) | Consider using `delete` rather than assigning zero/false to clear values | 7 |
| [NC-19](#NC-19) | Expressions for constant values should use `immutable` rather than `constant` | 90 |
| [NC-20](#NC-20) | Consider using modifiers for address control | 19 |
| [NC-21](#NC-21) | Use scientific notation (e.g. `1e18`) rather than exponentiation (e.g. `10**18`) | 1 |
| [NC-22](#NC-22) | Whitespace in Expressions | 2 |
| [NC-23](#NC-23) | Empty body - Consider commenting why | 5 |

## Gas Optimizations


*Total <b>705</b> instances over <b>29</b> issues:*

|ID|Issue|Instances|Gas|
|-|:-|:-:|:-:|
| [GAS-1](#GAS-1) | Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, where appropriate | 7 | - |
| [GAS-2](#GAS-2) | Consider activating via-ir for deploying | 1 | - |
| [GAS-3](#GAS-3) | Counting down in for statements is more gas efficient | 1 | - |
| [GAS-4](#GAS-4) | Divisions can be `unchecked` to save gas | 108 | 2160 |
| [GAS-5](#GAS-5) | Don't caching global special variables | 3 | 36 |
| [GAS-6](#GAS-6) | Do not calculate constants | 22 | - |
| [GAS-7](#GAS-7) | Increments can be `unchecked` to save gas | 1 | 60 |
| [GAS-8](#GAS-8) | Initializers can be marked as payable to save deployment gas | 1 | 21 |
| [GAS-9](#GAS-9) | Operator `>=`/`<=` costs less gas than operator `>`/`<` | 145 | 435 |
| [GAS-10](#GAS-10) | Optimize Gas by splitting `if() revert` statements | 1 | - |
| [GAS-11](#GAS-11) | There are comparisons to boolean literals (true and false), these can be simplified to save gas | 112 | 2016 |
| [GAS-12](#GAS-12) | Use assembly to compute hashes to save gas | 6 | 480 |
| [GAS-13](#GAS-13) | Use assembly to emit events | 73 | 2774 |
| [GAS-14](#GAS-14) | Use assembly to validate `msg.sender` | 19 | - |
| [GAS-15](#GAS-15) | Using a double `if` statement instead of a logical AND (`&&`) | 8 | 240 |
| [GAS-16](#GAS-16) | Consider using OZ EnumerateSet in place of nested mappings | 7 | 7000 |
| [GAS-17](#GAS-17) | Use != 0 instead of > 0 | 36 | 108 |
| [GAS-18](#GAS-18) | Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes | 20 | 171000 |
| [GAS-19](#GAS-19) | Using bitmap to store bool states can save gas | 13 | - |
| [GAS-20](#GAS-20) | Using `this` to access functions results in an external call, wasting gas | 2 | 200 |
| [GAS-21](#GAS-21) | `abi.encodePacked` is more gas efficient than `abi.encode` | 3 | - |
| [GAS-22](#GAS-22) | Using bools for storage incurs overhead | 20 | 2000 |
| [GAS-23](#GAS-23) | Cache array length outside of loop | 3 | - |
| [GAS-24](#GAS-24) | Don't initialize variables with default value | 2 | - |
| [GAS-25](#GAS-25) | Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead | 83 | 4565 |
| [GAS-26](#GAS-26) | Constructors can be marked as `payable` to save deployment gas | 1 | 21 |
| [GAS-27](#GAS-27) | `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too) | 1 | 5 |
| [GAS-28](#GAS-28) | Using `private` rather than `public` for constants, saves gas | 3 | - |
| [GAS-29](#GAS-29) | Use shift Right/Left instead of division/multiplication if possible | 3 | - |

## Low Issues

<a name="L-1"></a> 
### [L-1] Initializers could be front-run
Initializers could be front-run, allowing an attacker to either set their own values, take ownership of the contract, and in the best case forcing a re-deployment

*There is one instance of this issue:*
```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

682:     function initialize(

```
*Github:* [[682](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L682)]




## Non Critical Issues

<a name="NC-1"></a> 
### [NC-1] `abi.encodePacked()` should be replaced with `bytes.concat()`
Solidity version 0.8.4 introduces `bytes.concat()`, which can be used to replace `abi.encodePacked()` on bytes/strings. It can make the intended operation clearer, leading to less reviewer confusion.

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/MainHelper.sol

656:             abi.encodePacked(

```
*Github:* [[656](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L656)]


```solidity
File: contracts/PositionNFTs.sol

360:             abi.encodePacked(

```
*Github:* [[360](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L360)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

24:                 abi.encodePacked(

66:             abi.encodePacked(

```
*Github:* [[24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L24), [66](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L66)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

202:             abi.encodePacked(

```
*Github:* [[202](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L202)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

48:                         abi.encodePacked(

```
*Github:* [[48](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L48)]



<a name="NC-2"></a> 
### [NC-2] Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, for readability
Well-organized data structures make code reviews easier, which may lead to fewer bugs. Consider combining related mappings into mappings to structs, so it's clear what data is related

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

158:     mapping(address => mapping(address => bool)) public allowedTokens;

161:     mapping(address => mapping(address => uint256)) public gatheredIncentiveToken;

```
*Github:* [[158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L158), [161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L161)]


```solidity
File: contracts/WiseLendingDeclaration.sol

273:     mapping(uint256 => mapping(address => uint256)) public userBorrowShares;

274:     mapping(uint256 => mapping(address => uint256)) public pureCollateralAmount;

275:     mapping(uint256 => mapping(address => LendingEntry)) public userLendingData;

```
*Github:* [[273](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L273), [274](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L274), [275](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L275)]


```solidity
File: contracts/WiseLowLevelHelper.sol

372:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

383:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

```
*Github:* [[372](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L372), [383](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L383)]



<a name="NC-3"></a> 
### [NC-3] Complex casting
Consider whether the number of casts is really necessary, or whether using a different type would be more appropriate. Alternatively, add comments to explain in detail why the casts are necessary, and any implicit reasons why the cast does not introduce an overflow.

*There is one instance of this issue:*
```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

157:                 int192(uint192(answer))

```
*Github:* [[157](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L157)]



<a name="NC-4"></a> 
### [NC-4] Consider adding formal verification proofs
Formal verification is the act of proving or disproving the correctness of intended algorithms underlying a system with respect to a certain formal specification/property/invariant, using formal methods of mathematics.

Some tools that are currently available to perform these tests on smart contracts are [SMTChecker](https://docs.soliditylang.org/en/latest/smtchecker.html) and [Certora Prover](https://www.certora.com/).

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/)]



<a name="NC-5"></a> 
### [NC-5] Consider using SafeTransferLib.safeTransferETH() or Address.sendValue() for clearer semantic meaning
For improved code readability and better semantic understanding, it's recommended to use OpenZeppelin's SafeTransferLib.safeTransferETH() or Address.sendValue(). These functions explicitly describe their operation with their naming convention, increasing the comprehensibility of the code. Their usage over lower-level calls enhances the maintainability of your smart contract code by clearly indicating the purpose of the function.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

208:         ) = curvePool.call{value: 0} (

225:         ) = curveMeta.call{value: 0} (

```
*Github:* [[208](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L208), [225](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L225)]



<a name="NC-6"></a> 
### [NC-6] Constants should be put on the left side of comparisons
Putting constants on the left side of comparison statements is a best practice known as [Yoda conditions](https://en.wikipedia.org/wiki/Yoda_conditions). Although solidity's static typing system prevents accidental assignments within conditionals, adopting this practice can improve code readability and consistency, especially when working across multiple languages.

<details>
<summary>
There are <b>57</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/FeeManager.sol

291:         if (amount == 0) {

640:         if (shares == 0) {

663:         if (totalBadDebtETH == 0) {

746:         if (badDebtPosition[_nftId] == 0) {

753:         if (WISE_LENDING.getTotalDepositShares(_receivingToken) == 0) {

757:         if (WISE_LENDING.getTotalDepositShares(_paybackToken) == 0) {

828:         if (badDebtPosition[_nftId] == 0) {

832:         if (WISE_LENDING.getTotalDepositShares(_paybackToken) == 0) {

```
*Github:* [[291](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L291), [640](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L640), [663](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L663), [746](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L746), [753](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L753), [757](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L757), [828](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L828), [832](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L832)]


```solidity
File: contracts/MainHelper.sol

542:         if (feeAmount == 0) {

554:         if (feeShares == 0) {

1161:         if (_nftId == 0) {

```
*Github:* [[542](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L542), [554](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L554), [1161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L1161)]


```solidity
File: contracts/PositionNFTs.sol

355:         if (bytes(currentBaseURI).length == 0) {

378:         if (_tokenId == 0) {

385:         while (j != 0) {

397:         while (j != 0) {

```
*Github:* [[355](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L355), [378](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L378), [385](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L385), [397](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L397)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol

72:         if (borrowShares == 0) {

80:         if (totalCollateral == 0) {

```
*Github:* [[72](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L72), [80](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L80)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

73:         if (_flashloanToken.length == 0) {

```
*Github:* [[73](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L73)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol

213:         if (borrowTokenAmountAave == 0) {

404:         if (borrowShares == 0) {

```
*Github:* [[213](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L213), [404](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L404)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol

189:         if (availableNFTCount == 0) {

```
*Github:* [[189](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L189)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

124:         if (_pendleChildShares == 0) {

```
*Github:* [[124](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L124)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

255:             if (lastIndex[i] == 0 && index > 0) {

339:         if (additonalAssets == 0) {

391:         if (totalLpAssetsToDistribute == 0) {

508:         if (_amount == 0) {

539:         if (_underlyingLpAssetAmount == 0) {

548:         if (shares == 0) {

559:         if (feeShares == 0) {

615:         if (_shares == 0) {

654:         if (_underlyingLpAssetAmount == 0) {

691:         if (address(PENDLE_MARKET) != address(0)) {

```
*Github:* [[255](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L255), [339](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L339), [391](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L391), [508](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L508), [539](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L539), [548](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L548), [559](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L559), [615](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L615), [654](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L654), [691](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L691)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol

122:         if (_keyId == 0) {

```
*Github:* [[122](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L122)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

197:         if (bytes(currentBaseURI).length == 0) {

220:         if (_tokenId == 0) {

227:         while (j != 0) {

239:         while (j != 0) {

```
*Github:* [[197](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L197), [220](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L220), [227](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L227), [239](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L239)]


```solidity
File: contracts/WiseCore.sol

588:         if (userShares == 0) {

```
*Github:* [[588](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L588)]


```solidity
File: contracts/WiseLowLevelHelper.sol

453:         if (_value == 0) {

```
*Github:* [[453](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L453)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

74:         if (size == 0) {

439:         if (tickCumulativesDelta < 0 && (tickCumulativesDelta % twapPeriodInt56 != 0)) {

566:         if (heartBeat[_tokenAddress] == 0) {

```
*Github:* [[74](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L74), [439](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L439), [566](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L566)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

455:         if (length == 0) {

```
*Github:* [[455](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L455)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

70:         if (overallCollateral == 0) {

267:         if (WISE_LENDING.getPositionBorrowTokenLength(_nftId) == 0) {

453:         if (len == 0) {

510:         if (len == 0) {

652:         if (len == 0) {

924:         if (currentTotalBorrowShares == 0) {

961:         if (currentTotalLendingShares == 0) {

1117:         if (_newMinDepositValue == 0) {

```
*Github:* [[70](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L70), [267](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L267), [453](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L453), [510](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L510), [652](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L652), [924](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L924), [961](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L961), [1117](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L1117)]


```solidity
File: contracts/WiseSecurity/WiseSecurityHelper.sol

210:         if (WISE_LENDING.getPositionLendingShares(_nftId, _poolToken) == 0) {

295:         if (lendingShares == 0) {

624:         if (borrowShares == 0) {

818:         if (borrowAmount == 0) {

1010:         if (pseudoTotalPool == 0) {

```
*Github:* [[210](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L210), [295](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L295), [624](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L624), [818](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L818), [1010](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1010)]


```solidity
File: contracts/WrapperHub/AaveHelper.sol

29:         if (WISE_LENDING.getTotalDepositShares(_poolToken) == 0) {

```
*Github:* [[29](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L29)]


</details>


<a name="NC-7"></a> 
### [NC-7] Contracts should have full test coverage
While 100% code coverage does not guarantee that there are no bugs, it often will catch easy-to-find bugs, and will ensure that there are fewer regressions when the code invariably has to be modified. Furthermore, in order to get full coverage, code authors will often have to re-organize their code so that it is more modular, so that each component can be tested separately, which reduces interdependencies between modules and layers, and makes for code that is easier to reason about and audit.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/)]



<a name="NC-8"></a> 
### [NC-8] Custom errors has no error details
Consider adding parameters to the error to indicate which user or values caused the failure.

<details>
<summary>
There are <b>124</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

24: error InvalidDecimals();

25: error CardinalityNotSatisfied();

26: error OldestObservationNotSatisfied();

```
*Github:* [[24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L24), [25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L25), [26](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L26)]


```solidity
File: contracts/DerivativeOracles/PtOracleDerivative.sol

19: error CardinalityNotSatisfied();

20: error OldestObservationNotSatisfied();

```
*Github:* [[19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L20)]


```solidity
File: contracts/DerivativeOracles/PtOraclePure.sol

19: error CardinalityNotSatisfied();

20: error OldestObservationNotSatisfied();

```
*Github:* [[19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L20)]


```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

16: error NotWiseLiquidation();

17: error AlreadySet();

18: error ExistingBadDebt();

19: error NotWiseLending();

20: error NotIncentiveMaster();

21: error PoolAlreadyAdded();

22: error TooHighValue();

23: error TooLowValue();

24: error NotAllowed();

25: error PoolNotPresent();

26: error ZeroAddress();

27: error NoIncentive();

28: error Reentered();

29: error PoolNotActive();

```
*Github:* [[16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L17), [18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L18), [19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L20), [21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L21), [22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L22), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L23), [24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L24), [25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L25), [26](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L26), [27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L27), [28](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L28), [29](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L29)]


```solidity
File: contracts/OwnableMaster.sol

5: error NoValue();

6: error NotMaster();

7: error NotProposed();

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L6), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L7)]


```solidity
File: contracts/PositionNFTs.sol

9: error NotPermitted();

```
*Github:* [[9](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L9)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

23: error Deactivated();

24: error InvalidParam();

25: error AccessDenied();

26: error LeverageTooHigh();

27: error DebtRatioTooLow();

28: error NotBalancerVault();

29: error DebtRatioTooHigh();

30: error ResultsInBadDebt();

31: error TooMuchValueLost();

32: error CollateralFactorTooHigh();

33: error TooMuchShares();

34: error WrongChainId();

```
*Github:* [[23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L23), [24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L24), [25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L25), [26](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L26), [27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L27), [28](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L28), [29](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L29), [30](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L30), [31](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L31), [32](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L32), [33](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L33), [34](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L34)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

16: error NotAllowed();

17: error AlreadySet();

18: error NotExpired();

19: error LockTimeTooShort();

20: error ZeroShares();

21: error ValueTooSmall();

22: error InvalidLength();

23: error InvalidWeightSum();

24: error WrongAddress();

25: error NothingToSkim();

26: error NotFound();

27: error NotEnoughCompound();

28: error NotArbitrum();

```
*Github:* [[16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L17), [18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L18), [19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L20), [21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L21), [22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L22), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L23), [24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L24), [25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L25), [26](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L26), [27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L27), [28](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L28)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

12: error MarketExpired();

13: error NotController();

14: error ZeroFee();

15: error TooMuchFee();

16: error NotEnoughLpAssetsTransferred();

17: error InsufficientShares();

18: error ZeroAmount();

19: error FeeTooHigh();

20: error NotEnoughShares();

21: error InvalidSharePriceGrowth();

22: error InvalidSharePrice();

23: error AlreadyInitialized();

```
*Github:* [[12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L12), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L13), [14](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L14), [15](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L15), [16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L17), [18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L18), [19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L20), [21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L21), [22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L22), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L23)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

7: error DeployForbidden();

```
*Github:* [[7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L7)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol

7: error InvalidKey();

8: error AlreadyReserved();

```
*Github:* [[7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L8)]


```solidity
File: contracts/TransferHub/SendValueHelper.sol

5: error AmountTooSmall();

6: error SendValueFailed();

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/SendValueHelper.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/SendValueHelper.sol#L6)]


```solidity
File: contracts/WiseLendingDeclaration.sol

16: error DeadOracle();

17: error NotPowerFarm();

18: error InvalidAction();

19: error InvalidCaller();

20: error PositionLocked();

21: error LiquidatorIsInPowerFarm();

22: error PositionHasCollateral();

23: error PositionHasBorrow();

24: error InvalidAddress();

25: error InvalidLiquidator();

26: error ValueIsZero();

27: error ValueNotZero();

28: error TooManyTokens();

```
*Github:* [[16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L17), [18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L18), [19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L20), [21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L21), [22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L22), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L23), [24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L24), [25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L25), [26](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L26), [27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L27), [28](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L28)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

14: error OracleIsDead();

15: error OraclesDeviate();

16: error OracleAlreadySet();

17: error ChainLinkOracleNotSet();

23: error HeartBeatNotSet();

24: error PoolDoesNotExist();

25: error PoolAddressMismatch();

26: error TokenAddressMismatch();

27: error TwapOracleAlreadySet();

28: error ZeroAddressNotAllowed();

29: error FunctionDoesntExist();

30: error AggregatorNotNecessary();

31: error AggregatorAlreadySet();

```
*Github:* [[14](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L14), [15](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L15), [16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L17), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L23), [24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L24), [25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L25), [26](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L26), [27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L27), [28](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L28), [29](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L29), [30](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L30), [31](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L31)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

22: error NotWiseLendingSecurity();

```
*Github:* [[22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L22)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

19: error NotAllowedEntity();

20: error ChainlinkDead();

21: error TokenBlackListed();

22: error NotAllowedWiseSecurity();

23: error PositionLockedWiseSecurity();

24: error ResultsInBadDebt();

25: error NotEnoughCollateral();

26: error NotAllowedToBorrow();

27: error OpenBorrowPosition();

28: error NonVerifiedPool();

29: error NotOwner();

30: error LiquidationDenied();

31: error TooManyShares();

32: error NotRegistered();

33: error Blacklisted();

34: error SecuritySwapFailed();

35: error BaseRewardTooHigh();

36: error BaseRewardTooLow();

37: error BaseRewardFarmTooHigh();

38: error BaseRewardFarmTooLow();

39: error MaxFeeEthTooHigh();

40: error MaxFeeEthTooLow();

41: error MaxFeeFarmEthTooHigh();

42: error MaxFeeFarmEthTooLow();

43: error DepositAmountTooSmall();

```
*Github:* [[19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L20), [21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L21), [22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L22), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L23), [24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L24), [25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L25), [26](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L26), [27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L27), [28](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L28), [29](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L29), [30](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L30), [31](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L31), [32](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L32), [33](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L33), [34](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L34), [35](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L35), [36](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L36), [37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L37), [38](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L38), [39](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L39), [40](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L40), [41](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L41), [42](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L42), [43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L43)]


```solidity
File: contracts/WrapperHub/Declarations.sol

15: error AlreadySet();

16: error InvalidValue();

17: error InvalidAction();

18: error FailedInnerCall();

19: error InvalidToken();

```
*Github:* [[15](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L15), [16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L17), [18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L18), [19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L19)]


</details>


<a name="NC-9"></a> 
### [NC-9] Enable IR-based code generation
The IR-based code generator was introduced with an aim to not only allow code generation to be more transparent and auditable but also to enable more powerful optimization passes that span across functions. You can enable it on the command line using `--via-ir` or with the option `{"viaIR": true}`. This will take longer to compile, but you can just simple test it before deploying and if you got a better benchmark then you can add --via-ir to your deploy command More on: https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/)]



<a name="NC-10"></a> 
### [NC-10] Execution at deadlines should be allowed
The condition may be wrong in these cases, as when `block.timestamp` is equal to the compared `>` or `<` variable these blocks will not be executed.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

475:         if (_getExpiry() > block.timestamp) {

```
*Github:* [[475](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L475)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

580:             upd = block.timestamp < upd

```
*Github:* [[580](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L580)]



<a name="NC-11"></a> 
### [NC-11] Import declarations should import specific identifiers, rather than the whole file
Using import declarations of the form `import {<identifier_name>} from "some/file.sol"` avoids polluting the symbol namespace making flattened files smaller, and speeds up compilation (but does not save any gas).

<details>
<summary>
There are <b>115</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/PendleChildLpOracle.sol

3: import "./CustomOracleSetup.sol";

5: import "../InterfaceHub/IPendle.sol";

6: import "../InterfaceHub/IPriceFeed.sol";

```
*Github:* [[3](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L3), [5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L6)]


```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

16: import "../InterfaceHub/IPendle.sol";

17: import "../InterfaceHub/IPriceFeed.sol";

18: import "../InterfaceHub/IOraclePendle.sol";

```
*Github:* [[16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L17), [18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L18)]


```solidity
File: contracts/DerivativeOracles/PtOracleDerivative.sol

16: import "../InterfaceHub/IPriceFeed.sol";

17: import "../InterfaceHub/IOraclePendle.sol";

```
*Github:* [[16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L17)]


```solidity
File: contracts/DerivativeOracles/PtOraclePure.sol

16: import "../InterfaceHub/IPriceFeed.sol";

17: import "../InterfaceHub/IOraclePendle.sol";

```
*Github:* [[16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L17)]


```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

5: import "../InterfaceHub/IAave.sol";

6: import "../InterfaceHub/IERC20.sol";

7: import "../InterfaceHub/IWiseLending.sol";

8: import "../InterfaceHub/IFeeManager.sol";

9: import "../InterfaceHub/IWiseSecurity.sol";

10: import "../InterfaceHub/IPositionNFTs.sol";

11: import "../InterfaceHub/IWiseOracleHub.sol";

13: import "../OwnableMaster.sol";

14: import "./FeeManagerEvents.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L6), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L8), [9](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L9), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L10), [11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L11), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L13), [14](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L14)]


```solidity
File: contracts/FeeManager/FeeManager.sol

11: import "./FeeManagerHelper.sol";

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L11)]


```solidity
File: contracts/FeeManager/FeeManagerHelper.sol

5: import "./DeclarationsFeeManager.sol";

6: import "../TransferHub/TransferHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L6)]


```solidity
File: contracts/MainHelper.sol

5: import "./WiseLowLevelHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L5)]


```solidity
File: contracts/PoolManager.sol

5: import "./WiseCore.sol";

6: import "./Babylonian.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L6)]


```solidity
File: contracts/PositionNFTs.sol

5: import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";

7: import "./OwnableMaster.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L5), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L7)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol

5: import "./PendlePowerFarmLeverageLogic.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L5)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

5: import "../../InterfaceHub/IERC20.sol";

6: import "../../InterfaceHub/IAave.sol";

7: import "../../InterfaceHub/IPendle.sol";

8: import "../../InterfaceHub/IAaveHub.sol";

9: import "../../InterfaceHub/IWiseLending.sol";

10: import "../../InterfaceHub/IStETH.sol";

11: import "../../InterfaceHub/IWiseSecurity.sol";

12: import "../../InterfaceHub/IPositionNFTs.sol";

13: import "../../InterfaceHub/IWiseOracleHub.sol";

14: import "../../InterfaceHub/IBalancerFlashloan.sol";

15: import "../../InterfaceHub/ICurve.sol";

16: import "../../InterfaceHub/IUniswapV3.sol";

18: import "../../TransferHub/WrapperHelper.sol";

19: import "../../TransferHub/TransferHelper.sol";

20: import "../../TransferHub/ApprovalHelper.sol";

21: import "../../TransferHub/SendValueHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L6), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L8), [9](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L9), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L10), [11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L11), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L12), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L13), [14](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L14), [15](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L15), [16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L16), [18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L18), [19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L19), [20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L20), [21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L21)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

5: import "./PendlePowerFarmMathLogic.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L5)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol

5: import "./PendlePowerFarmDeclarations.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L5)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol

11: import "./PendlePowerFarm.sol";

12: import "../../OwnableMaster.sol";

13: import "../PowerFarmNFTs/MinterReserver.sol";

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L11), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L12), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L13)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

5: import "./PendlePowerFarmTokenFactory.sol";

6: import "./PendlePowerFarmControllerHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L6)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

5: import "../../OwnableMaster.sol";

7: import "../../TransferHub/TransferHelper.sol";

8: import "../../TransferHub/ApprovalHelper.sol";

10: import "../../InterfaceHub/IPendle.sol";

11: import "../../InterfaceHub/IArbRewardsClaimer.sol";

12: import "../../InterfaceHub/IWiseOracleHub.sol";

13: import "../../InterfaceHub/IPendlePowerFarmToken.sol";

14: import "../../InterfaceHub/IPendlePowerFarmTokenFactory.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L5), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L8), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L10), [11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L11), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L12), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L13), [14](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L14)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol

5: import "./PendlePowerFarmControllerBase.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L5)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

5: import "./SimpleERC20Clone.sol";

7: import "../../InterfaceHub/IPendle.sol";

8: import "../../InterfaceHub/IPendleController.sol";

10: import "../../TransferHub/TransferHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L5), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L8), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L10)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

5: import "./PendlePowerFarmToken.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L5)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol

5: import "../../InterfaceHub/IPowerFarmsNFTs.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L5)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

11: import "../../OwnableMaster.sol";

12: import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L11), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L12)]


```solidity
File: contracts/TransferHub/ApprovalHelper.sol

5: import "./CallOptionalReturn.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/ApprovalHelper.sol#L5)]


```solidity
File: contracts/TransferHub/CallOptionalReturn.sol

5: import "../InterfaceHub/IERC20.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/CallOptionalReturn.sol#L5)]


```solidity
File: contracts/TransferHub/TransferHelper.sol

5: import "./CallOptionalReturn.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/TransferHelper.sol#L5)]


```solidity
File: contracts/TransferHub/WrapperHelper.sol

5: import "../InterfaceHub/IWETH.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/WrapperHelper.sol#L5)]


```solidity
File: contracts/WiseCore.sol

5: import "./MainHelper.sol";

6: import "./TransferHub/TransferHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L6)]


```solidity
File: contracts/WiseLending.sol

11: import "./PoolManager.sol";

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L11)]


```solidity
File: contracts/WiseLendingDeclaration.sol

5: import "./OwnableMaster.sol";

7: import "./InterfaceHub/IAaveHubLite.sol";

8: import "./InterfaceHub/IPositionNFTs.sol";

9: import "./InterfaceHub/IWiseSecurity.sol";

10: import "./InterfaceHub/IWiseOracleHub.sol";

11: import "./InterfaceHub/IFeeManagerLight.sol";

13: import "./TransferHub/WrapperHelper.sol";

14: import "./TransferHub/SendValueHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L5), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L8), [9](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L9), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L10), [11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L11), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L13), [14](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L14)]


```solidity
File: contracts/WiseLowLevelHelper.sol

5: import "./WiseLendingDeclaration.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L5)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

5: import "../InterfaceHub/IERC20.sol";

6: import "../InterfaceHub/IPriceFeed.sol";

7: import "../InterfaceHub/IAggregator.sol";

9: import "./Libraries/IUniswapV3Factory.sol";

10: import "./Libraries/OracleLibrary.sol";

12: import "../OwnableMaster.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L6), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L7), [9](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L9), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L10), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L12)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

5: import "./Declarations.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L5)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

11: import "./OracleHelper.sol";

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L11)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

11: import "./WiseSecurityHelper.sol";

12: import "../TransferHub/ApprovalHelper.sol";

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L11), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L12)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

5: import "../InterfaceHub/IERC20.sol";

6: import "../InterfaceHub/ICurve.sol";

7: import "../InterfaceHub/IPositionNFTs.sol";

8: import "../InterfaceHub/IWiseOracleHub.sol";

9: import "../InterfaceHub/IFeeManager.sol";

10: import "../InterfaceHub/IWiseLending.sol";

11: import "../InterfaceHub/IWiseLiquidation.sol";

16: import "../FeeManager/FeeManager.sol";

17: import "../OwnableMaster.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L5), [6](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L6), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L8), [9](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L9), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L10), [11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L11), [16](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L16), [17](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L17)]


```solidity
File: contracts/WiseSecurity/WiseSecurityHelper.sol

5: import "./WiseSecurityDeclarations.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L5)]


```solidity
File: contracts/WrapperHub/AaveHelper.sol

5: import "./Declarations.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L5)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

11: import "./AaveHelper.sol";

12: import "../TransferHub/TransferHelper.sol";

13: import "../TransferHub/ApprovalHelper.sol";

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L11), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L12), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L13)]


```solidity
File: contracts/WrapperHub/Declarations.sol

5: import "./AaveEvents.sol";

7: import "../InterfaceHub/IAave.sol";

8: import "../InterfaceHub/IWiseLending.sol";

9: import "../InterfaceHub/IWiseSecurity.sol";

10: import "../InterfaceHub/IPositionNFTs.sol";

12: import "../OwnableMaster.sol";

13: import "../TransferHub/WrapperHelper.sol";

```
*Github:* [[5](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L5), [7](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L7), [8](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L8), [9](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L9), [10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L10), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L12), [13](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L13)]


</details>


<a name="NC-12"></a> 
### [NC-12] Lack of brace spacing
Lack of brace spacing in coding refers to the absence of spaces around braces, which can hinder code readability. In Solidity, as in many programming languages, spacing can enhance the visual distinction between different parts of the code, making it easier to follow. A lack of spacing can lead to a dense, confusing appearance. The resolution to this issue is to follow a consistent style guide that defines rules for brace spacing. By including spaces around braces, such as `{ statement }` instead of `{statement}`, developers can ensure that the code is more legible and maintainable, especially in larger codebases.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

208:         ) = curvePool.call{value: 0} (

225:         ) = curveMeta.call{value: 0} (

```
*Github:* [[208](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L208), [225](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L225)]



<a name="NC-13"></a> 
### [NC-13] Large or complicated code bases should implement invariant tests
This includes: large code bases, or code with lots of inline-assembly, complicated math, or complicated interactions between multiple contracts. Invariant fuzzers such as Echidna require the test writer to come up with invariants which should not be violated under any circumstances, and the fuzzer tests various inputs and function calls to ensure that the invariants always hold. Even code with 100% code coverage can still have bugs due to the order of the operations a user performs, and invariant fuzzers may help significantly.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/)]



<a name="NC-14"></a> 
### [NC-14] Named mappings are recommended
[Named mappings](https://docs.soliditylang.org/en/v0.8.18/types.html#mapping-types) (with syntax `mapping(KeyType KeyName? => ValueType ValueName?)`) are recommended.It can make the mapping variables clearer, more readable and easier to maintain.

<details>
<summary>
There are <b>52</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/CustomOracleSetup.sol

12:     mapping(uint80 => uint256) public timeStampByRoundId;

```
*Github:* [[12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/CustomOracleSetup.sol#L12)]


```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

140:     mapping(uint256 => uint256) public badDebtPosition;

143:     mapping(address => uint256) public feeTokens;

146:     mapping(address => uint256) public incentiveUSD;

149:     mapping(address => bool) public poolTokenAdded;

152:     mapping(address => bool) public isAaveToken;

155:     mapping(address => address) public underlyingToken;

158:     mapping(address => mapping(address => bool)) public allowedTokens;

161:     mapping(address => mapping(address => uint256)) public gatheredIncentiveToken;

```
*Github:* [[140](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L140), [143](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L143), [146](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L146), [149](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L149), [152](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L152), [155](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L155), [158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L158), [161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L161)]


```solidity
File: contracts/MainHelper.sol

392:         mapping(uint256 => address[]) storage _userTokenData,

617:         mapping(bytes32 => bool) storage hashMap,

618:         mapping(uint256 => address[]) storage userTokenData

```
*Github:* [[392](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L392), [617](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L617), [618](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L618)]


```solidity
File: contracts/PositionNFTs.sol

20:     mapping(address => uint256) public reserved;

21:     mapping(address => bool) public reserveRole;

```
*Github:* [[20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L20), [21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L21)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

108:     mapping(uint256 => bool) public isAave;

```
*Github:* [[108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L108)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

58:     mapping(address => address) public pendleChildAddress;

59:     mapping(address => CompoundStruct) pendleChildCompoundInfo;

```
*Github:* [[58](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L58), [59](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L59)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol

24:     mapping(uint256 => uint256) public farmingKeys;

27:     mapping(address => uint256) public reservedKeys;

30:     mapping(uint256 => uint256) public availableNFTs;

```
*Github:* [[24](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L24), [27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L27), [30](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L30)]


```solidity
File: contracts/WiseLendingDeclaration.sol

267:     mapping(address => uint256) internal bufferIncrease;

268:     mapping(address => uint256) public maxDepositValueToken;

270:     mapping(uint256 => address[]) public positionLendTokenData;

271:     mapping(uint256 => address[]) public positionBorrowTokenData;

273:     mapping(uint256 => mapping(address => uint256)) public userBorrowShares;

274:     mapping(uint256 => mapping(address => uint256)) public pureCollateralAmount;

275:     mapping(uint256 => mapping(address => LendingEntry)) public userLendingData;

278:     mapping(address => BorrowRatesEntry) public borrowRatesData;

279:     mapping(address => AlgorithmEntry) public algorithmData;

280:     mapping(address => GlobalPoolEntry) public globalPoolData;

281:     mapping(address => LendingPoolEntry) public lendingPoolData;

282:     mapping(address => BorrowPoolEntry) public borrowPoolData;

283:     mapping(address => TimestampsPoolEntry) public timestampsPoolData;

286:     mapping(uint256 => bool) public positionLocked;

287:     mapping(address => bool) internal parametersLocked;

288:     mapping(address => bool) public verifiedIsolationPool;

291:     mapping(bytes32 => bool) internal hashMapPositionBorrow;

292:     mapping(bytes32 => bool) internal hashMapPositionLending;

```
*Github:* [[267](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L267), [268](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L268), [270](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L270), [271](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L271), [273](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L273), [274](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L274), [275](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L275), [278](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L278), [279](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L279), [280](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L280), [281](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L281), [282](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L282), [283](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L283), [286](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L286), [287](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L287), [288](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L288), [291](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L291), [292](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L292)]


```solidity
File: contracts/WiseLowLevelHelper.sol

372:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

383:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

```
*Github:* [[372](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L372), [383](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L383)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

139:     mapping(address => uint8) _tokenDecimals;

142:     mapping(address => IPriceFeed) public priceFeed;

145:     mapping(address => uint256) public heartBeat;

148:     mapping(address => IAggregator) public tokenAggregatorFromTokenAddress;

151:     mapping(address => address[]) public underlyingFeedTokens;

154:     mapping(address => UniTwapPoolInfo) public uniTwapPoolInfo;

157:     mapping(address => DerivativePartnerInfo) public derivativePartnerTwap;

```
*Github:* [[139](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L139), [142](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L142), [145](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L145), [148](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L148), [151](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L151), [154](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L154), [157](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L157)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

238:     mapping(address => bool) public wasBlacklisted;

241:     mapping(address => CurveSwapStructData) public curveSwapInfoData;

244:     mapping(address => CurveSwapStructToken) public curveSwapInfoToken;

247:     mapping(address => bool) public securityWorker;

```
*Github:* [[238](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L238), [241](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L241), [244](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L244), [247](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L247)]


```solidity
File: contracts/WrapperHub/Declarations.sol

41:     mapping(address => address) public aaveTokenAddress;

```
*Github:* [[41](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L41)]


</details>


<a name="NC-15"></a> 
### [NC-15] There is no need to initialize variables with 0
Since the variables are automatically set to 0 when created, it is redundant to initialize it with 0 again.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/WrapperHub/AaveHub.sol

71:         for (uint256 i = 0; i < _underlyingAssets.length; i++) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L71)]


```solidity
File: contracts/WrapperHub/Declarations.sol

27:     uint16 internal constant REF_CODE = 0;

```
*Github:* [[27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L27)]



<a name="NC-16"></a> 
### [NC-16] Non-assembly method available
There are some automated tools that will flag a project as having higher complexity if there is inline-assembly, so it's best to avoid using it where it's not necessary. In addition, most assembly methods can be replaced by non-assembly methods, for example:
- `assembly{ g := gas() }` => `uint256 g = gasleft()`
- `assembly{ id := chainid() }` => `uint256 id = block.chainid`
- `assembly { r := mulmod(a, b, d) }` => `uint256 m = mulmod(x, y, k)`
- `assembly { size := extcodesize() }` => `uint256 size = address(a).code.length`
- etc.

*There is one instance of this issue:*
```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

69:             size := extcodesize(

```
*Github:* [[69](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L69)]



<a name="NC-17"></a> 
### [NC-17] Use `abi.encodeCall()` instead of `abi.encodeWithSignature()`/`abi.encodeWithSelector()`
`abi.encodeCall()` has compiler type safety, whereas the other two functions do not

*There are <b>4</b> instances of this issue:*
```solidity
File: contracts/TransferHub/ApprovalHelper.sol

22:             abi.encodeWithSelector(

```
*Github:* [[22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/ApprovalHelper.sol#L22)]


```solidity
File: contracts/TransferHub/TransferHelper.sol

22:             abi.encodeWithSelector(

44:             abi.encodeWithSelector(

```
*Github:* [[22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/TransferHelper.sol#L22), [44](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/TransferHelper.sol#L44)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

79:             abi.encodeWithSignature(

```
*Github:* [[79](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L79)]



<a name="NC-18"></a> 
### [NC-18] Consider using `delete` rather than assigning zero/false to clear values
The `delete` keyword more closely matches the semantics of what is being done, and draws more attention to the changing of state, which may lead to a more thorough audit of its associated logic.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/FeeManager/FeeManager.sol

476:             poolTokenAdded[_poolToken] = false;

```
*Github:* [[476](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L476)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol

228:             reservedKeys[msg.sender] = 0;

```
*Github:* [[228](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L228)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

268:             childInfo.reservedForCompound[i] = 0;

```
*Github:* [[268](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L268)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

256:                 rewardsOutsideArray[i] = 0;

267:                 rewardsOutsideArray[i] = 0;

```
*Github:* [[256](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L256), [267](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L267)]


```solidity
File: contracts/WiseLending.sol

342:         userLendingData[_nftId][_poolToken].unCollateralized = false;

```
*Github:* [[342](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L342)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

418:         secondsAgo[1] = 0;

```
*Github:* [[418](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L418)]



<a name="NC-19"></a> 
### [NC-19] Expressions for constant values should use `immutable` rather than `constant`
While it doesn't save any gas because the compiler knows that developers often make this mistake, it's still best to use the right tool for the task at hand. There is a difference between `constant` variables and `immutable` variables, and they should each be used in their appropriate contexts. `constants` should be used for literal values written into the code, and `immutable` variables should be used for expressions, or values calculated in, or passed into the constructor.

<details>
<summary>
There are <b>90</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/PendleChildLpOracle.sol

18:     uint8 constant DECIMALS_PRECISION = 18;

19:     uint256 private constant PRECISION_FACTOR_E18 = 1E18;

```
*Github:* [[18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L18), [19](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L19)]


```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

30:     uint256 internal constant DEFAULT_DECIMALS = 18;

66:     uint8 internal constant FEED_DECIMALS = 18;

67:     uint256 internal constant POW_FEED_DECIMALS = 10 ** 18;

70:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

```
*Github:* [[30](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L30), [66](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L66), [67](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L67), [70](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L70)]


```solidity
File: contracts/DerivativeOracles/PtOracleDerivative.sol

65:     uint8 internal constant FEED_DECIMALS = 18;

68:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

```
*Github:* [[65](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L65), [68](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L68)]


```solidity
File: contracts/DerivativeOracles/PtOraclePure.sol

51:     uint8 internal constant FEED_DECIMALS = 18;

54:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

```
*Github:* [[51](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L51), [54](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L54)]


```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

167:     uint256 internal constant PRECISION_FACTOR_E15 = 1E15;

168:     uint256 internal constant PRECISION_FACTOR_E16 = 1E16;

169:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

172:     uint256 public constant INCENTIVE_PORTION = 5 * PRECISION_FACTOR_E15;

```
*Github:* [[167](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L167), [168](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L168), [169](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L169), [172](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L172)]


```solidity
File: contracts/OwnableMaster.sol

14:     address internal constant ZERO_ADDRESS = address(0x0);

```
*Github:* [[14](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L14)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

62:     uint256 internal constant MAX_COLLATERAL_FACTOR = 95 * PRECISION_FACTOR_E16;

86:     address internal constant BALANCER_ADDRESS = 0xBA12222222228d8Ba445958a75a0704d566BF2C8;

92:     address internal constant ST_ETH_ADDRESS = 0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84;

95:     uint24 internal constant UNISWAP_V3_FEE = 100;

98:     uint256 internal constant MAX_AMOUNT = type(uint256).max;

99:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

100:     uint256 internal constant PRECISION_FACTOR_E16 = 1E16;

101:     uint256 internal constant MAX_LEVERAGE = 15 * PRECISION_FACTOR_E18;

102:     uint256 internal constant FIVTY_PERCENT = 0.5 ether;

104:     uint256 internal constant ETH_CHAIN_ID = 1;

105:     uint256 internal constant ARB_CHAIN_ID = 42161;

```
*Github:* [[62](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L62), [86](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L86), [92](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L92), [95](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L95), [98](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L98), [99](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L99), [100](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L100), [101](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L101), [102](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L102), [104](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L104), [105](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L105)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

49:     uint256 internal constant PRECISION_FACTOR_E6 = 1E6;

50:     uint256 internal constant PRECISION_FACTOR_E10 = 1E10;

51:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

53:     uint256 internal constant MAINNET_CHAIN_ID = 1;

54:     uint256 internal constant ARBITRUM_CHAIN_ID = 42161;

65:     uint128 internal constant WEEK = 7 days;

74:     address internal constant ARB_REWARDS_ADDRESS = 0x23a102e78D1FF1645a3666691495174764a5FCAF;

75:     address internal constant ARB_TOKEN_ADDRESS = 0x912CE59144191C1204E64559FE8253a0e49E6548;

```
*Github:* [[49](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L49), [50](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L50), [51](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L51), [53](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L53), [54](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L54), [65](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L65), [74](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L74), [75](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L75)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

52:     uint256 private constant ONE_WEEK = 7 days;

53:     uint256 internal constant ONE_YEAR = 365 days;

54:     uint256 private constant MAX_MINT_FEE = 10000;

56:     uint256 private constant PRECISION_FACTOR_E6 = 1E6;

57:     uint256 private constant PRECISION_FACTOR_E18 = 1E18;

58:     uint256 internal constant PRECISION_FACTOR_E36 = PRECISION_FACTOR_E18 * PRECISION_FACTOR_E18;

59:     uint256 internal constant PRECISION_FACTOR_YEAR = PRECISION_FACTOR_E18 * ONE_YEAR;

63:     uint256 internal constant RESTRICTION_FACTOR = 10

```
*Github:* [[52](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L52), [53](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L53), [54](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L54), [56](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L56), [57](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L57), [58](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L58), [59](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L59), [63](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L63)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

11:     address internal constant ZERO_ADDRESS = address(0x0);

```
*Github:* [[11](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L11)]


```solidity
File: contracts/WiseLendingDeclaration.sol

170:     uint256 internal constant MIN_BORROW_SHARE_PRICE = 5 * PRECISION_FACTOR_E18

188:     uint256 internal constant GHOST_AMOUNT = 1E3;

295:     uint256 internal constant PRECISION_FACTOR_E16 = 1E16;

296:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

297:     uint256 internal constant PRECISION_FACTOR_E36 = PRECISION_FACTOR_E18 * PRECISION_FACTOR_E18;

300:     uint256 internal constant ONE_YEAR = 365 days;

301:     uint256 internal constant THREE_HOURS = 3 hours;

302:     uint256 internal constant PRECISION_FACTOR_YEAR = PRECISION_FACTOR_E18 * ONE_YEAR;

307:     uint256 internal constant NORMALISATION_FACTOR = 4838400;

310:     uint256 internal constant LOWER_BOUND_MAX_RATE = 100 * PRECISION_FACTOR_E16;

311:     uint256 internal constant UPPER_BOUND_MAX_RATE = 300 * PRECISION_FACTOR_E16;

314:     uint256 internal constant THRESHOLD_SWITCH_DIRECTION = 90 * PRECISION_FACTOR_E16;

315:     uint256 internal constant THRESHOLD_RESET_RESONANCE_FACTOR = 75 * PRECISION_FACTOR_E16;

319:     uint256 internal constant MAX_COLLATERAL_FACTOR = 85 * PRECISION_FACTOR_E16;

320:     uint256 internal constant MAX_TOTAL_TOKEN_NUMBER = 8;

323:     uint256 internal constant RESTRICTION_FACTOR = 10

```
*Github:* [[170](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L170), [188](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L188), [295](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L295), [296](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L296), [297](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L297), [300](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L300), [301](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L301), [302](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L302), [307](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L307), [310](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L310), [311](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L311), [314](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L314), [315](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L315), [319](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L319), [320](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L320), [323](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L323)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

79:     address public constant SEQUENCER_ADDRESS = 0xFdB631F5EE196F0ed6FAa767959853A9F217697D;

97:     uint8 internal constant _decimalsUSD = 8;

100:     uint8 internal constant _decimalsETH = 18;

103:     uint80 internal constant MAX_ROUND_COUNT = 50;

106:     uint32 internal constant SECONDS_IN_MINUTE = 60;

109:     uint32 internal constant TWAP_PERIOD = 30 * SECONDS_IN_MINUTE;

115:     uint256 internal constant MIN_ITERATION_COUNT = 3;

118:     uint256 internal constant PRECISION_FACTOR_E4 = 1E4;

121:     uint256 internal constant GRACE_PEROID = 3600;

124:     IPriceFeed internal constant ZERO_FEED = IPriceFeed(

129:     IAggregator internal constant ZERO_AGGREGATOR = IAggregator(

134:     uint256 internal constant ARBITRUM_CHAIN_ID = 42161;

```
*Github:* [[79](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L79), [97](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L97), [100](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L100), [103](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L103), [106](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L106), [109](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L109), [115](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L115), [118](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L118), [121](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L121), [124](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L124), [129](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L129), [134](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L134)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

185:     uint256 public constant BORROW_PERCENTAGE_CAP = 95 * PRECISION_FACTOR_E16;

206:     uint256 internal constant MAX_LIQUIDATION_50 = 50E16;

207:     uint256 internal constant BAD_DEBT_THRESHOLD = 89E16;

209:     uint256 internal constant UINT256_MAX = type(uint256).max;

210:     uint256 internal constant ONE_YEAR = 365 days;

217:     uint256 internal constant PRECISION_FACTOR_E16 = 1E16;

218:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

219:     uint256 internal constant ONE_WEI = 1;

225:     uint256 internal constant LIQUIDATION_INCENTIVE_MAX = 11 * PRECISION_FACTOR_E16;

226:     uint256 internal constant LIQUIDATION_INCENTIVE_MIN = 2 * PRECISION_FACTOR_E16;

227:     uint256 internal constant LIQUIDATION_INCENTIVE_POWERFARM_MAX = 4 * PRECISION_FACTOR_E16;

230:     uint256 internal constant LIQUIDATION_FEE_MIN_ETH = 3 * PRECISION_FACTOR_E18;

231:     uint256 internal constant LIQUIDATION_FEE_MAX_ETH = 100 * PRECISION_FACTOR_E18;

232:     uint256 internal constant LIQUIDATION_FEE_MAX_NON_ETH = 10 * PRECISION_FACTOR_E18;

233:     uint256 internal constant LIQUIDATION_FEE_MIN_NON_ETH = 30 * PRECISION_FACTOR_E16;

```
*Github:* [[185](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L185), [206](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L206), [207](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L207), [209](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L209), [210](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L210), [217](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L217), [218](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L218), [219](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L219), [225](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L225), [226](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L226), [227](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L227), [230](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L230), [231](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L231), [232](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L232), [233](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L233)]


```solidity
File: contracts/WrapperHub/Declarations.sol

27:     uint16 internal constant REF_CODE = 0;

37:     uint256 internal constant PRECISION_FACTOR_E9 = 1E9;

38:     uint256 internal constant PRECISION_FACTOR_E18 = 1E18;

39:     uint256 internal constant MAX_AMOUNT = type(uint256).max;

```
*Github:* [[27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L27), [37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L37), [38](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L38), [39](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L39)]


</details>


<a name="NC-20"></a> 
### [NC-20] Consider using modifiers for address control
Modifiers in Solidity can improve code readability and modularity by encapsulating repetitive checks, such as address validity checks, into a reusable construct. For example, an `onlyOwner` modifier can be used to replace repetitive `require(msg.sender == owner)` checks across several functions, reducing code redundancy and enhancing maintainability. To implement, define a modifier with the check, then apply the modifier to relevant functions.

<details>
<summary>
There are <b>19</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

195:         if (msg.sender == incentiveMaster) {

206:         if (msg.sender == address(WISE_SECURITY)) {

217:         if (msg.sender == address(WISE_LENDING)) {

```
*Github:* [[195](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L195), [206](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L206), [217](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L217)]


```solidity
File: contracts/FeeManager/FeeManager.sol

197:         if (msg.sender != proposedIncentiveMaster) {

320:         if (msg.sender != incentiveOwnerA) {

357:         if (msg.sender != incentiveOwnerB) {

```
*Github:* [[197](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L197), [320](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L320), [357](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L357)]


```solidity
File: contracts/OwnableMaster.sol

25:         if (msg.sender == master) {

41:         if (msg.sender == proposedMaster) {

```
*Github:* [[25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L25), [41](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L41)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

77:         if (msg.sender != BALANCER_ADDRESS) {

```
*Github:* [[77](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L77)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

251:         if (msg.sender != pendleChildAddress[_pendleMarket]) {

```
*Github:* [[251](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L251)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

76:         if (msg.sender != PENDLE_POWER_FARM_CONTROLLER) {

514:         if (msg.sender == PENDLE_POWER_FARM_CONTROLLER) {

635:         if (msg.sender == PENDLE_POWER_FARM_CONTROLLER) {

```
*Github:* [[76](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L76), [514](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L514), [635](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L635)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

44:         if (msg.sender != PENDLE_POWER_FARM_CONTROLLER) {

```
*Github:* [[44](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L44)]


```solidity
File: contracts/WiseLending.sol

53:         if (msg.sender == WETH_ADDRESS) {

```
*Github:* [[53](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L53)]


```solidity
File: contracts/WiseLendingDeclaration.sol

261:         if (msg.sender != AAVE_HUB_ADDRESS) {

```
*Github:* [[261](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L261)]


```solidity
File: contracts/WiseLowLevelHelper.sol

18:         if (msg.sender == address(FEE_MANAGER)) {

```
*Github:* [[18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L18)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

35:         if (msg.sender == address(WISE_LENDING)) {

```
*Github:* [[35](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L35)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

87:         if (msg.sender == WETH_ADDRESS) {

```
*Github:* [[87](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L87)]


</details>


<a name="NC-21"></a> 
### [NC-21] Use scientific notation (e.g. `1e18`) rather than exponentiation (e.g. `10**18`)
While the compiler knows to optimize away the exponentiation, it's still better coding practice to use idioms that do not require compiler optimization, if they exist.

*There is one instance of this issue:*
```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

67:     uint256 internal constant POW_FEED_DECIMALS = 10 ** 18;

```
*Github:* [[67](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L67)]



<a name="NC-22"></a> 
### [NC-22] Whitespace in Expressions
See the [Whitespace in Expressions](https://docs.soliditylang.org/en/latest/style-guide.html#whitespace-in-expressions) section of the Solidity Style Guide.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

78:         (bool success, ) = _tokenAggregator.call(

```
*Github:* [[78](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L78)]


```solidity
File: contracts/WrapperHub/AaveHelper.sol

208:         (bool success, ) = payable(_recipient).call{

```
*Github:* [[208](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L208)]



<a name="NC-23"></a> 
### [NC-23] Empty body - Consider commenting why

*There are <b>5</b> instances of this issue:*
```solidity
File: contracts/FeeManager/FeeManager.sol

43:     {}

```
*Github:* [[43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L43)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

49:     {}

```
*Github:* [[49](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L49)]


```solidity
File: contracts/WiseLending.sol

126:     {}

```
*Github:* [[126](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L126)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

52:     {}

```
*Github:* [[52](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L52)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

37:     {}

```
*Github:* [[37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L37)]




## Gas Optimizations

<a name="GAS-1"></a> 
### [GAS-1] Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, where appropriate
Saves a storage slot for the mapping. Depending on the circumstances and sizes of types, can avoid a Gsset (20000 gas) per mapping combined. Reads and subsequent writes can also be cheaper when a function requires both values and they both fit in the same storage slot. Finally, if both fields are accessed in the same function, can save ~42 gas per access due to not having to [recalculate the key's keccak256 hash](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0) (Gkeccak256 - 30 gas) and that calculation's associated stack operations.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

158:     mapping(address => mapping(address => bool)) public allowedTokens;

161:     mapping(address => mapping(address => uint256)) public gatheredIncentiveToken;

```
*Github:* [[158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L158), [161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L161)]


```solidity
File: contracts/WiseLendingDeclaration.sol

273:     mapping(uint256 => mapping(address => uint256)) public userBorrowShares;

274:     mapping(uint256 => mapping(address => uint256)) public pureCollateralAmount;

275:     mapping(uint256 => mapping(address => LendingEntry)) public userLendingData;

```
*Github:* [[273](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L273), [274](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L274), [275](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L275)]


```solidity
File: contracts/WiseLowLevelHelper.sol

372:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

383:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

```
*Github:* [[372](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L372), [383](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L383)]



<a name="GAS-2"></a> 
### [GAS-2] Consider activating via-ir for deploying
By using `--via-ir` or `{"viaIR": true}`, the compiler is able to use more advanced [multi-function optimizations](https://docs.soliditylang.org/en/v0.8.17/ir-breaking-changes.html#solidity-ir-based-codegen-changes), for extra gas savings.

*There is one instance of this issue:*
```solidity

Global finding

```
*Github:* [[Global](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/)]



<a name="GAS-3"></a> 
### [GAS-3] Counting down in for statements is more gas efficient
Looping downwards in Solidity is more gas efficient due to how the EVM compares variables. In a 'for' loop that counts down, the end condition is usually to compare with zero, which is cheaper than comparing with another number. As such, restructure your loops to count downwards where possible.

*There is one instance of this issue:*
```solidity
File: contracts/WrapperHub/AaveHub.sol

71:         for (uint256 i = 0; i < _underlyingAssets.length; i++) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L71)]



<a name="GAS-4"></a> 
### [GAS-4] Divisions can be `unchecked` to save gas
The expression `type(int).min/(-1)` is the only case where division causes an overflow. Therefore, uncheck can be used to [save gas](https://gist.github.com/DadeKuma/3bc597338ae774b8b3bd43280d55271f) in scenarios where it is certain that such an overflow will not occur.

<details>
<summary>
There are <b>108</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/PendleChildLpOracle.sol

43:             / pendleChildToken.totalSupply()

44:             / PRECISION_FACTOR_E18;

```
*Github:* [[43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L43), [44](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L44)]


```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

119:             / PRECISION_FACTOR_E18;

```
*Github:* [[119](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L119)]


```solidity
File: contracts/DerivativeOracles/PtOracleDerivative.sol

124:             / POW_USD_FEED

126:             / uint256(answerEthUsdFeed)

128:             / PRECISION_FACTOR_E18;

```
*Github:* [[124](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L124), [126](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L126), [128](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L128)]


```solidity
File: contracts/DerivativeOracles/PtOraclePure.sol

105:             / POW_FEED

107:             / PRECISION_FACTOR_E18;

```
*Github:* [[105](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L105), [107](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L107)]


```solidity
File: contracts/FeeManager/FeeManagerHelper.sol

255:             / PRECISION_FACTOR_E18;

341:             / WISE_LENDING.globalPoolData(_poolToken).poolFee;

```
*Github:* [[255](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L255), [341](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L341)]


```solidity
File: contracts/MainHelper.sol

43:             ? _product / _pseudo + 1

44:             : _product / _pseudo - 1;

103:             / lendingPoolData[_poolToken].totalDepositShares - 1;

127:         return product / totalBorrowShares + 1;

179:             / pseudoPool

363:             / PRECISION_FACTOR_YEAR;

526:             / PRECISION_FACTOR_YEAR;

530:             / PRECISION_FACTOR_E18;

552:             / (lendingPoolData[_poolToken].pseudoTotalPool - feeAmount);

866:                 / baseDivider;

997:             / PRECISION_FACTOR_E18;

1053:             / PRECISION_FACTOR_E18

```
*Github:* [[43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L43), [44](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L44), [103](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L103), [127](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L127), [179](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L179), [363](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L363), [526](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L526), [530](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L530), [552](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L552), [866](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L866), [997](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L997), [1053](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L1053)]


```solidity
File: contracts/PoolManager.sol

285:         return PRECISION_FACTOR_E18 / 2

286:             + (PRECISION_FACTOR_E36 / 4

289:                     / _poleBoundRate

301:         return (_maxPole - _minPole) / NORMALISATION_FACTOR;

312:         return (_maxPole + _minPole) / 2;

```
*Github:* [[285](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L285), [286](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L286), [289](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L289), [301](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L301), [312](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L312)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol

86:             / totalCollateral;

```
*Github:* [[86](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L86)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

201:                 / PRECISION_FACTOR_E18

209:             / PRECISION_FACTOR_E18;

436:                 / PRECISION_FACTOR_E18,

502:             / PRECISION_FACTOR_E18;

587:                 / PRECISION_FACTOR_E18

590:                 / PRECISION_FACTOR_E18;

```
*Github:* [[201](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L201), [209](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L209), [436](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L436), [502](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L502), [587](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L587), [590](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L590)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol

241:             / PRECISION_FACTOR_E18;

282:             / PRECISION_FACTOR_E18;

322:             / PRECISION_FACTOR_E18;

326:             / PRECISION_FACTOR_E18;

365:             / pseudoPool

382:             / baseDivider;

```
*Github:* [[241](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L241), [282](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L282), [322](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L322), [326](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L326), [365](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L365), [382](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L382)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol

39:         uint128 startTime = uint128((block.timestamp / WEEK)

83:             / PRECISION_FACTOR_E6;

```
*Github:* [[39](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L39), [83](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L83)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

65:         / PRECISION_FACTOR_YEAR;

287:                     / lpBalanceController

288:                     / PRECISION_FACTOR_E18

291:                     / PRECISION_FACTOR_E18;

331:             / totalSupply();

404:             / ONE_WEEK;

431:             / PRECISION_FACTOR_E6;

462:             / _underlyingLpAssetsCurrent;

475:             / totalSupply();

490:             ? product / _underlyingLpAssetsCurrent

491:             : product / _underlyingLpAssetsCurrent + 1;

```
*Github:* [[65](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L65), [287](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L287), [288](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L288), [291](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L291), [331](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L331), [404](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L404), [431](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L431), [462](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L462), [475](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L475), [490](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L490), [491](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L491)]


```solidity
File: contracts/WiseCore.sol

439:         transferAmount = product / PRECISION_FACTOR_E18;

472:         uint256 cashoutShares = product / PRECISION_FACTOR_E18 + 1;

617:                 / PRECISION_FACTOR_E18

```
*Github:* [[439](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L439), [472](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L472), [617](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L617)]


```solidity
File: contracts/WiseLending.sol

177:             / borrowPoolData[_poolToken].totalBorrowShares;

187:                 / lendingPoolData[_poolToken].totalDepositShares,

```
*Github:* [[177](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L177), [187](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L187)]


```solidity
File: contracts/WiseLendingDeclaration.sol

171:         / 10;

325:         / PRECISION_FACTOR_YEAR;

```
*Github:* [[171](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L171), [325](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L325)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

122:             ) / 10 ** (_decimalsWETH - decimals(_tokenAddress));

128:         ) / 10 ** (_decimalsWETH - decimals(_tokenAddress));

227:                 / _fetchTwapValue;

232:             / _answerUint256;

436:             / twapPeriodInt56

496:             / uint256(

```
*Github:* [[122](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L122), [128](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L128), [227](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L227), [232](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L232), [436](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L436), [496](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L496)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

111:                 / 10 ** decimals(_tokenAddress)

112:                 / 10 ** (tokenDecimals - _decimalsETH)

116:                 / 10 ** decimals(_tokenAddress);

136:             / 10 ** _decimalsUSD;

162:                 / 10 ** decimals(_tokenAddress)

163:                 / 10 ** (tokenDecimals - _decimalsETH)

167:                 / 10 ** decimals(_tokenAddress);

187:                 / latestResolver(_tokenAddress)

190:                 / latestResolver(_tokenAddress)

191:                 / 10 ** (_decimalsETH - tokenDecimals);

210:                 / getETHPriceInUSD()

347:                 / latestResolver(_tokenAddress)

350:                 / latestResolver(_tokenAddress)

351:                 / 10 ** (_decimalsETH - tokenDecimals);

```
*Github:* [[111](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L111), [112](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L112), [116](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L116), [136](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L136), [162](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L162), [163](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L163), [167](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L167), [187](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L187), [190](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L190), [191](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L191), [210](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L210), [347](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L347), [350](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L350), [351](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L351)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

76:             / overallCollateral;

492:             / overallETH;

549:             / overallETH;

626:                 / totalETHSupply;

632:                 / totalETHSupply;

683:                 ) / PRECISION_FACTOR_E18;

688:             / PRECISION_FACTOR_E18;

879:             / PRECISION_FACTOR_E18;

935:             / currentTotalBorrowShares;

972:             / currentTotalLendingShares;

```
*Github:* [[76](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L76), [492](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L492), [549](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L549), [626](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L626), [632](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L632), [683](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L683), [688](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L688), [879](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L879), [935](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L935), [972](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L972)]


```solidity
File: contracts/WiseSecurity/WiseSecurityHelper.sol

46:                 / PRECISION_FACTOR_E18;

94:                 ) / PRECISION_FACTOR_E18;

176:                 ) / PRECISION_FACTOR_E18;

310:             / currentTotalLendingShares;

568:             / PRECISION_FACTOR_E18

597:             / PRECISION_FACTOR_E18

598:             / ONE_YEAR;

639:             / currentTotalBorrowShares;

747:             / PRECISION_FACTOR_E18;

785:         return numerator / denominator + 1;

828:             / PRECISION_FACTOR_E18

893:             : totalSharesUser * MAX_LIQUIDATION_50 / PRECISION_FACTOR_E18;

1016:             / PRECISION_FACTOR_E18;

1020:             / pseudoTotalPool;

1040:             / BORROW_PERCENTAGE_CAP;

1044:             / WISE_LENDING.lendingPoolData(_poolToken).collateralFactor;

```
*Github:* [[46](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L46), [94](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L94), [176](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L176), [310](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L310), [568](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L568), [597](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L597), [598](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L598), [639](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L639), [747](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L747), [785](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L785), [828](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L828), [893](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L893), [1016](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1016), [1020](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1020), [1040](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1040), [1044](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1044)]


```solidity
File: contracts/WrapperHub/AaveHelper.sol

323:             / PRECISION_FACTOR_E9;

```
*Github:* [[323](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L323)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

660:             / PRECISION_FACTOR_E18

```
*Github:* [[660](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L660)]


</details>


<a name="GAS-5"></a> 
### [GAS-5] Don't caching global special variables
It's better not to cache the global special variables, because it's cheaper to use them directly (e.g. `msg.sender`).

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/FeeManager/FeeManager.sol

695:         address caller = msg.sender;

```
*Github:* [[695](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L695)]


```solidity
File: contracts/MainHelper.sol

505:         uint256 currentTime = block.timestamp;

```
*Github:* [[505](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L505)]


```solidity
File: contracts/WiseLending.sol

1120:         uint256 requiredAmount = msg.value;

```
*Github:* [[1120](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L1120)]



<a name="GAS-6"></a> 
### [GAS-6] Do not calculate constants
Due to how constant variables are implemented (replacements at compile-time), an expression assigned to a constant variable is recomputed each time that the variable is used, which wastes some gas.

<details>
<summary>
There are <b>22</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

67:     uint256 internal constant POW_FEED_DECIMALS = 10 ** 18;

```
*Github:* [[67](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L67)]


```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

172:     uint256 public constant INCENTIVE_PORTION = 5 * PRECISION_FACTOR_E15;

```
*Github:* [[172](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L172)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

62:     uint256 internal constant MAX_COLLATERAL_FACTOR = 95 * PRECISION_FACTOR_E16;

101:     uint256 internal constant MAX_LEVERAGE = 15 * PRECISION_FACTOR_E18;

```
*Github:* [[62](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L62), [101](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L101)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

58:     uint256 internal constant PRECISION_FACTOR_E36 = PRECISION_FACTOR_E18 * PRECISION_FACTOR_E18;

59:     uint256 internal constant PRECISION_FACTOR_YEAR = PRECISION_FACTOR_E18 * ONE_YEAR;

```
*Github:* [[58](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L58), [59](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L59)]


```solidity
File: contracts/WiseLendingDeclaration.sol

297:     uint256 internal constant PRECISION_FACTOR_E36 = PRECISION_FACTOR_E18 * PRECISION_FACTOR_E18;

302:     uint256 internal constant PRECISION_FACTOR_YEAR = PRECISION_FACTOR_E18 * ONE_YEAR;

310:     uint256 internal constant LOWER_BOUND_MAX_RATE = 100 * PRECISION_FACTOR_E16;

311:     uint256 internal constant UPPER_BOUND_MAX_RATE = 300 * PRECISION_FACTOR_E16;

314:     uint256 internal constant THRESHOLD_SWITCH_DIRECTION = 90 * PRECISION_FACTOR_E16;

315:     uint256 internal constant THRESHOLD_RESET_RESONANCE_FACTOR = 75 * PRECISION_FACTOR_E16;

319:     uint256 internal constant MAX_COLLATERAL_FACTOR = 85 * PRECISION_FACTOR_E16;

```
*Github:* [[297](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L297), [302](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L302), [310](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L310), [311](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L311), [314](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L314), [315](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L315), [319](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L319)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

109:     uint32 internal constant TWAP_PERIOD = 30 * SECONDS_IN_MINUTE;

```
*Github:* [[109](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L109)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

185:     uint256 public constant BORROW_PERCENTAGE_CAP = 95 * PRECISION_FACTOR_E16;

225:     uint256 internal constant LIQUIDATION_INCENTIVE_MAX = 11 * PRECISION_FACTOR_E16;

226:     uint256 internal constant LIQUIDATION_INCENTIVE_MIN = 2 * PRECISION_FACTOR_E16;

227:     uint256 internal constant LIQUIDATION_INCENTIVE_POWERFARM_MAX = 4 * PRECISION_FACTOR_E16;

230:     uint256 internal constant LIQUIDATION_FEE_MIN_ETH = 3 * PRECISION_FACTOR_E18;

231:     uint256 internal constant LIQUIDATION_FEE_MAX_ETH = 100 * PRECISION_FACTOR_E18;

232:     uint256 internal constant LIQUIDATION_FEE_MAX_NON_ETH = 10 * PRECISION_FACTOR_E18;

233:     uint256 internal constant LIQUIDATION_FEE_MIN_NON_ETH = 30 * PRECISION_FACTOR_E16;

```
*Github:* [[185](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L185), [225](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L225), [226](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L226), [227](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L227), [230](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L230), [231](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L231), [232](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L232), [233](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L233)]


</details>


<a name="GAS-7"></a> 
### [GAS-7] Increments can be `unchecked` to save gas
Using `unchecked` increments can save gas by bypassing the built-in overflow checks. This can save 30-40 gas per iteration. So it is recommended to use unchecked increments when overflow is not possible.

*There is one instance of this issue:*
```solidity
File: contracts/WrapperHub/AaveHub.sol

71:         for (uint256 i = 0; i < _underlyingAssets.length; i++) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L71)]



<a name="GAS-8"></a> 
### [GAS-8] Initializers can be marked as payable to save deployment gas
Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. Initializers can be safely marked as payable, because only the deployer or the factory contract would call the function without carrying any funds.

*There is one instance of this issue:*
```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

682:     function initialize(

```
*Github:* [[682](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L682)]



<a name="GAS-9"></a> 
### [GAS-9] Operator `>=`/`<=` costs less gas than operator `>`/`<`
The compiler uses opcodes `GT` and `ISZERO` for code that uses `>`, but only requires `LT` for `>=`. A similar behavior applies for `>`, which uses opcodes `LT` and `ISZERO`, but only requires `GT` for `<=`. It can save 3 gas for each. It should be converted to the `<=`/`>=` equivalent when comparing against integer literals.

<details>
<summary>
There are <b>145</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/FeeManager.sol

92:         while (i < l) {

145:         while (i < l) {

257:         while (i < l) {

453:         while (i < len) {

548:         while (i < l) {

581:         while (i < l) {

609:         while (i < l) {

697:         if (totalBadDebtETH > 0) {

904:         while (i < l) {

```
*Github:* [[92](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L92), [145](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L145), [257](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L257), [453](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L453), [548](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L548), [581](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L581), [609](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L609), [697](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L697), [904](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L904)]


```solidity
File: contracts/FeeManager/FeeManagerHelper.sol

25:         while (i < l) {

57:         while (i < l) {

151:         if (currentBorrowETH < currentCollateralBareETH) {

179:             newBadDebt > currentBadDebt

348:         uint256 reduceUSD = usdEquivalent < incentiveUSD[_incentiveOwner]

389:         if (_value < PRECISION_FACTOR_E16) {

393:         if (_value > PRECISION_FACTOR_E18) {

```
*Github:* [[25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L25), [57](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L57), [151](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L151), [179](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L179), [348](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L348), [389](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L389), [393](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L393)]


```solidity
File: contracts/MainHelper.sol

328:             if (difference > allowedDifference) {

428:         while (i < l) {

481:         while (i < l) {

512:         if (bareIncrease < PRECISION_FACTOR_YEAR) {

637:         if (userTokenData[_nftId].length > MAX_TOTAL_TOKEN_NUMBER) {

693:         while (i < length) {

995:         return _shareValue < THRESHOLD_RESET_RESONANCE_FACTOR

1051:         _shareValues < THRESHOLD_SWITCH_DIRECTION

1109:         uint256 setValue = sum > borrowData.maxPole

1135:         uint256 sub = borrowRatesData[_poolToken].pole > delta

1139:         uint256 setValue = sub < minValue

```
*Github:* [[328](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L328), [428](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L428), [481](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L481), [512](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L512), [637](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L637), [693](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L693), [995](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L995), [1051](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L1051), [1109](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L1109), [1135](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L1135), [1139](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L1139)]


```solidity
File: contracts/PoolManager.sol

108:         if (_maximumDeposit > 0) {

112:         if (_collateralFactor > 0) {

268:         if (fetchBalance > 0) {

```
*Github:* [[108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L108), [112](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L112), [268](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L268)]


```solidity
File: contracts/PositionNFTs.sol

77:         if (feeManager > ZERO_ADDRESS) {

203:         if (nftId > 0) {

288:         if (reservedId > 0) {

298:         while (i < ownerTokenCount) {

309:         if (reservedId > 0) {

```
*Github:* [[77](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L77), [203](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L203), [288](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L288), [298](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L298), [309](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L309)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol

194:         if (_leverage > MAX_LEVERAGE) {

```
*Github:* [[194](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L194)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

243:         if (_collateralFactor > PRECISION_FACTOR_E18) {

```
*Github:* [[243](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L243)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

107:         if (initialAmount > 0) {

211:         if (ethValueAfter < ethValueBefore) {

504:         if (ethValueAfter < ethValueBefore) {

592:         if (_shareAmountToPay > cutoffShares) {

```
*Github:* [[107](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L107), [211](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L211), [504](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L504), [592](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L592)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol

103:         if (positionBorrowShares > 0) {

122:         if (positionBorrowSharesAave > 0) {

186:         if (borrowShares > 0) {

198:         if (borrowSharesAave > 0) {

206:         if (borrowShares > 0) {

301:         if (_leverage < PRECISION_FACTOR_E18) {

359:         if (totalPool > pseudoPool) {

```
*Github:* [[103](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L103), [122](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L122), [186](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L186), [198](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L198), [206](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L206), [301](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L301), [359](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L359)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

194:         if (balance < totalAssets + 1) {

258:         while (i < rewardTokensLength) {

388:         if (_amount > 0) {

417:         if (_amount > 0) {

511:         while (i < length) {

555:         while (i < length) {

628:         while (i < len) {

635:         if (weightSum > PRECISION_FACTOR_E18) {

```
*Github:* [[194](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L194), [258](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L258), [388](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L388), [417](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L417), [511](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L511), [555](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L555), [628](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L628), [635](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L635)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

278:         while (i < length) {

```
*Github:* [[278](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L278)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol

20:         while (i < len) {

85:         if (sendingValue < PRECISION_FACTOR_E10) {

```
*Github:* [[20](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L20), [85](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L85)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

107:         if (sharePricenNow < _sharePriceBefore) {

127:         if (_sharePriceNow > maximum) {

204:         while (i < l) {

236:         while (i < l) {

242:             if (userReward.accrued > 0) {

255:             if (lastIndex[i] == 0 && index > 0) {

281:             bool scaleNecessary = totalLpAssetsCurrent < lpBalanceController;

352:         if (storageMarket.observationCardinalityNext < MAX_CARDINALITY) {

399:         if (totalLpAssetsToDistribute < ONE_WEEK) {

409:         if (additonalAssets > totalLpAssetsToDistribute) {

598:         if (_newFee > MAX_MINT_FEE) {

619:         if (_shares > balanceOf(msg.sender)) {

663:         if (shares > balanceOf(msg.sender)) {

```
*Github:* [[107](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L107), [127](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L127), [204](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L204), [236](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L236), [242](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L242), [255](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L255), [281](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L281), [352](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L352), [399](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L399), [409](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L409), [598](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L598), [619](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L619), [663](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L663)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

130:         if (reservedId > 0) {

140:         for (i; i < ownerTokenCount;) {

151:         if (reservedId > 0) {

```
*Github:* [[130](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L130), [140](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L140), [151](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L151)]


```solidity
File: contracts/TransferHub/CallOptionalReturn.sol

37:             && token.code.length > 0;

```
*Github:* [[37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/CallOptionalReturn.sol#L37)]


```solidity
File: contracts/TransferHub/SendValueHelper.sol

18:         if (address(this).balance < _amount) {

```
*Github:* [[18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/SendValueHelper.sol#L18)]


```solidity
File: contracts/WiseCore.sol

564:         if (pureCollateral > 0 && userShares > 0) {

564:         if (pureCollateral > 0 && userShares > 0) {

572:         if (potentialPureExtraCashout > 0 && potentialPureExtraCashout <= pureCollateral) {

```
*Github:* [[564](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L564), [564](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L564), [572](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L572)]


```solidity
File: contracts/WiseLending.sol

1122:         if (msg.value > maxPaybackAmount) {

1147:         if (refundAmount > 0) {

```
*Github:* [[1122](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L1122), [1147](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L1147)]


```solidity
File: contracts/WiseLowLevelHelper.sol

32:         if (_parameterValue > _parameterLimit) {

464:         if (_value > 0) {

```
*Github:* [[32](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L32), [464](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L464)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

53:         if (uniTwapPoolInfoStruct.oracle > ZERO_ADDRESS) {

97:         if (_answer > maxAnswer || _answer < minAnswer) {

97:         if (_answer > maxAnswer || _answer < minAnswer) {

144:         if (uniTwapPoolInfoStruct.oracle > ZERO_ADDRESS) {

161:         if (fetchTwapValue > 0) {

224:         if (_answerUint256 > _fetchTwapValue) {

241:         if (_relativeDifference > ALLOWED_DIFFERENCE) {

365:         if (uniTwapPoolInfo[_tokenAddress].oracle > ZERO_ADDRESS) {

439:         if (tickCumulativesDelta < 0 && (tickCumulativesDelta % twapPeriodInt56 != 0)) {

580:             upd = block.timestamp < upd

584:             return upd > heartBeat[_tokenAddress];

612:         if (iterationCount < MIN_ITERATION_COUNT) {

625:         while (i < iterationCount) {

642:             } else if (currentDiff > currentSecondBiggest) {

665:         res = _latestAggregatorRoundId < MAX_ROUND_COUNT

```
*Github:* [[53](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L53), [97](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L97), [97](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L97), [144](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L144), [161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L161), [224](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L224), [241](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L241), [365](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L365), [439](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L439), [580](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L580), [584](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L584), [612](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L612), [625](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L625), [642](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L642), [665](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L665)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

108:         return _decimalsETH < tokenDecimals

159:         return _decimalsETH < tokenDecimals

183:         return _decimalsETH < tokenDecimals

295:         while (i < length) {

343:         return _decimalsETH < tokenDecimals

390:         while (i < l) {

461:         while (i < length) {

509:         while (i < l) {

```
*Github:* [[108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L108), [159](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L159), [183](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L183), [295](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L295), [343](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L343), [390](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L390), [461](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L461), [509](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L509)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

419:         if (totalBorrow < bareCollateral) {

464:         while (i < len) {

521:         while (i < len) {

580:         while (i < lenBorrow) {

602:         while (i < lenDeposit) {

660:         while (i < len) {

709:         while (i < lenDeposit) {

734:         while (i < lenBorrow) {

788:         if (expectedMaxAmount > maxAmountPool) {

804:         if (possibelWithdraw > expectedMaxAmount) {

814:         if (withdrawAmount > maxAmountPool) {

856:         if (tokenAmount > maxSolelyAmount) {

896:         if (tokenAmount > maxPoolAmount) {

```
*Github:* [[419](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L419), [464](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L464), [521](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L521), [580](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L580), [602](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L602), [660](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L660), [709](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L709), [734](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L734), [788](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L788), [804](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L804), [814](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L814), [856](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L856), [896](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L896)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

126:         if (_baseReward > LIQUIDATION_INCENTIVE_MAX) {

130:         if (_baseReward < LIQUIDATION_INCENTIVE_MIN) {

136:         if (_baseRewardFarm > LIQUIDATION_INCENTIVE_POWERFARM_MAX) {

140:         if (_baseRewardFarm < LIQUIDATION_INCENTIVE_MIN) {

154:         if (_newMaxFeeETH > maxFee) {

158:         if (_newMaxFeeETH < minFee) {

172:         if (_newMaxFeeFarmETH > maxFeeFarm) {

176:         if (_newMaxFeeFarmETH < minFeeFarm) {

```
*Github:* [[126](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L126), [130](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L130), [136](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L136), [140](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L140), [154](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L154), [158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L158), [172](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L172), [176](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L176)]


```solidity
File: contracts/WiseSecurity/WiseSecurityHelper.sol

32:         while (i < l) {

79:         while (i < l) {

121:         while (i < l) {

160:         while (i < l) {

372:         while (i < l) {

408:         while (i < l) {

444:         while (i < l) {

501:         while (i < l) {

749:         return feeETH < _maxFeeETH

866:         if (_borrowETHTotal < _weightedCollateralETH) {

1065:         while(i < len) {

```
*Github:* [[32](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L32), [79](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L79), [121](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L121), [160](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L160), [372](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L372), [408](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L408), [444](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L444), [501](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L501), [749](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L749), [866](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L866), [1065](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1065)]


```solidity
File: contracts/WrapperHub/AaveHelper.sol

202:         if (address(this).balance < _amount) {

230:         if (_ethSent > _maxPaybackAmount) {

254:         for (i; i < l;) {

290:         for (i; i < l;) {

```
*Github:* [[202](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L202), [230](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L230), [254](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L254), [290](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L290)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

71:         for (uint256 i = 0; i < _underlyingAssets.length; i++) {

537:         if (ethRefundAmount > 0) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L71), [537](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L537)]


</details>


<a name="GAS-10"></a> 
### [GAS-10] Optimize Gas by splitting `if() revert` statements
Using boolean operators in a single `if() revert` statement can consume more gas than necessary. Consider splitting these statements to save gas.

*There is one instance of this issue:*
```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

97:         if (_answer > maxAnswer || _answer < minAnswer) {

```
*Github:* [[97](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L97)]



<a name="GAS-11"></a> 
### [GAS-11] There are comparisons to boolean literals (true and false), these can be simplified to save gas
In such instances you can simplify as follows: if ( == true) ==> if () | if ( == false) ==> if (!)

<details>
<summary>
There are <b>112</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

104:         if (increaseCardinalityRequired == true) {

108:         if (oldestObservationSatisfied == false) {

```
*Github:* [[104](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L104), [108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L108)]


```solidity
File: contracts/DerivativeOracles/PtOracleDerivative.sol

109:         if (increaseCardinalityRequired == true) {

113:         if (oldestObservationSatisfied == false) {

```
*Github:* [[109](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L109), [113](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L113)]


```solidity
File: contracts/DerivativeOracles/PtOraclePure.sol

90:         if (increaseCardinalityRequired == true) {

94:         if (oldestObservationSatisfied == false) {

```
*Github:* [[90](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L90), [94](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L94)]


```solidity
File: contracts/FeeManager/FeeManager.sol

261:             if (isAaveToken[tokenAddress] == true) {

418:         if (poolTokenAdded[_poolToken] == true) {

449:         if (poolTokenAdded[_poolToken] == false) {

473:         if (found == true) {

650:         if (isAaveToken[_poolToken] == true) {

701:         if (allowedTokens[caller][_feeToken] == false) {

```
*Github:* [[261](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L261), [418](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L418), [449](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L449), [473](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L473), [650](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L650), [701](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L701)]


```solidity
File: contracts/MainHelper.sol

42:         return _maxSharePrice == true

223:         if (verifiedIsolationPool[_poolAddress] == false) {

244:         if (positionLocked[_nftId] == false) {

265:         if (positionLocked[_nftIdLiquidator] == true) {

627:         if (hashMap[hashData] == true) {

716:             isLending == true

933:         _resonanceOutcome(_poolToken, totalShares) == true

1165:         if (_checkLendingDataEmpty(_nftId, _poolToken) == false) {

```
*Github:* [[42](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L42), [223](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L223), [244](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L244), [265](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L265), [627](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L627), [716](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L716), [933](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L933), [1165](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L1165)]


```solidity
File: contracts/PoolManager.sol

36:         if (parametersLocked[_poolToken] == true) {

```
*Github:* [[36](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L36)]


```solidity
File: contracts/PositionNFTs.sol

46:         if (reservePublicBlocked == true) {

47:             if (reserveRole[msg.sender] == false) {

161:         if (_exists(tokenId) == false) {

183:             ) == false

349:             _exists(_tokenId) == true,

```
*Github:* [[46](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L46), [47](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L47), [161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L161), [183](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L183), [349](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L349)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol

127:         if (isAave[_nftId] == true) {

203:         if (_notBelowMinDepositAmount(leveragedAmount) == false) {

238:         uint256 borrowShares = _isAave == false

246:         uint256 borrowTokenAmount = _isAave == false

```
*Github:* [[127](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L127), [203](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L203), [238](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L238), [246](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L246)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

365:         if (isShutdown == true) {

```
*Github:* [[365](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L365)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

67:         if (allowEnter == false) {

215:         if (_ethBack == true) {

333:         if (_isAave == true) {

520:         if (_checkDebtRatio(_nftId) == false) {

538:         if (_isAave == true) {

571:         if (_checkDebtRatio(_nftId) == true) {

575:         address paybackToken = isAave[_nftId] == true

584:         uint256 cutoffShares = isAave[_nftId] == true

```
*Github:* [[67](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L67), [215](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L215), [333](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L333), [520](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L520), [538](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L538), [571](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L571), [575](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L575), [584](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L584)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol

39:         if (sendingProgress == true) {

43:         if (WISE_LENDING.sendingProgress() == true) {

47:         if (AAVE_HUB.sendingProgressAaveHub() == true) {

330:         uint256 netAPY = isPositive == true

```
*Github:* [[39](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L39), [43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L43), [47](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L47), [330](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L330)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol

291:         if (_checkDebtRatio(wiseLendingNFT) == false) {

```
*Github:* [[291](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L291)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

304:         if (_compareHashes(_pendleMarket, rewardTokens) == true) {

396:             if (_fromInside == false) {

413:         if (_fromInside == false) {

456:         if (IS_ETH_MAIN == false) {

```
*Github:* [[304](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L304), [396](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L396), [413](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L413), [456](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L456)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

154:         if (_overWritten == true) {

699:         if (PENDLE_MARKET.isExpired() == true) {

```
*Github:* [[154](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L154), [699](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L699)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol

51:             ) == true

```
*Github:* [[51](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L51)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

191:             _exists(_tokenId) == true,

```
*Github:* [[191](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L191)]


```solidity
File: contracts/TransferHub/CallOptionalReturn.sol

31:         if (success == false) {

```
*Github:* [[31](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/CallOptionalReturn.sol#L31)]


```solidity
File: contracts/TransferHub/SendValueHelper.sol

33:         if (success == false) {

```
*Github:* [[33](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/SendValueHelper.sol#L33)]


```solidity
File: contracts/WiseCore.sol

76:         if (_onBehalf == true) {

200:         if (_byPassCase(_caller) == true) {

204:         if (positionLocked[_nftId] == false) {

246:         if (WISE_ORACLE.chainLinkIsDead(_poolToken) == true) {

282:         if (POSITION_NFT.isOwner(_nftId, _caller) == true) {

306:         if (state == true) {

397:         if (_onBehalf == true) {

592:         if (userLendingData[_nftId][_receiveTokens].unCollateralized == true) {

```
*Github:* [[76](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L76), [200](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L200), [204](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L204), [246](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L246), [282](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L282), [306](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L306), [397](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L397), [592](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L592)]


```solidity
File: contracts/WiseLending.sol

87:         if (powerFarmCheck == true) {

290:         if (_aboveThreshold(_poolToken) == true) {

1527:         if (_onBehalf == false) {

```
*Github:* [[87](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L87), [290](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L290), [1527](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L1527)]


```solidity
File: contracts/WiseLowLevelHelper.sol

354:         if (sendingProgress == true) {

358:         if (_sendingProgressAaveHub() == true) {

400:         if (verifiedIsolationPool[_sender] == true) {

```
*Github:* [[354](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L354), [358](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L358), [400](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L400)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

45:         if (_checkFunctionExistence(address(tokenAggregator)) == false) {

117:         if (uniTwapPoolInfoStruct.isUniPool == true) {

270:         if (_chainLinkIsDead(ETH_USD_PLACEHOLDER) == true) {

526:         if (IS_ARBITRUM_CHAIN == false) {

```
*Github:* [[45](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L45), [117](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L117), [270](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L270), [526](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L526)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

76:         if (chainLinkIsDead(_tokenAddress) == true) {

451:         if (sequencerIsDead() == true) {

475:             if (state == true) {

```
*Github:* [[76](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L76), [451](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L451), [475](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L475)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

246:         if (_checkBlacklisted(_poolToken) == true) {

255:         if (WISE_LENDING.verifiedIsolationPool(_caller) == true) {

259:         if (WISE_LENDING.positionLocked(_nftId) == true) {

263:         if (_isUncollateralized(_nftId, _poolToken) == true) {

284:         if (_checkBlacklisted(_poolToken) == true) {

293:         if (WISE_LENDING.verifiedIsolationPool(_caller) == true) {

297:         if (WISE_LENDING.positionLocked(_nftId) == true) {

323:         if (WISE_LENDING.verifiedIsolationPool(_caller) == true) {

327:         if (WISE_LENDING.positionLocked(_nftId) == true) {

343:         if (checkHeartbeat(_poolAddress) == false) {

367:         if (_checkBlacklisted(_poolToken) == true) {

671:             if (checkHeartbeat(token) == false) {

675:             if (wasBlacklisted[token] == true) {

716:             if (_checkBlacklisted(token) == true) {

741:             if (_checkBlacklisted(token) == true) {

792:         if (_isUncollateralized(_nftId, _poolToken) == true) {

842:         if (_isUncollateralized(_nftId, _poolToken) == false) {

1014:         if (securityWorker[msg.sender] == false) {

```
*Github:* [[246](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L246), [255](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L255), [259](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L259), [263](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L263), [284](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L284), [293](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L293), [297](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L297), [323](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L323), [327](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L327), [343](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L343), [367](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L367), [671](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L671), [675](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L675), [716](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L716), [741](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L741), [792](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L792), [842](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L842), [1014](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L1014)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

146:         uint256 maxFee = IS_ETH_MAINNET == true

150:         uint256 minFee = IS_ETH_MAINNET == true

164:         uint256 maxFeeFarm = IS_ETH_MAINNET == true

168:         uint256 minFeeFarm = IS_ETH_MAINNET == true

```
*Github:* [[146](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L146), [150](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L150), [164](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L164), [168](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L168)]


```solidity
File: contracts/WiseSecurity/WiseSecurityHelper.sol

206:         if (_isUncollateralized(_nftId, _poolToken) == true) {

263:         if (_isUncollateralized(_nftId, _poolToken) == true) {

477:         return wasBlacklisted[_poolToken] == true;

678:         if (WISE_LENDING.borrowPoolData(_poolAddress).allowBorrow == false) {

694:         return WISE_ORACLE.chainLinkIsDead(_poolToken) == false;

707:         if (WISE_LENDING.positionLocked(_nftId) == true) {

801:         if (_getState(_nftId, _powerFarm) == true) {

822:         uint256 overallCollateral = _powerFarm == true

976:         ) == false) {

1086:         if (_checkBlacklisted(_poolToken) == true) {

1102:         if (_success == false) {

```
*Github:* [[206](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L206), [263](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L263), [477](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L477), [678](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L678), [694](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L694), [707](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L707), [801](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L801), [822](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L822), [976](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L976), [1086](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1086), [1102](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L1102)]


```solidity
File: contracts/WrapperHub/AaveHelper.sol

38:         if (sendingProgressAaveHub == true) {

42:         if (WISE_LENDING.sendingProgress() == true) {

70:         if (POSITION_NFT.isOwner(_nftId, msg.sender) == false) {

214:         if (success == false) {

```
*Github:* [[38](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L38), [42](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L42), [70](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L70), [214](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L214)]


</details>


<a name="GAS-12"></a> 
### [GAS-12] Use assembly to compute hashes to save gas
If the arguments to the encode call can fit into the scratch space (two words or fewer), then it's more efficient to use assembly to generate the hash (80 gas):

`keccak256(abi.encodePacked(x, y)) -> assembly {mstore(0x00, a); mstore(0x20, b); let hash := keccak256(0x00, 0x40); }`

*There are <b>6</b> instances of this issue:*
```solidity
File: contracts/MainHelper.sol

655:         return keccak256(

```
*Github:* [[655](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L655)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol

225:         return keccak256(

229:         ) == keccak256(

```
*Github:* [[225](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L225), [229](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L229)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

23:             salt: keccak256(

65:         bytes32 salt = keccak256(

```
*Github:* [[23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L23), [65](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L65)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

47:                     keccak256(

```
*Github:* [[47](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L47)]



<a name="GAS-13"></a> 
### [GAS-13] Use assembly to emit events
To efficiently emit events, it's possible to utilize assembly by making use of scratch space and the free memory pointer. This approach has the advantage of potentially avoiding the costs associated with memory expansion.

However, it's important to note that in order to safely optimize this process, it is preferable to cache and restore the free memory pointer.

A good example of such practice can be seen in [Solady's](https://github.com/Vectorized/solady/blob/main/src/tokens/ERC1155.sol#L167) codebase.

<details>
<summary>
There are <b>73</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/FeeManager.sol

124:         emit PoolFeeChanged(

156:             emit PoolFeeChanged(

185:         emit IncentiveMasterProposed(

204:         emit ClaimedOwnershipIncentiveMaster(

222:         emit IncentiveIncreasedA(

240:         emit IncentiveIncreasedB(

276:         emit ClaimedIncentivesBulk(

297:         emit ClaimedIncentives(

342:         emit IncentiveOwnerAChanged(

379:         emit IncentiveOwnerBChanged(

402:         emit PoolTokenAdded(

428:         emit PoolTokenAdded(

478:             emit PoolTokenRemoved(

504:         emit BadDebtIncreasedLiquidation(

526:         emit SetBadDebtPosition(

560:         emit SetBeneficial(

593:         emit RevokeBeneficial(

619:         emit ClaimedFeesWiseBulk(

677:         emit ClaimedFeesWise(

716:         emit ClaimedFeesBeneficial(

801:         emit PayedBackBadDebt(

852:         emit PayedBackBadDebtFree(

```
*Github:* [[124](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L124), [156](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L156), [185](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L185), [204](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L204), [222](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L222), [240](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L240), [276](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L276), [297](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L297), [342](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L342), [379](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L379), [402](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L402), [428](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L428), [478](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L478), [504](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L504), [526](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L526), [560](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L560), [593](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L593), [619](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L619), [677](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L677), [716](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L716), [801](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L801), [852](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L852)]


```solidity
File: contracts/FeeManager/FeeManagerHelper.sol

96:         emit TotalBadDebtIncreased(

112:         emit TotalBadDebtDecreased(

161:             emit UpdateBadDebtPosition(

183:             emit UpdateBadDebtPosition(

```
*Github:* [[96](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L96), [112](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L112), [161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L161), [183](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L183)]


```solidity
File: contracts/OwnableMaster.sol

82:         emit MasterProposed(

110:         emit RenouncedOwnership(

```
*Github:* [[82](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L82), [110](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L110)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol

284:         emit RegistrationFarm(

```
*Github:* [[284](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarm.sol#L284)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol

25:         emit ETHReceived(

71:         emit MinDepositChange(

90:         emit FarmStatus(

131:         emit FarmEntry(

174:         emit FarmEntry(

246:         emit FarmExit(

266:         emit ManualPaybackShares(

295:         emit ManualWithdrawShares(

```
*Github:* [[25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L25), [71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L71), [90](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L90), [131](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L131), [174](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L174), [246](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L246), [266](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L266), [295](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerManager.sol#L295)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

46:         emit WithdrawLp(

103:         emit ExchangeRewardsForCompounding(

159:         emit ExchangeLpFeesForPendle(

287:         emit AddPendleMarket(

313:         emit UpdateRewardTokens(

329:         emit ChangeExchangeIncentive(

355:         emit ChangeMintFee(

421:         emit LockPendle(

444:         emit ClaimArb(

467:             emit WithdrawLock(

491:         emit WithdrawLock(

520:         emit IncreaseReservedForCompound(

593:         emit ClaimVoteRewards(

```
*Github:* [[46](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L46), [103](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L103), [159](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L159), [287](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L287), [313](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L313), [329](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L329), [355](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L355), [421](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L421), [444](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L444), [467](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L467), [491](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L491), [520](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L520), [593](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L593)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

129:         emit ETHReceived(

```
*Github:* [[129](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L129)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol

169:         emit ERC721Received(

```
*Github:* [[169](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L169)]


```solidity
File: contracts/WiseCore.sol

77:             emit FundsWithdrawnOnBehalf(

86:             emit FundsWithdrawn(

156:         emit FundsDeposited(

398:             emit FundsBorrowedOnBehalf(

407:             emit FundsBorrowed(

```
*Github:* [[77](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L77), [86](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L86), [156](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L156), [398](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L398), [407](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L407)]


```solidity
File: contracts/WiseLending.sol

136:         emit FundsSolelyWithdrawn(

153:         emit FundsSolelyDeposited(

1450:         emit FundsReturned(

```
*Github:* [[136](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L136), [153](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L153), [1450](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L1450)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

1022:         emit SecurityShutdown(

```
*Github:* [[1022](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L1022)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

145:         emit IsDepositAave(

190:         emit IsDepositAave(

226:         emit IsWithdrawAave(

269:         emit IsWithdrawAave(

302:         emit IsWithdrawAave(

342:         emit IsWithdrawAave(

378:         emit IsBorrowAave(

421:         emit IsBorrowAave(

470:         emit IsPaybackAave(

544:         emit IsPaybackAave(

603:         emit IsPaybackAave(

688:         emit SetAaveTokenAddress(

```
*Github:* [[145](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L145), [190](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L190), [226](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L226), [269](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L269), [302](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L302), [342](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L342), [378](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L378), [421](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L421), [470](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L470), [544](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L544), [603](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L603), [688](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L688)]


</details>


<a name="GAS-14"></a> 
### [GAS-14] Use assembly to validate `msg.sender`

<details>
<summary>
There are <b>19</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

195:         if (msg.sender == incentiveMaster) {

206:         if (msg.sender == address(WISE_SECURITY)) {

217:         if (msg.sender == address(WISE_LENDING)) {

```
*Github:* [[195](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L195), [206](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L206), [217](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L217)]


```solidity
File: contracts/FeeManager/FeeManager.sol

197:         if (msg.sender != proposedIncentiveMaster) {

320:         if (msg.sender != incentiveOwnerA) {

357:         if (msg.sender != incentiveOwnerB) {

```
*Github:* [[197](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L197), [320](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L320), [357](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L357)]


```solidity
File: contracts/OwnableMaster.sol

25:         if (msg.sender == master) {

41:         if (msg.sender == proposedMaster) {

```
*Github:* [[25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L25), [41](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/OwnableMaster.sol#L41)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

77:         if (msg.sender != BALANCER_ADDRESS) {

```
*Github:* [[77](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L77)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

251:         if (msg.sender != pendleChildAddress[_pendleMarket]) {

```
*Github:* [[251](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L251)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

76:         if (msg.sender != PENDLE_POWER_FARM_CONTROLLER) {

514:         if (msg.sender == PENDLE_POWER_FARM_CONTROLLER) {

635:         if (msg.sender == PENDLE_POWER_FARM_CONTROLLER) {

```
*Github:* [[76](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L76), [514](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L514), [635](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L635)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

44:         if (msg.sender != PENDLE_POWER_FARM_CONTROLLER) {

```
*Github:* [[44](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L44)]


```solidity
File: contracts/WiseLending.sol

53:         if (msg.sender == WETH_ADDRESS) {

```
*Github:* [[53](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L53)]


```solidity
File: contracts/WiseLendingDeclaration.sol

261:         if (msg.sender != AAVE_HUB_ADDRESS) {

```
*Github:* [[261](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L261)]


```solidity
File: contracts/WiseLowLevelHelper.sol

18:         if (msg.sender == address(FEE_MANAGER)) {

```
*Github:* [[18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L18)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

35:         if (msg.sender == address(WISE_LENDING)) {

```
*Github:* [[35](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L35)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

87:         if (msg.sender == WETH_ADDRESS) {

```
*Github:* [[87](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L87)]


</details>


<a name="GAS-15"></a> 
### [GAS-15] Using a double `if` statement instead of a logical AND (`&&`)
Using a double `if` statement instead of a logical AND (`&&`) can provide similar short-circuiting behavior whereas double if is slightly [more gas efficient](https://gist.github.com/DadeKuma/931ce6794a050201ec6544dbcc31316c).

*There are <b>8</b> instances of this issue:*
```solidity
File: contracts/MainHelper.sol

839:             && pureCollateralAmount[_nftId][_poolToken] == 0;

```
*Github:* [[839](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L839)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

255:             if (lastIndex[i] == 0 && index > 0) {

```
*Github:* [[255](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L255)]


```solidity
File: contracts/TransferHub/CallOptionalReturn.sol

36:             && results

37:             && token.code.length > 0;

```
*Github:* [[36](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/CallOptionalReturn.sol#L36), [37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/CallOptionalReturn.sol#L37)]


```solidity
File: contracts/WiseCore.sol

564:         if (pureCollateral > 0 && userShares > 0) {

572:         if (potentialPureExtraCashout > 0 && potentialPureExtraCashout <= pureCollateral) {

```
*Github:* [[564](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L564), [572](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L572)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

315:         if (_tokenAddress != _token0 && _tokenAddress != _token1) {

439:         if (tickCumulativesDelta < 0 && (tickCumulativesDelta % twapPeriodInt56 != 0)) {

```
*Github:* [[315](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L315), [439](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L439)]



<a name="GAS-16"></a> 
### [GAS-16] Consider using OZ EnumerateSet in place of nested mappings
Nested mappings and multi-dimensional arrays in Solidity operate through a process of double hashing, wherein the original storage slot and the first key are concatenated and hashed, and then this hash is again concatenated with the second key and hashed. This process can be quite gas expensive due to the double-hashing operation and subsequent storage operation (sstore).

A possible optimization involves manually concatenating the keys followed by a single hash operation and an sstore. However, this technique introduces the risk of storage collision, especially when there are other nested hash maps in the contract that use the same key types. Because Solidity is unaware of the number and structure of nested hash maps in a contract, it follows a conservative approach in computing the storage slot to avoid possible collisions.

OpenZeppelin's EnumerableSet provides a potential solution to this problem. It creates a data structure that combines the benefits of set operations with the ability to enumerate stored elements, which is not natively available in Solidity. EnumerableSet handles the element uniqueness internally and can therefore provide a more gas-efficient and collision-resistant alternative to nested mappings or multi-dimensional arrays in certain scenarios.

*There are <b>7</b> instances of this issue:*
```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

158:     mapping(address => mapping(address => bool)) public allowedTokens;

161:     mapping(address => mapping(address => uint256)) public gatheredIncentiveToken;

```
*Github:* [[158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L158), [161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L161)]


```solidity
File: contracts/WiseLendingDeclaration.sol

273:     mapping(uint256 => mapping(address => uint256)) public userBorrowShares;

274:     mapping(uint256 => mapping(address => uint256)) public pureCollateralAmount;

275:     mapping(uint256 => mapping(address => LendingEntry)) public userLendingData;

```
*Github:* [[273](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L273), [274](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L274), [275](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L275)]


```solidity
File: contracts/WiseLowLevelHelper.sol

372:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

383:         mapping(uint256 => mapping(address => uint256)) storage userMapping,

```
*Github:* [[372](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L372), [383](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L383)]



<a name="GAS-17"></a> 
### [GAS-17] Use != 0 instead of > 0
Replace spotted instances with != 0 for uints as this uses less gas.

<details>
<summary>
There are <b>36</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/FeeManager.sol

697:         if (totalBadDebtETH > 0) {

```
*Github:* [[697](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManager.sol#L697)]


```solidity
File: contracts/FeeManager/FeeManagerHelper.sol

302:         if (incentiveUSD[incentiveOwnerA] > 0) {

312:         if (incentiveUSD[incentiveOwnerB] > 0) {

```
*Github:* [[302](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L302), [312](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/FeeManagerHelper.sol#L312)]


```solidity
File: contracts/MainHelper.sol

776:         if (userBorrowShares[_nftId][_poolToken] > 0) {

```
*Github:* [[776](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L776)]


```solidity
File: contracts/PoolManager.sol

108:         if (_maximumDeposit > 0) {

112:         if (_collateralFactor > 0) {

268:         if (fetchBalance > 0) {

```
*Github:* [[108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L108), [112](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L112), [268](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L268)]


```solidity
File: contracts/PositionNFTs.sol

117:         if (reserved[_user] > 0) {

203:         if (nftId > 0) {

288:         if (reservedId > 0) {

309:         if (reservedId > 0) {

```
*Github:* [[117](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L117), [203](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L203), [288](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L288), [309](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L309)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

107:         if (initialAmount > 0) {

```
*Github:* [[107](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L107)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol

103:         if (positionBorrowShares > 0) {

122:         if (positionBorrowSharesAave > 0) {

186:         if (borrowShares > 0) {

198:         if (borrowSharesAave > 0) {

206:         if (borrowShares > 0) {

```
*Github:* [[103](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L103), [122](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L122), [186](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L186), [198](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L198), [206](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmMathLogic.sol#L206)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

388:         if (_amount > 0) {

417:         if (_amount > 0) {

```
*Github:* [[388](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L388), [417](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L417)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

205:             if (rewardsOutsideArray[i] > 0) {

242:             if (userReward.accrued > 0) {

255:             if (lastIndex[i] == 0 && index > 0) {

```
*Github:* [[205](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L205), [242](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L242), [255](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L255)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol

84:         if (reservedKeys[_userAddress] > 0) {

```
*Github:* [[84](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/MinterReserver.sol#L84)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

130:         if (reservedId > 0) {

151:         if (reservedId > 0) {

```
*Github:* [[130](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L130), [151](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L151)]


```solidity
File: contracts/WiseCore.sol

552:         if (pureCollateralAmount[_nftId][_receiveTokens] > 0) {

564:         if (pureCollateral > 0 && userShares > 0) {

572:         if (potentialPureExtraCashout > 0 && potentialPureExtraCashout <= pureCollateral) {

```
*Github:* [[552](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L552), [564](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L564), [572](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseCore.sol#L572)]


```solidity
File: contracts/WiseLending.sol

1147:         if (refundAmount > 0) {

```
*Github:* [[1147](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLending.sol#L1147)]


```solidity
File: contracts/WiseLowLevelHelper.sol

464:         if (_value > 0) {

```
*Github:* [[464](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLowLevelHelper.sol#L464)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

161:         if (fetchTwapValue > 0) {

```
*Github:* [[161](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L161)]


```solidity
File: contracts/WiseSecurity/WiseSecurity.sol

248:             if (overallETHBorrowBare(_nftId) > 0) {

286:             if (overallETHBorrowBare(_nftId) > 0) {

369:             if (overallETHBorrowBare(_nftId) > 0) {

```
*Github:* [[248](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L248), [286](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L286), [369](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurity.sol#L369)]


```solidity
File: contracts/WiseSecurity/WiseSecurityHelper.sol

849:         if (overallETHCollateralsWeighted(_nftId) > 0) {

```
*Github:* [[849](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityHelper.sol#L849)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

537:         if (ethRefundAmount > 0) {

```
*Github:* [[537](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L537)]


</details>


<a name="GAS-18"></a> 
### [GAS-18] Use `uint256(1)`/`uint256(2)` instead of `true`/`false` to save gas for changes
Avoids a Gsset (20000 gas) when changing from false to true, after having been true in the past. Since most of the bools aren't changed twice in one transaction, I've counted the amount of gas as half of the full amount, for each variable.

<details>
<summary>
There are <b>20</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

149:     mapping(address => bool) public poolTokenAdded;

152:     mapping(address => bool) public isAaveToken;

158:     mapping(address => mapping(address => bool)) public allowedTokens;

```
*Github:* [[149](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L149), [152](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L152), [158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L158)]


```solidity
File: contracts/MainHelper.sol

617:         mapping(bytes32 => bool) storage hashMap,

```
*Github:* [[617](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L617)]


```solidity
File: contracts/PositionNFTs.sol

21:     mapping(address => bool) public reserveRole;

23:     bool public reservePublicBlocked;

```
*Github:* [[21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L21), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L23)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

43:     bool public isShutdown;

46:     bool public allowEnter;

108:     mapping(uint256 => bool) public isAave;

```
*Github:* [[43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L43), [46](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L46), [108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L108)]


```solidity
File: contracts/TransferHub/SendValueHelper.sol

10:     bool public sendingProgress;

```
*Github:* [[10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/SendValueHelper.sol#L10)]


```solidity
File: contracts/WiseLendingDeclaration.sol

186:     bool internal powerFarmCheck;

286:     mapping(uint256 => bool) public positionLocked;

287:     mapping(address => bool) internal parametersLocked;

288:     mapping(address => bool) public verifiedIsolationPool;

291:     mapping(bytes32 => bool) internal hashMapPositionBorrow;

292:     mapping(bytes32 => bool) internal hashMapPositionLending;

```
*Github:* [[186](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L186), [286](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L286), [287](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L287), [288](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L288), [291](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L291), [292](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L292)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

133:     bool internal immutable IS_ARBITRUM_CHAIN;

```
*Github:* [[133](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L133)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

238:     mapping(address => bool) public wasBlacklisted;

247:     mapping(address => bool) public securityWorker;

```
*Github:* [[238](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L238), [247](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L247)]


```solidity
File: contracts/WrapperHub/Declarations.sol

25:     bool public sendingProgressAaveHub;

```
*Github:* [[25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L25)]


</details>


<a name="GAS-19"></a> 
### [GAS-19] Using bitmap to store bool states can save gas
Using a bitmap instead of a bool array or a bool mapping to store boolean states can save gas fees. This is because the bitmap can store 256 boolean values in a single slot instead of 256 slots, which can save gas when writing bool values or when reading multiple bool values from the same slot.

<details>
<summary>
There are <b>13</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

149:     mapping(address => bool) public poolTokenAdded;

152:     mapping(address => bool) public isAaveToken;

158:     mapping(address => mapping(address => bool)) public allowedTokens;

```
*Github:* [[149](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L149), [152](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L152), [158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L158)]


```solidity
File: contracts/MainHelper.sol

617:         mapping(bytes32 => bool) storage hashMap,

```
*Github:* [[617](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L617)]


```solidity
File: contracts/PositionNFTs.sol

21:     mapping(address => bool) public reserveRole;

```
*Github:* [[21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L21)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

108:     mapping(uint256 => bool) public isAave;

```
*Github:* [[108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L108)]


```solidity
File: contracts/WiseLendingDeclaration.sol

286:     mapping(uint256 => bool) public positionLocked;

287:     mapping(address => bool) internal parametersLocked;

288:     mapping(address => bool) public verifiedIsolationPool;

291:     mapping(bytes32 => bool) internal hashMapPositionBorrow;

292:     mapping(bytes32 => bool) internal hashMapPositionLending;

```
*Github:* [[286](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L286), [287](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L287), [288](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L288), [291](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L291), [292](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L292)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

238:     mapping(address => bool) public wasBlacklisted;

247:     mapping(address => bool) public securityWorker;

```
*Github:* [[238](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L238), [247](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L247)]


</details>


<a name="GAS-20"></a> 
### [GAS-20] Using `this` to access functions results in an external call, wasting gas
External calls have an overhead of 100 gas, which can be avoided by not referencing the function using `this`. Contracts are allowed to override their parents' functions and change the visibility from `external` to `public`, so make this change if it's required in order to call the function internally.

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/TransferHub/SendValueHelper.sol

18:         if (address(this).balance < _amount) {

```
*Github:* [[18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/SendValueHelper.sol#L18)]


```solidity
File: contracts/WrapperHub/AaveHelper.sol

202:         if (address(this).balance < _amount) {

```
*Github:* [[202](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHelper.sol#L202)]



<a name="GAS-21"></a> 
### [GAS-21] `abi.encodePacked` is more gas efficient than `abi.encode`
`abi.encode` pads all elementary types to 32 bytes, whereas `abi.encodePacked` will only use the minimal required memory to encode the data. See [here](https://docs.soliditylang.org/en/v0.8.11/abi-spec.html?highlight=encodepacked#non-standard-packed-mode) for more info.

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol

41:             abi.encode(

```
*Github:* [[41](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmLeverageLogic.sol#L41)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol

226:             abi.encode(

230:             abi.encode(

```
*Github:* [[226](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L226), [230](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L230)]



<a name="GAS-22"></a> 
### [GAS-22] Using bools for storage incurs overhead
Use uint256(1) and uint256(2) for true/false to avoid a Gwarmaccess (100 gas), and to avoid Gsset (20000 gas) when changing from false to true, after having been true in the past. See [source](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/58f635312aa21f947cae5f8578638a85aa2519f5/contracts/security/ReentrancyGuard.sol#L23-L27).

<details>
<summary>
There are <b>20</b> instances (click to show):
</summary>

```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

149:     mapping(address => bool) public poolTokenAdded;

152:     mapping(address => bool) public isAaveToken;

158:     mapping(address => mapping(address => bool)) public allowedTokens;

```
*Github:* [[149](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L149), [152](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L152), [158](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L158)]


```solidity
File: contracts/MainHelper.sol

617:         mapping(bytes32 => bool) storage hashMap,

```
*Github:* [[617](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L617)]


```solidity
File: contracts/PositionNFTs.sol

21:     mapping(address => bool) public reserveRole;

23:     bool public reservePublicBlocked;

```
*Github:* [[21](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L21), [23](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L23)]


```solidity
File: contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol

43:     bool public isShutdown;

46:     bool public allowEnter;

108:     mapping(uint256 => bool) public isAave;

```
*Github:* [[43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L43), [46](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L46), [108](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarm/PendlePowerFarmDeclarations.sol#L108)]


```solidity
File: contracts/TransferHub/SendValueHelper.sol

10:     bool public sendingProgress;

```
*Github:* [[10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/TransferHub/SendValueHelper.sol#L10)]


```solidity
File: contracts/WiseLendingDeclaration.sol

186:     bool internal powerFarmCheck;

286:     mapping(uint256 => bool) public positionLocked;

287:     mapping(address => bool) internal parametersLocked;

288:     mapping(address => bool) public verifiedIsolationPool;

291:     mapping(bytes32 => bool) internal hashMapPositionBorrow;

292:     mapping(bytes32 => bool) internal hashMapPositionLending;

```
*Github:* [[186](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L186), [286](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L286), [287](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L287), [288](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L288), [291](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L291), [292](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseLendingDeclaration.sol#L292)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

133:     bool internal immutable IS_ARBITRUM_CHAIN;

```
*Github:* [[133](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L133)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

238:     mapping(address => bool) public wasBlacklisted;

247:     mapping(address => bool) public securityWorker;

```
*Github:* [[238](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L238), [247](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L247)]


```solidity
File: contracts/WrapperHub/Declarations.sol

25:     bool public sendingProgressAaveHub;

```
*Github:* [[25](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L25)]


</details>


<a name="GAS-23"></a> 
### [GAS-23] Cache array length outside of loop
If not cached, the solidity compiler will always read the length of the array during each iteration. That is, if it is a storage array, this is an extra sload operation (100 additional extra gas for each iteration except for the first) and if it is a memory array, this is an extra mload operation (3 additional gas for each iteration except for the first).

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

509:         uint256 length = childInfo.rewardTokens.length;

577:             childInfo.rewardTokens.length

```
*Github:* [[509](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L509), [577](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L577)]


```solidity
File: contracts/WrapperHub/AaveHub.sol

71:         for (uint256 i = 0; i < _underlyingAssets.length; i++) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L71)]



<a name="GAS-24"></a> 
### [GAS-24] Don't initialize variables with default value

*There are <b>2</b> instances of this issue:*
```solidity
File: contracts/WrapperHub/AaveHub.sol

71:         for (uint256 i = 0; i < _underlyingAssets.length; i++) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L71)]


```solidity
File: contracts/WrapperHub/Declarations.sol

27:     uint16 internal constant REF_CODE = 0;

```
*Github:* [[27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L27)]



<a name="GAS-25"></a> 
### [GAS-25] Usage of `int`s/`uint`s smaller than 32 bytes incurs overhead
Using `int`s/`uint`s smaller than 32 bytes may cost more gas. This is because the EVM operates on 32 bytes at a time, so if an element is smaller than 32 bytes, the EVM must perform more operations to reduce the size of the element from 32 bytes to the desired size.

<details>
<summary>
There are <b>83</b> instances (click to show):
</summary>

```solidity
File: contracts/DerivativeOracles/CustomOracleSetup.sol

10:     uint80 public globalRoundId;

12:     mapping(uint80 => uint256) public timeStampByRoundId;

43:         uint80 _roundId,

53:         uint80 _aggregatorRoundId

```
*Github:* [[10](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/CustomOracleSetup.sol#L10), [12](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/CustomOracleSetup.sol#L12), [43](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/CustomOracleSetup.sol#L43), [53](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/CustomOracleSetup.sol#L53)]


```solidity
File: contracts/DerivativeOracles/PendleChildLpOracle.sol

18:     uint8 constant DECIMALS_PRECISION = 18;

50:         returns (uint8)

59:             uint80 roundId,

63:             uint80 answerdInRound

79:         uint80 _roundId

84:             uint80 roundId,

88:             uint80 answeredInRound

```
*Github:* [[18](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L18), [50](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L50), [59](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L59), [63](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L63), [79](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L79), [84](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L84), [88](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleChildLpOracle.sol#L88)]


```solidity
File: contracts/DerivativeOracles/PendleLpOracle.sol

37:         uint32 _twapDuration

66:     uint8 internal constant FEED_DECIMALS = 18;

73:     uint32 public immutable TWAP_DURATION;

124:         uint32 _duration

142:         returns (uint8)

155:             uint80 roundId,

159:             uint80 answeredInRound

```
*Github:* [[37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L37), [66](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L66), [73](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L73), [124](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L124), [142](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L142), [155](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L155), [159](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PendleLpOracle.sol#L159)]


```solidity
File: contracts/DerivativeOracles/PtOracleDerivative.sol

30:         uint32 _twapDuration

65:     uint8 internal constant FEED_DECIMALS = 18;

71:     uint32 public immutable TWAP_DURATION;

137:         returns (uint8)

150:             uint80 roundId,

154:             uint80 answeredInRound

```
*Github:* [[30](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L30), [65](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L65), [71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L71), [137](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L137), [150](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L150), [154](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOracleDerivative.sol#L154)]


```solidity
File: contracts/DerivativeOracles/PtOraclePure.sol

29:         uint32 _twapDuration

51:     uint8 internal constant FEED_DECIMALS = 18;

57:     uint32 public immutable DURATION;

116:         returns (uint8)

129:             uint80 roundId,

133:             uint80 answeredInRound

```
*Github:* [[29](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L29), [51](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L51), [57](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L57), [116](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L116), [129](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L129), [133](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/PtOraclePure.sol#L133)]


```solidity
File: contracts/MainHelper.sol

690:         uint8 i;

```
*Github:* [[690](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/MainHelper.sol#L690)]


```solidity
File: contracts/PositionNFTs.sol

399:                 uint8(

```
*Github:* [[399](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PositionNFTs.sol#L399)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol

215:         uint16 _maxCardinality

248:         childInfo.lastIndex = new uint128[](

366:         uint128 _weeks,

378:         uint128 expiry = _sameExpiry

379:             ? uint128(currentExpiry)

407:             uint128(_amount),

614:         uint64[] calldata _weights

```
*Github:* [[215](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L215), [248](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L248), [366](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L366), [378](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L378), [379](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L379), [407](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L407), [614](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmController.sol#L614)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol

37:         uint128[] lastIndex;

65:     uint128 internal constant WEEK = 7 days;

181:         uint128 _expiry,

```
*Github:* [[37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L37), [65](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L65), [181](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerBase.sol#L181)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol

33:         uint128 _weeks

37:         returns (uint128)

39:         uint128 startTime = uint128((block.timestamp / WEEK)

39:         uint128 startTime = uint128((block.timestamp / WEEK)

110:         returns (uint128[] memory)

180:         returns (uint128)

```
*Github:* [[33](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L33), [37](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L37), [39](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L39), [39](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L39), [110](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L110), [180](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmControllerHelper.sol#L180)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol

47:     uint16 public MAX_CARDINALITY;

226:         uint128[] memory lastIndex = PENDLE_CONTROLLER.pendleChildCompoundInfoLastIndex(

234:         uint128 index;

687:         uint16 _maxCardinality

```
*Github:* [[47](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L47), [226](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L226), [234](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L234), [687](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmToken.sol#L687)]


```solidity
File: contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol

39:         uint16 _maxCardinality

60:         uint16 _maxCardinality

```
*Github:* [[39](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L39), [60](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PendlePowerFarmController/PendlePowerFarmTokenFactory.sol#L60)]


```solidity
File: contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol

241:                 uint8(

```
*Github:* [[241](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PowerFarms/PowerFarmNFTs/PowerFarmNFTs.sol#L241)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

85:     uint8 internal immutable _decimalsWETH;

97:     uint8 internal constant _decimalsUSD = 8;

100:     uint8 internal constant _decimalsETH = 18;

103:     uint80 internal constant MAX_ROUND_COUNT = 50;

106:     uint32 internal constant SECONDS_IN_MINUTE = 60;

109:     uint32 internal constant TWAP_PERIOD = 30 * SECONDS_IN_MINUTE;

139:     mapping(address => uint8) _tokenDecimals;

```
*Github:* [[85](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L85), [97](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L97), [100](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L100), [103](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L103), [106](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L106), [109](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L109), [139](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L139)]


```solidity
File: contracts/WiseOracleHub/OracleHelper.sol

399:         returns (uint128)

401:         return uint128(

413:         uint32[] memory secondsAgo = new uint32[](

413:         uint32[] memory secondsAgo = new uint32[](

428:             int32(TWAP_PERIOD)

455:         returns (uint8)

570:         uint80 latestRoundId = getLatestRoundId(

599:         uint80 latestRoundId = getLatestRoundId(

608:         uint80 iterationCount = _getIterationCount(

620:         uint80 i = 1;

659:         uint80 _latestAggregatorRoundId

663:         returns (uint80 res)

676:         uint80 _roundId

705:             uint80 roundId

```
*Github:* [[399](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L399), [401](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L401), [413](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L413), [413](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L413), [428](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L428), [455](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L455), [570](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L570), [599](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L599), [608](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L608), [620](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L620), [659](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L659), [663](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L663), [676](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L676), [705](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/OracleHelper.sol#L705)]


```solidity
File: contracts/WiseOracleHub/WiseOracleHub.sol

45:             uint160(

90:         returns (uint8)

104:         uint8 tokenDecimals = _tokenDecimals[

155:         uint8 tokenDecimals = _tokenDecimals[

179:         uint8 tokenDecimals = _tokenDecimals[

339:         uint8 tokenDecimals = _tokenDecimals[

```
*Github:* [[45](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L45), [90](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L90), [104](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L104), [155](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L155), [179](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L179), [339](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/WiseOracleHub.sol#L339)]


```solidity
File: contracts/WrapperHub/Declarations.sol

27:     uint16 internal constant REF_CODE = 0;

```
*Github:* [[27](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/Declarations.sol#L27)]


</details>


<a name="GAS-26"></a> 
### [GAS-26] Constructors can be marked as `payable` to save deployment gas
Payable functions cost less gas to execute, because the compiler does not have to add extra checks to ensure that no payment is provided. A constructor can be safely marked as payable, because only the deployer would be able to pass funds, and the project itself would not pass any funds.

*There is one instance of this issue:*
```solidity
File: contracts/DerivativeOracles/CustomOracleSetup.sol

22:     constructor() {

```
*Github:* [[22](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/DerivativeOracles/CustomOracleSetup.sol#L22)]



<a name="GAS-27"></a> 
### [GAS-27] `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too)
*Saves 5 gas per loop*

*There is one instance of this issue:*
```solidity
File: contracts/WrapperHub/AaveHub.sol

71:         for (uint256 i = 0; i < _underlyingAssets.length; i++) {

```
*Github:* [[71](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WrapperHub/AaveHub.sol#L71)]



<a name="GAS-28"></a> 
### [GAS-28] Using `private` rather than `public` for constants, saves gas
If needed, the values can be read from the verified contract source code, or if there are multiple values there can be a single getter function that [returns a tuple](https://github.com/code-423n4/2022-08-frax/blob/90f55a9ce4e25bceed3a74290b854341d8de6afa/src/contracts/FraxlendPair.sol#L156-L178) of the values of all currently-public constants. Saves **3406-3606 gas** in deployment gas due to the compiler not having to create non-payable getter functions for deployment calldata, not having to store the bytes of the value outside of where it's used, and not adding another entry to the method ID table

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/FeeManager/DeclarationsFeeManager.sol

172:     uint256 public constant INCENTIVE_PORTION = 5 * PRECISION_FACTOR_E15;

```
*Github:* [[172](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/FeeManager/DeclarationsFeeManager.sol#L172)]


```solidity
File: contracts/WiseOracleHub/Declarations.sol

79:     address public constant SEQUENCER_ADDRESS = 0xFdB631F5EE196F0ed6FAa767959853A9F217697D;

```
*Github:* [[79](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseOracleHub/Declarations.sol#L79)]


```solidity
File: contracts/WiseSecurity/WiseSecurityDeclarations.sol

185:     uint256 public constant BORROW_PERCENTAGE_CAP = 95 * PRECISION_FACTOR_E16;

```
*Github:* [[185](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/WiseSecurity/WiseSecurityDeclarations.sol#L185)]



<a name="GAS-29"></a> 
### [GAS-29] Use shift Right/Left instead of division/multiplication if possible

*There are <b>3</b> instances of this issue:*
```solidity
File: contracts/PoolManager.sol

285:         return PRECISION_FACTOR_E18 / 2

286:             + (PRECISION_FACTOR_E36 / 4

312:         return (_maxPole + _minPole) / 2;

```
*Github:* [[285](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L285), [286](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L286), [312](https://github.com/code-423n4/2024-02-wise-lending/blob/16f786ec83a0c1517185e3e5d85f3f6691523f4e/contracts/PoolManager.sol#L312)]



